{"version":3,"sources":["lib/util/preference.js","canvas/CanvasView.js","canvas/CanvasFont.js","canvas/CanvasImage.js","canvas/CanvasLine.js","canvas/CanvasTriangle.js","canvas/CanvasBubble.js","canvas/CanvasCurve.js","canvas/CanvasCircle.js","canvas/CanvasIcon.js","canvas/CanvasInput.js","canvas/CanvasSelect.js","canvas/index.js","canvas/CanvasBlock.js","api/zip.js","lib/global/template.js","lib/Widget/ViewSelectGroupBordered.js","api/page.js","config/config.prod.js","lib/global/index.js","lib/service/KeyEvent.js","lib/util/actions.js","api/config.js","lib/properties/text.js","lib/properties/image.js","lib/properties/select.js","lib/properties/types.js","assets/head.jpg","lib/service/KeyboradHandler.js","lib/Base/Event.js","lib/util/page.js","lib/Widget/ViewController.js","lib/Draggable.js","lib/properties/base.js","lib/properties/group.js","lib/util/controllers.js","lib/global/selection.js","api/master.js","assets/app-icon.png","lib/util/Vector.js","lib/util/Matrix.js","lib/Icon/index.js","lib/ui/Poplist.js","lib/ui/IconText.js","components/HeaderAlignment.js","components/HistoryControl.js","components/HeaderCoverage.js","components/HeaderUser.js","components/HeaderPanToCenter.js","components/HeaderGuides.js","api/project.js","lib/global/store.js","components/HeaderExport.js","components/HeaderGroupControl.js","lib/ui/Button.js","lib/ui/NumberInput.js","components/HeaderSettingPreference.js","components/HeaderSettings.js","components/Header.js","components/OutlineMenu.js","lib/ui/Collapse.js","config/presetIcons.js","lib/PresetIcons/index.js","lib/ui/NativeDragDrop.js","lib/ui/Search.js","components/OutlineIcons.js","lib/ui/EditableLabel.js","lib/Base/CacheState.js","components/OutlinePrefabs.js","lib/ui/TreeNode.js","components/OutlinePages.js","config/BaseComponents.js","components/OutlineCoverage.js","components/Panel/ClosablePanel.js","lib/ui/UploadImage.js","api/uilib.js","components/Panel/MaterialPanel.js","components/OutlineComponents.js","components/Outline.js","lib/Widget/Selection.js","lib/Widget/ViewContainer.js","lib/Widget/ViewGroup.js","lib/Widget/ViewText.js","lib/Widget/ViewImage.js","lib/Widget/ViewIcon.js","lib/Widget/ViewInput.js","lib/Widget/View.js","lib/Widget/ViewSelect.js","lib/Widget/ViewLine.js","lib/Widget/ViewTriangle.js","lib/Widget/ViewPolygon.js","lib/Widget/ViewCurve.js","lib/Widget/ViewCircle.js","lib/Widget/Comment.js","components/AlignmentService.js","components/EditorControllers.js","lib/Widget/ContextMenu.js","lib/Widget/FirstResponder.js","lib/Base/NoZoomTransform.js","lib/Widget/ViewResizable.js","components/Stage.js","lib/Widget/Snapline.js","lib/Widget/Guides.js","lib/Widget/HighlightComponentOnComponentEneter.js","lib/Widget/HighlightComponentOnAligned.js","lib/Widget/HighlightOnChildDraging.js","lib/Widget/PositionInfo.js","components/NoZoomAreaHighIndex.js","lib/Widget/Events.js","lib/ui/ColorInput.js","lib/Widget/ViewportBackground.js","components/NoZoomAreaLowIndex.js","components/EditorViews.js","lib/Ruler.js","lib/Base/BaseCanvas.js","lib/Widget/Ruler.js","lib/Widget/Rulers.js","lib/ui/ColorPicker/ColorPicker.js","lib/Widget/CanvasDraggable.js","lib/ui/LineNumber.js","lib/Widget/BackToProject.js","lib/ui/ZoomSlider.js","components/Editor.js","lib/ui/Select.js","lib/ui/InspectorControls.js","components/Inspector.js","components/Root.js","index.js","lib/ui/Image.js","lib/Scroller.js","lib/Widget/EditorScrollbar.js","api/material.js","lib/global/controllers.js","lib/util/helper.js","lib/global/instance.js","lib/util/platform.js"],"names":["width","Math","floor","window","screen","height","VIEW_PORT_SIZE","PAD","PC","MOBILE","config","editorDomRect","left","top","right","bottom","selection","snap","x","y","grid","originCoords","world","viewport","guides","autoAlign","_config","getSnaplineConfig","scale","getScreeTransform","initPageSizeWithProjectType","info","type","setTimeout","size","DEFAULT_ZOOM_LEVEL","Event","dispatch","preferences_configchange","context_zoom_level","workspace_scroll_center","updatePreferences","newConfig","emitEvent","Object","assign","refresh_editor_config","key","value","CanvasView","data","parent","drawBorderStyle","border","style","ctx","setLineDash","color","strokeStyle","defaultColor","this","isSingleObject","canvas","assets","rect","getRect","rotation","w","h","translate","rotate","PI","transform","rotateBanckground","background","bg","shadow","corner","beginPath","fillStyle","lineWidth","shadowInset","shadowColor","shadowBlur","blur","shadowOffsetX","offsetX","shadowOffsetY","offsetY","topLeft","topRight","bottomRight","bottomLeft","toString","endsWith","ellipse","min","moveTo","arcTo","closePath","save","drawRect","fill","stroke","restore","CanvasFont","spacing","fontStyle","align","drawTextarea","drawFont","edge","b","lineTo","alignX","alignY","font","decorator","length","map","item","textAlign","textBaseline","forEach","fillText","char","y2","lineHeight","join","rows","getRowsWithBreak","i","col","drawLabel","fontData","split","concat","getRows","replace","spacingWidth","realWith","measureText","ceil","k","index","result","j","charAt","charCodeAt","push","pop","ImageLoader","urls","load","source","_loadImage","url","image","maps","id","Promise","resolve","Image","setAttribute","onload","onerror","src","imageId","CanvasImage","clip","get","xRatio","yRatio","IMAGE_MODE_STRETCH","drawImage","IMAGE_MODE_FILL","sw","sh","sx","sy","ratio","IMAGE_MODE_SCALE","CanvasLine","CanvasTriangle","CanvasBubble","bubble","r","CanvasCurve","curve","x1","y1","quadraticCurveTo","CanvasCircle","strokeWidth","circle","offset","array","arc","abs","CanvasIcon","content","icon","String","fromCharCode","parseInt","CanvasInput","CanvasSelect","defaultSelect","selectOptions","filter","trim","startsWith","slice","hc","hcd","viewMap","text","textarea","radio","input","select","button","checkbox","line","triangle","block","master","masterId","getMasterSnapshootFromStore","page","getMasterFromStore","CanvasRender","context","sortDataWithZIndex","Array","isArray","sort","a","zIndex","items","_filterImage","arr","images","renderCanvas","jQuery","extend","rendered","createCanvas","className","document","body","appendChild","fillRect","render","createElement","getContext","devicePixelRatio","quality","imageType","toDataURL","toBlob","view","draw","e","console","error","remove","infalte","base64","Buffer","str","pako","inflate","to","JSON","parse","deflate","object","stringify","globalTempalteData","localStorage","getItem","getSelfTemplateData","makeGroup","group","GroupProperties","toJSON","getItems","dx","dy","proxyTransformOffset","getPageTransform","x2","t","getClientBoundingRect","apply","max","setSelfTemplateData","getFirstResponder","properties","child","isTemporaryGroup","toImage","destroy","uuid","elementType","alias","send","_id","name","setItem","workspace_save_template_success","message","success","_selfTemplateData","ColorFilter","fontColor","PropsFilter","animations","interactions","ViewSelectGroupBordered","selfTransform","BlockProperties","controllers_apply_group","handleResizeEnd","updateGroupTransform","component_show_resizer","handleShiftPress","isPressed","isShiftPresse","showRect","handleActive","target","handleInactive","activeTarget","getGroupId","setGroupId","isLockChildren","show","refs","container","display","updateResizer","getNewTransform","xList","x1List","yList","y1List","getOffsetTransform","GroupId","_xPercent","_yPercent","_wPercent","_hPercent","cx","cy","_c","hypot","_a","atan2","_sa","handleSelectionGroupChange","setFirstResponder","indexOf","splice","warn","listen","selection_group","context_pack","component_active","component_inactive","context_shiftkey_press","component_resize_end","_group","setTemporaryGroup","setColor","angle","rad","t1","round","cos","sin","setTransform","setRotation","rotationEnd","resizeEnd","tx","ty","tw","th","settings","data-uid","position","boxSizing","ref","ViewController","createPage","parentid","zipNodes","Http","post","nodes","byteLength","findPageDetail","pageid","then","res","BASE_OSS","globalKey","coverage","initialCoverageIndex","getCurrentIndex","setLastCoverageIndex","globalCoverageMode","getCoveragePickeMode","setCoveragePikeMode","mode","cursor","globalCanvasDraggable","setCanvasDraggable","dragging","getCanvasDraggable","setScreenTransform","level","pointToWorkspaceCoords","getScreenOffset","pageY","pageX","workspaceToPointCoords","g","setScreenOffset","viewpowt","workToPoint","pointToWork","KeyEvent","DOM_VK_CANCEL","DOM_VK_HELP","DOM_VK_BACK_SPACE","DOM_VK_TAB","DOM_VK_CLEAR","DOM_VK_RETURN","DOM_VK_ENTER","DOM_VK_SHIFT","DOM_VK_CONTROL","DOM_VK_ALT","DOM_VK_PAUSE","DOM_VK_CAPS_LOCK","DOM_VK_ESCAPE","DOM_VK_SPACE","DOM_VK_PAGE_UP","DOM_VK_PAGE_DOWN","DOM_VK_END","DOM_VK_HOME","DOM_VK_LEFT","DOM_VK_UP","DOM_VK_RIGHT","DOM_VK_DOWN","DOM_VK_PRINTSCREEN","DOM_VK_INSERT","DOM_VK_DELETE","DOM_VK_0","DOM_VK_1","DOM_VK_2","DOM_VK_3","DOM_VK_4","DOM_VK_5","DOM_VK_6","DOM_VK_7","DOM_VK_8","DOM_VK_9","DOM_VK_SEMICOLON","DOM_VK_EQUALS","DOM_VK_A","DOM_VK_B","DOM_VK_C","DOM_VK_D","DOM_VK_E","DOM_VK_F","DOM_VK_G","DOM_VK_H","DOM_VK_I","DOM_VK_J","DOM_VK_K","DOM_VK_L","DOM_VK_M","DOM_VK_N","DOM_VK_O","DOM_VK_P","DOM_VK_Q","DOM_VK_R","DOM_VK_S","DOM_VK_T","DOM_VK_U","DOM_VK_V","DOM_VK_W","DOM_VK_X","DOM_VK_Y","DOM_VK_Z","DOM_VK_CONTEXT_MENU","DOM_VK_NUMPAD0","DOM_VK_NUMPAD1","DOM_VK_NUMPAD2","DOM_VK_NUMPAD3","DOM_VK_NUMPAD4","DOM_VK_NUMPAD5","DOM_VK_NUMPAD6","DOM_VK_NUMPAD7","DOM_VK_NUMPAD8","DOM_VK_NUMPAD9","DOM_VK_MULTIPLY","DOM_VK_ADD","DOM_VK_SEPARATOR","DOM_VK_SUBTRACT","DOM_VK_DECIMAL","DOM_VK_DIVIDE","DOM_VK_F1","DOM_VK_F2","DOM_VK_F3","DOM_VK_F4","DOM_VK_F5","DOM_VK_F6","DOM_VK_F7","DOM_VK_F8","DOM_VK_F9","DOM_VK_F10","DOM_VK_F11","DOM_VK_F12","DOM_VK_F13","DOM_VK_F14","DOM_VK_F15","DOM_VK_F16","DOM_VK_F17","DOM_VK_F18","DOM_VK_F19","DOM_VK_F20","DOM_VK_F21","DOM_VK_F22","DOM_VK_F23","DOM_VK_F24","DOM_VK_NUM_LOCK","DOM_VK_SCROLL_LOCK","DOM_VK_COMMA","DOM_VK_PERIOD","DOM_VK_SLASH","DOM_VK_BACK_QUOTE","DOM_VK_OPEN_BRACKET","DOM_VK_BACK_SLASH","DOM_VK_CLOSE_BRACKET","DOM_VK_QUOTE","DOM_VK_META","DOM_VK_COMMAND","DOM_VK_MINUS","DOM_VK_PLUS","keys","toLowerCase","toUpperCase","KeyCode","format","Shift","Ctrl","Alt","Up","Down","Left","Right","BackSpace","Return","Minus","Plus","BackQuote","OpenBracket","CloseBracket","Space","BackSlash","Slash","getKeyCodeFormat","fkey","isMac","component_drag","component_drag_before","component_dragend","component_resize_start","component_enter","component_leave","component_picker_picked","component_properties_change","component_stroke_change","component_edit_mode","component_close_edit_mode","context_checkall","context_delete","context_copy","context_cut","context_paste","context_paste_mouse","context_paste_clear","context_copypaste","context_unpack","context_save","context_save_success","context_hide","context_show","context_undo","context_redo","window_size_change","context_hide_menu","context_hide_color_picker","selection_change","selection_start","controllers_append","controllers_delete","controllers_delete_by_id","controllers_change","editor_scroll_change","guide_move","guide_move_end","guide_display","guide_hide","guide_toggle","guide_ready","guide_delete","guide_delete_v","guide_delete_h","guide_delete_all","controllers_ready","viewport_ready","colorpicker_active","context_page_update","outline_page_delete","outline_page_create","outline_page_select","outline_page_select_end","outline_coverage_select","component_swap","component_alignment","context_zoom_in","context_zoom_out","coverage_forward","coverage_backward","coverage_front","coverage_back","coverage_backward_to","coverage_forward_to","coverage_picked_width_mode","workspace_undo","workspace_redo","workspace_push","workspace_setting_show","canvas_draggable","canvas_dragging","canvas_dragstart","canvas_dragend","scroller_move","workspace_save_template","workspace_save_master","workspace_part_master","component_snap_change","component_snap_change_end","component_empty","show_create_project","pages_load_end","project_initialized","refresh_project_name","editor_guides_change","outline_closable_panel_show","outline_closable_panel_hide","app_toggle_selection_type","context_mode_change","context_outline_menu_change","context_outline_delete_master","NeedResponderAction","setAuthenticated","empty","JSCookies","set","expires","getOSSUrl","uri","getBaseUrl","axios","defaults","headers","baseURL","exitModal","interceptors","response","use","status","callback","encodeURIComponent","location","pathname","search","TokenExpired","Modal","update","title","onOk","errmsg","TextProperties","ViewProperties","ButtonProperties","FontIconProperties","InputProperties","TextAreaProperties","CommentProperties","spread","resize","ImageProperties","DEFAULT_IMG","SelectProperties","DEFAULT_COLOR","ViewTypes","Group","Rect","Text","Line","Triangle","Bubble","Curve","Circle","MasterProperties","comment","parseJSON","json","isGenerateId","View","DefaultView","isLock","parseOjbect","jsonObject","refreshViewId","updateIn","createViewFrom","defaultUpdater","updateTreeIn","path","resultArray","copyArray","shift","firstIndex","newData","_obj","obj","isPlainObject","module","exports","transformArrowKeys","move_top","move_right","move_left","move_bottom","transformArrowFlag","CombomKeyNumber","CombomKeys","4","2","1","CombomKeysArray","ActionKeyMaps","unblock","showline","zoomin","zoomout","viewcenter","hide","lock","delete","redo","undo","copy","duplicate","paste","select_all","move","alignment","middle","center","forward","front","backward","back","KeyboardActionNameMap","UNBLOCK","BLOCK","SELECTION","LOCK","SHOW_LINE","ZOOM_IN","ZOOM_OUT","VIEW_CENTER","HIDE","DEL","REDO","UNDO","COPY","DUPLICATE","PASTE","CLIP","SAVE","SELECT_ALL","MOVE_LEFT","MOVE_RIGHT","MOVE_TOP","MOVE_BOTTOM","ALIGNMENT_TOP","ALIGNMENT_BOTTOM","ALIGNMENT_MIDDLE","ALIGNMENT_LEFT","ALIGNMENT_RIGHT","ALIGNMENT_CENTER","COVERAGE_FORWARD","COVERAGE_BACKWARD","COVERAGE_FRONT","COVERAGE_BACK","CANVAS_DRAGGABLE","ActionNames","KeyboradEvents","NeedSelectedViewActions","convertActionKeyCodeMaps","actionHandler","ActionHandler","convertActionKeyMaps","action","ActionKeyCodeMaps","updateKeyCodeMap","ActionCode","CodeAction","getFormatShortcutsWithAction","combo","KeyboradHandler","isShift","isAlt","isCtrl","keyCode","alignment_left","alignment_center","alignment_right","alignment_top","alignment_middle","alignment_bottom","from","combom","keycode","reduce","handler","handle","log","eventName","props","event","listeners","_event","params","responder","cbs","args","findIndex","cb","storage_page_key","LocalPageData","getPageData","setPageData","pages","getPageDataWithId","find","__GET_PAGE_DATA__","selectPage","getCurrentPage","reject","setCurrentPage","getCurrentControllersByPage","createNewPage","pid","state","generateNewPage","projectid","duplicatePageState","copyofPage","prefix","deletePage","ids","deletePageFromStorage","realIds","matched","batchDeletePage","updateName","updatePageToSorage","updatePageInfo","updatePageGuides","getPageListFromStorage","removeItem","clearPageStorage","s","DEFAULT_CONTEXT_MENU","shortcutkey","check","getClipboardData","_onDBClick","onDBClick","_getUnlockedTarget","_parent","pushUnlockedView","_handleDragEnd","dragEnd","eventTarget","_handleDragMove","deltaX","deltaY","mouseX","mouseY","_mouse","setTransformWithSnap","onDragStart","options","onDragStartBefore","pickedStatus","getViewPickedStatus","coveragePickedMode","_getActiveTarget","_x","_y","shiftKey","lastView","onMouseEnter","stopPropagation","onMouseLeave","getTemporaryGroup","_getTransformWithDegree","getCurrentMatrix","xarr","yarr","wc","valueOf","deg","Matrix","dot","T","getCurrentPoints","xBounce","yBounce","matrix","getMouseEvent","isInMaster","initProperties","_guidesX","_guidesY","_drag","Draggable","onDragMove","onDragEnd","addEventListener","indexWrapper","Dom","of","getIndexDomWrapper","wrapper","getDomWrapper","borderRadiusTopLeft","borderRadiusTopRight","borderRadiusBottomLeft","borderRadiusBottomRight","overflow","isHide","showHide","initZIndex","initCorner","initOverflow","initBorder","initBackground","initVisiblity","updateBlockTransform","positions","getComponentPosition","roundX","roundX1","roundY","roundY1","guidesx","rx","spacex","ry","spacey","_setTransform","anchor","isUndefined","getOffsetRect","pt","removeEventListener","getWrapperClassName","renderContent","React","Component","_initEvents","_mousedown","dataset","drag","preventDefault","point","touches","lastX","lastY","getBoundingClientRect","pointX","pointY","_mousemove","_mouseup","positionX","positionY","coords","realDeltaX","realDeltaY","pointLimit","selected","fixation","hover","constructor","SerializableKeys","disableH","gid","fontContent","proxyPropsChange","stateitems","getPATHES","proxyAllPropsChange","proxyBlockViewChildrenProps","proxyDeleteItems","stateItems","clearLeafBlock","pathes","dindex","MasterStore","MasterCache","setMasterNodes","setMasterToStore","docs","Vector","lst","_values","sqrt","pow","n","norm","Error","div","vector","number","mul","dim","list2d","cols","row","v","_calc","rowVector","v1","newMatrix","zeros","colVector","_","colIndex","rowIndex","shape","getPoints","Icon","onClick","Poplist","handleToggleDisplay","emitter","setState","handleMouseLeave","children","overlay","Menu","handleClick","findMenuItem","disabled","parentNode","MenuItem","getClassName","label","extra","data-disabled","data-id","PureComponent","IconText","defaultProps","Alignment","ActionWrapper","handleChange","onChange","HeaderAlignment","handleAlignmentClick","current","HistoryControl","disableRedo","disableUndo","l1","l2","handlePush","CoverageActions","HeaderCoverage","HeaderUser","handlelogin","href","HeaderPanToCenter","HeaderGuides","handleDisplay","handleHide","updateProject","store","setStore","getStore","FormItem","Form","Item","RadioGroup","Radio","HeaderExport","confirm","defaultValue","makePages","renderPages","folder","renderPage","imagedata","file","renderType","waitForSeconds","FileSaver","saveAs","zip","JSZip","project","generateAsync","HeaderGroupControl","msg","handleGroup","Button","checked","ButtonGroup","setValue","bindItemClick","multiple","defaultChecked","Children","cloneElement","NumberInput","_move","applyToDom","notifyChange","onKeyDown","step","onPressEnter","onInput","isNaN","removeAttribute","clickUp","clickDown","addon","data-prevent","Infinity","HeaderSettingPreference","values","namespace","UpdateActionHandlers","ShortcutsItem","handleComboClick","currentComboKey","selectedKeys","newKey","onComboChange","code","comboKeys","editMode","onKeyUp","data-event","Shortcuts","actions","toggleMode","handleComboChange","oldkey","oindex","alert","Settings","shortcuts","preference","toggleShow","HeaderSettings","handleSettingClick","Fragment","ProjectName","handleUpdate","query","qs","p","require","Header","OutlineMenu","menus","handleModeChange","Collapse","collapse","PresetIcons","saveRef","PresetIcon","handleDragStart","dataTransfer","setData","draggable","Dropable","handleDrop","customEvent","getData","onDrop","jquery","removeClass","allowDrop","onEnter","addClass","onLeave","domRef","onDragEnter","onDragLeave","onDragOver","Search","handleKeyUp","onSearch","placeholder","OutlineIcons","searched","handleSearch","searchValues","padding","EditableLabel","handleDBClick","onDoubleClick","onBlur","Cache","CacheState","hasCacheData","clearCacheData","getCacheKey","OutlinePrefabs","template","pageIndex","pageSize","refresh","reset","fetchTemplate","cleanEmpty","resultdata","handleCreate","updateMaterialName","handleDelete","deleteTemplate","loadMore","showPanel","showPublish","getQuery","marginLeft","WrapperIamgeItem","currentDragId","checkCanDrop","node","uid","isParentById","TreeNode","handleDoubleClick","editalbe","dragid","onMove","handleDropOver","dropEffect","handleOver","handleMouseEnter","allWidgets","handleSelect","onSelect","handleNameChange","onNameChange","paddingLeft","renderActions","hasChildren","noop","Tree","renderIcon","loop","parentPath","_path","_subpath","OutlinePages","handlePageLoadEnd","autoSelectPage","arrayToTree","parentProperty","childrenProperty","handleCreateSub","_getSubPages","findPageId","findItem","handleCreateSubState","handleDuplicate","BaseComponents","ComponentIconMap","OutlineCoverage","m","eventKey","onScrollBottom","pushdata","editMaster","masterid","history","showComponent","blockNode","renderTreeNode","ClosablePanel","visible","handlePnaleTransition","panel","onTransitionEnd","beforeUpload","isJPG","isLt2M","UploadImage","loading","filename","uploadButton","fontSize","imageUrl","listType","showUploadList","alt","publishToUILibrary","deleteLib","findAllLib","MaterialPanel","total","checkedCount","isUI","handleShow","reload","fetch","q","onCheck","handleCheck","list","batchDelete","after","del","publish","close","fetchSelfUI","creator","reloadSelfUI","loadMoreForSelfUI","loadWithMode","hasChecked","LibModal","onCancel","MaterialItem","backgroundImage","create","validate","form","validateFields","getFieldDecorator","OutlineComponents","WrapperBase","WrapperAdvs","BaseComponentsActionBar","placement","OutlineMaps","icons","prefabs","components","OutlineComopnents","OutlinePanel","Outline","handleMenuChange","handleScroll","ele","scrollHeight","scrollTop","Current","Panel","onScroll","Selection","containerId","querySelector","ViewContainer","ViewGroup","handleDragOver","getDropView","BlockView","updateSelfTransform","updateChildBlockTransform","NODES","count","blocks","isLeaf","updateBlock","updateParentBlockTransform","updateChildrenPosition","MasterView","handleMasterDel","mark","ViewText","_handleKeyUp","innerHTML","setEditorBlur","handlePaste","clipboardData","len","kind","getAsString","innerText","setCurrentEditor","focus","element","createTextRange","range","moveToElementText","getSelection","createRange","selectNodeContents","removeAllRanges","addRange","selectTextRange","letterSpacing","preview","onPaste","ViewImage","lazyLoad","pointerEvents","ViewIcon","_saveIconRef","refsText","iconDom","ViewInput","_handleAreaChange","readOnly","ViewTextArea","Container","switch","setDefaultSelectValue","poplist","_handlePoplistChange","data-drag","dom","attr","strokeDash","strokeDasharray","strokeDashoffset","d","css","xmlns","points","_getPath","slider","defaultPos","_pos","offsetRatio","dashAngle","_setDasharrayPosition","radius","_getDasharrayPosition","dash","currentAngle","Control","AlignmentService","getBoundingSortItems","axis","isSpaceX","isSpaceType","isSpaceY","av","getMinAndAve","getVectorWithAxis","ave","_applyBlockTransform","handleTemporaryGroup","groupItems","handleSingleView","spaceBetween","diff","origin","HistoryRecord","RedoRecord","EditorControllers","clearPATHES","clearComponentPosition","eachiItems","nosave","saveCurrentControllersByMaster","saveCurrentControllersByPage","setPATHES","setComponentPosition","handleSwapComponent","asChild","clearHistory","newItems","pushHistory","_initializingProject","handleEmpty","clearUnlockedView","_currentPage","handleEditorModeChange","handlePageSelect","_calcBlockTransform","masterItems","calc","c","handlePartMaster","pElement","_deleteItems","_appendItems","handleSaveMaster","_getTargetIdsAndParent","handleApplyUngroup","delId","handleApplyGroup","handleClearClipboard","setClipboardData","_applyBlockOffset","handlePasteToMouse","views","diffx","diffy","handleAppendChild","handleGuidesChange","handleEditorConfig","handlePageInfoUpdate","handleSaveWorkspace","handleSaveTemplate","coverageBackwardTo","coveragePickedWithMode","_coverageHanlder","coverageForwardTo","coverageBackward","coverageFront","coverageBack","coverageForward","handleDeleteById","handleDeleteChild","_findPropertiesById","_findViewById","handleCoverageSelect","prop","handlePageCreate","handlePageDelete","handleCheckAll","handleCopy","_clone","handleClip","_applyComponentHideStatus","_handleSelectionWithType","handleSelectionTypeChange","handleSelection","handleSelectionStart","handleDeleMaster","handleComponentActive","handleComponentDragend","handleComponentResizend","_handleBlockTransformChange","blockTransform","sub","handlePropsChange","handleItem","mergeProps","hideGuides","pushState","handleUndo","handleRedo","handleAlignmentChange","clearGlobalVariabel","ContextMenu","findContextGuide","guidesV","guidesH","onGuideReady","isH","hideMenu","onControllersReady","contextDown","handleContext","findUID","context_index","getContextMenu","findContextMenuById","getView","_isOk","isOk","FirstResponder","_handleInactive","editor","getCurrentEditor","_handleActiv","last","NoZoomTransform","handleScale","isScale","setScale","setBoundingRect","_width","_height","_rotation","gResize","cursorStartMap","ne","se","nw","cursorDirectionArray","cursorMap","0","3","5","6","7","8","9","10","11","ViewResizable","startResizeHandler","self","pointMap","br","tr","tl","bl","tm","bm","l","widthMap","heightMap","tr2bl","rad2deg","getSize","dis","pressAngle","startAngle","currentRatio","opposite","parentRect","heigh","getParentRect","minWidth","minHeight","_opp","setTargetTransform","setScaleStatus","onComponentDragend","_isHide","onCloseEditMode","resizeWrapper","onOpenEditMode","onScaleStart","_x1","_y1","_x0","_y0","_tx0","_ty0","_tw","_th","ratation","onComponentDrag","onComponentActive","onComponentInactive","setPosition","setBorderWidth","borderTop","borderBottom","borderLeft","borderRight","ox","oy","transformOrigin","handleCursor","rotateAngle","increment","getCursor","acrossPoint","resizeHandler","_isRotate","trans","tcx","tcy","data-type","data-d","Stage","handlePreferenceChange","handleScrollChange","zoom","zoomable","P","Snapline","setLineSize","g1","g2","controller","arrayItems","treeToArray","targetId","_originTransform","showHTLine","htline","showHBLine","hbline","t2","checkComponentDistance","cmatched","alignParent","showVLLine","vlline","showVCLine","vcline","showVRLine","vrline","showHCLine","hcline","vw","vh","getCurrentTransform","dx2","dx3","ht","hb","vl","vc","vr","matchHT","matchHC","matchHB","matchVL","matchVC","matchVR","_alignType_v_left","_alignDiff_v_left","_alignType_v_right_left","_alignDiff_v_right_left","_alignType_v_center","_alignDiff_v_center","_alignType_v_right","_alignDiff_v_right","_alignType_v_left_right","_alignDiff_v_left_right","_alignType_h_top","_alignDiff_h_top","_alignType_h_bottom_top","_alignDiff_h_bottom_top","_alignType_h_center","_alignDiff_h_center","_alignType_h_bottom","_alignDiff_h_bottom","_alignType_h_top_bottom","_alignDiff_h_top_bottom","checkGuidesDistance","_getRectWithParent","onComponentDragEnd","guide","Guides","viewportRect","clearLine","batchCreateLine","_axis","handleLineDisplay","handleLineHide","handleWindowSizeChange","_getViewPortRect","updateLineLength","onDeleteLine","destroyLineWithIndex","emitGuidesChange","onClearLine","onClearLineV","onClearLineH","lines","setLength","setDefaultForBounds","onViewportReady","refreshLineIndex","setIndex","appendLine","appendToViewport","destroyLine","handleLineDragStart","handleLineDragMove","setLinePosition","handleLineDragEnd","handleDragMove","handleDragEnd","removeChild","inner","_apply","Date","now","HighlightComponentOnComponentEneter","_handleDrag","_show","_handleEnd","_handleEnter","_handleLeave","types","HighlightComponentOnAligned","handleSnapChange","handleSnapEnd","HighlightOnChildDraging","handleDrag","_transform","PositionInfo","NoZoomAreaHighIndex","ReactEvents","setShiftKeyPressed","handleKeyDown","ctrlKey","metaKey","altKey","dispatchTransformChangeWithArrowKey","ColorInput","clientX","clientY","isPreview","onPreview","ViewportBackground","refreshTarget","handlePreview","colorBg","patternUnits","NoZoomAreaLowIndex","EditorViews","innerWidth","innerHeight","zindex","diffindex","EditorScrollbar","Ruler","segment","realSegment","getRealSegment","getScaleOffset","start","lineColor","clearRect","init","HorizontalRuler","steps","short","segmentStartIndex","startIndex","VerticalRuler","ruler","Rulers","rulerh","rulerv","presets","ColorPicker","handleContextClick","handleClosePicker","onPickerShow","isShow","isModify","picker","initPosition","_input","rgba","Color","isNone","initColor","setHsvFromRgb","setInputValues","handleInputChangeA","updatePreview","handleSBAreaMove","half","sb","hsv","setRgbColorFromHsv","handleHuiMove","hui","setHueAreaColor","handleAlphaMove","transparency","toFixed","applyGradientColor","currentGradient","gradientList","line_gradient","gradientPicker","isInit","gradient","rgb","HSV2RGB","setTransparencyTrack","hex","toHex","end","sbgColor","sbg","RGB2HSV","handleInputChangeR","handleInputChangeG","handleInputChangeB","handlePresetsClick","justClosePicker","common","unshift","handleHexChange","HEX2RGB","deleteGradientColor","delGradient","handleSystemColorChange","huig","track","handleSystemColorBlur","CommonColor","onShow","f","arguments","padStart","CanvasDraggable","handleCanvasDraggable","isDragging","handleCanvasEnd","LineNumber","handleEnd","handleMove","BackToProject","handleBack","ZoomSlider","refreshSlider","MAX_ZOOM_LEVEL","valueDom","handleReset","Editor","handleResize","Select","setOptions","onFocus","getWrapperStyle","clear","findValue","isBasicType","isDown","disable","isEmpty","renderItem","onMouseDown","setColorPreview","InspectorControl","expand","handleExpand","defaultExpand","InspectorBase","handleChangeImp","field","updateValues","InspectorBorder","handleStrokeChange","borderWidth","borderType","borderColor","BORDER_STYLES","InspectorFill","InspectorShadow","shadowType","shadowSpread","InspectorCorner","borderTopLeft","borderTopRight","borderBottomLeft","borderBottomRight","borderRadius","circleType","disableAngle","setDisableAngle","onShapeTypeChange","isCircle","InspectorTransform","handleTransform","InspectorFont","InspectorAlign","fontAlignX","fontAlignY","InspectorSpacing","InspectorFontStyle","InspectorFontDecorator","fontDecorator","InspectorFontContent","handleIconDrop","DELAY","SPEED","LOOP","InspectorAnimation","delay","speed","ANIMATIONS","EVENTS","MouseMap","click","dbclick","enter","leave","EventsMap","play","toggle","jump","COMPONENTS","PAGES","InspectorInteraction","o","selectedIndex","handleDeleteDropItem","getEventName","delIndex","DefaultValues","DynamicWrapper","deepEqual","DynamicControl","InspectorControls","RightLayout","_handleActive","LABELS","visibles","handleInacive","onActive","orderKeys","Order","handleCloseLayer","toggleOverlay","onOverlayToggleVisible","onVisibleChange","overlayClassName","trigger","Trigger","overlayStyle","maxWidth","locale","zhCN","getElementById","DEFAULT","componentWillReceiveProps","lazyLoadImage","loadImage","fillMode","backgroundSize","LazyImages","LoadingImages","LazyLoadImages","LazyLoadImageSource","processImage","_delay","time","_createImage","naturalWidth","naturalHeight","Scroller","scrollToCenter","pointOffset","_lastMouseX","needViewportCoordsX","_lastMouseY","needViewportCoordsY","_pointOffsetX","_pointOffsetY","hcenter","vcenter","_distance","initParams","_setPosition","initSlider","panToCenter","halfW","halfH","_current","handleDraggStart","handleDragging","emitScrollChange","scroll","wrapperRect","scrollableHeight","minSize","updateFromScale","_range","updateFromWheel","fixStart","defaultStart","_originDistance","_typeRectName","_lastDiff","_initialPointOffsetX","_initialPointOffsetY","TWEEN","_min","getZooms","reverse","_max","zooms","defaultLevelIndex","handleScrollerMove","handlePanToCenter","tween","requestAnimationFrame","animate","Tween","onUpdate","updateScrollPosition","onComplete","handleSizeChange","zoomIn","applyZoom","zoomWithLevel","zoomOut","maxScale","minScale","handleWheel","wheelDelta","detail","maxLevel","scrollX","scrollY","infalteContent","bounce","random","getUnit","boxShadow","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","fontWeight","textDecoration","justifyContent","alignItems","typeOf","prototype","call","hasOwnProperty","oldValue","newValue","clipboard","currentEditor","firstResponder","viewPickedStatus","_pageid","lockedView","PATHES","agent","navigator","userAgent"],"mappings":"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","file":"static/js/main.7e3952fa.chunk.js","sourcesContent":["//mock\r\nimport { getScreeTransform } from '../global';\r\nimport Event from '../Base/Event';\r\nimport { context_zoom_level, preferences_configchange, refresh_editor_config, workspace_scroll_center } from './actions';\r\nimport { DEFAULT_ZOOM_LEVEL } from '../Widget/EditorScrollbar';\r\n\r\nconst width = Math.floor(window.screen.width * 5);\r\nconst height = Math.floor(window.screen.height * 10);\r\nconst VIEW_PORT_SIZE = {\r\n  PAD: 800,\r\n  PC: 1200,\r\n  MOBILE: 380,\r\n};\r\nlet config = {\r\n  editorDomRect: {\r\n    left: 280,\r\n    top: 70,\r\n    right: 260,\r\n    bottom: 0,\r\n  },\r\n  selection: 'inner', // cross | inner\r\n  snap: { x: 10, y: 10 }, //  当前项目，移动增量\r\n  grid: true,\r\n  //  初始坐标\r\n  originCoords: {\r\n    x: width / 2,\r\n    y: height / 2,\r\n  },\r\n  world: {\r\n    x: width,\r\n    y: height,\r\n  },\r\n  viewport: {\r\n    //  当前项目屏幕尺寸\r\n    width: VIEW_PORT_SIZE.MOBILE,\r\n    height: 600,\r\n  },\r\n  guides: {\r\n    //  当前项目，所有的参考线\r\n    x: {},\r\n    y: {},\r\n  },\r\n  autoAlign: 1,\r\n};\r\nwindow._config = config;\r\nexport const getSnaplineConfig = () => {\r\n  let scale = getScreeTransform().scale;\r\n  let x = config.snap.x / scale,\r\n    y = config.snap.y / scale;\r\n  return { x, y };\r\n};\r\nexport const initPageSizeWithProjectType = (info) => {\r\n  config.viewport.width = VIEW_PORT_SIZE[info.type];\r\n  setTimeout(() => {\r\n    let size = {\r\n      PAD: DEFAULT_ZOOM_LEVEL - 4,\r\n      PC: 11,\r\n      MOBILE: DEFAULT_ZOOM_LEVEL,\r\n    };\r\n    Event.dispatch(preferences_configchange, config);\r\n    if (window.screen.width < 1400) {\r\n      // 小于1400的屏幕对面板进行缩放\r\n      Event.dispatch(context_zoom_level, size[info.type]);\r\n    }\r\n    Event.dispatch(workspace_scroll_center);\r\n  }, 1000);\r\n};\r\nexport default config;\r\nexport const updatePreferences = (newConfig, emitEvent = true) => {\r\n  Object.assign(config, newConfig);\r\n  if (emitEvent) {\r\n    Event.dispatch(preferences_configchange, config);\r\n    Event.dispatch(refresh_editor_config, {\r\n      key: 'preference',\r\n      value: newConfig,\r\n    });\r\n  }\r\n};\r\nexport const updatePreferenceConfig = (obj = {}) => {\r\n  Object.assign({}, config, obj);\r\n};\r\n","import 'inset.js';\r\n\r\n/**\r\n * @class CanvasView\r\n */\r\nexport default class CanvasView {\r\n  /**\r\n   * @description 视图数据源\r\n   * @param data\r\n   */\r\n  constructor(data, parent) {\r\n    this.defaultColor = 'rgba(0,0,0,0)';\r\n    /**\r\n     * 基于画布中心旋转，单个组件绘制时候，以组件边界作为画布宽高\r\n     * @type {boolean}\r\n     */\r\n    this.isSingleObject = false;\r\n    /**\r\n     *\r\n     * @type {CanvasRenderingContext2D | WebGLRenderingContext}\r\n     */\r\n    this.ctx = null;\r\n    /**\r\n     *\r\n     * @type {HTMLCanvasElement}\r\n     */\r\n    this.canvas = null;\r\n    /**\r\n     *\r\n     * @type {CanvasView}\r\n     */\r\n    this.parent = parent;\r\n    /**\r\n     * @type {ViewProperties | TextProperties | FontIconProperties}\r\n     */\r\n    this.data = data;\r\n    /**\r\n     *\r\n     * @type {ImageLoader} 资源加载器，存放所有加载后的资源\r\n     */\r\n    this.assets = null;\r\n    /**\r\n     *\r\n     * @type {null}\r\n     */\r\n    this.rect = this.getRect();\r\n  }\r\n\r\n  drawBorderStyle = () => {\r\n    let border = this.data.border || {};\r\n    if (border.style === 'dotted') {\r\n      this.ctx.setLineDash([1, 1]);\r\n    } else if (border.style === 'dashed') {\r\n      this.ctx.setLineDash([5, 2]);\r\n    }\r\n    // shadow\r\n    if (border.color && border.color != 'none' && border.width > 0) {\r\n      this.ctx.strokeStyle = border.color;\r\n    } else {\r\n      this.ctx.strokeStyle = this.defaultColor;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 该函数只能调用一次，\r\n   * 基于组件中心点旋转后，组件原坐标将变为 宽高的一半\r\n   *\r\n   */\r\n  rotateBanckground() {\r\n    let { x, y, width, height, rotation } = this.rect;\r\n    if (this.isSingleObject) {\r\n      let w = this.canvas.width,\r\n        h = this.canvas.height;\r\n      // 基于画布旋转\r\n      this.ctx.translate(w / 2, h / 2);\r\n      this.rect.x = -w / 2;\r\n      this.rect.y = -h / 2;\r\n    } else {\r\n      //  基于组件中心旋转\r\n      this.ctx.translate(x + width / 2, y + height / 2);\r\n      this.rect.x = -width / 2;\r\n      this.rect.y = -height / 2;\r\n    }\r\n    // 重置组件坐标\r\n    this.ctx.rotate((rotation / 180) * Math.PI);\r\n  }\r\n\r\n  /**\r\n   * 获取 组件到 相对于画布的绝对坐标\r\n   * @return {{x : number, y : number, width : number, height : number, rotation : number}}\r\n   */\r\n  getRect() {\r\n    return this.data.transform;\r\n  }\r\n\r\n  /**\r\n   * 外观绘制 border shadow\r\n   */\r\n  drawRect() {\r\n    this.rotateBanckground();\r\n    let { x, y, width, height, rotation } = this.rect;\r\n    const { border = {}, bg: background, shadow = {}, corner = {} } = this.data;\r\n    this.ctx.beginPath();\r\n    if (background && background !== 'none') {\r\n      this.ctx.fillStyle = background;\r\n    } else {\r\n      this.ctx.fillStyle = this.defaultColor;\r\n    }\r\n    this.ctx.lineWidth = border.width;\r\n    this.drawBorderStyle();\r\n    if (shadow.color && shadow.color !== 'none') {\r\n      if (shadow.type == 'inset') {\r\n        this.ctx.shadowInset = true;\r\n      }\r\n      this.ctx.shadowColor = shadow.color;\r\n      this.ctx.shadowBlur = shadow.blur;\r\n      this.ctx.shadowOffsetX = shadow.offsetX;\r\n      this.ctx.shadowOffsetY = shadow.offsetY;\r\n    }\r\n    let { topLeft = 0, topRight = 0, bottomRight = 0, bottomLeft = 0 } = corner || {};\r\n    let wc = width / 2,\r\n      hc = height / 2;\r\n    if (topLeft.toString().endsWith('%')) {\r\n      this.ctx.ellipse(x + width / 2, y + height / 2, width / 2, height / 2, 0, 0, 2 * Math.PI);\r\n    } else {\r\n      topLeft = Math.min(topLeft, width / 2, height);\r\n      topRight = Math.min(topRight, width / 2, height);\r\n      bottomLeft = Math.min(bottomLeft, width / 2, height);\r\n      bottomRight = Math.min(bottomRight, width / 2, height);\r\n      // corner\r\n      this.ctx.moveTo(x + topLeft, y);\r\n      this.ctx.arcTo(x + width, y, x + width, y + height, topRight);\r\n      this.ctx.arcTo(x + width, y + height, x, y + height, bottomRight);\r\n      this.ctx.arcTo(x, y + height, x, y, bottomLeft);\r\n      this.ctx.arcTo(x, y, x + topLeft, y, topLeft);\r\n    }\r\n    this.ctx.closePath();\r\n  }\r\n\r\n  /**\r\n   * @protected 矩形背景绘制\r\n   */\r\n  draw() {\r\n    this.ctx.save();\r\n    this.drawRect();\r\n    this.ctx.fill();\r\n    this.ctx.stroke();\r\n    this.ctx.restore();\r\n  }\r\n}\r\n","import CanvasView from './CanvasView';\r\n\r\nexport default class CanvasFont extends CanvasView {\r\n  draw() {\r\n    this.ctx.save();\r\n    this.drawRect();\r\n    this.ctx.fill();\r\n    this.ctx.stroke();\r\n    this.ctx.beginPath();\r\n    let type = this.data.type;\r\n    if (type === 'textarea') {\r\n      this.data.spacing = { width: 0, height: 1 };\r\n      this.data.fontStyle = [];\r\n      this.data.align = {\r\n        x: 'flex-start',\r\n        y: 'flex-start',\r\n      };\r\n      this.drawTextarea();\r\n    } else {\r\n      this.drawFont();\r\n    }\r\n    this.ctx.restore();\r\n  }\r\n\r\n  drawTextarea() {\r\n    this.rect.x += 10;\r\n    this.rect.y += 6;\r\n    this.drawFont();\r\n    let { x, y, width, height } = this.rect;\r\n    x = this.rect.x -= 10;\r\n    y = this.rect.y -= 6;\r\n    let edge = x + width,\r\n      b = y + height;\r\n    this.ctx.beginPath();\r\n    this.ctx.strokeStyle = '#d3d3d3';\r\n    this.ctx.lineWidth = 1;\r\n    this.ctx.moveTo(edge, y + height - 8);\r\n    this.ctx.lineTo(edge - 8, b);\r\n    this.ctx.moveTo(edge, y + height - 5);\r\n    this.ctx.lineTo(x + width - 5, b);\r\n    this.ctx.stroke();\r\n    this.ctx.closePath();\r\n  }\r\n\r\n  drawLabel(data, x, y, width, height, h) {\r\n    let alignX, alignY;\r\n    let {\r\n      align,\r\n      font: { size, color },\r\n      decorator,\r\n    } = this.data;\r\n    let length = data.length;\r\n    data = data.data;\r\n    if (align.y === 'center') {\r\n      alignY = 'middle';\r\n      data = data.map((item) => {\r\n        item.y = y + height / 2 - h / 2 + size / 2;\r\n        return item;\r\n      });\r\n    } else if (align.y === 'flex-start') {\r\n      alignY = 'top';\r\n      data = data.map((item) => {\r\n        item.y = y;\r\n        return item;\r\n      });\r\n    } else {\r\n      // flex-end\r\n      alignY = 'bottom';\r\n      data = data.map((item) => {\r\n        item.y = height + y - h + size;\r\n        return item;\r\n      });\r\n    }\r\n    if (align.x === 'center') {\r\n      alignX = 'center';\r\n      data = data.map((item) => {\r\n        item.x = x + item.x - length / 2 + width / 2 + item.width / 2;\r\n        return item;\r\n      });\r\n    } else if (align.x === 'flex-start') {\r\n      alignX = 'left';\r\n      data = data.map((item) => {\r\n        item.x = item.x + x;\r\n        return item;\r\n      });\r\n    } else if (align.x === 'flex-end') {\r\n      alignX = 'start';\r\n      data = data.map((item) => {\r\n        item.x = item.x + x + width - length;\r\n        return item;\r\n      });\r\n    }\r\n    this.ctx.textAlign = alignX;\r\n    this.ctx.textBaseline = alignY;\r\n    data.forEach((item) => {\r\n      this.ctx.fillText(item.char, item.x, item.y);\r\n    });\r\n    let y2 = data[0].y;\r\n    if (align.y == 'flex-start') y2 += size;\r\n    else if (align.y == 'center') y2 += size / 2;\r\n    if (decorator == 'line-through') y2 -= size / 2 - 2;\r\n    if (decorator && decorator != 'none') {\r\n      this.ctx.beginPath();\r\n      this.ctx.strokeStyle = color;\r\n      this.ctx.lineWidth = 1;\r\n      this.ctx.moveTo(x, y2);\r\n      this.ctx.lineTo(x + width, y2);\r\n      this.ctx.stroke();\r\n    }\r\n  }\r\n\r\n  drawFont() {\r\n    let {\r\n      font: { size, color },\r\n      spacing,\r\n      fontStyle: style = [],\r\n      decorator,\r\n    } = this.data;\r\n    let lineHeight = (spacing || {}).height || 1;\r\n    let { x, y, width, height } = this.rect;\r\n    this.ctx.font = `${style.join(' ')} ${size}px Arial`;\r\n    this.ctx.fillStyle = color;\r\n    let rows = this.getRowsWithBreak();\r\n    let h = rows.length * size * lineHeight;\r\n    let ctx = this.ctx;\r\n    for (let i = 0; i < rows.length; i++) {\r\n      let col = rows[i];\r\n      this.drawLabel(col, x, y, width, height, h);\r\n      y += size * lineHeight;\r\n    }\r\n  }\r\n\r\n  getRowsWithBreak() {\r\n    let rows = [];\r\n    this.data.fontData.split('<br>').forEach((item) => {\r\n      rows = rows.concat(this.getRows(item.replace(/&nbsp;/g, ' ')));\r\n    });\r\n    return rows;\r\n  }\r\n\r\n  getRows(data) {\r\n    data = data || this.data.fontData;\r\n    let width = this.rect.width;\r\n    let {\r\n      font: { size },\r\n      spacing,\r\n    } = this.data;\r\n    let { width: spacingWidth = 0 } = spacing || {};\r\n    let realWith = this.ctx.measureText(data).width + data.length * spacingWidth;\r\n    let rows = Math.ceil(realWith / width);\r\n    let k = size,\r\n      length = data.length,\r\n      index = 0,\r\n      result = [];\r\n    for (let i = 0; i < rows; i++) {\r\n      let col = [];\r\n      let j = 0;\r\n      for (; j < width; ) {\r\n        if (index >= length) break;\r\n        let char = data.charAt(index);\r\n        if (!char) break;\r\n        if (char.charCodeAt(0) < 256) {\r\n          k = this.ctx.measureText(char).width;\r\n        } else {\r\n          k = size;\r\n        }\r\n        col.push({\r\n          x: j,\r\n          char: char,\r\n          width: k,\r\n        });\r\n        index += 1;\r\n        k += spacingWidth;\r\n        j += k;\r\n        if (j > width) {\r\n          j -= k;\r\n          index -= 1;\r\n          col.pop();\r\n          break;\r\n        }\r\n      }\r\n      if (col.length > 0) {\r\n        result.push({\r\n          length: j,\r\n          data: col,\r\n        });\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n}\r\n","import CanvasView from './CanvasView';\r\nimport { IMAGE_MODE_FILL, IMAGE_MODE_SCALE, IMAGE_MODE_STRETCH } from '../lib/ui/Image';\r\n\r\nexport class ImageLoader {\r\n  /**\r\n   *\r\n   * @param {Array<id:string,url:string>} urls  资源集合\r\n   */\r\n  constructor(urls = []) {\r\n    // 存储加载成功的图片数据\r\n    this.maps = {};\r\n    this.urls = urls;\r\n  }\r\n\r\n  get(imageId) {\r\n    return this.maps[imageId];\r\n  }\r\n\r\n  load = async () => {\r\n    for (let i = 0; i < this.urls.length; i += 1) {\r\n      let source = this.urls[i];\r\n      let image = await this._loadImage(source.url);\r\n      if (image) {\r\n        this.maps[source.id] = image;\r\n      }\r\n    }\r\n  };\r\n  _loadImage = (url) => {\r\n    return new Promise((resolve) => {\r\n      let image = new window.Image();\r\n      image.setAttribute('crossorigin', 'anonymous');\r\n      image.onload = function() {\r\n        resolve(this);\r\n      };\r\n      image.onerror = function() {\r\n        resolve(null);\r\n      };\r\n      image.src = url;\r\n    });\r\n  };\r\n}\r\n\r\nexport default class CanvasImage extends CanvasView {\r\n  /**\r\n   * @override\r\n   */\r\n  draw() {\r\n    this.ctx.save();\r\n    this.drawRect();\r\n    this.ctx.stroke();\r\n    this.ctx.clip();\r\n    let { source, fill } = this.data.image;\r\n    let image = this.assets.get(this.data.id);\r\n    // 图片加载失败\r\n    if (!image) return;\r\n    let { x, y, width, height } = this.rect;\r\n    let xRatio = image.width / width;\r\n    let yRatio = image.height / height;\r\n    if (fill === IMAGE_MODE_STRETCH) {\r\n      this.ctx.drawImage(image, x, y, width, height);\r\n    } else if (fill === IMAGE_MODE_FILL) {\r\n      let ratio = width / height;\r\n      let sw, sh, sx, sy, sImage;\r\n      if (xRatio > yRatio) {\r\n        // 高度不变，宽度裁剪\r\n        sw = image.height * ratio;\r\n        sh = image.height;\r\n        sx = (image.width - sw) / 2;\r\n        sy = 0;\r\n      } else {\r\n        // 反之\r\n        sh = image.width / ratio;\r\n        sw = image.width;\r\n        sx = 0;\r\n        sy = (image.height - sh) / 2;\r\n      }\r\n      this.ctx.drawImage(image, sx, sy, sw, sh, x, y, width, height);\r\n    } else if (fill === IMAGE_MODE_SCALE) {\r\n      // 和fill相反\r\n      let ratio = width / height;\r\n      let sw, sh, sx, sy, sImage;\r\n      if (xRatio > yRatio) {\r\n        // 宽度撑满，高度自适应\r\n        sh = image.width / ratio;\r\n        sw = image.width;\r\n        sx = 0;\r\n        sy = (image.height - sh) / 2;\r\n      } else {\r\n        // 反之\r\n        sw = image.height * ratio;\r\n        sh = image.height;\r\n        sx = (image.width - sw) / 2;\r\n        sy = 0;\r\n      }\r\n      this.ctx.drawImage(image, sx, sy, sw, sh, x, y, width, height);\r\n    }\r\n    this.ctx.restore();\r\n  }\r\n}\r\n","import CanvasView from './CanvasView';\r\n\r\nexport default class CanvasLine extends CanvasView {\r\n  draw() {\r\n    let ctx = this.ctx;\r\n    ctx.save();\r\n    this.rotateBanckground();\r\n    let { x, y, width, height, rotation } = this.rect;\r\n    ctx.lineWidth = 1;\r\n    this.drawBorderStyle();\r\n    ctx.beginPath();\r\n    let color = this.data.border.color;\r\n    color = color == 'none' ? '#000000' : color;\r\n    this.ctx.strokeStyle = color;\r\n    ctx.moveTo(x, y);\r\n    ctx.lineTo(x + width, y + height);\r\n    ctx.stroke();\r\n    ctx.closePath();\r\n    ctx.restore();\r\n  }\r\n}\r\n","import CanvasView from './CanvasView';\r\n\r\nexport default class CanvasTriangle extends CanvasView {\r\n  draw() {\r\n    let ctx = this.ctx;\r\n    ctx.save();\r\n    this.rotateBanckground();\r\n    let { x, y, width, height, rotation } = this.rect;\r\n    let {\r\n      bg: fill,\r\n      border: { width: stroke },\r\n    } = this.data;\r\n\r\n    this.drawBorderStyle();\r\n    ctx.beginPath();\r\n\r\n    ctx.moveTo(x + width / 2, y);\r\n\r\n    ctx.lineTo(x + width, y + height);\r\n    ctx.lineTo(x, y + height);\r\n    ctx.closePath();\r\n    ctx.lineWidth = stroke;\r\n    if (fill && fill != 'none') {\r\n      ctx.fillStyle = fill;\r\n      ctx.fill();\r\n    }\r\n\r\n    ctx.stroke();\r\n\r\n    ctx.restore();\r\n  }\r\n}\r\n","import CanvasView from './CanvasView';\r\n\r\nexport default class CanvasBubble extends CanvasView {\r\n  draw() {\r\n    let {\r\n      bubble: { left },\r\n      bg,\r\n    } = this.data;\r\n    let ctx = this.ctx,\r\n      r = 10;\r\n    ctx.save();\r\n    this.rotateBanckground();\r\n    let { x, y, width, height, rotation } = this.rect;\r\n    let h = height - 10;\r\n\r\n    if (bg && bg != 'none') {\r\n      ctx.fillStyle = bg;\r\n    } else {\r\n      ctx.fillStyle = this.defaultColor;\r\n    }\r\n\r\n    this.drawBorderStyle();\r\n    ctx.beginPath();\r\n    ctx.moveTo(x + r, y);\r\n    ctx.arcTo(x + width, y, x + width, y + h, r);\r\n    ctx.arcTo(x + width, y + h, x + width - r, y + h, r);\r\n    ctx.lineTo(x + left + 20, y + h);\r\n    ctx.lineTo(x + left + 10, y + height);\r\n    ctx.lineTo(x + left, y + h);\r\n    ctx.arcTo(x, y + h, x, y, r);\r\n    ctx.arcTo(x, y, x + r, y, r);\r\n    ctx.fill();\r\n    ctx.stroke();\r\n    ctx.closePath();\r\n    ctx.restore();\r\n  }\r\n}\r\n","import CanvasView from './CanvasView';\r\n\r\nexport default class CanvasCurve extends CanvasView {\r\n  draw() {\r\n    let ctx = this.ctx;\r\n    ctx.save();\r\n    this.rotateBanckground();\r\n    let { x, y, width, height, rotation } = this.rect;\r\n    let {\r\n      curve: { x: x1, y: y1 },\r\n      bg,\r\n    } = this.data;\r\n    ctx.beginPath();\r\n\r\n    ctx.strokeStyle = 'rgba(0,0,0,0)';\r\n    ctx.moveTo(x, y);\r\n    ctx.lineTo(x + width, y);\r\n    ctx.lineTo(x + width, y + height);\r\n    ctx.lineTo(x, y + height);\r\n    ctx.closePath();\r\n    ctx.clip();\r\n    //\r\n    ctx.beginPath();\r\n    this.drawBorderStyle();\r\n    ctx.fillStyle = bg;\r\n    ctx.lineWidth = 1;\r\n    ctx.moveTo(x, y + height);\r\n    ctx.quadraticCurveTo(x + x1, y + y1, x + width, y + height);\r\n    if (bg && bg !== 'none') {\r\n      ctx.fill();\r\n    }\r\n\r\n    ctx.stroke();\r\n    ctx.restore();\r\n  }\r\n}\r\n","import CanvasView from './CanvasView';\r\n\r\nexport default class CanvasCircle extends CanvasView {\r\n  draw() {\r\n    let ctx = this.ctx;\r\n    ctx.save();\r\n    this.rotateBanckground();\r\n    let { x, y, width, height } = this.rect;\r\n    let {\r\n      border: { width: strokeWidth },\r\n      circle: { offset, array },\r\n    } = this.data;\r\n    ctx.lineWidth = strokeWidth;\r\n    this.drawBorderStyle();\r\n    ctx.beginPath();\r\n    ctx.arc(x + width / 2, y + height / 2, (width - strokeWidth) / 2, 0, Math.abs((array - offset) / array) * 2 * Math.PI);\r\n    ctx.stroke();\r\n    ctx.restore();\r\n  }\r\n}\r\n","import CanvasView from './CanvasView';\r\n\r\nexport default class CanvasIcon extends CanvasView {\r\n  draw() {\r\n    this.ctx.save();\r\n    this.rotateBanckground();\r\n    let {\r\n      icon: { content },\r\n      bg,\r\n    } = this.data;\r\n    let { x, y, width, height } = this.rect;\r\n    this.ctx.beginPath();\r\n    this.ctx.fillStyle = bg;\r\n    this.ctx.font = `${width}px preseticons`;\r\n    this.ctx.textAlign = 'center';\r\n    this.ctx.textBaseline = 'middle';\r\n    this.ctx.fillText(String.fromCharCode(parseInt(content, 16)), x + width / 2, y + height / 2);\r\n    this.ctx.closePath();\r\n    this.ctx.restore();\r\n  }\r\n}\r\n","import CanvasView from './CanvasView';\r\n\r\nexport default class CanvasInput extends CanvasView {\r\n  draw() {\r\n    this.ctx.save();\r\n    this.drawRect();\r\n    this.ctx.fill();\r\n    this.ctx.stroke();\r\n    this.ctx.clip();\r\n    this.ctx.textBaseline = 'middle';\r\n    this.ctx.textAlign = 'left';\r\n    this.ctx.fillStyle = this.data.font.color;\r\n    let { x, y, width, height } = this.rect;\r\n    this.ctx.beginPath();\r\n    this.ctx.fillText(this.data.fontData, x + 5, y + height / 2);\r\n    this.ctx.restore();\r\n  }\r\n}\r\n","import CanvasView from './CanvasView';\r\n\r\nexport default class CanvasSelect extends CanvasView {\r\n  draw() {\r\n    this.ctx.save();\r\n    this.drawRect();\r\n    this.ctx.fill();\r\n    this.ctx.stroke();\r\n    this.ctx.clip();\r\n    this.ctx.textBaseline = 'middle';\r\n    this.ctx.textAlign = 'left';\r\n    let value = '请选择';\r\n    let defaultSelect = this.data.selectOptions.split(/\\n/).filter((item) => item.trim().startsWith('>'));\r\n    if (defaultSelect && defaultSelect[0]) {\r\n      value = defaultSelect[0].trim().slice(1);\r\n    }\r\n    let { x, y, width, height } = this.rect;\r\n    let edge = x + width - 10,\r\n      hc = y + height / 2 - 2,\r\n      hcd = y + height / 2 + 2;\r\n    this.ctx.beginPath();\r\n    let { size, color } = this.data.font;\r\n    this.ctx.fillStyle = color;\r\n    this.ctx.font = `${size}px`;\r\n    this.ctx.fillText(value, x + 5, y + height / 2);\r\n    // 上三角\r\n    this.ctx.moveTo(edge, hc);\r\n    this.ctx.lineTo(edge - 5, hc - 5);\r\n    this.ctx.lineTo(edge - 10, hc);\r\n    this.ctx.lineTo(edge, hc);\r\n    this.ctx.fill();\r\n\r\n    this.ctx.moveTo(edge, hcd);\r\n    this.ctx.lineTo(edge - 5, hcd + 5);\r\n    this.ctx.lineTo(edge - 10, hcd);\r\n    this.ctx.lineTo(edge, hcd);\r\n    this.ctx.fill();\r\n    this.ctx.restore();\r\n  }\r\n}\r\n","import CanvasFont from './CanvasFont';\r\nimport CanvasView from './CanvasView';\r\nimport jQuery from 'jquery';\r\nimport CanvasImage, { ImageLoader } from './CanvasImage';\r\nimport CanvasLine from './CanvasLine';\r\nimport CanvasTriangle from './CanvasTriangle';\r\nimport CanvasBubble from './CanvasBubble';\r\nimport CanvasCurve from './CanvasCurve';\r\nimport CanvasCircle from './CanvasCircle';\r\nimport CanvasIcon from './CanvasIcon';\r\nimport CanvasInput from './CanvasInput';\r\nimport CanvasSelect from './CanvasSelect';\r\nimport CanvasBlock, { CanvasMaster } from '@/canvas/CanvasBlock';\r\n\r\nlet viewMap = {\r\n  image: CanvasImage,\r\n  text: CanvasFont,\r\n  textarea: CanvasFont,\r\n  icon: CanvasIcon,\r\n  radio: CanvasFont,\r\n  input: CanvasInput,\r\n  select: CanvasSelect,\r\n  button: CanvasFont,\r\n  checkbox: CanvasFont,\r\n  rect: CanvasView,\r\n  line: CanvasLine,\r\n  triangle: CanvasTriangle,\r\n  bubble: CanvasBubble,\r\n  curve: CanvasCurve,\r\n  circle: CanvasCircle,\r\n  block: CanvasBlock,\r\n  master: CanvasMaster,\r\n};\r\nexport default class CanvasRender {\r\n  /**\r\n   *\r\n   * @type {HTMLCanvasElement}\r\n   */\r\n  canvas = null;\r\n  /**\r\n   *g\r\n   * @type {CanvasRenderingContext2D}\r\n   */\r\n  context = null;\r\n  /**\r\n   *\r\n   * @type {ImageLoader}\r\n   */\r\n  assets = null;\r\n\r\n  createCanvas(width, height) {\r\n    let canvas = document.createElement('canvas');\r\n    let context = canvas.getContext('2d');\r\n    let ratio = window.devicePixelRatio || 1;\r\n    canvas.width = width * ratio;\r\n    canvas.height = height * ratio;\r\n    canvas.style.width = width + 'px';\r\n    canvas.style.height = height + 'px';\r\n    context.scale(ratio, ratio);\r\n    return { canvas, context };\r\n  }\r\n\r\n  toImage(quality = 0.92, imageType = 'jpeg') {\r\n    return this.canvas.toDataURL(`image/${imageType}`, quality);\r\n  }\r\n\r\n  toBlob(imageType) {\r\n    return new Promise((resolve) => {\r\n      this.canvas.toBlob(resolve, `image/${imageType}`);\r\n    });\r\n  }\r\n\r\n  render(data, parent, isSingleObject = false) {\r\n    if (!Array.isArray(data)) {\r\n      data = [data];\r\n    }\r\n    data.forEach((item) => {\r\n      try {\r\n        let CanvasClass = viewMap[item.type] || CanvasView;\r\n        let view = new CanvasClass(item, parent);\r\n        view.isSingleObject = isSingleObject;\r\n        view.ctx = this.context;\r\n        view.canvas = this.canvas;\r\n        view.assets = this.assets;\r\n        view.draw();\r\n        if (item.items && item.items.length > 0) {\r\n          this.render(item.items, view);\r\n        }\r\n      } catch (e) {\r\n        console.error('render error', e, item);\r\n      }\r\n    });\r\n  }\r\n\r\n  destroy() {\r\n    this.context = null;\r\n    this.canvas = null;\r\n    jQuery('.canvas-save-as-image').remove();\r\n  }\r\n\r\n  sortDataWithZIndex = (data) => {\r\n    if (!Array.isArray(data)) data = [data];\r\n    data = data.sort((a, b) => a.zIndex - b.zIndex);\r\n    for (let i = 0; i < data.length; i++) {\r\n      let item = data[i];\r\n      if (item.items && item.items.length > 0) {\r\n        item.items = this.sortDataWithZIndex(item.items);\r\n      }\r\n    }\r\n    return data;\r\n  };\r\n  _filterImage = (arr) => {\r\n    if (!Array.isArray(arr)) arr = [arr];\r\n    let images = [];\r\n    const filter = (data) => {\r\n      for (let i = 0; i < data.length; i += 1) {\r\n        if (data[i].type == 'image') {\r\n          images.push({ id: data[i].id, url: data[i].image.source });\r\n        } else {\r\n          if (data[i].items && data[i].items.length > 0) {\r\n            filter(data[i].items);\r\n          }\r\n        }\r\n      }\r\n    };\r\n    filter(arr);\r\n    return images;\r\n  };\r\n  renderCanvas = async (data, page = { width: 380, height: 1000, isSingleObject: false }) => {\r\n    data = jQuery.extend(true, Array.isArray(data) ? [] : {}, data);\r\n    let rendered = this;\r\n    let canvas = rendered.createCanvas(page.width, page.height);\r\n    rendered.canvas = canvas.canvas;\r\n    rendered.canvas.className = 'canvas-save-as-image';\r\n    document.body.appendChild(rendered.canvas);\r\n    rendered.context = canvas.context;\r\n    rendered.context.fillStyle = '#ffffff';\r\n    rendered.context.fillRect(0, 0, page.width, page.height);\r\n    rendered.assets = new ImageLoader(rendered._filterImage(data));\r\n    await rendered.assets.load();\r\n    rendered.render(rendered.sortDataWithZIndex(data), null, page.isSingleObject);\r\n    return rendered;\r\n  };\r\n}\r\n","import CanvasView from '@/canvas/CanvasView';\r\nimport { getMasterFromStore, getMasterSnapshootFromStore } from '@/api/master';\r\n\r\nexport default class CanvasBlock extends CanvasView {\r\n  draw() {}\r\n}\r\n\r\nexport class CanvasMaster extends CanvasView {\r\n  draw() {\r\n    this.ctx.save();\r\n    this.drawRect();\r\n    this.ctx.stroke();\r\n    this.ctx.clip();\r\n    let id = this.data.masterId;\r\n    let data = getMasterSnapshootFromStore(id);\r\n    if (data) {\r\n      let page = getMasterFromStore(id);\r\n      let { x, y, width, height } = this.rect;\r\n      this.ctx.drawImage(data, x, y, page.content.page.width, page.content.page.height);\r\n    }\r\n    this.ctx.restore();\r\n  }\r\n}\r\n","import pako from 'pako'\r\n\r\nconst ENCODE = 'base64'\r\n\r\n/**\r\n *\r\n * @param {String} base64 - base64字符串\r\n * @return {*}\r\n */\r\nexport const infalte = (base64) => {\r\n  let array = new Buffer(base64, ENCODE)\r\n  let str = pako.inflate(array, { to: 'string' })\r\n  if ((str[0] == '{' && str[str.length - 1] == '}') || (str[0] == '[' && str[str.length - 1] == ']')) {\r\n    return JSON.parse(str)\r\n  }\r\n  return str\r\n}\r\n\r\n/**\r\n *\r\n * @param {String|Array|Object} object - 要压缩的对象\r\n * @return {string} -\r\n */\r\nexport const deflate = (object) => {\r\n  if (typeof object !== 'string') {\r\n    object = JSON.stringify(object)\r\n  }\r\n  let array = pako.deflate(object, { to: 'binary' })\r\n  let code = new Buffer(array).toString(ENCODE)\r\n  return code\r\n}\r\n","import { getFirstResponder } from './instance';\r\nimport CanvasRender from '../../canvas';\r\nimport { getClientBoundingRect, uuid } from '../util/helper';\r\nimport { toJSON } from '../properties/types';\r\nimport Event from '../Base/Event';\r\nimport { workspace_save_template_success } from '../util/actions';\r\nimport GroupProperties from '../properties/group';\r\nimport { createMaterial } from '../../api/material';\r\nimport { message } from 'antd';\r\nimport { proxyTransformOffset } from '@/lib/util/controllers';\r\n\r\nconst CACHE_KEY = 'self_template';\r\nvar globalTempalteData = JSON.parse(localStorage.getItem(CACHE_KEY) || '[]');\r\n\r\nexport function getSelfTemplateData() {\r\n  return globalTempalteData;\r\n}\r\n\r\nexport function updateSelfTemplateAlias(index, value) {\r\n  let data = Object.assign({}, globalTempalteData[index]);\r\n  data.alias = value;\r\n  globalTempalteData[index] = data;\r\n  localStorage.setItem(CACHE_KEY, JSON.stringify(globalTempalteData));\r\n  return globalTempalteData;\r\n}\r\n\r\nexport function updateSelfTemplateData(data) {\r\n  globalTempalteData = data;\r\n  localStorage.setItem(CACHE_KEY, JSON.stringify(data));\r\n}\r\n\r\nfunction makeGroup(data) {\r\n  let group = new GroupProperties();\r\n  group = toJSON(group);\r\n  group.items = data.view.getItems().map((item) => {\r\n    item = toJSON(item);\r\n    let dx = item.transform.x - data.transform.x,\r\n      dy = item.transform.y - data.transform.y;\r\n    dx -= item.transform.x;\r\n    dy -= item.transform.y;\r\n    proxyTransformOffset(item, dx, dy);\r\n    return item;\r\n  });\r\n  group.transform = Object.assign({}, data.transform);\r\n  group.border.color = 'rgba(255,255,255,1)';\r\n  return group;\r\n}\r\n\r\n// render page\r\nexport function getPageTransform(data) {\r\n  let x1 = [],\r\n    x2 = [],\r\n    y1 = [],\r\n    y2 = [];\r\n  for (let i = 0, j = data.length; i < j; i += 1) {\r\n    let t = getClientBoundingRect(data[i].transform);\r\n    x1.push(t.x);\r\n    x2.push(t.x + t.width);\r\n    y1.push(t.y);\r\n    y2.push(t.y + t.height);\r\n  }\r\n  let x = Math.min.apply(null, x1);\r\n  let y = Math.min.apply(null, y1);\r\n  let x3 = Math.max.apply(null, x2);\r\n  let y3 = Math.max.apply(null, y2);\r\n  let transform = {\r\n    x: x,\r\n    y: y,\r\n    width: x3 - x,\r\n    height: y3 - y,\r\n    rotation: 0,\r\n  };\r\n  data = data.map((item) => {\r\n    item = Object.assign({}, item);\r\n    item.transform = Object.assign({}, item.transform);\r\n    item.transform.x -= transform.x;\r\n    item.transform.y -= transform.y;\r\n    return item;\r\n  });\r\n  let page = new GroupProperties();\r\n  page = toJSON(page);\r\n  transform.x = 0;\r\n  transform.y = 0;\r\n  page.transform = transform;\r\n  page.items = data;\r\n  return page;\r\n}\r\n\r\nexport async function setSelfTemplateData(type = 'TEMPLATE') {\r\n  let data = getFirstResponder().properties;\r\n  let template = getSelfTemplateData();\r\n  let item = {};\r\n  let source;\r\n  if (data.type !== 'group') {\r\n    // 默认使用rect 包裹\r\n    let child = data;\r\n    let t = Object.assign({}, child.transform);\r\n    data = new GroupProperties();\r\n    let rect = getClientBoundingRect(child.transform);\r\n    data.transform.width = rect.width;\r\n    data.transform.height = rect.height;\r\n    source = toJSON(data);\r\n    item.page = Object.assign({}, data.transform);\r\n    child = toJSON(child);\r\n    let dx = data.transform.width / 2 - t.width / 2,\r\n      dy = data.transform.height / 2 - t.height / 2;\r\n    dx -= child.transform.x;\r\n    dy -= child.transform.y;\r\n    proxyTransformOffset(child, dx, dy);\r\n    source.items = [child];\r\n  } else {\r\n    if (data.isTemporaryGroup) {\r\n      source = makeGroup(data);\r\n    } else {\r\n      source = data;\r\n    }\r\n    item.page = getClientBoundingRect(source.transform);\r\n  }\r\n  item.page.isSingleObject = true;\r\n  source.transform.x = 0;\r\n  source.transform.y = 0;\r\n  let canvas = new CanvasRender();\r\n  await canvas.renderCanvas(source, item.page);\r\n  item.image = canvas.toImage(0.5);\r\n  canvas.destroy();\r\n  item.data = source;\r\n  item.id = uuid('ad_');\r\n  item.type = 'AdvanceComponent';\r\n  item.elementType = type;\r\n  item.alias = data.alias;\r\n  let send = Object.assign({}, item);\r\n\r\n  send.image = item.image;\r\n  send._id = uuid('template_id_');\r\n  send.name = data.alias;\r\n  send.length = 0;\r\n  localStorage.setItem(send._id, JSON.stringify(send));\r\n  Event.dispatch(workspace_save_template_success, { type: type, data: send });\r\n  message.success('已添成功');\r\n  return result;\r\n}\r\n\r\nwindow._selfTemplateData = globalTempalteData;\r\n","/**\r\n *  created by yaojun on 2018/12/2\r\n *\r\n */\r\nimport React from 'react';\r\nimport ViewController from './ViewController';\r\nimport Event from '../Base/Event';\r\nimport { component_active, component_inactive, component_resize_end, component_show_resizer, context_pack, context_shiftkey_press, selection_group } from '../util/actions';\r\nimport ViewProperties from '../properties/base';\r\nimport GroupProperties from '../properties/group';\r\nimport { setFirstResponder, setTemporaryGroup } from '../global/instance';\r\nimport { getGroupId, setGroupId } from '../global/selection';\r\nimport './ViewSelectGroupBordered.scss';\r\nimport { BlockProperties } from '@/lib/properties/group';\r\nimport { uuid } from '@/lib/util/helper';\r\nimport { controllers_apply_group } from '@/lib/util/actions';\r\nimport { getFirstResponder } from '@/lib/global/instance';\r\n\r\nconst ColorFilter = {\r\n  fontColor: (item) => item.properties.type == 'text',\r\n  border: (item) => {\r\n    let type = item.properties.type;\r\n    return !(type == 'icon' || type == 'master');\r\n  },\r\n  shadow: (item) => {\r\n    let type = item.properties.type;\r\n    return !(type == 'master' || type == 'icon' || type == 'circle' || type == 'line' || type == 'curve' || type == 'bubble' || type == 'triangle');\r\n  },\r\n  bg: (item) => {\r\n    let type = item.properties.type;\r\n    return !(type == 'circle' || type == 'line' || type == 'image' || type == 'master');\r\n  },\r\n};\r\nexport const PropsFilter = {\r\n  animations: ({ type }) => type != 'master',\r\n  interactions: ({ type }) => type != 'master',\r\n  transform: () => true,\r\n  shadow: (item) => {\r\n    let type = item.type;\r\n    return !(type == 'master' || type == 'icon' || type == 'circle' || type == 'line' || type == 'curve' || type == 'bubble' || type == 'triangle');\r\n  },\r\n  corner: (item) => {\r\n    let type = item.type;\r\n    return !(type == 'master' || type == 'icon' || type == 'circle' || type == 'line' || type == 'curve' || type == 'bubble' || type == 'triangle');\r\n  },\r\n  bg: (item) => {\r\n    let type = item.type;\r\n    return !(type == 'master' || type == 'circle' || type == 'line' || type == 'image');\r\n  },\r\n  border: (item) => {\r\n    let type = item.type;\r\n    return !(type == 'icon' || type == 'master');\r\n  },\r\n  align: (item) => item.type == 'text',\r\n  fontStyle: (item) => item.type == 'text',\r\n  decorator: (item) => item.type == 'text',\r\n  spacing: (item) => item.type == 'text',\r\n  font: ({ type }) => type == 'button' || type == 'text' || type == 'input' || type == 'select' || type == 'textarea',\r\n};\r\n/**\r\n * @description 执行区域选择后合成的一个view组件\r\n *\r\n */\r\nexport default class ViewSelectGroupBordered extends ViewController {\r\n  componentWillMount() {\r\n    this.properties = new GroupProperties();\r\n    this.properties.view = this;\r\n    //this.properties.settings.resize = ['tl', 'tm', 'tr', 'r', 'br', 'bm', 'bl', 'l', 'borderTop', 'borderLeft', 'borderRight', 'borderBottom']\r\n    this.target = null; // 当前选中的元素\r\n    this.isShiftPresse = false;\r\n    this.isLockChildren = true;\r\n    this.properties.bg = 'rgba(255,255,255,0)';\r\n    this.group = [];\r\n    //  临时分组，需要遍历group元素操作\r\n    /**\r\n     *\r\n     * @type { boolean }\r\n     */\r\n    this.properties.isTemporaryGroup = true;\r\n    Event.listen(selection_group, this.handleSelectionGroupChange);\r\n    Event.listen(context_pack, this.makeGroup);\r\n    Event.listen(component_active, this.handleActive);\r\n    Event.listen(component_inactive, this.handleInactive);\r\n    Event.listen(context_shiftkey_press, this.handleShiftPress);\r\n    Event.listen(component_resize_end, this.handleResizeEnd);\r\n    window._group = this;\r\n    setTemporaryGroup(this);\r\n  }\r\n\r\n  makeGroup = () => {\r\n    let responder = getFirstResponder();\r\n    if (!responder.properties.isTemporaryGroup) {\r\n      return;\r\n    }\r\n    let selfTransform = this.properties.transform;\r\n    let properties = new BlockProperties();\r\n    properties.transform = Object.assign({}, selfTransform);\r\n    properties.items = this.group.map((item) => {\r\n      return item.properties;\r\n    });\r\n    properties.id = uuid('sb_');\r\n    Event.dispatch(controllers_apply_group, properties);\r\n  };\r\n  handleResizeEnd = () => {\r\n    if (this.group.length > 0) {\r\n      this.updateGroupTransform(this.group);\r\n      Event.dispatch(component_show_resizer, this);\r\n    }\r\n  };\r\n  handleShiftPress = (isPressed) => {\r\n    this.isShiftPresse = isPressed;\r\n    if (this.group.length === 0) {\r\n      return;\r\n    }\r\n    this.showRect(!isPressed);\r\n  };\r\n  handleActive = (target) => {\r\n    this.target = target;\r\n  };\r\n  handleInactive = (target, activeTarget) => {\r\n    if (this !== target) {\r\n      if (!activeTarget || !getGroupId()[activeTarget.properties.id]) {\r\n        this.isLockChildren = true;\r\n      }\r\n      return;\r\n    }\r\n    if (!(activeTarget && getGroupId()[activeTarget.properties.id])) {\r\n      this.target = null;\r\n      this.group = [];\r\n      setGroupId({});\r\n    }\r\n    this.showRect(false);\r\n  };\r\n  /**\r\n   * 选择到组件后\r\n   * @param show\r\n   */\r\n  showRect = (show) => {\r\n    this.refs.container.style.display = show ? 'block' : 'none';\r\n  };\r\n  updateResizer = () => {\r\n    this.updateGroupTransform(this.group);\r\n    Event.dispatch(component_show_resizer, this);\r\n  };\r\n  getNewTransform = () => {\r\n    let group = this.getItems();\r\n    let xList = [],\r\n      x1List = [],\r\n      yList = [],\r\n      y1List = [];\r\n    let GroupId = {};\r\n    for (let i = 0, j = group.length; i < j; i += 1) {\r\n      let item = group[i];\r\n      let t = group[i].view.getOffsetTransform();\r\n      // begin\r\n      xList[i] = t.x;\r\n      yList[i] = t.y;\r\n      // end\r\n      x1List[i] = t.x + t.width;\r\n      y1List[i] = t.y + t.height;\r\n    }\r\n    let x = Math.min.apply(null, xList);\r\n    let y = Math.min.apply(null, yList);\r\n    let x1 = Math.max.apply(null, x1List);\r\n    let y1 = Math.max.apply(null, y1List);\r\n    let width = x1 - x;\r\n    let height = y1 - y;\r\n    return { x, y, width, height, rotation: 0 };\r\n  };\r\n  updateGroupTransform = (group) => {\r\n    //Temporary group component could not emit component_inactive event\r\n    this.group = group;\r\n    this.isLockChildren = true;\r\n    group = this.getItems();\r\n    let xList = [],\r\n      x1List = [],\r\n      yList = [],\r\n      y1List = [];\r\n    let GroupId = {};\r\n    for (let i = 0, j = group.length; i < j; i += 1) {\r\n      let item = group[i];\r\n      let t = group[i].view.getOffsetTransform();\r\n      // begin\r\n      xList[i] = t.x;\r\n      yList[i] = t.y;\r\n      // end\r\n      x1List[i] = t.x + t.width;\r\n      y1List[i] = t.y + t.height;\r\n      GroupId[item.id] = true;\r\n    }\r\n    let x = Math.min.apply(null, xList);\r\n    let y = Math.min.apply(null, yList);\r\n    let x1 = Math.max.apply(null, x1List);\r\n    let y1 = Math.max.apply(null, y1List);\r\n    let width = x1 - x;\r\n    let height = y1 - y;\r\n    setGroupId(GroupId);\r\n    group.forEach((item) => {\r\n      //  缓存当前坐标、位置、旋转角度\r\n      item._xPercent = (item.transform.x - x) / width;\r\n      item._yPercent = (item.transform.y - y) / height;\r\n      item._wPercent = item.transform.width / width;\r\n      item._hPercent = item.transform.height / height;\r\n      let cx = x + width / 2 - (item.transform.x + item.transform.width / 2);\r\n      let cy = y + height / 2 - (item.transform.y + item.transform.height / 2);\r\n      item._c = Math.hypot(cx, cy);\r\n      item._a = Math.atan2(-cy, cx);\r\n      item._sa = item.transform.rotation;\r\n    });\r\n    //  每次选中后，旋转角度重设置为 0\r\n    super.setTransform(x, y, width, height, 0);\r\n  };\r\n  /**\r\n   *\r\n   * @param group {Array<ViewController>}\r\n   */\r\n  handleSelectionGroupChange = (group) => {\r\n    this.showRect(true);\r\n    this.updateGroupTransform(group);\r\n    setFirstResponder(this);\r\n  };\r\n  /**\r\n   *\r\n   * @param {ViewController} view\r\n   */\r\n  push = (view) => {\r\n    if (view === this) {\r\n      console.warn(\"Can't add itself to the selection\");\r\n      return;\r\n    }\r\n    let index = this.group.indexOf(view);\r\n    let group = this.group.slice();\r\n    if (index > -1) {\r\n      group.splice(index, 1);\r\n      if (group.length === 1) {\r\n        setFirstResponder(group[0]);\r\n        return;\r\n      }\r\n    } else {\r\n      group.push(view);\r\n    }\r\n    this.updateGroupTransform(group);\r\n    Event.dispatch(component_show_resizer, this);\r\n  };\r\n\r\n  setColor(key, color) {\r\n    this.group.forEach((item) => {\r\n      if (ColorFilter[key](item)) {\r\n        item.setColor(key, color);\r\n      }\r\n    });\r\n  }\r\n\r\n  setRotation(angle) {\r\n    let group = this.properties.transform;\r\n    let rad = ((180 - angle) / 180) * Math.PI;\r\n    super._setTransform(group.x, group.y, group.width, group.height, angle);\r\n    this.getItems().forEach((item) => {\r\n      let t1 = item.transform;\r\n      let x = Math.round(Math.cos(rad + item._a) * item._c + group.x + group.width / 2),\r\n        y = Math.round(-Math.sin(rad + item._a) * item._c + group.y + group.height / 2),\r\n        a = angle + item._sa;\r\n      item.view.setTransform(x - t1.width / 2, y - t1.height / 2, t1.width, t1.height, a);\r\n      if (item.type == 'block') {\r\n        item.view.setRotation(angle);\r\n      }\r\n    });\r\n  }\r\n\r\n  onDragStartBefore() {}\r\n\r\n  rotationEnd() {\r\n    this.group.forEach((item) => {\r\n      item.rotationEnd();\r\n    });\r\n  }\r\n\r\n  resizeEnd() {\r\n    this.group.forEach((item) => {\r\n      item.resizeEnd();\r\n    });\r\n  }\r\n\r\n  _setTransform(x, y, w, h, t) {\r\n    //  绘制自身位置\r\n    super._setTransform(x, y, w, h, t);\r\n    //  绘制分组下组件的位置\r\n    this.getItems().forEach((item) => {\r\n      let t = item.transform;\r\n      let tx = Math.round(x + item._xPercent * w),\r\n        ty = Math.round(y + item._yPercent * h),\r\n        tw = Math.round(item._wPercent * w),\r\n        th = Math.round(item._hPercent * h);\r\n      // FontIcon only\r\n      if (item.settings.ratio) {\r\n        th = tw;\r\n      }\r\n      item.view.setTransform(tx, ty, tw < 0 ? 0 : tw, th < 0 ? 0 : th, item.rotation);\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(selection_group, this.handleSelectionGroupChange);\r\n    Event.destroy(context_pack, this.makeGroup);\r\n    Event.destroy(component_inactive, this.handleInactive);\r\n    Event.destroy(component_active, this.handleActive);\r\n    Event.destroy(context_shiftkey_press, this.handleShiftPress);\r\n    Event.destroy(component_resize_end, this.handleResizeEnd);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {(ViewProperties|TextProperties|ImageProperties|GroupProperties|*|null)[]}\r\n   *\r\n   */\r\n  getItems() {\r\n    return this.group.map((item) => item.properties);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        data-uid={'temporary-group'}\r\n        className='view-group view-group-batch'\r\n        style={{\r\n          position: 'absolute',\r\n          boxSizing: 'border-box',\r\n        }}\r\n        ref={'container'}\r\n      ></div>\r\n    );\r\n  }\r\n}\r\n","import {Http} from \"./config\";\r\nimport {deflate, infalte} from \"./zip\";\r\n\r\n\r\n\r\n/**\r\n * 创建页面\r\n * @param send\r\n * @return {AxiosPromise<any>}\r\n */\r\nexport const createPage = (send) =>{\r\n    if (!send.parentid) send.parentid = null\r\n    send = zipNodes(send)\r\n    return Http.post('page/create', send)\r\n}\r\n\r\n/**\r\n * 保存页面\r\n * @param id\r\n * @return {AxiosPromise<any>}\r\n */\r\nexport const deletePage = (id) =>{\r\n    return Http.post('page/delete', {id})\r\n}\r\n\r\n/**\r\n * 保存页面组件数据\r\n * @param send\r\n * @return {AxiosPromise<any>}\r\n */\r\nexport const savePage = (send) =>{\r\n    if (!send.parentid) send.parentid = null\r\n    send = zipNodes(send)\r\n    return Http.post('page/save', send)\r\n}\r\n\r\n\r\nfunction zipNodes(send){\r\n    send = Object.assign({}, send)\r\n    send.nodes = deflate(send.nodes)\r\n    send.size = Buffer.byteLength(send.nodes)\r\n    return send\r\n}\r\n\r\n\r\n/**\r\n * 保存页面配置信息,guides ,bg ,height ，alias\r\n */\r\nexport const updatePage = () =>{\r\n\r\n}\r\n\r\nexport const findPageDetail = (pageid) =>{\r\n    return Http.post('page/detail', {id : pageid}).then((res) =>{\r\n        res.data.nodes = infalte(res.data.nodes)\r\n        return res\r\n    })\r\n}","let PREVIEW_URL, COMMUNITY_URL, COMMUNITY_TUTORIAL, BASE_OSS;\r\nBASE_OSS = 'https://static.yoyoo.ink/';\r\nPREVIEW_URL = 'https://preview.yoyoo.ink/';\r\nCOMMUNITY_URL = 'https://www.fechat.ink/';\r\nCOMMUNITY_TUTORIAL = 'https://www.fechat.ink/?node=9';\r\n// clear console.log\r\nexport { PREVIEW_URL, COMMUNITY_TUTORIAL, COMMUNITY_URL, BASE_OSS };\r\n","import config from '../util/preference';\r\n\r\nconst globalKey = '__global_data__';\r\n\r\nvar data = (window[globalKey] = {});\r\nvar coverage = 1000;\r\nvar backCoverage = 1000;\r\n\r\nexport function initialCoverageIndex() {\r\n  return (coverage += 1);\r\n}\r\nexport function getCurrentIndex() {\r\n  return coverage;\r\n}\r\n\r\nexport function backZindex() {\r\n  return (backCoverage -= 1);\r\n}\r\n\r\nexport function setLastCoverageIndex(index) {\r\n  coverage = index;\r\n}\r\n\r\nexport function resetZIndex() {\r\n  coverage = 0;\r\n}\r\n\r\n// 0 | -1 | 1\r\nvar globalCoverageMode = 0;\r\n\r\nexport function getCoveragePickeMode() {\r\n  return globalCoverageMode;\r\n}\r\n\r\nexport function setCoveragePikeMode(mode) {\r\n  globalCoverageMode = mode;\r\n  if (mode === 0) {\r\n    document.body.style.cursor = 'default';\r\n  } else {\r\n    document.body.style.cursor = 'crosshair';\r\n  }\r\n}\r\n\r\nvar globalCanvasDraggable = false;\r\n\r\nexport function setCanvasDraggable(dragging) {\r\n  if (dragging) {\r\n    document.body.style.cursor = 'grab';\r\n  } else {\r\n    document.body.style.cursor = 'default';\r\n  }\r\n  globalCanvasDraggable = dragging;\r\n}\r\n\r\nexport function getCanvasDraggable() {\r\n  return globalCanvasDraggable;\r\n}\r\n\r\nexport function setScreenTransform(x, y, scale, level) {\r\n  window[globalKey].screen = {\r\n    x,\r\n    y,\r\n    scale,\r\n    level,\r\n  };\r\n}\r\n\r\nexport const pointToWorkspaceCoords = (e) => {\r\n  let { x, y, scale } = getScreeTransform();\r\n  let { viewport } = getScreenOffset();\r\n  y = (y - config.originCoords.y) * scale + e.pageY - viewport.y * scale;\r\n  x = (x - config.originCoords.x) * scale + e.pageX - viewport.x * scale;\r\n  x = (x - config.editorDomRect.left) / scale;\r\n  y = (y - config.editorDomRect.top) / scale;\r\n  return { x, y };\r\n};\r\nexport const workspaceToPointCoords = () => {\r\n  let { x, y, scale } = getScreeTransform();\r\n  let { viewport } = getScreenOffset();\r\n  let x1 = x * scale + config.editorDomRect.left + viewport.x * scale - (x - config.originCoords.x) * scale;\r\n  let y1 = y * scale + config.editorDomRect.top + viewport.y * scale - (y - config.originCoords.y) * scale;\r\n  return { x: x1 - x * scale, y: y1 - y * scale };\r\n};\r\nwindow.workToPoint = workspaceToPointCoords;\r\nwindow.pointToWork = pointToWorkspaceCoords;\r\n\r\nexport function getScreeTransform() {\r\n  let g = window[globalKey];\r\n  let defaults = {\r\n    x: 0,\r\n    y: 0,\r\n    scale: 1,\r\n  };\r\n  return g && g.screen ? g.screen : defaults;\r\n}\r\n\r\nexport function setViewport(width, height) {\r\n  window[globalKey].viewport = {\r\n    width,\r\n    height,\r\n  };\r\n}\r\n\r\nexport function getViewport() {\r\n  let defaults = {\r\n    width: 100,\r\n    height: 100,\r\n  };\r\n  let g = window[globalKey].viewport;\r\n  return g || defaults;\r\n}\r\n\r\ndata.offset = {};\r\n\r\nexport function setScreenOffset(x, y, viewpowt) {\r\n  data.offset.x = x;\r\n  data.offset.y = y;\r\n  if (viewpowt) data.offset.viewport = viewpowt;\r\n}\r\n\r\nexport function getScreenOffset() {\r\n  return data.offset;\r\n}\r\n","import { isMac } from '../util/platform';\r\n\r\nif (typeof KeyEvent == 'undefined') {\r\n  var KeyEvent = {\r\n    DOM_VK_CANCEL: 3,\r\n    DOM_VK_HELP: 6,\r\n    DOM_VK_BACK_SPACE: 8,\r\n    DOM_VK_TAB: 9,\r\n    DOM_VK_CLEAR: 12,\r\n    DOM_VK_RETURN: 13,\r\n    DOM_VK_ENTER: 14,\r\n    DOM_VK_SHIFT: 16,\r\n    DOM_VK_CONTROL: 17,\r\n    DOM_VK_ALT: 18,\r\n    DOM_VK_PAUSE: 19,\r\n    DOM_VK_CAPS_LOCK: 20,\r\n    DOM_VK_ESCAPE: 27,\r\n    DOM_VK_SPACE: 32,\r\n    DOM_VK_PAGE_UP: 33,\r\n    DOM_VK_PAGE_DOWN: 34,\r\n    DOM_VK_END: 35,\r\n    DOM_VK_HOME: 36,\r\n    DOM_VK_LEFT: 37,\r\n    DOM_VK_UP: 38,\r\n    DOM_VK_RIGHT: 39,\r\n    DOM_VK_DOWN: 40,\r\n    DOM_VK_PRINTSCREEN: 44,\r\n    DOM_VK_INSERT: 45,\r\n    DOM_VK_DELETE: 46,\r\n    DOM_VK_0: 48,\r\n    DOM_VK_1: 49,\r\n    DOM_VK_2: 50,\r\n    DOM_VK_3: 51,\r\n    DOM_VK_4: 52,\r\n    DOM_VK_5: 53,\r\n    DOM_VK_6: 54,\r\n    DOM_VK_7: 55,\r\n    DOM_VK_8: 56,\r\n    DOM_VK_9: 57,\r\n    DOM_VK_SEMICOLON: 59,\r\n    DOM_VK_EQUALS: 61,\r\n    DOM_VK_A: 65,\r\n    DOM_VK_B: 66,\r\n    DOM_VK_C: 67,\r\n    DOM_VK_D: 68,\r\n    DOM_VK_E: 69,\r\n    DOM_VK_F: 70,\r\n    DOM_VK_G: 71,\r\n    DOM_VK_H: 72,\r\n    DOM_VK_I: 73,\r\n    DOM_VK_J: 74,\r\n    DOM_VK_K: 75,\r\n    DOM_VK_L: 76,\r\n    DOM_VK_M: 77,\r\n    DOM_VK_N: 78,\r\n    DOM_VK_O: 79,\r\n    DOM_VK_P: 80,\r\n    DOM_VK_Q: 81,\r\n    DOM_VK_R: 82,\r\n    DOM_VK_S: 83,\r\n    DOM_VK_T: 84,\r\n    DOM_VK_U: 85,\r\n    DOM_VK_V: 86,\r\n    DOM_VK_W: 87,\r\n    DOM_VK_X: 88,\r\n    DOM_VK_Y: 89,\r\n    DOM_VK_Z: 90,\r\n    DOM_VK_CONTEXT_MENU: 93,\r\n    DOM_VK_NUMPAD0: 96,\r\n    DOM_VK_NUMPAD1: 97,\r\n    DOM_VK_NUMPAD2: 98,\r\n    DOM_VK_NUMPAD3: 99,\r\n    DOM_VK_NUMPAD4: 100,\r\n    DOM_VK_NUMPAD5: 101,\r\n    DOM_VK_NUMPAD6: 102,\r\n    DOM_VK_NUMPAD7: 103,\r\n    DOM_VK_NUMPAD8: 104,\r\n    DOM_VK_NUMPAD9: 105,\r\n    DOM_VK_MULTIPLY: 106,\r\n    DOM_VK_ADD: 107,\r\n    DOM_VK_SEPARATOR: 108,\r\n    DOM_VK_SUBTRACT: 109,\r\n    DOM_VK_DECIMAL: 110,\r\n    DOM_VK_DIVIDE: 111,\r\n    DOM_VK_F1: 112,\r\n    DOM_VK_F2: 113,\r\n    DOM_VK_F3: 114,\r\n    DOM_VK_F4: 115,\r\n    DOM_VK_F5: 116,\r\n    DOM_VK_F6: 117,\r\n    DOM_VK_F7: 118,\r\n    DOM_VK_F8: 119,\r\n    DOM_VK_F9: 120,\r\n    DOM_VK_F10: 121,\r\n    DOM_VK_F11: 122,\r\n    DOM_VK_F12: 123,\r\n    DOM_VK_F13: 124,\r\n    DOM_VK_F14: 125,\r\n    DOM_VK_F15: 126,\r\n    DOM_VK_F16: 127,\r\n    DOM_VK_F17: 128,\r\n    DOM_VK_F18: 129,\r\n    DOM_VK_F19: 130,\r\n    DOM_VK_F20: 131,\r\n    DOM_VK_F21: 132,\r\n    DOM_VK_F22: 133,\r\n    DOM_VK_F23: 134,\r\n    DOM_VK_F24: 135,\r\n    DOM_VK_NUM_LOCK: 144,\r\n    DOM_VK_SCROLL_LOCK: 145,\r\n    DOM_VK_COMMA: 188,\r\n    DOM_VK_PERIOD: 190,\r\n    DOM_VK_SLASH: 191,\r\n    DOM_VK_BACK_QUOTE: 192,\r\n    DOM_VK_OPEN_BRACKET: 219,\r\n    DOM_VK_BACK_SLASH: 220,\r\n    DOM_VK_CLOSE_BRACKET: 221,\r\n    DOM_VK_QUOTE: 222,\r\n    DOM_VK_META: 224,\r\n    DOM_VK_COMMAND: 91,\r\n    DOM_VK_MINUS: 189,\r\n    DOM_VK_PLUS: 187,\r\n  };\r\n}\r\n\r\nexport default KeyEvent;\r\n\r\nlet maps = {};\r\nObject.keys(KeyEvent).forEach((item) => {\r\n  let key = item\r\n    .toLowerCase()\r\n    .split('vk_')\r\n    .pop();\r\n  key = key\r\n    .split('_')\r\n    .map((item) => {\r\n      return item[0].toUpperCase() + item.slice(1);\r\n    })\r\n    .join('');\r\n\r\n  maps[KeyEvent[item]] = key;\r\n});\r\n\r\nexport const KeyCode = maps;\r\n\r\nlet format = {\r\n  Shift: '⇧',\r\n  Ctrl: '⌘',\r\n  Alt: '⌥',\r\n  Up: '↑',\r\n  Down: '↓',\r\n  Left: '←',\r\n  Right: '→',\r\n  BackSpace: '⌫ ',\r\n  Return: '↵',\r\n  Minus: '-',\r\n  Plus: '+',\r\n  BackQuote: '`',\r\n  OpenBracket: '[',\r\n  CloseBracket: ']',\r\n  Space: 'spc',\r\n  BackSlash: '|',\r\n  Slash: '/',\r\n};\r\nexport const getKeyCodeFormat = (key) => {\r\n  let fkey = null;\r\n  if (isMac()) {\r\n    fkey = format[key];\r\n  }\r\n  return fkey || key;\r\n};\r\n","/**\r\n * 组件选中事件\r\n * @type {string}\r\n */\r\nexport const component_active = 'component/active';\r\n/**\r\n * 组件取消选中触发事件\r\n * @type {string}\r\n */\r\nexport const component_inactive = 'component/inactive';\r\n/**\r\n * 组件被拖拽,缩放事件\r\n * @type {string}\r\n */\r\nexport const component_drag = 'component/drag';\r\n//选中之前\r\nexport const component_drag_before = 'component/dragbefore';\r\n/**\r\n * 组件拖拽结束时触发\r\n * @type {string}\r\n */\r\nexport const component_dragend = 'component/dragend';\r\n/**\r\n * 缩放结束\r\n * @type {string}\r\n */\r\nexport const component_resize_end = 'component/resizeend';\r\nexport const component_resize_start = 'component/resizestart';\r\n/**\r\n * 鼠标进入视图\r\n * @type {string}\r\n */\r\nexport const component_enter = 'component/enter';\r\n/**\r\n * 鼠标离开视图\r\n * @type {string}\r\n */\r\nexport const component_leave = 'component/leave';\r\n/**\r\n * 开启元素选择模式\r\n * @type {string}\r\n */\r\nexport const component_picker_mode = 'component/open_picker_mode';\r\n/**\r\n * 当选择到元素后\r\n * @type {string}\r\n */\r\nexport const component_picker_picked = 'component/picker_picked';\r\n/**\r\n * 关闭元素选择模式\r\n * @type {string}\r\n */\r\nexport const component_picker_mode_close = 'component/close_picker_mode';\r\n/**\r\n * component props change\r\n * @type {string}\r\n */\r\nexport const component_properties_change = 'compoent/propschange';\r\nexport const component_stroke_change = 'component/strokechange';\r\n/**\r\n * 同步缩放控件\r\n * @type {string}\r\n */\r\nexport const component_show_resizer = 'component/showresizer';\r\n/**\r\n * Text控件编辑模式\r\n * @type {string}\r\n */\r\nexport const component_edit_mode = 'component/editmode';\r\n/**\r\n * Text关闭编辑模式\r\n * @type {string}\r\n */\r\nexport const component_close_edit_mode = 'component/closeeditmode';\r\n/**\r\n * 全选\r\n * @type {string}\r\n */\r\nexport const context_checkall = 'context/checkall';\r\n/**\r\n *\r\n * 菜单删除按钮被点击、Delete/Backspace键被按下，前提是组件已选中\r\n * @type {string}\r\n */\r\nexport const context_delete = 'context/delete';\r\n/**\r\n * 菜单复制按钮、ctrl(cmd) + C 组合键\r\n * @type {string}\r\n */\r\nexport const context_copy = 'context/copy';\r\n/**\r\n * 菜单剪切按钮、ctrl(cmd) + X 组合键\r\n * @type {string}\r\n */\r\nexport const context_cut = 'context/cut';\r\n/**\r\n *菜单粘贴按钮、ctrl(cmd) + V 组件键\r\n * @type {string}\r\n */\r\nexport const context_paste = 'context/paste';\r\nexport const context_paste_mouse = 'context/paste_mouse';\r\nexport const context_paste_clear = 'context/paste_clear';\r\n/**\r\n * 菜单复制粘贴按钮、ctrl(cmd) + D 组合键\r\n * @type {string}\r\n */\r\nexport const context_copypaste = 'context/copy_paste';\r\n/**\r\n * 将区域选择的组件打包成一个Group\r\n *\r\n * @type {string}\r\n */\r\nexport const context_pack = 'context/pack';\r\n/**\r\n * 删除打包的Group\r\n * @type {string}\r\n */\r\nexport const context_unpack = 'context/unpack';\r\nexport const context_save = 'contetx/save';\r\nexport const context_save_start = 'context/save_start';\r\nexport const context_save_success = 'context/save_success';\r\nexport const context_save_failed = 'context/save_failed';\r\n/**\r\n * 隐藏当前元素，不可见\r\n * @type {string}\r\n */\r\nexport const context_hide = 'context/hide';\r\nexport const context_show = 'context/show';\r\n/**\r\n * 锁定当前元素，让其不可拖拽\r\n * @type {string}\r\n */\r\nexport const context_lock = 'context/lock';\r\n/**\r\n * 解锁\r\n * @type {string}\r\n */\r\nexport const context_unlock = 'context/unlock';\r\n/**\r\n * 添加到素材库\r\n * @type {string}\r\n */\r\nexport const context_lib = 'context/lib';\r\n/**\r\n * 撤销\r\n * @type {string}\r\n */\r\nexport const context_undo = 'context/undo';\r\n/**\r\n * 重做\r\n * @type {string}\r\n */\r\nexport const context_redo = 'context/redo';\r\nexport const window_size_change = 'window/change';\r\n/**\r\n * 隐藏菜单\r\n * @type {string}\r\n */\r\nexport const context_hide_menu = 'context/hidemenu';\r\nexport const context_shiftkey_press = 'context_shift/press';\r\nexport const context_hide_color_picker = 'context/hidecolorpicker';\r\n/**\r\n * 编辑区域选区完成时触发\r\n * @type {string}\r\n */\r\nexport const selection_change = 'selection/change';\r\nexport const selection_update = 'selection/update';\r\nexport const selection_start = 'selection/start';\r\n/**\r\n * 添加一个控件\r\n * @type {string}\r\n */\r\nexport const controllers_append = 'controllers/append';\r\n/**\r\n * 删除一个控件\r\n * @type {string}\r\n */\r\nexport const controllers_delete = 'controllers/delete';\r\n/**\r\n * 根据id删除\r\n * @type {string}\r\n */\r\nexport const controllers_delete_by_id = 'controllers/delete_id';\r\n/**\r\n * 视图变化后\r\n * @type {string}\r\n */\r\nexport const controllers_change = 'controllers/change';\r\n/**\r\n * 编辑区域选完成，选择到一组视图后触发，临时合并成一个group组件\r\n * @type {string}\r\n */\r\nexport const selection_group = 'selection/group';\r\nexport const selection_group_gid = 'selection/group_gid';\r\n/**\r\n * 选择区域取消事件，没有选择到组件时触发\r\n * @type {string}\r\n */\r\nexport const selection_cancel = 'selection/cancel';\r\n/**\r\n * 标尺加载后触发\r\n * @type {string}\r\n */\r\nexport const ruler_ready = 'ruler/ready';\r\n/**\r\n * 编辑区域滚动条、鼠标滚动事件\r\n * @type {string}\r\n */\r\nexport const editor_scroll_change = 'editor/scrollchange';\r\n/**\r\n * 拖动参考线时触发\r\n * @type {string}\r\n */\r\nexport const guide_move = 'guide/move';\r\nexport const guide_move_end = 'guide/move_end';\r\nexport const guide_display = 'guide/display';\r\nexport const guide_hide = 'guide/hide';\r\nexport const guide_toggle = 'guide/toggle_line';\r\n/**\r\n *\r\n * 参考线组件初始化完成\r\n * @type {string}\r\n *\r\n */\r\nexport const guide_ready = 'guide/ready';\r\n/**\r\n * 删除参考线\r\n * @type {string}\r\n */\r\nexport const guide_delete = 'guide/delete';\r\n/**\r\n * 删除垂直\r\n * @type {string}\r\n */\r\nexport const guide_delete_v = 'guide/deletev';\r\n/**\r\n * 清除水平\r\n * @type {string}\r\n */\r\nexport const guide_delete_h = 'guide/deleteh';\r\n/**\r\n * 清空\r\n * @type {string}\r\n */\r\nexport const guide_delete_all = 'guide/clear';\r\n/**\r\n * 组件视图初始化完成\r\n * @type {string}\r\n */\r\nexport const controllers_ready = 'controllers/ready';\r\n/**\r\n * 主编辑区初始化完成\r\n * @type {string}\r\n */\r\nexport const viewport_ready = 'viewport/ready';\r\n/**\r\n * 执行打包后的数据\r\n * @type {string}\r\n */\r\nexport const controllers_makegroup = 'controllers/makegroup';\r\nexport const controllers_apply_group = 'controllers/applygroup';\r\nexport const controllers_apply_ungroup = 'controllers/applyungroup';\r\n/**\r\n * 执行拆包后的数据\r\n * @type {string}\r\n */\r\nexport const controllers_ungroup = 'controllers/ungroup';\r\n/**\r\n * 显示取色器，传入当前Input，必须实现一个setValue函数\r\n * @type {string}\r\n */\r\nexport const colorpicker_active = 'colorpicker_active';\r\n/**\r\n *添加副本\r\n * @type {string}\r\n */\r\nexport const outline_page_duplicate = 'outlinepages/duplicate';\r\nexport const context_page_update = 'context/page_update';\r\n/**\r\n * 删除页面\r\n * @type {string}\r\n */\r\nexport const outline_page_delete = 'outlinepages/delete';\r\n/**\r\n * 创建页面\r\n * @type {string}\r\n */\r\nexport const outline_page_create = 'outlinepages/create';\r\n/**\r\n * 选择页面\r\n * @type {string}\r\n */\r\nexport const outline_page_select = 'outlinepages/select';\r\nexport const outline_page_select_end = 'outlinepages/select_end';\r\nexport const outline_page_add = 'outlinepage/add';\r\n/**\r\n * 选中图层\r\n * @type {string}\r\n */\r\nexport const outline_coverage_select = 'outlinecoverage/select';\r\n/**\r\n * 名称改变到时候\r\n * @type {string}\r\n */\r\nexport const outline_coverage_name_change = 'outlinename/change';\r\n/**\r\n * 交换两个组件的位置\r\n * @type {string}\r\n */\r\nexport const component_swap = 'component/swap';\r\nexport const component_alignment = 'component/alignment';\r\nexport const context_increment_zoom = 'context/incrementzoom';\r\n// 放大\r\nexport const context_zoom_in = 'context/zoom_in';\r\n// 缩小\r\nexport const context_zoom_out = 'context/zoom_out';\r\nexport const context_zoom_level = 'context/zoom_level';\r\n// Coverage\r\nexport const coverage_forward = 'coverage/forward';\r\nexport const coverage_backward = 'converage/backward';\r\nexport const coverage_front = 'coverage/front';\r\nexport const coverage_back = 'coverage/back';\r\nexport const coverage_backward_to = 'coverage/backwardto';\r\nexport const coverage_forward_to = 'coverage/forwardto';\r\nexport const coverage_picked_width_mode = 'coverage/picked_with_mode';\r\nexport const workspace_undo = 'workspace_undo';\r\nexport const workspace_redo = 'workspace_redo';\r\nexport const workspace_push = 'workspace_push';\r\nexport const workspace_setting_show = 'workspace_settings_show';\r\nexport const workspace_setting_hide = 'workspace_settings_hide';\r\nexport const canvas_draggable = 'canvas_draggable';\r\nexport const canvas_dragging = 'canvas_dragging';\r\nexport const canvas_dragstart = 'canvas_dragstart';\r\nexport const canvas_dragend = 'canvas_dragend';\r\nexport const scroller_move = 'scroller/move';\r\nexport const workspace_save_template = 'workspace/savetemplate';\r\nexport const workspace_save_master = 'workspace/savemaster';\r\nexport const workspace_part_master = 'workspace/partmaster';\r\nexport const workspace_save_template_success = 'workspace/savetemplate_success';\r\nexport const component_settings_changed = 'component/settings_changed';\r\nexport const component_settings_show = 'component/settings_show';\r\nexport const component_settings_lock = 'component/settings_lock';\r\nexport const component_sync_resizer = 'component/sync_resizer';\r\nexport const workspace_scroll_center = 'workspace_scroll_center';\r\nexport const preferences_configchange = 'preferences/configchange';\r\n//  对齐后事件\r\n/**\r\n * @param {Object} Transform\r\n * @type {string}\r\n */\r\nexport const component_snap_change = 'component/snapchange';\r\nexport const component_snap_change_end = 'component/snapchangeend';\r\n// 解锁\r\nexport const component_lock_children = 'componnet/lockchildren';\r\n/**\r\n * @param {GroupController} group 分组元素\r\n * @param {ViewController} child 子元素\r\n * @type {string}\r\n */\r\nexport const component_unlock_children = 'component/unlockchildren';\r\n// 启动分组解锁模式，只元素\r\nexport const component_open_unlock_mode = 'component/unlockmode';\r\nexport const component_close_unlock_mode = 'component/closeunlockmode';\r\n// 没有选择任何组件\r\nexport const component_empty = 'component/empty';\r\nexport const show_signup = 'app/signup';\r\nexport const show_create_project = 'app/create_project';\r\n// 从服务器获取数据\r\nexport const pages_load_end = 'app/pages_load_end';\r\nexport const project_initialized = 'app/project_initialized';\r\nexport const refresh_project_list = 'app/refresh_project_list';\r\nexport const refresh_user_info = 'app/refresh_user_info';\r\nexport const refresh_project_name = 'app/refresh_project_name';\r\nexport const refresh_editor_config = 'app/refresh_eidtor_config';\r\nexport const editor_guides_change = 'app/editor_guides_change';\r\nexport const editor_cache_used = 'app/cache_used';\r\nexport const outline_closable_panel_show = 'app/show_outlin_closable_panel_show';\r\nexport const outline_closable_panel_hide = 'app/show_outlin_closable_panel_hide';\r\nexport const app_toggle_selection_type = 'app/toggle_selection_type';\r\nexport const context_mode_change = 'app/context/mode_change';\r\nexport const context_outline_menu_change = 'app/context/menu_change';\r\nexport const context_outline_delete_master = 'app/context/delete_master';\r\nexport const NeedResponderAction = {\r\n  [component_inactive]: 1,\r\n  [component_drag]: 1,\r\n  [component_drag_before]: 1,\r\n  [component_dragend]: 1,\r\n  [component_resize_end]: 1,\r\n  [component_resize_start]: 1,\r\n  [component_picker_mode]: 1,\r\n  [component_picker_mode_close]: 1,\r\n  [component_properties_change]: 1,\r\n  [component_show_resizer]: 1,\r\n  [component_edit_mode]: 1,\r\n  [component_close_edit_mode]: 1,\r\n  [context_delete]: 1,\r\n  [context_copy]: 1,\r\n  [context_cut]: 1,\r\n  [context_copypaste]: 1,\r\n  [context_pack]: 1,\r\n  [context_unpack]: 1,\r\n  [context_lib]: 1,\r\n  [component_swap]: 1,\r\n  [component_alignment]: 1,\r\n  [coverage_forward]: 1,\r\n  [coverage_backward]: 1,\r\n  [coverage_front]: 1,\r\n  [coverage_back]: 1,\r\n  [coverage_backward_to]: 1,\r\n  [coverage_forward_to]: 1,\r\n  [coverage_picked_width_mode]: 1,\r\n  [workspace_save_template]: 1,\r\n  [component_settings_lock]: 1,\r\n  [component_snap_change]: 1,\r\n  [component_snap_change_end]: 1,\r\n  [component_lock_children]: 1,\r\n  [component_unlock_children]: 1,\r\n  [component_open_unlock_mode]: 1,\r\n  [component_close_unlock_mode]: 1,\r\n};\r\n","import axios from 'axios'\r\nimport {message, Modal} from 'antd'\r\nimport JSCookies from 'js-cookie'\r\nimport {BASE_OSS} from \"@config\";\r\n\r\n\r\n\r\nexport const API_BASE_URL = '/api/v1/'\r\nconst AUTH_KEY = 'Authenticated'\r\nexport const getAuthenticated = () =>{\r\n    return JSCookies.get(AUTH_KEY)\r\n}\r\nexport const setAuthenticated = (empty) =>{\r\n    if (empty === null) {\r\n        JSCookies.remove(AUTH_KEY)\r\n    } else {\r\n        JSCookies.set(AUTH_KEY, 'HAS_AUTHED', {expires : 1 / 12})\r\n    }\r\n}\r\nexport const getOSSUrl = (uri) => `${BASE_OSS}${uri}`\r\nexport const getBaseUrl = (uri) => `${API_BASE_URL}${uri}`\r\naxios.defaults.headers['Content-Type'] = 'application/json;charset=utf8'\r\naxios.defaults.baseURL = API_BASE_URL\r\n\r\nlet exitModal = null\r\naxios.interceptors.response.use((result) =>{\r\n    let data = result.data\r\n    let authed = getAuthenticated()\r\n    if (authed) {\r\n        setAuthenticated()// 延长授权时间\r\n    }\r\n    return data\r\n}, (e) =>{\r\n    if (e.response.status == 401) {\r\n        let callback = encodeURIComponent(location.pathname + location.search)\r\n        window.TokenExpired = true\r\n        if (!exitModal) exitModal = Modal.info()\r\n        exitModal.update({\r\n            title : '提示',\r\n            content : '由于您长时间没有操作，为了确保数据安全。系统已自动退出登录',\r\n            onOk : () =>{\r\n                location.replace('/signin?callback=' + callback)\r\n            }\r\n        })\r\n    } else {\r\n        message.warn(e.response.data.errmsg)\r\n    }\r\n    throw  e\r\n})\r\n\r\nexport const Http = axios","import ViewProperties from './base';\r\n\r\nconst DEFAULT_COLOR = 'rgba(224,224,224,1)';\r\nexport default class TextProperties extends ViewProperties {\r\n  constructor() {\r\n    super();\r\n    this.type = 'text';\r\n    this.alias = '文本';\r\n    this.font = {\r\n      size: 14,\r\n      color: 'rgba(0,0,0,1)',\r\n    };\r\n    this.align = {\r\n      x: 'flex-start', // flex-start center flex-end\r\n      y: 'flex-start', // flex-start center flex-end\r\n    };\r\n    this.fontStyle = [];\r\n    this.decorator = 'none';\r\n    this.fontData = 'Text';\r\n    this.spacing = {\r\n      height: 1,\r\n      width: 0,\r\n    };\r\n  }\r\n}\r\n\r\nexport class ButtonProperties extends TextProperties {\r\n  constructor() {\r\n    super();\r\n    this.type = 'text';\r\n    this.alias = '文本';\r\n    this.align = {\r\n      x: 'center',\r\n      y: 'center',\r\n    };\r\n    this.decorator = 'none';\r\n    this.fontData = 'Button';\r\n    this.bg = DEFAULT_COLOR;\r\n    delete this.spacing;\r\n    delete this.decorator;\r\n    delete this.fontStyle;\r\n  }\r\n}\r\n\r\nexport class FontIconProperties extends ViewProperties {\r\n  constructor() {\r\n    super();\r\n    this.type = 'icon';\r\n    this.alias = '图标';\r\n    this.icon = {\r\n      data: '', // css class name\r\n      content: '', // unicode\r\n    };\r\n    this.settings.ratio = true;\r\n    this.transform.width = 20;\r\n    this.transform.height = 20;\r\n    this.bg = 'rgba(0,0,0,1)';\r\n    delete this.shadow;\r\n    delete this.corner;\r\n    delete this.border;\r\n  }\r\n}\r\n\r\nexport class InputProperties extends TextProperties {\r\n  constructor() {\r\n    super();\r\n    this.type = 'input';\r\n    this.alias = '输入';\r\n    this.fontData = '请输入';\r\n    this.font.color = DEFAULT_COLOR;\r\n    this.border.width = 1;\r\n    this.border.color = DEFAULT_COLOR;\r\n    this.corner.bottomRight = 4;\r\n    this.corner.bottomLeft = 4;\r\n    this.corner.topLeft = 4;\r\n    this.corner.topRight = 4;\r\n    delete this.spacing;\r\n    delete this.decorator;\r\n    delete this.fontStyle;\r\n    delete this.align;\r\n  }\r\n}\r\n\r\nexport class TextAreaProperties extends InputProperties {\r\n  constructor() {\r\n    super();\r\n    this.type = 'textarea';\r\n    this.alias = '多行输入';\r\n    this.fontData = '请输入';\r\n  }\r\n}\r\n\r\nexport class CommentProperties extends TextProperties {\r\n  constructor() {\r\n    super();\r\n    this.type = 'comment';\r\n    this.alias = '标注';\r\n    this.fontData = '输入';\r\n    this.font.color = 'rgb(103, 103, 103)';\r\n    this.spacing.height = 1.5;\r\n    this.corner.topLeft = 4;\r\n    this.corner.topRight = 4;\r\n    this.corner.bottomLeft = 4;\r\n    this.corner.bottomRight = 4;\r\n    this.font.size = 12;\r\n    this.bg = 'rgba(255, 250, 239,1)';\r\n    this.shadow.blur = 8;\r\n    this.shadow.spread = 0;\r\n    this.border.style = 'dashed';\r\n    //  rgba(0, 0, 0, 0.45) 1px 2px 9px 0px\r\n    this.shadow.offsetX = 1;\r\n    this.shadow.offsetY = 2;\r\n    this.shadow.color = 'rgba(0,0,0,0.45)';\r\n    this.settings.resize = ['borderLeft', 'borderTop', 'borderBottom', 'borderRight', 'tr', 'tm', 'tl', 'l', 'r', 'bl', 'bm', 'br'];\r\n  }\r\n}\r\n","import ViewProperties from './base';\r\nimport { IMAGE_MODE_FILL, IMAGE_MODE_SCALE } from '../ui/Image';\r\nimport { DEFAULT_IMG } from '../util/helper';\r\n\r\nexport default class ImageProperties extends ViewProperties {\r\n  constructor() {\r\n    super();\r\n    this.type = 'image';\r\n    this.alias = '图片';\r\n    this.image = {\r\n      fill: IMAGE_MODE_FILL, //  fill | scale | stretch\r\n      source: DEFAULT_IMG,\r\n    };\r\n    delete this.bg;\r\n  }\r\n}\r\n","import ViewProperties, { DEFAULT_COLOR } from './base';\r\n\r\nexport default class SelectProperties extends ViewProperties {\r\n  constructor() {\r\n    super();\r\n    this.type = 'select';\r\n    this.alias = '下拉选择';\r\n    // 解析换行符\r\n    this.selectOptions = '';\r\n    this.border.width = 1;\r\n    this.corner.topRight = 4;\r\n    this.corner.topLeft = 4;\r\n    this.corner.bottomLeft = 4;\r\n    this.corner.bottomRight = 4;\r\n    this.font = { size: 12, color: DEFAULT_COLOR };\r\n  }\r\n}\r\n","import Group from './group';\r\nimport DefaultView, { Bubble, Circle, Curve, Line, Rect, Triangle } from './base';\r\nimport Text, { ButtonProperties, CheckboxProperties, FontIconProperties, InputProperties, RadioProperties, SwitcherProperties, TextAreaProperties } from './text';\r\nimport { isArray, isPlainObject, uuid } from '../util/helper';\r\nimport Image from './image';\r\nimport SelectProperties from './select';\r\nimport jQuery from 'jquery';\r\nimport { BlockProperties, MasterProperties } from '@/lib/properties/group';\r\nimport { CommentProperties } from '@/lib/properties/text';\r\n\r\nconst ViewTypes = {\r\n  group: Group,\r\n  rect: Rect,\r\n  text: Text,\r\n  image: Image,\r\n  input: InputProperties,\r\n  icon: FontIconProperties,\r\n  textarea: TextAreaProperties,\r\n  button: ButtonProperties,\r\n  select: SelectProperties,\r\n  line: Line,\r\n  triangle: Triangle,\r\n  bubble: Bubble,\r\n  curve: Curve,\r\n  circle: Circle,\r\n  block: BlockProperties,\r\n  master: MasterProperties,\r\n  comment: CommentProperties,\r\n};\r\n/**\r\n *\r\n * @param {ViewProperties | Array<ViewProperties>} properties\r\n */\r\nexport const toString = (properties) => {\r\n  return Array.isArray(properties) ? JSON.stringify(properties.map((item) => item.toJSON())) : properties.toString();\r\n};\r\n/**\r\n *\r\n * @param {ViewProperties | Array<ViewProperties>} properties\r\n */\r\nexport const toJSON = (properties) => {\r\n  let result = [];\r\n  if (Array.isArray(properties)) {\r\n    result = properties.map((item) => {\r\n      try {\r\n        let obj = item.toJSON();\r\n        return obj;\r\n      } catch (e) {}\r\n      return null;\r\n    });\r\n    result = result.filter((item) => item);\r\n  } else {\r\n    result = properties.toJSON();\r\n  }\r\n  return result;\r\n};\r\nexport const parseJSON = (json, isGenerateId) => {\r\n  if (typeof json === 'string') {\r\n    json = JSON.parse(json);\r\n  }\r\n  if (!Array.isArray(json)) json = [json];\r\n  let result = [];\r\n  for (let i = 0, j = json.length; i < j; i++) {\r\n    let item = json[i];\r\n    if (isGenerateId) item.id = uuid('sb_');\r\n    let View = ViewTypes[item.type] || DefaultView;\r\n    // Default rect\r\n    if (!ViewTypes[item.type]) item.type = 'rect';\r\n    let view = new View();\r\n    for (let key in item) {\r\n      view[key] = item[key];\r\n      if (key === 'items' && item[key].length > 0) {\r\n        // 已废弃\r\n        view[key] = parseJSON(item[key], isGenerateId);\r\n        view[key].forEach((item) => {\r\n          item.parent = view;\r\n          item.settings.isLock = true;\r\n        });\r\n      }\r\n    }\r\n    result[i] = view;\r\n  }\r\n  return result;\r\n};\r\n/**\r\n *\r\n * @param {Object} jsonObject\r\n * @param {boolean} isGenerateId  是否生成新的ID\r\n * @return {ViewProperties}\r\n */\r\nexport const parseOjbect = (jsonObject, isGenerateId) => {\r\n  if (typeof jsonObject === 'string') jsonObject = JSON.parse(jsonObject);\r\n  return parseJSON([jsonObject], isGenerateId)[0];\r\n};\r\n/**\r\n *\r\n * @param view {ViewProperties}\r\n *\r\n */\r\nexport const refreshViewId = (view) => {\r\n  view.id = uuid('sb_');\r\n  if (view.items) {\r\n    for (let i = 0, j = view.items.length; i < j; i++) {\r\n      let item = view.items[i];\r\n      if (item.items && item.items.length > 0) refreshViewId(item);\r\n      else item.id = uuid('sb_');\r\n    }\r\n  }\r\n};\r\nexport const deepCopyPages = (page) => {};\r\n\r\n/**\r\n *\r\n *\r\n * 对节点的增删改查，返回一个新的数组\r\n * @param array {Array<ViewProperties>}\r\n * @param target {ViewProperties}\r\n * @param callback {Function}\r\n * @return {Array<ViewProperties>}\r\n */\r\nexport function updateIn(array, target, callback) {\r\n  return array.map((item) => {\r\n    if (item.id == target.id) {\r\n      return callback(createViewFrom(Object.assign({}, item)));\r\n    }\r\n    return item;\r\n  });\r\n}\r\n\r\nfunction defaultUpdater(item) {\r\n  return createViewFrom(item);\r\n}\r\n\r\nexport function updateTreeIn(array, path, callback = defaultUpdater) {\r\n  path = path.slice();\r\n  let resultArray = copyArray(array);\r\n  let index = path.shift();\r\n  let firstIndex = index;\r\n  let newData = Object.assign({}, resultArray[index]);\r\n  newData = path.length > 0 ? createViewFrom(newData) : newData;\r\n  let object = newData;\r\n  while (path.length > 0) {\r\n    index = path.shift();\r\n    if (newData.items && newData.items.length > 0) {\r\n      newData.items = copyArray(newData.items);\r\n      if (path.length === 0) {\r\n        let _obj = callback(Object.assign({}, newData.items[index]));\r\n        newData.items[index] = _obj;\r\n        if (!_obj) newData.items.splice(index, 1);\r\n        resultArray[firstIndex] = object;\r\n        return resultArray;\r\n      } else {\r\n        let _obj = createViewFrom(Object.assign({}, newData.items[index]));\r\n        newData.items[index] = _obj;\r\n        newData = _obj;\r\n      }\r\n    }\r\n  }\r\n  let _obj = callback(newData);\r\n  resultArray[index] = _obj;\r\n  if (!_obj) resultArray = resultArray.filter((item) => item);\r\n  return resultArray;\r\n}\r\n\r\n/**\r\n * 数组替换\r\n * @param stateItems {Array<ViewProperties>}\r\n * @param updateItems {Array<ViewProperties>}\r\n * @param callback {Function<Array<ViewProperties>>:Array<ViewProperties>}\r\n */\r\nexport function updateInArray(stateItems, updateItems, callback) {\r\n  let maps = {};\r\n  updateItems.forEach((item) => {\r\n    maps[item.id] = item;\r\n  });\r\n  let indexMap = {};\r\n  let newStateItems = [];\r\n  //  记录当前更新队列的index，然后开始批量更新\r\n  stateItems.forEach((item, index) => {\r\n    if (maps[item.id]) {\r\n      indexMap[item.id] = index;\r\n    }\r\n    newStateItems.push(item);\r\n  });\r\n  // 按顺序更新\r\n  updateItems.forEach((item) => {\r\n    let index = indexMap[item.id];\r\n    //  设置新的组件\r\n    newStateItems[index] = callback(createViewFrom(Object.assign({}, newStateItems[index])), item.id);\r\n  });\r\n  return newStateItems;\r\n}\r\n\r\n/**\r\n *\r\n *  根据对象找到对象在当前树中的路径\r\n * @param items {Array<ViewProperties>}\r\n * @return {Array<Number>}\r\n */\r\nexport function findViewPath(items, target) {\r\n  let path = [],\r\n    found = false;\r\n\r\n  function find(items) {\r\n    for (let i = 0; i < items.length; i++) {\r\n      path.push(i);\r\n      if (items[i] === target) {\r\n        found = true;\r\n        break;\r\n      }\r\n      if (items[i].items) {\r\n        find(items[i].items);\r\n      }\r\n      if (found) {\r\n        break;\r\n      }\r\n      path.pop();\r\n    }\r\n  }\r\n\r\n  find(items);\r\n  if (path.length === 0) {\r\n    console.warn('[unfind path with ]', target);\r\n  }\r\n  return path;\r\n}\r\n\r\n/**\r\n * 节点被替换后，起父节点引用被修改，导致子元素所对应parent是错误，需要刷新整个树\r\n */\r\nexport function refreshRelation(items, parent) {\r\n  for (let i = 0, j = items.length; i < j; i++) {\r\n    let item = items[i];\r\n    if (parent) item.parent = parent;\r\n    if (item.items && item.items.length > 0) {\r\n      refreshRelation(item.items, item);\r\n    }\r\n  }\r\n}\r\n\r\nfunction copyArray(arr) {\r\n  return arr.slice();\r\n}\r\n\r\nexport function createViewFrom(data) {\r\n  let view = new ViewTypes[data.type]();\r\n  for (let key in data) {\r\n    let obj = data[key];\r\n    if (isPlainObject(obj)) {\r\n      obj = jQuery.extend(true, {}, obj);\r\n    } else if (isArray(obj)) {\r\n      obj = jQuery.extend(true, [], obj);\r\n    }\r\n    view[key] = obj;\r\n  }\r\n  return view;\r\n}\r\n","module.exports = __webpack_public_path__ + \"static/media/head.6e3e4632.jpg\";","import {\r\n  canvas_draggable,\r\n  component_alignment,\r\n  component_properties_change,\r\n  context_checkall,\r\n  context_copy,\r\n  context_copypaste,\r\n  context_cut,\r\n  context_delete,\r\n  context_paste,\r\n  context_redo,\r\n  context_save,\r\n  context_undo,\r\n  context_zoom_in,\r\n  context_zoom_out,\r\n  coverage_back,\r\n  coverage_backward,\r\n  coverage_forward,\r\n  coverage_front,\r\n  guide_toggle,\r\n  workspace_scroll_center,\r\n} from '../util/actions';\r\nimport Event from '../Base/Event';\r\nimport { getFirstResponder } from '../global/instance';\r\nimport KeyEvent, { getKeyCodeFormat, KeyCode } from './KeyEvent';\r\nimport { app_toggle_selection_type, context_pack, context_unpack } from '@/lib/util/actions';\r\n\r\nconst transformArrowKeys = {\r\n  move_top: 'y',\r\n  move_right: 'x',\r\n  move_left: 'x',\r\n  move_bottom: 'y',\r\n};\r\nconst transformArrowFlag = {\r\n  move_top: -1,\r\n  move_left: -1,\r\n  move_right: 1,\r\n  move_bottom: 1,\r\n};\r\nexport const CombomKeyNumber = {\r\n  [KeyEvent.DOM_VK_SHIFT]: 1,\r\n  [KeyEvent.DOM_VK_CONTROL]: 4,\r\n  [KeyEvent.DOM_VK_ALT]: 2,\r\n  [KeyEvent.DOM_VK_COMMAND]: 4,\r\n};\r\nexport const CombomKeys = {\r\n  4: 'Ctrl',\r\n  2: 'Alt',\r\n  1: 'Shift',\r\n};\r\nconst CTRL_KEY = 'Ctrl';\r\nconst ALT_KEY = 'Alt';\r\nconst SHIFT_KEY = 'Shift';\r\nconst NONE_FUNCTION = 0;\r\nexport const CombomKeysArray = Object.keys(CombomKeys)\r\n  .sort((a, b) => b - a)\r\n  .map((item) => +item);\r\n// 可配置的组合快捷键\r\nconst ActionKeyMaps = {\r\n  block: [4, KeyEvent.DOM_VK_G],\r\n  unblock: [4 | 1, KeyEvent.DOM_VK_G],\r\n  selection: [4 | 1, KeyEvent.DOM_VK_O],\r\n  showline: [4 | 1, KeyEvent.DOM_VK_L],\r\n  zoomin: [4, KeyEvent.DOM_VK_PLUS],\r\n  zoomout: [4, KeyEvent.DOM_VK_MINUS],\r\n  viewcenter: [4 | 1, KeyEvent.DOM_VK_F],\r\n  hide: [4, KeyEvent.DOM_VK_H],\r\n  lock: [4, KeyEvent.DOM_VK_L],\r\n  canvas_draggable: [0, KeyEvent.DOM_VK_SPACE],\r\n  delete: [0, KeyEvent.DOM_VK_BACK_SPACE],\r\n  redo: [4 | 1, KeyEvent.DOM_VK_Z],\r\n  undo: [4, KeyEvent.DOM_VK_Z],\r\n  copy: [4, KeyEvent.DOM_VK_C],\r\n  duplicate: [4, KeyEvent.DOM_VK_D],\r\n  paste: [4, KeyEvent.DOM_VK_V],\r\n  clip: [4, KeyEvent.DOM_VK_X],\r\n  save: [4, KeyEvent.DOM_VK_S],\r\n  select_all: [4, KeyEvent.DOM_VK_A],\r\n  move: {\r\n    left: [0, KeyEvent.DOM_VK_LEFT],\r\n    right: [0, KeyEvent.DOM_VK_RIGHT],\r\n    top: [0, KeyEvent.DOM_VK_UP],\r\n    bottom: [0, KeyEvent.DOM_VK_DOWN],\r\n  },\r\n  alignment: {\r\n    top: [0, KeyEvent.DOM_VK_T],\r\n    bottom: [0, KeyEvent.DOM_VK_B],\r\n    middle: [0, KeyEvent.DOM_VK_M],\r\n    left: [0, KeyEvent.DOM_VK_L],\r\n    right: [0, KeyEvent.DOM_VK_R],\r\n    center: [0, KeyEvent.DOM_VK_C],\r\n  },\r\n  coverage: {\r\n    forward: [1, KeyEvent.DOM_VK_UP],\r\n    front: [1 | 2 | 4, KeyEvent.DOM_VK_UP],\r\n    backward: [1, KeyEvent.DOM_VK_DOWN],\r\n    back: [1 | 2 | 4, KeyEvent.DOM_VK_DOWN],\r\n  },\r\n};\r\n/**\r\n * @description 定义所有的快捷键事件，\r\n *\r\n */\r\nexport const KeyboardActionNameMap = {\r\n  UNBLOCK: 'unblock',\r\n  BLOCK: 'block',\r\n  SELECTION: 'selection',\r\n  LOCK: 'lock',\r\n  SHOW_LINE: 'showline',\r\n  ZOOM_IN: 'zoomin',\r\n  ZOOM_OUT: 'zoomout',\r\n  VIEW_CENTER: 'viewcenter',\r\n  HIDE: 'hide',\r\n  DEL: 'delete',\r\n  REDO: 'redo',\r\n  UNDO: 'undo',\r\n  COPY: 'copy',\r\n  DUPLICATE: 'duplicate',\r\n  PASTE: 'paste',\r\n  CLIP: 'clip',\r\n  SAVE: 'save',\r\n  SELECT_ALL: 'select_all',\r\n  MOVE_LEFT: 'move_left',\r\n  MOVE_RIGHT: 'move_right',\r\n  MOVE_TOP: 'move_top',\r\n  MOVE_BOTTOM: 'move_bottom',\r\n  ALIGNMENT_TOP: 'alignment_top',\r\n  ALIGNMENT_BOTTOM: 'alignment_bottom',\r\n  ALIGNMENT_MIDDLE: 'alignment_middle',\r\n  ALIGNMENT_LEFT: 'alignment_left',\r\n  ALIGNMENT_RIGHT: 'alignment_right',\r\n  ALIGNMENT_CENTER: 'alignment_center',\r\n  COVERAGE_FORWARD: 'coverage_forward',\r\n  COVERAGE_BACKWARD: 'coverage_backward',\r\n  COVERAGE_FRONT: 'coverage_front',\r\n  COVERAGE_BACK: 'coverage_back',\r\n  CANVAS_DRAGGABLE: 'canvas_draggable',\r\n};\r\n/**\r\n * @description  快捷键对应操作的别名\r\n * @type {{[p : string] : string}}\r\n */\r\nexport const ActionNames = {\r\n  [KeyboardActionNameMap.UNBLOCK]: '解散',\r\n  [KeyboardActionNameMap.BLOCK]: '组合',\r\n  [KeyboardActionNameMap.SELECTION]: '选中方式(相交/包含)',\r\n  [KeyboardActionNameMap.SHOW_LINE]: '显示/隐藏辅助线',\r\n  [KeyboardActionNameMap.ZOOM_IN]: '放大',\r\n  [KeyboardActionNameMap.ZOOM_OUT]: '缩小',\r\n  [KeyboardActionNameMap.VIEW_CENTER]: '视图居中',\r\n  [KeyboardActionNameMap.HIDE]: '隐藏/显示',\r\n  [KeyboardActionNameMap.DEL]: '删除组件',\r\n  [KeyboardActionNameMap.REDO]: '重做',\r\n  [KeyboardActionNameMap.UNDO]: '撤销',\r\n  [KeyboardActionNameMap.COPY]: '复制',\r\n  [KeyboardActionNameMap.DUPLICATE]: '创建副本',\r\n  [KeyboardActionNameMap.PASTE]: '粘贴',\r\n  [KeyboardActionNameMap.CLIP]: '剪切',\r\n  [KeyboardActionNameMap.SAVE]: '保存',\r\n  [KeyboardActionNameMap.SELECT_ALL]: '全选',\r\n  [KeyboardActionNameMap.MOVE_LEFT]: '组件向左移动',\r\n  [KeyboardActionNameMap.MOVE_RIGHT]: '组件向右移动',\r\n  [KeyboardActionNameMap.MOVE_TOP]: '组件向上移动',\r\n  [KeyboardActionNameMap.MOVE_BOTTOM]: '组件向下移动',\r\n  [KeyboardActionNameMap.LOCK]: '锁定/解锁',\r\n  [KeyboardActionNameMap.ALIGNMENT_TOP]: '顶对齐',\r\n  [KeyboardActionNameMap.ALIGNMENT_MIDDLE]: '垂直居中',\r\n  [KeyboardActionNameMap.ALIGNMENT_BOTTOM]: '底对齐',\r\n  [KeyboardActionNameMap.ALIGNMENT_LEFT]: '左对齐',\r\n  [KeyboardActionNameMap.ALIGNMENT_CENTER]: '水平居中',\r\n  [KeyboardActionNameMap.ALIGNMENT_RIGHT]: '右对齐',\r\n  [KeyboardActionNameMap.COVERAGE_FRONT]: '置为顶层',\r\n  [KeyboardActionNameMap.COVERAGE_FORWARD]: '上移一层',\r\n  [KeyboardActionNameMap.COVERAGE_BACK]: '置为底层',\r\n  [KeyboardActionNameMap.COVERAGE_BACKWARD]: '下移一层',\r\n  [KeyboardActionNameMap.CANVAS_DRAGGABLE]: '拖拽画布',\r\n};\r\n/**\r\n * @description 配置该事件后，将会直接Dispatch该 键盘事件所对应的 Event 事件\r\n * @type {{[p : string] : *}}\r\n */\r\nexport const KeyboradEvents = {\r\n  [KeyboardActionNameMap.UNBLOCK]: context_unpack,\r\n  [KeyboardActionNameMap.BLOCK]: context_pack,\r\n  [KeyboardActionNameMap.SELECTION]: app_toggle_selection_type,\r\n  [KeyboardActionNameMap.SHOW_LINE]: guide_toggle,\r\n  [KeyboardActionNameMap.ZOOM_IN]: context_zoom_in,\r\n  [KeyboardActionNameMap.ZOOM_OUT]: context_zoom_out,\r\n  [KeyboardActionNameMap.VIEW_CENTER]: workspace_scroll_center,\r\n  [KeyboardActionNameMap.DEL]: context_delete,\r\n  [KeyboardActionNameMap.REDO]: context_redo,\r\n  [KeyboardActionNameMap.UNDO]: context_undo,\r\n  [KeyboardActionNameMap.COPY]: context_copy,\r\n  [KeyboardActionNameMap.DUPLICATE]: context_copypaste,\r\n  [KeyboardActionNameMap.PASTE]: context_paste,\r\n  [KeyboardActionNameMap.CLIP]: context_cut,\r\n  [KeyboardActionNameMap.SAVE]: context_save,\r\n  [KeyboardActionNameMap.SELECT_ALL]: context_checkall,\r\n  [KeyboardActionNameMap.COVERAGE_BACK]: coverage_back,\r\n  [KeyboardActionNameMap.COVERAGE_BACKWARD]: coverage_backward,\r\n  [KeyboardActionNameMap.COVERAGE_FORWARD]: coverage_forward,\r\n  [KeyboardActionNameMap.COVERAGE_FRONT]: coverage_front,\r\n  [KeyboardActionNameMap.CANVAS_DRAGGABLE]: canvas_draggable,\r\n};\r\n/**\r\n * @description  该事件需要一个选中的组件，\r\n * @type {{[p : string] : number}}\r\n */\r\nexport const NeedSelectedViewActions = {\r\n  [KeyboardActionNameMap.UNBLOCK]: 1,\r\n  [KeyboardActionNameMap.BLOCK]: 1,\r\n  [KeyboardActionNameMap.DEL]: 1,\r\n  [KeyboardActionNameMap.COPY]: 1,\r\n  [KeyboardActionNameMap.DUPLICATE]: 1,\r\n  [KeyboardActionNameMap.CLIP]: 1,\r\n  [KeyboardActionNameMap.MOVE_LEFT]: 1,\r\n  [KeyboardActionNameMap.MOVE_RIGHT]: 1,\r\n  [KeyboardActionNameMap.MOVE_TOP]: 1,\r\n  [KeyboardActionNameMap.MOVE_BOTTOM]: 1,\r\n  [KeyboardActionNameMap.ALIGNMENT_RIGHT]: 1,\r\n  [KeyboardActionNameMap.ALIGNMENT_LEFT]: 1,\r\n  [KeyboardActionNameMap.ALIGNMENT_CENTER]: 1,\r\n  [KeyboardActionNameMap.ALIGNMENT_TOP]: 1,\r\n  [KeyboardActionNameMap.ALIGNMENT_BOTTOM]: 1,\r\n  [KeyboardActionNameMap.ALIGNMENT_MIDDLE]: 1,\r\n  [KeyboardActionNameMap.HIDE]: 1,\r\n};\r\n/**\r\n *\r\n *  {keyboard_event : [combo,keyCode ] } ->  {combo,keyCode : keyboard_event}\r\n * @description 将配置文件的key value 调换，value变 key ，key 变value。通过键盘的key直接找到对应的事件\r\n * @param maps\r\n */\r\nexport const convertActionKeyMaps = (maps) => {\r\n  maps = maps || ActionKeyMaps;\r\n  let result = {};\r\n  for (let action in maps) {\r\n    let key = maps[action];\r\n    if (Array.isArray(key)) {\r\n      result[key.join(',')] = action;\r\n    } else {\r\n      let group = convertActionKeyMaps(key);\r\n      for (let i in group) {\r\n        result[i] = action + '_' + group[i];\r\n      }\r\n    }\r\n  }\r\n  return result;\r\n};\r\n/**\r\n * {combo,keyCode : keyboard_event} -> {keyboard_event:combo,keyCode}\r\n * @param actionHandler 转为事件 对应 code，方便根据 事件名称获取 快捷键\r\n */\r\nexport const convertActionKeyCodeMaps = (actionHandler) => {\r\n  let result = {};\r\n  for (let key in actionHandler) {\r\n    result[actionHandler[key]] = key;\r\n  }\r\n  return result;\r\n};\r\n/**\r\n * @description {combo,keyCode : keyboard_event} 方便被键盘KeyCode 找到\r\n */\r\nexport let ActionHandler = convertActionKeyMaps(ActionKeyMaps);\r\n/**\r\n * @description {keyboard_event:combo,keyCode} 使用事件名称找到 ，用不显示菜单上\r\n */\r\nexport let ActionKeyCodeMaps = convertActionKeyCodeMaps(ActionHandler);\r\n/**\r\n * 修改ActionHandler 后需要更新\r\n * @param actionHandler\r\n */\r\nexport const updateKeyCodeMap = (actionHandler) => {\r\n  ActionHandler = actionHandler;\r\n  ActionKeyCodeMaps = convertActionKeyCodeMaps(actionHandler);\r\n};\r\nwindow.ActionCode = ActionKeyCodeMaps;\r\nwindow.CodeAction = ActionHandler;\r\n/**\r\n * 根据操作获取快捷键\r\n * @param key\r\n */\r\nexport const getFormatShortcutsWithAction = (key) => {\r\n  let code = ActionKeyCodeMaps[key];\r\n  let arr = code.split(',');\r\n  let combo = +arr[0];\r\n  let k = arr[1];\r\n  return (\r\n    CombomKeysArray.filter((item) => (combo & item) == item)\r\n      .map((item) => getKeyCodeFormat(CombomKeys[item]))\r\n      .join('') +\r\n    '' +\r\n    getKeyCodeFormat(KeyCode[k])\r\n  );\r\n};\r\n//  组合键配置 为 {actino:[0,1]}\r\n//  action 该组合键执行的操作,数组第一个元素为组合键 Control | shift | alt，如果没有则为0 ，数组第二个元素为 实际触发键\r\nexport default class KeyboradHandler {\r\n  constructor(isShift, isAlt, isCtrl, keyCode) {\r\n    // 组合键按下时不做任何操作\r\n    if (CombomKeyNumber[keyCode]) {\r\n      // console.info('Key combination pressed', keyCode)\r\n      keyCode = 0; // 没有实际触发键\r\n    }\r\n    let combom = [];\r\n    if (isShift) combom.push(CombomKeyNumber[KeyEvent.DOM_VK_SHIFT]);\r\n    if (isAlt) combom.push(CombomKeyNumber[KeyEvent.DOM_VK_ALT]);\r\n    if (isCtrl) combom.push(CombomKeyNumber[KeyEvent.DOM_VK_CONTROL]);\r\n    let combomkey;\r\n    if (combom.length > 0) {\r\n      // 使用组合键\r\n      combomkey = combom.reduce((a, b) => a | b);\r\n    } else {\r\n      // 不使用组合键\r\n      combomkey = 0;\r\n    }\r\n    let keycode = combomkey + ',' + keyCode;\r\n    this.keycode = keycode;\r\n    let view = getFirstResponder();\r\n    let handler = ActionHandler[keycode];\r\n    ///\r\n    if (NeedSelectedViewActions[handler]) {\r\n      if (!(view && view.properties)) {\r\n        console.log('Ignore');\r\n        return;\r\n      }\r\n    }\r\n    if (this[handler]) {\r\n      this[handler](handler);\r\n    } else {\r\n      //  通用处理逻辑\r\n      this.handle(handler);\r\n    }\r\n  }\r\n\r\n  // 分布\r\n  alignment = (action) => Event.dispatch(component_alignment, action);\r\n  alignment_left = this.alignment;\r\n  alignment_center = this.alignment;\r\n  alignment_right = this.alignment;\r\n  alignment_top = this.alignment;\r\n  alignment_middle = this.alignment;\r\n  alignment_bottom = this.alignment;\r\n  //  移动\r\n  move = (action) => {\r\n    let view = getFirstResponder();\r\n    let transform = view.properties.transform;\r\n    let value = {};\r\n    if (view.properties.isTemporaryGroup) {\r\n      view.getItems().forEach((item) => {\r\n        let transform = Object.assign({}, item.transform);\r\n        transform[transformArrowKeys[action]] += transformArrowFlag[action];\r\n        value[item.id] = transform;\r\n      });\r\n    } else {\r\n      transform = Object.assign({}, transform);\r\n      transform[transformArrowKeys[action]] += transformArrowFlag[action];\r\n      value = transform;\r\n    }\r\n    Event.dispatch(component_properties_change, {\r\n      key: 'transform',\r\n      target: view,\r\n      value: value,\r\n      from: 'Keyboard',\r\n    });\r\n  };\r\n  move_left = this.move;\r\n  move_top = this.move;\r\n  move_right = this.move;\r\n  move_bottom = this.move;\r\n  // action : key -> key: action\r\n  // 将键盘按键与 操作关联起来\r\n  handle() {\r\n    let view = getFirstResponder();\r\n    let action = ActionHandler[this.keycode];\r\n    if (!action) {\r\n      // console.info('Unspecified operation', this.keycode)\r\n      return;\r\n    }\r\n    let eventName = KeyboradEvents[action];\r\n    if (!eventName) {\r\n      console.info('Unspecified event', action);\r\n      return;\r\n    }\r\n    let props = view ? view.properties : void 0;\r\n    Event.dispatch(eventName, props);\r\n  }\r\n}\r\n","/**\r\n * created by yaojun on 2018/12/1\r\n * @description simple event handler\r\n */\r\nimport { NeedResponderAction } from '../util/actions';\r\nimport { getFirstResponder } from '../global/instance';\r\n\r\nclass Event {\r\n  constructor() {\r\n    this.listeners = {};\r\n    window._event = this;\r\n  }\r\n\r\n  listen(name, callback) {\r\n    if (this.listeners[name]) {\r\n      this.listeners[name].push(callback);\r\n    } else {\r\n      this.listeners[name] = [callback];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @memberOf Event\r\n   * @param params\r\n   */\r\n  dispatch(...params) {\r\n    let action = params[0];\r\n    if (NeedResponderAction[action]) {\r\n      let responder = getFirstResponder();\r\n      if (!responder) {\r\n        console.info(`[Event Ignored (${action})]`, 'Target component does not exist');\r\n        return;\r\n      }\r\n    }\r\n    // console.log('[Event Dispatch]', action)\r\n    let cbs = this.listeners[action];\r\n    let args = params.slice(1);\r\n    if (!cbs) return;\r\n    for (let i = 0; i < cbs.length; i++) {\r\n      if (typeof cbs[i] === 'function') {\r\n        try {\r\n          cbs[i](...args);\r\n        } catch (e) {\r\n          console.error('[Dispatch error]', e);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  destroy(name, callback) {\r\n    if (!this.listeners[name]) return;\r\n    if (!callback) return delete this.listeners[name];\r\n    let index = this.listeners[name].findIndex((cb) => cb == callback);\r\n    this.listeners[name].splice(index, 1);\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * @type {Event}\r\n */\r\nconst event = new Event();\r\nexport default event;\r\n","import { getQuery, uuid } from './helper';\r\nimport { getCurrentControllersByPage, getCurrentPage, saveCurrentControllersByPage, setCurrentPage } from '../global/instance';\r\nimport { parseJSON } from '../properties/types';\r\nimport { createPage, deletePage as deletePageApi, savePage } from '../../api/page';\r\nimport Event from '../Base/Event';\r\nimport { context_save_failed, context_save_start, context_save_success, outline_page_add, outline_page_select_end, show_create_project } from './actions';\r\nimport config from './preference';\r\nimport { isArray } from '@/lib/util/helper';\r\n\r\nexport const storage_page_key = (id) => 'page_data_' + id;\r\nvar LocalPageData = [];\r\n//from server\r\nexport const getPageData = () => {\r\n  return LocalPageData;\r\n};\r\nexport const setPageData = (pages) => {\r\n  LocalPageData = pages;\r\n};\r\nexport const getPageDataWithId = (pageid) => {\r\n  return getPageData().find((item) => item.id == pageid);\r\n};\r\nwindow.__GET_PAGE_DATA__ = getPageData;\r\nexport const refresLocalPageObject = (id, object) => {\r\n  try {\r\n    let pages = getPageData();\r\n    let index = pages.findIndex((item) => item.id == id);\r\n    if (index == -1) return;\r\n    let page = pages[index];\r\n    let node = Object.assign({}, object);\r\n    delete node.nodes;\r\n    page = Object.assign({}, node, { nodes: page.nodes });\r\n    pages[index] = page;\r\n    console.log(pages);\r\n  } catch (e) {\r\n    console.log('Refresh Error', id);\r\n  }\r\n};\r\nexport const selectPage = (pageid) => {\r\n  if (getCurrentPage() == pageid) return Promise.reject('already selected');\r\n  return new Promise((resolve) => {\r\n    setCurrentPage(pageid);\r\n    getCurrentControllersByPage(pageid).then((data) => {\r\n      let items = parseJSON(data);\r\n      Event.dispatch(outline_page_select_end, { id: pageid, data: getPageData().find((item) => item.id == pageid) });\r\n      resolve(items);\r\n    });\r\n  });\r\n};\r\n\r\n/**\r\n * 创建页面之前，项目必须存在\r\n * @param pid\r\n * @return {Promise<any>}\r\n */\r\nexport const createNewPage = (pid, state) => {\r\n  let pages = getPageData();\r\n  let data = generateNewPage(pid);\r\n  data.projectid = 'testid';\r\n  data.type = state || 'PAGE';\r\n  data.alias = data.type == 'PAGE' ? '新页面' : '新状态';\r\n  data.width = config.viewport.width;\r\n  pages.push(data);\r\n  localStorage.setItem(storage_page_key(data.id), JSON.stringify(data));\r\n};\r\n\r\nexport const duplicatePageState = (id, pid) => {\r\n  return new Promise((resolve) => {\r\n    let page = getPageData().find((item) => item.id == id);\r\n    let copyofPage = JSON.parse(JSON.stringify(page));\r\n    copyofPage.id = uuid('page_');\r\n    let prefix = copyofPage.alias.split(' ')[0];\r\n    let name = copyofPage.alias.split(' ')[1];\r\n    name = +(name ? name.trim() : 0) + 1;\r\n    copyofPage.alias = prefix + ' ' + name;\r\n    if (pid) copyofPage.parentid = pid;\r\n    copyofPage.type = 'STATE';\r\n    createPage(copyofPage).then((res) => {\r\n      res.data.nodes = copyofPage.nodes;\r\n      copyofPage = null;\r\n      getPageData().push(res.data);\r\n      resolve();\r\n    });\r\n  });\r\n};\r\n\r\nconst batchDeletePage = (ids) => {\r\n  let maps = {};\r\n  ids.forEach((item) => {\r\n    maps[item] = true;\r\n    deletePageFromStorage(item);\r\n  });\r\n\r\n  let pages = getPageData();\r\n  let realIds = [];\r\n  pages = pages.filter((item) => {\r\n    let matched = maps[item.id];\r\n    if (matched) realIds.push(item._id);\r\n    return !matched;\r\n  });\r\n  setPageData(pages);\r\n  return Promise.resolve();\r\n};\r\n\r\n//delte\r\nexport const deletePage = (id) => {\r\n  return new Promise((resolve) => {\r\n    if (isArray(id)) return batchDeletePage(id).then(resolve);\r\n    let pages = getPageData();\r\n    let index = pages.findIndex((item) => item.id == id);\r\n    pages.splice(index, 1);\r\n    deletePageFromStorage(id);\r\n    resolve();\r\n  });\r\n};\r\n\r\n//update\r\nexport const updateName = (name = '', id) => {\r\n  if (!name.trim()) return Promise.reject();\r\n  return new Promise((resolve) => {\r\n    let item = getPageDataWithId(id);\r\n    if (!item) return;\r\n    item.alias = name;\r\n    updatePageToSorage(id, item);\r\n  });\r\n};\r\nexport const updatePageInfo = (id, key, value) => {\r\n  return new Promise((resolve) => {\r\n    let pages = getPageData();\r\n    let item = pages.find((item) => item.id == id);\r\n    if (!item) return;\r\n    item[key] = value;\r\n    updatePageToSorage(id, item);\r\n  });\r\n};\r\nexport const updatePageGuides = (id, key, value) => {\r\n  return new Promise((resolve) => {\r\n    let pages = getPageData();\r\n    let item = pages.find((item) => item.id == id);\r\n    if (!item) return;\r\n    item.guides[key] = value;\r\n    updatePageToSorage(id, item);\r\n  });\r\n};\r\nexport const generateNewPage = (pid) => ({\r\n  bg: 'rgba(255,255,255,1)',\r\n  width: 380,\r\n  height: 900,\r\n  id: uuid('page_'),\r\n  alias: '新页面',\r\n  parentid: pid || null,\r\n  projectid: null,\r\n  guides: {\r\n    x: [],\r\n    y: [],\r\n  },\r\n  nodes: [],\r\n});\r\nexport const getPageListFromStorage = () => {\r\n  let pages = [];\r\n  for (let key in localStorage) {\r\n    if (key.startsWith('page_data')) {\r\n      try {\r\n        pages.push(JSON.parse(localStorage.getItem(key)));\r\n      } catch (e) {\r\n        localStorage.removeItem(key);\r\n      }\r\n    }\r\n  }\r\n  if (pages.length == 0) {\r\n    createNewPage();\r\n\r\n    return LocalPageData;\r\n  }\r\n  return pages;\r\n};\r\n\r\nexport const getUnsavedPageListFromStorage = () => {\r\n  let pages = getPageListFromStorage();\r\n  return pages.filter((item) => !item.projectid);\r\n};\r\nexport const updatePageToSorage = (id, data) => {\r\n  localStorage.setItem(storage_page_key(id), JSON.stringify(data));\r\n};\r\n// 保存到后台之后就清除前端的缓存数据\r\nexport const clearPageStorage = () => {\r\n  for (let key in localStorage) {\r\n    if (key.startsWith('page_data')) {\r\n      localStorage.removeItem(key);\r\n    }s\r\n  }\r\n};\r\n\r\nexport const deletePageFromStorage = (id) => {\r\n  localStorage.removeItem(storage_page_key(id));\r\n};\r\n\r\nexport async function saveToRemoteFromStorage(pages) {\r\n  Event.dispatch(context_save_success);\r\n}\r\n","/**\r\n *  created by yaojun on 2018/11/30\r\n *\r\n */\r\nimport React from 'react';\r\nimport Draggable from '../Draggable';\r\nimport Event from '../Base/Event';\r\nimport {\r\n  component_drag,\r\n  component_drag_before,\r\n  component_dragend,\r\n  component_enter,\r\n  component_leave,\r\n  component_over,\r\n  component_picker_picked,\r\n  context_copy,\r\n  context_copypaste,\r\n  context_cut,\r\n  context_delete,\r\n  context_paste_mouse,\r\n  coverage_backward_to_picked,\r\n  coverage_picked_width_mode,\r\n  selection_group,\r\n  workspace_save_template,\r\n} from '../util/actions';\r\nimport { Dom, isUndefined } from '../util/helper';\r\nimport config, { getSnaplineConfig } from '../util/preference';\r\nimport { getClipboardData, getFirstResponder, getTemporaryGroup, getViewPickedStatus, setFirstResponder } from '../global/instance';\r\nimport { getCanvasDraggable, getCoveragePickeMode, initialCoverageIndex } from '../global';\r\nimport { getFormatShortcutsWithAction } from '../service/KeyboradHandler';\r\nimport Matrix from '../util/Matrix';\r\nimport { getGroupId } from '../global/selection';\r\nimport { pushUnlockedView } from '@/lib/global/instance';\r\nimport { getComponentPosition } from '@/lib/global/controllers';\r\nimport { context_hide, workspace_save_master } from '@/lib/util/actions';\r\n\r\nexport const DEFAULT_CONTEXT_MENU = () => [\r\n  {\r\n    name: '复制',\r\n    action: context_copy,\r\n    shortcutkey: getFormatShortcutsWithAction('copy'),\r\n    check: () => !!getFirstResponder(),\r\n  },\r\n  {\r\n    name: '粘贴到鼠标位置',\r\n    action: context_paste_mouse,\r\n    check: () => {\r\n      return !!getClipboardData();\r\n    },\r\n  },\r\n  {\r\n    name: '添加副本',\r\n    action: context_copypaste,\r\n    shortcutkey: getFormatShortcutsWithAction('duplicate'),\r\n    check: () => !!getFirstResponder(),\r\n  },\r\n  {\r\n    name: '隐藏',\r\n    action: context_hide,\r\n    check: () => !!getFirstResponder(),\r\n  },\r\n  {\r\n    type: 'line',\r\n  },\r\n  {\r\n    name: '剪切',\r\n    action: context_cut,\r\n    shortcutkey: getFormatShortcutsWithAction('clip'),\r\n    check: () => !!getFirstResponder(),\r\n  },\r\n  {\r\n    name: '删除',\r\n    action: context_delete,\r\n    shortcutkey: getFormatShortcutsWithAction('delete'),\r\n    check: () => !!getFirstResponder(),\r\n  },\r\n];\r\nexport default class ViewController extends React.Component {\r\n  componentWillMount() {\r\n    /**\r\n     *\r\n     * @type {ViewProperties | TextProperties | ImageProperties | GroupProperties}\r\n     */\r\n    this.properties = this.props.properties;\r\n    this.properties.view = this;\r\n    this._parent = this.props.parent;\r\n  }\r\n\r\n  componentWillReceiveProps(props) {\r\n    if (props.properties) {\r\n      this.properties = props.properties;\r\n      this.properties.view = this;\r\n      this.initProperties();\r\n    }\r\n    this._parent = props.parent;\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.properties.isInMaster) {\r\n      this._x = this.properties.transform.x;\r\n      this._y = this.properties.transform.y;\r\n      this._guidesX = 0;\r\n      this._guidesY = 0;\r\n      // 实际接收事件的对象\r\n      this.eventTarget = null;\r\n      this._drag = new Draggable(this.refs.container, {\r\n        onDragMove: this._handleDragMove,\r\n        onDragStart: this.onDragStart,\r\n        onDragEnd: this._handleDragEnd,\r\n      });\r\n      // Double click\r\n      this.refs.container.addEventListener('dblclick', this._onDBClick, false);\r\n    }\r\n    this.initProperties();\r\n  }\r\n\r\n  initZIndex() {\r\n    let indexWrapper = Dom.of(this.getIndexDomWrapper());\r\n    let zIndex = this.properties.zIndex;\r\n    //  初始化层级，最后挂载的元素都在最上面\r\n    if (zIndex == -1 || zIndex == null) {\r\n      this.properties.zIndex = initialCoverageIndex();\r\n    }\r\n    // Top wrapper\r\n    indexWrapper.zIndex(this.properties.zIndex);\r\n  }\r\n\r\n  initCorner() {\r\n    let wrapper = Dom.of(this.getDomWrapper());\r\n    let corner = this.properties.corner;\r\n    if (corner) {\r\n      let { topLeft, topRight, bottomLeft, bottomRight } = corner;\r\n      wrapper.borderRadiusTopLeft(topLeft);\r\n      wrapper.borderRadiusTopRight(topRight);\r\n      wrapper.borderRadiusBottomLeft(bottomLeft);\r\n      wrapper.borderRadiusBottomRight(bottomRight);\r\n    }\r\n  }\r\n\r\n  initOverflow() {\r\n    let wrapper = Dom.of(this.getDomWrapper());\r\n    let { isHide, overflow } = this.properties.settings;\r\n    let type = this.properties.type;\r\n    if (type === 'group') {\r\n      if (overflow) {\r\n        wrapper.overflow('hidden');\r\n      } else {\r\n        wrapper.overflow('visible');\r\n      }\r\n    }\r\n  }\r\n\r\n  initBorder() {\r\n    let wrapper = Dom.of(this.getDomWrapper());\r\n    let { border, shadow } = this.properties;\r\n    if (border) {\r\n      // Rect wrapper\r\n      wrapper.border(border);\r\n    }\r\n    if (shadow) {\r\n      wrapper.shadow(shadow);\r\n    }\r\n  }\r\n\r\n  initBackground() {\r\n    let wrapper = Dom.of(this.getDomWrapper());\r\n    let bg = this.properties.bg;\r\n    if (bg) {\r\n      wrapper.background(bg);\r\n    }\r\n  }\r\n\r\n  initVisiblity() {\r\n    let wrapper = Dom.of(this.getDomWrapper());\r\n    let isHide = this.properties.settings.isHide;\r\n    wrapper.showHide(!isHide);\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   */\r\n  initProperties() {\r\n    this.initZIndex();\r\n    this.initCorner();\r\n    this.initOverflow();\r\n    this.initBorder();\r\n    this.initBackground();\r\n    this.initVisiblity();\r\n  }\r\n\r\n  /**\r\n   * 默认情况下，如果当前元素锁定了，就激活并选中\r\n   */\r\n  _onDBClick = (e) => {\r\n    this.onDBClick(e);\r\n  };\r\n\r\n  /**\r\n   * @protected\r\n   * @param e\r\n   */\r\n  onDBClick(e) {\r\n    e.stopPropagation();\r\n    let target = this._getUnlockedTarget(this._parent);\r\n    setFirstResponder(target);\r\n  }\r\n\r\n  _getUnlockedTarget = (target) => {\r\n    if (target) {\r\n      if (!target.isLockChildren) {\r\n        return this;\r\n      } else {\r\n        if (target._parent) {\r\n          if (!target._parent.isLockChildren) {\r\n            target.isLockChildren = false;\r\n            pushUnlockedView(target);\r\n            return this;\r\n          } else {\r\n            return target._getUnlockedTarget(target._parent);\r\n          }\r\n        } else {\r\n          target.isLockChildren = false;\r\n          pushUnlockedView(target);\r\n          return this;\r\n        }\r\n      }\r\n    } else {\r\n      return this;\r\n    }\r\n  };\r\n  _handleDragEnd = () => {\r\n    this.dragEnd();\r\n    let target = this.eventTarget;\r\n    if (!target) return;\r\n    Event.dispatch(component_dragend, target);\r\n  };\r\n  _handleDragMove = ({ deltaX, deltaY, mouseX, mouseY }) => {\r\n    window._mouse = { mouseX, mouseY };\r\n    this.setTransformWithSnap(deltaX, deltaY);\r\n  };\r\n\r\n  onDragStartBefore() {}\r\n\r\n  dragEnd() {\r\n    if (this._parent) {\r\n      this._parent.updateBlockTransform();\r\n    }\r\n  }\r\n\r\n  resizeEnd() {\r\n    if (this._parent) {\r\n      this._parent.updateBlockTransform();\r\n    }\r\n  }\r\n\r\n  rotationEnd() {\r\n    if (this._parent) {\r\n      this._parent.updateBlockTransform();\r\n    }\r\n  }\r\n\r\n  onDragStart = (options, e) => {\r\n    this.onDragStartBefore();\r\n    Event.dispatch(component_drag_before);\r\n    let pickedStatus = getViewPickedStatus();\r\n    let coveragePickedMode = getCoveragePickeMode();\r\n    let globalCanvasDraggable = getCanvasDraggable();\r\n    if (globalCanvasDraggable) return;\r\n    if (pickedStatus) {\r\n      Event.dispatch(component_picker_picked, this);\r\n      return;\r\n    }\r\n    if (coveragePickedMode !== 0) {\r\n      Event.dispatch(coverage_picked_width_mode, this);\r\n      return;\r\n    }\r\n    let target = this._getActiveTarget(this);\r\n    if (!target) return;\r\n    target._x = target.properties.transform.x;\r\n    target._y = target.properties.transform.y;\r\n    // 处于Block中的元素不能被加入分组\r\n    if (e.shiftKey && !target._parent) {\r\n      let lastView = getFirstResponder();\r\n      if (lastView && target != lastView && !lastView.properties.isTemporaryGroup) {\r\n        Event.dispatch(selection_group, [lastView, target]);\r\n        return;\r\n      } else if (lastView.properties.isTemporaryGroup) {\r\n        // Group,push\r\n        lastView.push(target);\r\n        return;\r\n      }\r\n    }\r\n    setFirstResponder(target);\r\n    this.eventTarget = target;\r\n  };\r\n  onMouseEnter = (e) => {\r\n    e.stopPropagation();\r\n    Event.dispatch(component_enter, this);\r\n  };\r\n  onMouseLeave = (e) => {\r\n    e.stopPropagation();\r\n    Event.dispatch(component_leave, this);\r\n  };\r\n  _getActiveTarget = (target) => {\r\n    if (getGroupId()[target.properties.id]) {\r\n      let group = getTemporaryGroup();\r\n      Event.dispatch(selection_group, group.group);\r\n      return group;\r\n    }\r\n    if (target._parent) {\r\n      if (!target._parent.isLockChildren) {\r\n        return target;\r\n      } else {\r\n        return target._parent._getActiveTarget(target._parent);\r\n      }\r\n    }\r\n    return target;\r\n  };\r\n\r\n  /**\r\n   * 内置的拖拽功能调用，使用对齐\r\n   * @param deltaX\r\n   * @param deltaY\r\n   */\r\n  setTransformWithSnap(deltaX, deltaY) {\r\n    let target = this.eventTarget;\r\n    if (!target) return;\r\n    let { width, height, rotation, x, y } = target.properties.transform;\r\n    let snap = getSnaplineConfig();\r\n    let positions = getComponentPosition();\r\n    target._x += deltaX;\r\n    target._y += deltaY;\r\n    let sx,\r\n      sy,\r\n      roundX = Math.round(target._x),\r\n      roundX1 = Math.round(target._x + width),\r\n      roundY = Math.round(target._y),\r\n      roundY1 = Math.round(target._y + height);\r\n    let guidesx = config.guides.x;\r\n    if (positions.x[roundX] || positions.x[roundX1] || guidesx[roundX] || guidesx[roundX1]) {\r\n      sx = target._x;\r\n      target._guidesX = target._x;\r\n    } else {\r\n      let rx = target._x % snap.x;\r\n      let spacex = Math.abs(target._x - target._guidesX);\r\n      sx = Math.round(rx === 0 ? target._x : spacex < 5 ? target._guidesX : target._x - rx);\r\n    }\r\n    if (positions.y[roundY] || positions.y[roundY1] || config.guides.y[roundY] || config.guides.y[roundY1]) {\r\n      sy = target._y;\r\n      target._guidesY = target._y;\r\n    } else {\r\n      let ry = target._y % snap.y;\r\n      let spacey = Math.abs(target._y - target._guidesY);\r\n      sy = Math.round(ry === 0 ? target._y : spacey < 5 ? target._guidesY : target._y - ry);\r\n    }\r\n    if (x !== sx || y !== sy) {\r\n      target._setTransform(sx, sy, width, height, rotation);\r\n      Event.dispatch(component_drag, target, { from: 'Draggable' });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 最新的坐标值，直接改变组件的位置，如果需要外部组件 应该触发组件的component_darg事件，已确保组件移动后，其附加功能同步\r\n   * @param x\r\n   * @param y\r\n   * @param width\r\n   * @param height\r\n   * @param rotation\r\n   * @private\r\n   */\r\n  _setTransform(x, y, width, height, rotation) {\r\n    let t = this.properties.transform;\r\n    let anchor = this.properties.anchor;\r\n    x = isUndefined(x) ? t.x : x;\r\n    y = isUndefined(y) ? t.y : y;\r\n    width = isUndefined(width) ? t.width : width;\r\n    height = isUndefined(height) ? t.height : height;\r\n    rotation = isUndefined(rotation) ? t.rotation : rotation;\r\n    let style = this.refs.container.style;\r\n    style.transform = `rotate(${rotation}deg)`;\r\n    style.width = `${width}px`;\r\n    style.height = `${height}px`;\r\n    style.left = x + 'px';\r\n    style.top = y + 'px';\r\n    t.x = x;\r\n    t.y = y;\r\n    t.width = width;\r\n    t.height = height;\r\n    t.rotation = rotation;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * 给外部直接改变组件 位置 的函数，需要同步当前内部想x y 值\r\n   * @param x\r\n   * @param y\r\n   * @param width\r\n   * @param height\r\n   * @param rotation\r\n   */\r\n  setTransform(x, y, width, height, rotation) {\r\n    this._x = x;\r\n    this._y = y;\r\n    this._setTransform(x, y, width, height, rotation);\r\n  }\r\n\r\n  setRotation(angle) {\r\n    let t = this.properties.transform;\r\n    this._setTransform(t.x, t.y, t.width, t.height, angle);\r\n  }\r\n\r\n  _setPropertyValueWithPath(path, value) {\r\n    path = path.split('.');\r\n    let object = this.properties;\r\n    while (path.length > 1) {\r\n      let key = path.shift();\r\n      object = object[key];\r\n    }\r\n    let key = path[0];\r\n    object[key] = value;\r\n  }\r\n\r\n  getParentRect() {\r\n    return this.parent ? this.parent.getOffsetRect() : { x: 0, y: 0, width: 0, height: 0, rotation: 0 };\r\n  }\r\n\r\n  getOffsetRect() {\r\n    let parent = this.parent;\r\n    let t = this.properties.transform;\r\n    let x = t.x,\r\n      y = t.y,\r\n      deg = t.rotation;\r\n    while (parent) {\r\n      let pt = parent.properties.transform;\r\n      x += pt.x;\r\n      y += pt.y;\r\n      deg += pt.rotation;\r\n      parent = parent.parent;\r\n    }\r\n    let rect = { x, y, width: t.width, height: t.height, rotation: deg };\r\n    return rect;\r\n  }\r\n\r\n  getOffsetTransform() {\r\n    let t = this.getOffsetRect();\r\n    return this._getTransformWithDegree(t.x, t.y, t.width, t.height, t.rotation);\r\n  }\r\n\r\n  getCurrentTransform() {\r\n    let t = this.properties.transform;\r\n    return this._getTransformWithDegree(t.x, t.y, t.width, t.height, t.rotation);\r\n  }\r\n\r\n  _getTransformWithDegree = (x, y, width, height, rotation) => {\r\n    let result = this.getCurrentMatrix({ x, y, width, height, rotation });\r\n    let xarr = [],\r\n      yarr = [];\r\n    let wc = width / 2,\r\n      hc = height / 2;\r\n    let coords = result.valueOf().forEach((item) => {\r\n      xarr.push(item[0] + wc);\r\n      yarr.push(item[1] + hc);\r\n    });\r\n    xarr = xarr.sort((a, b) => a - b);\r\n    yarr = yarr.sort((a, b) => a - b);\r\n    let x2 = xarr[0] + x;\r\n    let y2 = yarr[0] + y;\r\n    let width2 = Math.abs(xarr[xarr.length - 1] - xarr[0]);\r\n    let height2 = Math.abs(yarr[yarr.length - 1] - yarr[0]);\r\n    return { x: x2, y: y2, width: width2, height: height2, rotation };\r\n  };\r\n  getCurrentMatrix = ({ x, y, width, height, rotation }) => {\r\n    let a = (rotation / 180) * Math.PI;\r\n    let wc = width / 2;\r\n    let hc = height / 2;\r\n    let deg = new Matrix([\r\n      [Math.cos(a), Math.sin(a)],\r\n      [-Math.sin(a), Math.cos(a)],\r\n    ]);\r\n    let rect = new Matrix([\r\n      [-wc, hc],\r\n      [wc, hc],\r\n      [wc, -hc],\r\n      [-wc, -hc],\r\n    ]);\r\n    return deg.dot(rect.T()).T();\r\n  };\r\n  getCurrentPoints = (t, xBounce, yBounce) => {\r\n    console.log(xBounce, yBounce);\r\n    let matrix = this.getCurrentMatrix(t);\r\n    matrix = matrix.valueOf().map((item) => {\r\n      return [item[0] + (t.width / 2) * xBounce, item[1] - (t.height / 2) * yBounce];\r\n    });\r\n    return matrix;\r\n  };\r\n\r\n  // Hack\r\n  setColor(key, value) {\r\n    if (key === 'bg') {\r\n      Dom.of(this.getDomWrapper()).background(value);\r\n    } else if (key === 'border') {\r\n      let border = Object.assign({}, this.properties.border);\r\n      border.color = value;\r\n      Dom.of(this.getDomWrapper()).border(border);\r\n    } else if (key === 'shadow') {\r\n      let shadow = Object.assign({}, this.properties.shadow);\r\n      shadow.color = value;\r\n      Dom.of(this.getDomWrapper()).shadow(shadow);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.refs.container.removeEventListener('dblclick', this._onDBClick, false);\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   * @return {Node}\r\n   */\r\n  getDomWrapper() {\r\n    return this.refs.container;\r\n  }\r\n\r\n  getIndexDomWrapper() {\r\n    return this.refs.container;\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   * @return {null}\r\n   */\r\n  renderContent() {\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   * @return {*[]}\r\n   */\r\n  getContextMenu() {\r\n    return DEFAULT_CONTEXT_MENU();\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   */\r\n  getWrapperClassName() {\r\n    return 'aj-component';\r\n  }\r\n\r\n  getMouseEvent = () => {\r\n    if (!this.properties.isInMaster) {\r\n      return {\r\n        onMouseEnter: this.onMouseEnter,\r\n        onMouseLeave: this.onMouseLeave,\r\n        'data-uid': this.properties.id,\r\n      };\r\n    }\r\n    return {};\r\n  };\r\n\r\n  render() {\r\n    const { x, y, width, height, rotation } = this.properties.transform;\r\n    return (\r\n      <div\r\n        {...this.getMouseEvent()}\r\n        className={this.getWrapperClassName()}\r\n        style={{\r\n          position: 'absolute',\r\n          left: x,\r\n          top: y,\r\n          boxSizing: 'border-box',\r\n          transform: `rotate(${rotation}deg)`,\r\n          width,\r\n          height,\r\n        }}\r\n        ref={'container'}\r\n      >\r\n        {this.renderContent()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/1\r\n *  可根据当前的缩放来适应坐标\r\n *\r\n */\r\nimport { getScreeTransform } from './global';\r\n\r\nexport default class Draggable {\r\n  constructor(container, options = {}) {\r\n    this.options = options;\r\n    this.container = container;\r\n    // 当前元素位置\r\n    this.positionX = options.x || 0;\r\n    this.positionY = options.y || 0;\r\n    // 鼠标当前位置\r\n    this.mouseX = 0;\r\n    this.mouseY = 0;\r\n    // 鼠标上个点位置\r\n    this.lastX = 0;\r\n    this.lastY = 0;\r\n    // 鼠标点到元素边距离\r\n    this.pointX = 0;\r\n    this.pointY = 0;\r\n    // 与上次移动差量\r\n    this.deltaX = 0;\r\n    this.deltaY = 0;\r\n    this.snap = {\r\n      x: 1,\r\n      y: 1,\r\n    };\r\n    this._initEvents();\r\n  }\r\n\r\n  _initEvents = () => {\r\n    this.container.addEventListener('mousedown', this._mousedown, false);\r\n    this.container.addEventListener('touchstart', this._mousedown, false);\r\n  };\r\n  _mousedown = (e) => {\r\n    if (e.target.dataset.drag === 'false') return;\r\n    //if (e.button !== 0) return\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    let point = e.touches ? e.touches[0] : e;\r\n    this.lastX = point.pageX;\r\n    this.lastY = point.pageY;\r\n    let rect = this.container.getBoundingClientRect();\r\n    this.pointX = point.pageX - rect.left;\r\n    this.pointY = point.pageY - rect.top;\r\n    this.rect = {\r\n      width: rect.width,\r\n      height: rect.height,\r\n      x: rect.left,\r\n      y: rect.top,\r\n    };\r\n    document.addEventListener('mousemove', this._mousemove, false);\r\n    document.addEventListener('touchmove', this._mousemove, false);\r\n    document.addEventListener('mouseup', this._mouseup, false);\r\n    document.addEventListener('touchend', this._mouseup, false);\r\n    const { onDragStart } = this.options;\r\n    onDragStart &&\r\n      onDragStart(\r\n        {\r\n          mouseX: point.pageX,\r\n          mouseY: point.pageY,\r\n          pointX: this.pointX,\r\n          pointY: this.pointY,\r\n        },\r\n        point\r\n      );\r\n  };\r\n  _mousemove = (e) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    let point = e.touches ? e.touches[0] : e;\r\n    if (e.touches && e.touches.length > 1) {\r\n      // TODO Rotat Scale\r\n    }\r\n    this.mouseX = point.pageX;\r\n    this.mouseY = point.pageY;\r\n    let deltaX = this.mouseX - this.lastX;\r\n    let deltaY = this.mouseY - this.lastY;\r\n    let scale = getScreeTransform().scale;\r\n    this.deltaX = deltaX / scale;\r\n    this.deltaY = deltaY / scale;\r\n    this.positionX += this.deltaX;\r\n    this.positionY += this.deltaY;\r\n    const coords = {\r\n      pointX: point.pageX - this.rect.x,\r\n      pointY: point.pageY - this.rect.y,\r\n      mouseX: point.pageX,\r\n      mouseY: point.pageY,\r\n      x: this.positionX,\r\n      y: this.positionY,\r\n      deltaX: this.deltaX,\r\n      deltaY: this.deltaY,\r\n      realDeltaX: deltaX,\r\n      realDeltaY: deltaY,\r\n    };\r\n    const { onDragMove } = this.options;\r\n    //  限制在容器内部\r\n    if (this.options.pointLimit) {\r\n      if (coords.pointX < 0) coords.pointX = 0;\r\n      else if (coords.pointX > this.rect.width) coords.pointX = this.rect.width;\r\n      if (coords.pointY < 0) coords.pointY = 0;\r\n      else if (coords.pointY > this.rect.height) coords.pointY = this.rect.height;\r\n    }\r\n    onDragMove && onDragMove(coords, point);\r\n    this.lastX = this.mouseX;\r\n    this.lastY = this.mouseY;\r\n  };\r\n  _mouseup = (e) => {\r\n    document.removeEventListener('mousemove', this._mousemove, false);\r\n    document.removeEventListener('touchmove', this._mousemove, false);\r\n    document.removeEventListener('mouseup', this._mouseup, false);\r\n    document.removeEventListener('touchend', this._mouseup, false);\r\n    const { onDragEnd } = this.options;\r\n    onDragEnd && onDragEnd();\r\n  };\r\n}\r\n","import jQuery from 'jquery';\r\n\r\nexport const DEFAULT_COLOR = 'rgba(221,221,221,1)';\r\n/**\r\n *  created by yaojun on 2018/12/1\r\n *\r\n */\r\nexport default class ViewProperties {\r\n  constructor() {\r\n    this.type = 'view';\r\n    this.alias = '矩形';\r\n    this.zIndex = -1;\r\n    this.id = 1;\r\n    this.selected = false;\r\n    this.transform = {\r\n      x: 0,\r\n      y: 0,\r\n      width: 100,\r\n      height: 200,\r\n      rotation: 0,\r\n    };\r\n    this.interactions = [];\r\n    this.animations = {};\r\n    // resize  默认为全部\r\n    // null = ['rotation', 'tl', 'tm', 'tr', 'r', 'br', 'bm', 'bl', 'l', 'borderTop', 'borderRight', 'borderBottom', 'borderLeft']\r\n    this.settings = {\r\n      fixation: false,\r\n      hover: true,\r\n      resize: null,\r\n      ratio: false,\r\n      isHide: false,\r\n      overflow: '', // auto | scroll-x | scroll-y | hidden\r\n    };\r\n    this.border = {\r\n      width: 0,\r\n      color: 'rgba(224,224,224,1)',\r\n      style: 'solid', // 为none表示不能修改\r\n    };\r\n    this.corner = {\r\n      topLeft: 0,\r\n      topRight: 0,\r\n      bottomLeft: 0,\r\n      bottomRight: 0,\r\n    };\r\n    this.shadow = {\r\n      blur: 0,\r\n      spread: 0,\r\n      offsetX: 0,\r\n      offsetY: 0,\r\n      color: 'rgba(255,255,255,1)',\r\n      type: 'outset', // inset | outset\r\n    };\r\n    this.bg = 'rgba(255,255,255,0)';\r\n  }\r\n\r\n  /**\r\n   * @abstract\r\n   */\r\n  init() {}\r\n\r\n  clone() {\r\n    return new this.constructor(JSON.parse(this.toString()));\r\n  }\r\n\r\n  toJSON() {\r\n    let result = {};\r\n    for (let key in this) {\r\n      if (SerializableKeys[key]) {\r\n        if (key === 'items') {\r\n          result[key] = this.items.map((item) => JSON.parse(item.toString()));\r\n        } else {\r\n          let obj = this[key];\r\n          if (jQuery.isPlainObject(obj)) {\r\n            result[key] = jQuery.extend(true, {}, obj);\r\n          } else {\r\n            result[key] = obj;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this.toJSON());\r\n  }\r\n}\r\n\r\nexport class Rect extends ViewProperties {\r\n  constructor() {\r\n    super();\r\n    this.border.width = 1;\r\n    this.border.color = DEFAULT_COLOR;\r\n    this.bg = DEFAULT_COLOR;\r\n  }\r\n}\r\n\r\nexport class Line extends ViewProperties {\r\n  constructor() {\r\n    super();\r\n    this.type = 'line';\r\n    this.alias = '直线';\r\n    this.settings.resize = ['l', 'r', 'rotation'];\r\n    this.settings.disableH = true;\r\n    this.transform.height = 1;\r\n    this.transform.width = 200;\r\n    this.settings.hover = false;\r\n    this.border.width = 'none';\r\n    delete this.shadow;\r\n    delete this.corner;\r\n    delete this.bg;\r\n  }\r\n}\r\n\r\nexport class Triangle extends ViewProperties {\r\n  constructor() {\r\n    super();\r\n    this.type = 'triangle';\r\n    this.alias = '三角';\r\n    this.transform.width = 200;\r\n    this.border.width = 1;\r\n    delete this.shadow;\r\n    delete this.corner;\r\n  }\r\n}\r\n\r\nexport class Curve extends ViewProperties {\r\n  constructor() {\r\n    super();\r\n    this.type = 'curve';\r\n    this.alias = '曲线';\r\n    this.transform.width = 200;\r\n    this.transform.height = 100;\r\n    this.border.width = 1;\r\n    // 二次贝塞尔曲线控制点\r\n    this.curve = {\r\n      x: 100,\r\n      y: 10,\r\n    };\r\n    delete this.shadow;\r\n    delete this.corner;\r\n  }\r\n}\r\n\r\nexport class Circle extends ViewProperties {\r\n  constructor() {\r\n    super();\r\n    this.type = 'curve';\r\n    this.alias = '圆';\r\n    this.transform.width = 150;\r\n    this.transform.height = 150;\r\n    this.settings.ratio = true;\r\n    this.border.width = 1;\r\n    this.border.style = 'none';\r\n    // stroke-dasharray , stroke-dashoffset\r\n    this.circle = {\r\n      array: 150 * Math.PI,\r\n      offset: 0,\r\n    };\r\n    delete this.shadow;\r\n    delete this.corner;\r\n    delete this.bg;\r\n  }\r\n}\r\n\r\nexport class Bubble extends ViewProperties {\r\n  constructor() {\r\n    super();\r\n    this.type = 'bubble';\r\n    this.alias = '气泡';\r\n    this.transform.width = 400;\r\n    this.border.width = 1;\r\n    this.bubble = {\r\n      left: 20,\r\n    };\r\n    delete this.shadow;\r\n    delete this.corner;\r\n  }\r\n}\r\n\r\nconst SerializableKeys = {\r\n  zIndex: 1,\r\n  id: 1,\r\n  gid: 1,\r\n  alias: 1,\r\n  type: 1,\r\n  transform: 1,\r\n  interactions: 1,\r\n  animations: 1,\r\n  border: 1,\r\n  shadow: 1,\r\n  corner: 1,\r\n  bg: 1,\r\n  items: 1,\r\n  settings: 1,\r\n  selected: 1,\r\n  icon: 1,\r\n  font: 1,\r\n  align: 1,\r\n  fontData: 1,\r\n  fontContent: 1,\r\n  fontStyle: 1,\r\n  decorator: 1,\r\n  spacing: 1,\r\n  image: 1,\r\n  bubble: 1,\r\n  selectOptions: 1,\r\n  triangle: 1,\r\n  curve: 1,\r\n  circle: 1,\r\n  masterId: 1,\r\n};\r\nexport const ViewIconMaps = {\r\n  switch: 'switch',\r\n  image: 'image',\r\n  rect: 'rect',\r\n  text: 'text',\r\n  group: 'group',\r\n  view: 'rect',\r\n  input: 'Input',\r\n  map: 'map',\r\n  line: 'line',\r\n  textarea: 'textarea',\r\n  select: 'select',\r\n  checkbox: 'checkboxlist',\r\n  radio: 'radio',\r\n  icon: 'favorite',\r\n  button: 'anniu',\r\n  radiogroup: 'OBARadioGroup_sys_iconA2',\r\n  checkboxgroup: 'group',\r\n  buttongroup: '',\r\n  slider: 'slider',\r\n  range: 'slider1',\r\n};\r\n","import ViewProperties from './base';\r\n\r\nexport default class GroupProperties extends ViewProperties {\r\n  constructor() {\r\n    super();\r\n    this.type = 'group';\r\n    this.alias = '分组';\r\n  }\r\n}\r\n\r\nexport class BlockProperties extends ViewProperties {\r\n  constructor() {\r\n    super();\r\n    this.type = 'block';\r\n    this.alias = 'Block';\r\n  }\r\n}\r\n\r\nexport class MasterProperties extends ViewProperties {\r\n  constructor() {\r\n    super();\r\n    this.type = 'master';\r\n    this.alias = 'Master';\r\n    this.masterId = '';\r\n  }\r\n}\r\n","import { createViewFrom, updateTreeIn } from '@/lib/properties/types';\r\nimport { getPATHES } from '@/lib/global/instance';\r\nimport { isArray } from '@/lib/util/helper';\r\n\r\nexport const proxyPropsChange = (stateitems, target, cb) => {\r\n  let items = isArray(target) ? target : target.properties.isTemporaryGroup ? target.getItems() : [target.properties];\r\n  items.forEach((item) => {\r\n    stateitems = updateTreeIn(stateitems, getPATHES()[item.id].split(','), (view) => {\r\n      return cb(createViewFrom(view));\r\n    });\r\n  });\r\n  return stateitems;\r\n};\r\n/**\r\n * 批量修改目标属性，如果是block 将遍历其所有子元素\r\n * @param {Array<ViewProperties>} stateitems 当前状态\r\n * @param {ViewController} target 需要修改的目标\r\n * @param {String | Function<ViewProperties>} key 目标属性\r\n * @param { any | Function<ViewProperties>:any } value  新的值\r\n * @return {Array<ViewProperties>} 返回一个全新的状态\r\n */\r\nexport const proxyAllPropsChange = (stateitems, target, key, value) => {\r\n  let items = isArray(target) ? target : target.properties.isTemporaryGroup ? target.getItems() : [target.properties];\r\n  items.forEach((item) => {\r\n    stateitems = updateTreeIn(stateitems, getPATHES()[item.id].split(','), (view) => {\r\n      view = createViewFrom(view);\r\n      if (key) {\r\n        if (typeof key == 'function') {\r\n          view = key(view);\r\n        } else {\r\n          view[key] = typeof value == 'function' ? value(view) : value;\r\n        }\r\n      }\r\n      if (view.type == 'block') {\r\n        view.items = proxyBlockViewChildrenProps(view);\r\n      }\r\n      return view;\r\n    });\r\n  });\r\n\r\n  function proxyBlockViewChildrenProps(view) {\r\n    return view.items.map((item) => {\r\n      item = createViewFrom(item);\r\n      if (key) {\r\n        if (typeof key == 'function') {\r\n          item = key(item);\r\n        } else {\r\n          item[key] = typeof value == 'function' ? value(item) : value;\r\n        }\r\n      }\r\n      if (item.type == 'block') {\r\n        item.items = proxyBlockViewChildrenProps(item);\r\n      }\r\n      return item;\r\n    });\r\n  }\r\n\r\n  return stateitems;\r\n};\r\n/**\r\n * 删除状态中所有给定id的元素\r\n * @param stateItems\r\n * @param ids\r\n * @param clearLeafBlock 默认情况下如果只有一个子节点了，就删除当前当前block\r\n * @return {*}\r\n */\r\nexport const proxyDeleteItems = (stateItems, ids, clearLeafBlock = true) => {\r\n  let path = getPATHES()[ids[0]];\r\n  let pathes = path.split(',');\r\n  if (pathes.length == 1) {\r\n    // 当前元素在第一层，直接删除\r\n    return stateItems.filter((item) => ids.indexOf(item.id) == -1);\r\n  }\r\n  let index = pathes.pop();\r\n  // 嵌套层级时，找到该元素的block元素，\r\n  return updateTreeIn(stateItems, pathes, (block) => {\r\n    block = createViewFrom(block);\r\n    block.items = block.items.filter((item) => ids.indexOf(item.id) == -1);\r\n    if (block.items.length == 1 && clearLeafBlock) {\r\n      return block.items[0];\r\n    } else if (block.items.length == 0) {\r\n      return null;\r\n    }\r\n    return block;\r\n  });\r\n};\r\nexport const proxyTransformOffset = (view, x, y, dindex, rotation) => {\r\n  view.transform.x += x;\r\n  view.transform.y += y;\r\n  if (dindex !== void 0) {\r\n    view.zIndex += dindex;\r\n  }\r\n  if (rotation !== void 0) {\r\n    view.transform.rotation += rotation;\r\n  }\r\n  if (view.type == 'block') {\r\n    view.items.forEach((item) => {\r\n      proxyTransformOffset(item, x, y, dindex, rotation);\r\n    });\r\n  }\r\n};\r\n","let GroupId = {};\r\n\r\nexport const getGroupId = () => {\r\n  return GroupId;\r\n};\r\n/**\r\n * 在当前分组中的组件id，用于判断该组件是否被选取\r\n * @param ids\r\n */\r\nexport const setGroupId = (ids) => {\r\n  GroupId = ids;\r\n};\r\n","import { Http } from '@/api/config'\r\n\r\nlet MasterStore = {}\r\nlet MasterCache = null\r\nwindow.MasterStore = MasterStore\r\nexport const fetchMaster = (send) => {\r\n  if (MasterCache) return Promise.resolve(MasterCache)\r\n  return Http.post('project/master', send).then(async (res) => {\r\n    let docs = res.data.docs\r\n    for (let i = 0; i < docs.length; i += 1) {\r\n      let item = docs[i]\r\n      MasterStore[item._id] = item\r\n      let image = new Image()\r\n      image.src = item.content.image\r\n      item.content.Image = image\r\n    }\r\n    MasterCache = res\r\n    return res\r\n  })\r\n}\r\nexport const getMasterFromStore = (id) => {\r\n  return MasterStore[id]\r\n}\r\nexport const setMasterNodes = (id, nodes) => {\r\n  MasterStore[id].content.data.items = nodes\r\n}\r\nexport const getMasterSnapshootFromStore = (id) => {\r\n  return MasterStore[id].content.Image\r\n}\r\nexport const setMasterToStore = (data) => {\r\n  if (typeof data === 'string') {\r\n    delete MasterStore[data]\r\n    let index = MasterCache.data.docs.findIndex((item) => item._id === data)\r\n    MasterCache.data.docs.splice(index, 1)\r\n  } else {\r\n    MasterStore[data._id] = data\r\n    if (MasterCache) {\r\n      let docs = MasterCache.data.docs\r\n      if (docs.findIndex((item) => item._id == data._id) == -1) {\r\n        docs.push(data)\r\n      }\r\n    }\r\n  }\r\n}\r\n","module.exports = __webpack_public_path__ + \"static/media/app-icon.99a62daa.png\";","const EPSILOW = 1e-8;\r\n\r\n/**\r\n *  ||u|| 表示向量u的求模，或者向量的大小\r\n *  vector + vector 向量的加法，两个向量的所有分量相加，返回一个新的向量 [1,2]+[3,4] = [4,6]\r\n *  vector - vector 向量的减法，两个向量的所有分量相减，返回一个新的向量 [1,2]+[3,4] = [-2,-2]\r\n *  vector * k 向量乘以标量，向量的每个一个分量乘以标量，返回一个新的向量 [1,2] * 3 = [3,6]\r\n *  vector * vector 向量乘以向量，又称为点乘，返回一个标量k，[1,2]  * [3,4] =1*3 +2 * 4 = 11\r\n *      ----------------------------------------------------\r\n *      - 推荐系统\r\n *      - k > 0 表示两个向量相似\r\n *      - k < 0 表示两个向量相反\r\n *      - k ==0 表示两个向量垂直 。常用语相似度判断在推荐系统中常用\r\n *      ----------------------------------------------------\r\n *      - 几何计算\r\n *      - 计算夹角  cosθ = (v1 * v2 ) /||v1|| * ||v2||  :number\r\n *      - 计算投影长度 d = (v1 * v2 ) / ||v2|| = cosθ* ||v1||  : number\r\n *      - 计算投影点坐标 P = d * v2.nonamlize()   :Vector\r\n *  norm : 求模  所有维度的开平方根 √v[0]^2 +v[1]^2 +...v[n]^2 :number\r\n *  normalize: 单位向量 v * 1/norm :Vector\r\n */\r\nclass Vector {\r\n  static zero(dim) {\r\n    return new Vector(new Array(dim).fill(0));\r\n  }\r\n\r\n  constructor(lst) {\r\n    this._values = lst;\r\n  }\r\n\r\n  valueOf() {\r\n    return JSON.parse(JSON.stringify(this._values));\r\n  }\r\n\r\n  /**\r\n   * 所有维度（分量）的开平方根\r\n   * 求模，向量大小 ||a^2+b^2+c^2+...n^2||\r\n   * @return {number}\r\n   */\r\n  norm() {\r\n    return Math.sqrt(this._values.map((item) => Math.pow(item, 2)).reduce((a, b) => a + b));\r\n  }\r\n\r\n  /**\r\n   *求单位向量, 向量 *  大小的倒数\r\n   * @return {Vector}\r\n   */\r\n  normalize() {\r\n    let n = this.norm();\r\n    if (n < EPSILOW) throw Error(`[ Normalize Error] ${this.toString()} can not be normalize.`);\r\n    return this.div(n);\r\n  }\r\n\r\n  toString() {\r\n    return `Vector(${this._values.join(', ')})`;\r\n  }\r\n\r\n  get length() {\r\n    return this._values.length;\r\n  }\r\n\r\n  // 向量加法\r\n  /**\r\n   * 与一个新的向量的每一个分量相加\r\n   * @param vector\r\n   * @return {Vector}\r\n   */\r\n  add(vector) {\r\n    return new Vector(vector._values.map((item, index) => item + this._values[index]));\r\n  }\r\n\r\n  /**\r\n   * 减去向量中每个分量\r\n   * @param vector\r\n   * @return {Vector}\r\n   */\r\n  sub(vector) {\r\n    return new Vector(vector._values.map((item, index) => item - this._values[index]));\r\n  }\r\n\r\n  /**\r\n   * 向量乘以一个标量，向量里面的每个分量 乘以标量\r\n   * @param number\r\n   * @return {Vector}\r\n   */\r\n  mul(number) {\r\n    return new Vector(this._values.map((item) => item * number));\r\n  }\r\n\r\n  /**\r\n   * 1.点乘在推荐系统中常用，判断相似度 。\r\n   *  - =0 , 表示为两个向量为垂直关系 ,没有关系\r\n   *  - >0 , 夹角为锐角, 越大越相似\r\n   *  - <0 , 夹角为钝角，相悖\r\n   * 2.几何计算\r\n   *  - 夹角 dot() / ||vector||\r\n   *  - 投影向量的距离 (dot() / ||vector||) :number\r\n   *  - 投影点坐标 (dot() / ||vector||) * normalize() :Vector\r\n   *\r\n   * @param vector\r\n   * @return {number}\r\n   */\r\n  dot(vector) {\r\n    if (vector instanceof Vector && this.length === vector.length) {\r\n      return this._values.map((item, index) => item * vector._values[index]).reduce((a, b) => a + b);\r\n    }\r\n    throw Error('The param `vector` must instance of Vector');\r\n  }\r\n\r\n  // 向量数量除法\r\n  div(number) {\r\n    return this.mul(1 / number);\r\n  }\r\n\r\n  // 取正\r\n  pos() {\r\n    return this.mul(1);\r\n  }\r\n\r\n  // 取负\r\n  neg() {\r\n    return this.mul(-1);\r\n  }\r\n\r\n  get(index) {\r\n    return this._values[index];\r\n  }\r\n}\r\n\r\nexport default Vector;\r\n","import Vector from './Vector';\r\n\r\n/**\r\n *\r\n */\r\nclass Matrix {\r\n  constructor(list2d) {\r\n    this._values = list2d;\r\n  }\r\n\r\n  /**\r\n   *  0矩阵\r\n   * @param shape\r\n   * @return {Matrix}\r\n   */\r\n  static zeros(shape) {\r\n    return new Matrix(new Array(shape[0]).fill(null).map((item) => new Array(shape[1]).fill(0)));\r\n  }\r\n\r\n  /**\r\n   * 单位矩阵,方阵，I*A=A  A*I=A,相当于数字系统中1的作用\r\n   * @param n n*n\r\n   * 返回一个 n* n 的矩阵\r\n   */\r\n  static identity(n) {\r\n    return new Matrix(\r\n      new Array(n).fill(null).map((_, rowIndex) => {\r\n        return new Array(n).fill(0).map((_, colIndex) => {\r\n          return rowIndex === colIndex ? 1 : 0;\r\n        });\r\n      })\r\n    );\r\n  }\r\n\r\n  valueOf() {\r\n    return JSON.parse(JSON.stringify(this._values));\r\n  }\r\n\r\n  toString() {\r\n    return 'Matrix ( ' + this._values.map((item) => item.join(' ')).join(', ') + ' )';\r\n  }\r\n\r\n  rows() {\r\n    return this._values.length;\r\n  }\r\n\r\n  cols() {\r\n    return this._values[0].length;\r\n  }\r\n\r\n  shape() {\r\n    return [this.rows(), this.cols()];\r\n  }\r\n\r\n  size() {\r\n    return this.rows() * this.cols();\r\n  }\r\n\r\n  get(pos) {\r\n    return this._values[pos[0]][pos[1]];\r\n  }\r\n\r\n  rowVector(row) {\r\n    return new Vector(this._values[row].slice(0));\r\n  }\r\n\r\n  colVector(col) {\r\n    let v = new Array(this.rows()).fill(0);\r\n    this._values.forEach((item, index) => {\r\n      v[index] = item[col];\r\n    });\r\n    return new Vector(v);\r\n  }\r\n\r\n  _calc(matrix, id) {\r\n    return new Matrix(\r\n      this._values.map((item, row) => {\r\n        return item.map((item, col) => item + matrix._values[row][col] * id);\r\n      })\r\n    );\r\n  }\r\n\r\n  add(matrix) {\r\n    return this._calc(matrix, 1);\r\n  }\r\n\r\n  sub(matrix) {\r\n    return this._calc(matrix, -1);\r\n  }\r\n\r\n  mul(number) {\r\n    return new Matrix(\r\n      this._values.map((item, row) => {\r\n        return item.map((item, col) => item * number);\r\n      })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 矩阵乘法，和 向量 相乘返回一个新的向量，和矩阵相乘返回一个新的举证\r\n   * @param v\r\n   */\r\n  dot(v) {\r\n    if (v instanceof Vector && this.cols() === v.length) {\r\n      return new Vector(\r\n        new Array(v.length).fill(null).map((item, index) => {\r\n          return this.rowVector(index).dot(v);\r\n        })\r\n      );\r\n    }\r\n    if (v instanceof Matrix && this.cols() === v.rows()) {\r\n      let cols = v.cols(),\r\n        rows = v.rows();\r\n      let newMatrix = Matrix.zeros([rows, cols]);\r\n      let v1;\r\n      for (let i = 0; i < cols; i++) {\r\n        v1 = this.dot(v.colVector(i));\r\n        for (let j = 0; j < rows; j++) {\r\n          newMatrix._values[j][i] = v1.get(j);\r\n        }\r\n      }\r\n      return newMatrix;\r\n    }\r\n    throw Error('expected a Vector or Matrix but got ' + typeof v);\r\n  }\r\n\r\n  get(row, col) {\r\n    return this._values[row][col];\r\n  }\r\n\r\n  set(row, col, value) {\r\n    this._values[row][col] = value;\r\n  }\r\n\r\n  div(number) {\r\n    return this.mul(1 / number);\r\n  }\r\n\r\n  T() {\r\n    return new Matrix(\r\n      new Array(this.cols()).fill(null).map((_, colIndex) => {\r\n        return new Array(this.rows()).fill(0).map((_, rowIndex) => {\r\n          return this.get(rowIndex, colIndex);\r\n        });\r\n      })\r\n    );\r\n  }\r\n\r\n  isSquare() {\r\n    return this.cols() === this.rows();\r\n  }\r\n}\r\n\r\nexport function getPoints({ x, y, width, height, rotation }) {\r\n  let a = (rotation * Math.PI) / 180;\r\n  let wc = width / 2;\r\n  let hc = height / 2;\r\n  let deg = new Matrix([\r\n    [Math.cos(a), Math.sin(a)],\r\n    [-Math.sin(a), Math.cos(a)],\r\n  ]);\r\n  let rect = new Matrix([\r\n    [-wc, hc],\r\n    [wc, hc],\r\n    [wc, -hc],\r\n    [-wc, -hc],\r\n  ]);\r\n\r\n  return deg\r\n    .dot(rect.T())\r\n    .T()\r\n    .valueOf()\r\n    .map((item) => {\r\n      return { x: item[0] + wc + x, y: -(item[1] - hc) + y };\r\n    });\r\n}\r\nexport default Matrix;\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport './iconfont.css'\r\n\r\n\r\n\r\nexport default class Icon extends React.Component {\r\n    static propTypes = {\r\n        type : PropTypes.string,\r\n        onClick : PropTypes.func,\r\n        rotation : PropTypes.number,\r\n        className : PropTypes.string,\r\n        style : PropTypes.object\r\n    }\r\n    \r\n    \r\n    render(){\r\n        const {type, onClick, rotation = 0, className = '', style = {}} = this.props\r\n        return <i style={{transform : `rotate(${rotation}deg)`, ...style}} onClick={onClick}\r\n                  className={`iconfont icon-${type} ${className}`}/>\r\n    }\r\n}","/**\r\n *  created by yaojun on 2019/1/24\r\n *\r\n */\r\n\r\nimport React, { Fragment } from 'react';\r\nimport Types from 'prop-types';\r\nimport './Poplist.scss';\r\n\r\nexport default class Poplist extends React.Component {\r\n  static propTypes = {\r\n    className: Types.string,\r\n    style: Types.object,\r\n    children: Types.any.isRequired,\r\n    overlay: Types.any.isRequired,\r\n  };\r\n\r\n  state = {\r\n    show: false,\r\n    top: 0,\r\n    left: 0,\r\n  };\r\n\r\n  handleToggleDisplay = () => {\r\n    let rect = this.refs.emitter.getBoundingClientRect();\r\n    this.setState({ show: true, left: 0, top: rect.height - 1 });\r\n  };\r\n\r\n  handleMouseLeave = () => {\r\n    this.setState({ show: false });\r\n  };\r\n\r\n  render() {\r\n    const { children, overlay } = this.props;\r\n    return (\r\n      <span onMouseLeave={this.handleMouseLeave} onMouseEnter={this.handleToggleDisplay} className={'aj-poplist'}>\r\n        <span ref={'emitter'} className={'aj-poplist_emitter'}>\r\n          {children}\r\n        </span>\r\n        {this.state.show && (\r\n          <div style={{ top: this.state.top }} className={'aj-poplist_list'}>\r\n            {overlay}\r\n          </div>\r\n        )}\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nexport class Menu extends React.Component {\r\n  static propTypes = {\r\n    onClick: Types.func,\r\n    style: Types.object,\r\n    children: Types.any,\r\n  };\r\n\r\n  handleClick = (e) => {\r\n    let target = this.findMenuItem(e);\r\n    if (target) {\r\n      let disabled = target.dataset.disabled;\r\n      if (disabled !== 'true') this.props.onClick(target.dataset.id);\r\n    }\r\n  };\r\n\r\n  findMenuItem = (e) => {\r\n    let parent = e.target;\r\n    while (parent) {\r\n      if (parent.dataset && parent.dataset.id) return parent;\r\n      parent = parent.parentNode;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let { children } = this.props;\r\n    return (\r\n      <div onClick={this.handleClick} style={this.props.style} className={'aj-menus'}>\r\n        {typeof children === 'function' ? children() : children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport class MenuItem extends React.PureComponent {\r\n  static propTypes = {\r\n    label: Types.any,\r\n    extra: Types.any,\r\n    disabled: Types.bool,\r\n    action: Types.string.isRequired,\r\n  };\r\n\r\n  getClassName = () => {\r\n    return 'aj-menus_item ' + (this.props.disabled ? 'disabled' : '');\r\n  };\r\n\r\n  render() {\r\n    const { label, extra, action, disabled } = this.props;\r\n    return (\r\n      <div data-disabled={disabled} data-id={action} className={this.getClassName()}>\r\n        <span className={'aj-menus_item-label'}>{label}</span>\r\n        <span className={'aj-menus_item-extra'}>{extra}</span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/16\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport Icon from '../Icon';\r\nimport PropTypes from 'prop-types';\r\nimport RectDOM from 'react-dom';\r\n\r\nexport default class IconText extends React.PureComponent {\r\n  static propTypes = {\r\n    icon: PropTypes.string.isRequired,\r\n    children: PropTypes.any,\r\n    className: PropTypes.string,\r\n    style: PropTypes.object,\r\n    onClick: PropTypes.func,\r\n  };\r\n\r\n  static defaultProps = () => {\r\n    onclick: () => {};\r\n  };\r\n\r\n  render() {\r\n    const { icon, children, className, style, onClick } = this.props;\r\n\r\n    return (\r\n      <div onClick={onClick} className={className} style={style}>\r\n        <Icon className={'icon-text_icon'} type={icon} />\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport class ImageText extends React.PureComponent {\r\n  static propTypes = {\r\n    image: PropTypes.string.isRequired,\r\n    children: PropTypes.any,\r\n    className: PropTypes.string,\r\n    style: PropTypes.object,\r\n  };\r\n\r\n  render() {\r\n    const { image, children, className, style } = this.props;\r\n\r\n    return (\r\n      <div className={className} style={style}>\r\n        <img style={{ pointerEvents: 'none' }} src={image} />\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/24\r\n *\r\n */\r\nimport React from 'react';\r\nimport Icon from '../lib/Icon';\r\nimport Poplist, { Menu, MenuItem } from '../lib/ui/Poplist';\r\nimport { getFirstResponder } from '../lib/global/instance';\r\nimport { component_active, component_alignment, component_inactive } from '../lib/util/actions';\r\nimport Event from '../lib/Base/Event';\r\nimport { getFormatShortcutsWithAction, KeyboardActionNameMap } from '../lib/service/KeyboradHandler';\r\nimport IconText from '@/lib/ui/IconText';\r\n\r\nconst Alignment = [\r\n  {\r\n    action: 'alignment_left',\r\n    label: (\r\n      <span>\r\n        <Icon type={'zuoduiqi'} />\r\n        左对齐\r\n      </span>\r\n    ),\r\n    extra: getFormatShortcutsWithAction(KeyboardActionNameMap.ALIGNMENT_LEFT),\r\n  },\r\n  {\r\n    action: 'alignment_center',\r\n    label: (\r\n      <span>\r\n        <Icon type={'juzhongduiqi'} />\r\n        水平居中\r\n      </span>\r\n    ),\r\n    extra: getFormatShortcutsWithAction(KeyboardActionNameMap.ALIGNMENT_CENTER),\r\n  },\r\n  {\r\n    action: 'alignment_right',\r\n    label: (\r\n      <span>\r\n        <Icon type={'youduiqi'} />\r\n        右对齐\r\n      </span>\r\n    ),\r\n    extra: getFormatShortcutsWithAction(KeyboardActionNameMap.ALIGNMENT_RIGHT),\r\n    line: 1,\r\n  },\r\n  {\r\n    action: 'alignment_top',\r\n    label: (\r\n      <span>\r\n        <Icon type={'shangduiqi'} />\r\n        顶对齐\r\n      </span>\r\n    ),\r\n    extra: getFormatShortcutsWithAction(KeyboardActionNameMap.ALIGNMENT_TOP),\r\n    disabled: false,\r\n  },\r\n  {\r\n    action: 'alignment_middle',\r\n    label: (\r\n      <span>\r\n        <Icon type={'juzhongduiqi1'} />\r\n        垂直居中\r\n      </span>\r\n    ),\r\n    extra: getFormatShortcutsWithAction(KeyboardActionNameMap.ALIGNMENT_MIDDLE),\r\n  },\r\n  {\r\n    action: 'alignment_bottom',\r\n    label: (\r\n      <span>\r\n        <Icon type={'xiaduiqi-2'} />\r\n        底对齐\r\n      </span>\r\n    ),\r\n    extra: getFormatShortcutsWithAction(KeyboardActionNameMap.ALIGNMENT_BOTTOM),\r\n    line: 1,\r\n  },\r\n  {\r\n    action: 'alignment_x',\r\n    label: (\r\n      <span>\r\n        <Icon type={'shuipingfenbu'} />\r\n        水平分布\r\n      </span>\r\n    ),\r\n  },\r\n  {\r\n    action: 'alignment_y',\r\n    label: (\r\n      <span>\r\n        <Icon type={'chuizhifenbu'} />\r\n        垂直分布\r\n      </span>\r\n    ),\r\n  },\r\n];\r\n\r\nclass ActionWrapper extends React.Component {\r\n  state = {\r\n    disabled: true,\r\n  };\r\n\r\n  componentWillMount() {\r\n    Event.listen(component_active, this.handleActive);\r\n    Event.listen(component_inactive, this.handleInactive);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(component_active, this.handleActive);\r\n    Event.destroy(component_inactive, this.handleInactive);\r\n  }\r\n\r\n  handleActive = () => {\r\n    this.setState({ disabled: false });\r\n    this.handleChange(false);\r\n  };\r\n  handleInactive = () => {\r\n    this.setState({ disabled: true });\r\n    this.handleChange(true);\r\n  };\r\n  handleChange = (disabled) => {\r\n    this.props.onChange(disabled);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <IconText className={`header_action-item_sub ${this.state.disabled ? 'disabled' : ''}`} icon={'youduiqi'}>\r\n        对齐\r\n      </IconText>\r\n    );\r\n  }\r\n}\r\n\r\nexport default class HeaderAlignment extends React.Component {\r\n  handleAlignmentClick = (key) => {\r\n    if (this.disabled === false) Event.dispatch(component_alignment, key);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <span className={'header_action-item'}>\r\n        <Poplist\r\n          overlay={\r\n            <Menu onClick={this.handleAlignmentClick} style={{ width: 180 }}>\r\n              {() =>\r\n                Alignment.map((item) => {\r\n                  let current = getFirstResponder();\r\n                  let disabled = !current;\r\n                  let action = item.action;\r\n                  if (!disabled) {\r\n                    if (action === 'alignment_x' || action === 'alignment_y') {\r\n                      disabled = !(\r\n                        (current.properties.isTemporaryGroup && current.group.length > 2) ||\r\n                        (current.properties.type === 'group' && current.properties.items && current.properties.items.length > 1)\r\n                      );\r\n                    }\r\n                  }\r\n                  return <MenuItem disabled={disabled} action={action} label={item.label} extra={item.extra} key={item.action} />;\r\n                })\r\n              }\r\n            </Menu>\r\n          }\r\n        >\r\n          <ActionWrapper onChange={(disabled) => (this.disabled = disabled)} />\r\n        </Poplist>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/26\r\n *\r\n */\r\nimport React, { Fragment } from 'react';\r\nimport Event from '../lib/Base/Event';\r\nimport { context_redo, context_undo, workspace_push, workspace_redo, workspace_undo } from '../lib/util/actions';\r\nimport IconText from '@/lib/ui/IconText';\r\n\r\nexport default class HistoryControl extends React.Component {\r\n  state = {\r\n    disableRedo: true,\r\n    disableUndo: true,\r\n  };\r\n\r\n  componentWillMount() {\r\n    Event.listen(workspace_undo, this.handle);\r\n    Event.listen(workspace_push, this.handlePush);\r\n    Event.listen(workspace_redo, this.handle);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(workspace_undo, this.handle);\r\n    Event.destroy(workspace_push, this.handlePush);\r\n    Event.destroy(workspace_redo, this.handle);\r\n  }\r\n\r\n  handle = (l1, l2) => {\r\n    this.setState({ disableUndo: l1 === 1, disableRedo: l2 === 0 });\r\n  };\r\n  handlePush = (length) => {\r\n    this.setState({ disableUndo: length < 2, disableRedo: true });\r\n  };\r\n  redo = () => {\r\n    if (!this.state.disableRedo) Event.dispatch(context_redo);\r\n  };\r\n  undo = () => {\r\n    if (!this.state.disableUndo) Event.dispatch(context_undo);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <IconText onClick={this.undo} icon={'undo2'} className={`header_action-item ${this.state.disableUndo ? 'disabled' : ''}`}>\r\n          撤销\r\n        </IconText>\r\n        <IconText onClick={this.redo} icon={'redo'} className={`header_action-item ${this.state.disableRedo ? 'disabled' : ''}`}>\r\n          重做\r\n        </IconText>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/26\r\n *\r\n */\r\nimport React from 'react';\r\nimport Poplist, { Menu, MenuItem } from '../lib/ui/Poplist';\r\nimport Icon from '../lib/Icon';\r\nimport { getFirstResponder } from '../lib/global/instance';\r\nimport Event from '../lib/Base/Event';\r\nimport { component_active, component_inactive, coverage_back, coverage_backward, coverage_forward, coverage_front } from '../lib/util/actions';\r\nimport { getFormatShortcutsWithAction, KeyboardActionNameMap } from '../lib/service/KeyboradHandler';\r\nimport IconText from '@/lib/ui/IconText';\r\n\r\nconst CoverageActions = [\r\n  {\r\n    action: coverage_forward,\r\n    label: (\r\n      <span>\r\n        <Icon type={'icon-test2'} />\r\n        上移一层\r\n      </span>\r\n    ),\r\n    extra: getFormatShortcutsWithAction(KeyboardActionNameMap.COVERAGE_FORWARD),\r\n  },\r\n  {\r\n    action: coverage_backward,\r\n    label: (\r\n      <span>\r\n        <Icon type={'icon-test3'} />\r\n        下移一层\r\n      </span>\r\n    ),\r\n    extra: getFormatShortcutsWithAction(KeyboardActionNameMap.COVERAGE_BACKWARD),\r\n  },\r\n  {\r\n    action: coverage_front,\r\n    label: (\r\n      <span>\r\n        <Icon type={'icon-test1'} />\r\n        置为顶层\r\n      </span>\r\n    ),\r\n    extra: getFormatShortcutsWithAction(KeyboardActionNameMap.COVERAGE_FRONT),\r\n  },\r\n  {\r\n    action: coverage_back,\r\n    label: (\r\n      <span>\r\n        <Icon type={'icon-test4'} />\r\n        置为底层\r\n      </span>\r\n    ),\r\n    extra: getFormatShortcutsWithAction(KeyboardActionNameMap.COVERAGE_BACK),\r\n  },\r\n];\r\n\r\nclass ActionWrapper extends React.Component {\r\n  state = {\r\n    disabled: true,\r\n  };\r\n\r\n  componentWillMount() {\r\n    Event.listen(component_active, this.handleActive);\r\n    Event.listen(component_inactive, this.handleInactive);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(component_active, this.handleActive);\r\n    Event.destroy(component_inactive, this.handleInactive);\r\n  }\r\n\r\n  handleActive = () => {\r\n    this.setState({ disabled: false });\r\n    this.handleChange(false);\r\n  };\r\n  handleInactive = () => {\r\n    this.setState({ disabled: true });\r\n    this.handleChange(true);\r\n  };\r\n  handleChange = (disabled) => {\r\n    this.props.onChange(disabled);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <IconText className={`header_action-item_sub ${this.state.disabled ? 'disabled' : ''}`} icon={'moban'}>\r\n        图层\r\n      </IconText>\r\n    );\r\n  }\r\n}\r\n\r\nexport default class HeaderCoverage extends React.Component {\r\n  handleClick = (action) => {\r\n    if (this.disabled === false) Event.dispatch(action);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <span className={'header_action-item'}>\r\n        <Poplist\r\n          overlay={\r\n            <Menu onClick={this.handleClick} style={{ width: 200 }}>\r\n              {() =>\r\n                CoverageActions.map((item) => {\r\n                  const disabled = getFirstResponder();\r\n                  return <MenuItem disabled={!disabled} key={item.action} action={item.action} label={item.label} extra={item.extra} />;\r\n                })\r\n              }\r\n            </Menu>\r\n          }\r\n        >\r\n          <ActionWrapper onChange={(disabled) => (this.disabled = disabled)} />\r\n        </Poplist>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/26\r\n *\r\n */\r\nimport React from 'react';\r\nimport { Menu } from 'antd';\r\nimport IconText from '@/lib/ui/IconText';\r\n\r\nexport default class HeaderUser extends React.Component {\r\n  handlelogin = async () => {\r\n    location.href = 'https://vivw.org/';\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <IconText onClick={this.handlelogin} className={'header_action-item'} icon={'denglu1'}>\r\n        社区\r\n      </IconText>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/30\r\n *\r\n */\r\nimport React from 'react';\r\nimport Event from '../lib/Base/Event';\r\nimport { workspace_scroll_center } from '../lib/util/actions';\r\nimport IconText from '@/lib/ui/IconText';\r\n\r\nexport default class HeaderPanToCenter extends React.Component {\r\n  handleClick = () => {\r\n    Event.dispatch(workspace_scroll_center);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <IconText onClick={this.handleClick} icon={'juzhong4'} className={'header_action-item'}>\r\n        居中\r\n      </IconText>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/31\r\n *\r\n */\r\nimport React from 'react';\r\nimport Event from '../lib/Base/Event';\r\nimport { guide_display, guide_hide, guide_toggle } from '../lib/util/actions';\r\nimport IconText from '@/lib/ui/IconText';\r\n\r\nexport default class HeaderGuides extends React.Component {\r\n  state = {\r\n    show: true,\r\n  };\r\n\r\n  componentWillMount() {\r\n    Event.listen(guide_display, this.handleDisplay);\r\n    Event.listen(guide_hide, this.handleHide);\r\n    Event.listen(guide_toggle, this.handle);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(guide_display, this.handleDisplay);\r\n    Event.destroy(guide_hide, this.handleHide);\r\n    Event.destroy(guide_toggle, this.handle);\r\n  }\r\n\r\n  handleDisplay = () => {\r\n    this.setState({ show: true });\r\n  };\r\n  handleHide = () => {\r\n    this.setState({ show: false });\r\n  };\r\n  handle = () => {\r\n    if (this.state.show) {\r\n      Event.dispatch(guide_hide);\r\n    } else {\r\n      Event.dispatch(guide_display);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <IconText onClick={this.handle} className={`header_action-item`} icon={this.state.show ? 'cankaoxian-biyan-' : 'cankaoxian-biyan-1'}>\r\n        辅助线\r\n      </IconText>\r\n    );\r\n  }\r\n}\r\n","import {Http} from \"./config\";\r\n\r\n\r\n\r\n/**\r\n * 创建新的项目\r\n * @param send\r\n * @return {AxiosPromise<any>}\r\n */\r\nexport const createProject = (send) =>{\r\n    return Http.post('project/create', send)\r\n}\r\n\r\n/**\r\n * 进入项目编辑模式\r\n * @param id\r\n * @return {AxiosPromise<any>}\r\n */\r\nexport const useProject = (id) =>{\r\n    return Http.post('project/user', {id})\r\n}\r\n\r\n/**\r\n * 获取项目列表\r\n * @param alias\r\n * @return {AxiosPromise<any>}\r\n */\r\nexport const fetchProjectList = (alias) =>{\r\n    return Http.post('project/list', {alias})\r\n}\r\n/**\r\n * 删除项目\r\n * @param id\r\n * @return {AxiosPromise<any>}\r\n */\r\nexport const deleteProject = (id) =>{\r\n    return Http.post('project/delete', {id})\r\n}\r\n\r\n/**\r\n * 修改项目信息\r\n * @param send\r\n * @return {AxiosPromise<any>}\r\n */\r\nexport const updateProject = (send) =>{\r\n    return Http.post('project/update', send)\r\n}\r\n\r\n/**\r\n * 获取当前项目数据列表,没有详细信息\r\n * @return {AxiosPromise<any>}\r\n */\r\nexport const fetchProjectPages = (projectid) =>{\r\n    return Http.post('page/list',{projectid})\r\n}\r\n/**\r\n * 获取项目master组件列表\r\n * @return {AxiosPromise<any>}\r\n */\r\nexport const fetchProjectMasters = () =>{\r\n    return Http.post('project/master')\r\n}\r\n/**\r\n * 查看项目详情，包括pages\r\n */\r\nexport const fetchProjectInfo=(projectid)=>{\r\n return Http.post('project/info',{projectid})\r\n}","var store = {};\r\n\r\nexport const setStore = (key, value) => {\r\n  store[key] = value;\r\n};\r\nexport const getStore = (key) => {\r\n  return store[key];\r\n};\r\nexport const clearStore = () => {\r\n  store = {};\r\n};\r\nexport const removeStoreItem = (key) => {\r\n  delete store[key];\r\n};\r\n","/**\r\n *  created by yaojun on 2019/1/26\r\n *\r\n */\r\nimport React from 'react';\r\nimport { Form, message, Modal, Radio } from 'antd';\r\nimport { getPageData } from '../lib/util/page';\r\nimport GroupProperties from '../lib/properties/group';\r\nimport { toJSON } from '../lib/properties/types';\r\nimport { getCurrentControllersByPage, getCurrentPage } from '../lib/global/instance';\r\nimport { waitForSeconds } from '../lib/util/helper';\r\nimport CanvasRender from '../canvas';\r\nimport JSZip from 'jszip';\r\nimport FileSaver from 'file-saver';\r\nimport { getStore } from '../lib/global/store';\r\nimport config from '../lib/util/preference';\r\nimport IconText from '@/lib/ui/IconText';\r\n\r\nconst FormItem = Form.Item;\r\nconst RadioGroup = Radio.Group;\r\nexport default class HeaderExport extends React.Component {\r\n  handleClick = (e) => {\r\n    e.stopPropagation();\r\n    let value = 'current';\r\n    let type = 'jpeg';\r\n    Modal.confirm({\r\n      title: '导出项目页面',\r\n      content: (\r\n        <div>\r\n          <FormItem label='导出图片格式'>\r\n            <RadioGroup onChange={(e) => (type = e.target.value)} defaultValue={'jpeg'}>\r\n              <Radio value={'jpeg'}>JPEG</Radio>\r\n              <Radio value={'png'}>PNG</Radio>\r\n            </RadioGroup>\r\n          </FormItem>\r\n          <FormItem extra={'选择导出项目可能需要一些时间，请耐心等待'} label={'请选择要导出的页面'}>\r\n            <RadioGroup onChange={(e) => (value = e.target.value)} defaultValue={'current'}>\r\n              <Radio value={'current'}>当前页面</Radio>\r\n              <Radio value={'project'}>项目所有页面</Radio>\r\n            </RadioGroup>\r\n          </FormItem>\r\n        </div>\r\n      ),\r\n      onOk: () => {\r\n        this.makePages(value, type);\r\n        message.success('打包完成后，浏览器会自动下载数据');\r\n      },\r\n    });\r\n  };\r\n  renderPages = async (pages, folder, imageType) => {\r\n    for (let i = 0; i < pages.length; i++) {\r\n      let imagedata = await this.renderPage(pages[i], imageType);\r\n      folder.file(`${pages[i].alias}.${imageType}`, imagedata, { base64: true });\r\n    }\r\n  };\r\n  renderPage = async (item, imageType, renderType = 'base64') => {\r\n    let page = new GroupProperties();\r\n    page = toJSON(page);\r\n    page.transform = {\r\n      isSingleObject: true,\r\n      x: 0,\r\n      y: 0,\r\n      width: config.viewport.width,\r\n      height: item.height,\r\n    };\r\n    page.border.color = 'none';\r\n    page.bg = item.bg;\r\n    // 防止主线程被卡死\r\n    await waitForSeconds(0.2);\r\n    let items = await getCurrentControllersByPage(item.id);\r\n    page.items = items;\r\n    let canvas = new CanvasRender();\r\n    await canvas.renderCanvas(page, page.transform);\r\n    let imagedata;\r\n    if (renderType == 'blob') {\r\n      imagedata = await canvas.toBlob(imageType);\r\n    } else {\r\n      imagedata = canvas.toImage(0.92, imageType).replace(`data:image/${imageType};base64,`, '');\r\n    }\r\n    canvas.destroy(); // clear\r\n    return imagedata;\r\n  };\r\n  makePages = async (value, imageType) => {\r\n    let pages = getPageData();\r\n    if (value == 'current') {\r\n      pages = pages.filter((item) => item.id == getCurrentPage());\r\n      let imagedata = await this.renderPage(pages[0], imageType, 'blob');\r\n      FileSaver.saveAs(imagedata, pages[0].alias + '.' + imageType);\r\n    } else {\r\n      let zip = new JSZip();\r\n      let folder = zip.folder('pages');\r\n      await this.renderPages(pages, folder, imageType);\r\n      let project = getStore('project');\r\n      const content = await zip.generateAsync({ type: 'blob' });\r\n      FileSaver.saveAs(content, project.name + '.zip');\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <IconText className={'header_action-item'} onClick={this.handleClick} icon={'xiazai'}>\r\n        导出\r\n      </IconText>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/26\r\n *\r\n */\r\nimport React from 'react';\r\nimport Event from '../lib/Base/Event';\r\nimport { component_active, component_inactive, context_pack, context_unpack } from '../lib/util/actions';\r\nimport { getFirstResponder } from '@/lib/global/instance';\r\nimport IconText from '@/lib/ui/IconText';\r\n\r\nexport default class HeaderGroupControl extends React.Component {\r\n  state = {\r\n    disabled: true,\r\n    text: 'combination',\r\n    msg: '组合',\r\n  };\r\n\r\n  componentWillMount() {\r\n    Event.listen(component_active, this.handleActive);\r\n    Event.listen(component_inactive, this.handleInactive);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(component_active, this.handleActive);\r\n    Event.destroy(component_inactive, this.handleInactive);\r\n  }\r\n\r\n  handleActive = (target) => {\r\n    if (target.properties.isTemporaryGroup === true) {\r\n      this.setState({ text: 'combination', disabled: false, msg: '组合' });\r\n    } else if (target.properties.type == 'block') {\r\n      this.setState({ text: 'zuhe', disabled: false, msg: '解散' });\r\n    } else {\r\n      this.setState({ disabled: true });\r\n    }\r\n  };\r\n  handleInactive = () => {\r\n    this.setState({ disabled: true });\r\n  };\r\n  handleGroup = () => {\r\n    if (this.state.disabled === true) return;\r\n    if (getFirstResponder().properties.type == 'block') {\r\n      Event.dispatch(context_unpack);\r\n    } else if (getFirstResponder().properties.isTemporaryGroup) {\r\n      Event.dispatch(context_pack);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <IconText className={`header_action-item ${this.state.disabled ? 'disabled' : ''}`} onClick={this.handleGroup} icon={this.state.text}>\r\n        {this.state.msg}\r\n      </IconText>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/22\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './Button.scss';\r\nimport Icon from '../Icon';\r\n\r\nexport default class Button extends React.Component {\r\n  static propTypes = {\r\n    children: PropTypes.any,\r\n    icon: PropTypes.any,\r\n    type: PropTypes.oneOf(['primary', 'default', 'hollow', 'danger']),\r\n    className: PropTypes.string,\r\n    style: PropTypes.object,\r\n    checked: PropTypes.bool,\r\n    onClick: PropTypes.func,\r\n    block: PropTypes.bool,\r\n  };\r\n\r\n  static defaultProps = {\r\n    type: 'default',\r\n    icon: null,\r\n    children: null,\r\n    className: '',\r\n    style: {},\r\n    checked: false,\r\n    block: false,\r\n    onClick: () => {},\r\n  };\r\n\r\n  render() {\r\n    let { children, icon, type, className, style, checked, onClick, block } = this.props;\r\n    return (\r\n      <button onClick={onClick} style={style} className={`${block ? 'block' : ''} aj-button aj-button__${type} ${className} ${checked ? 'checked' : ''}`}>\r\n        {icon && <Icon type={icon} />}\r\n        {children}\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\nexport class ButtonGroup extends React.Component {\r\n  state = {\r\n    checked: null, // [] or string\r\n  };\r\n\r\n  static propTypes = {\r\n    children: PropTypes.array,\r\n    onClick: PropTypes.func,\r\n    type: PropTypes.oneOf(['primary', 'default', 'hollow']),\r\n    multiple: PropTypes.bool,\r\n    defaultChecked: PropTypes.any,\r\n  };\r\n\r\n  static defaultProps = {\r\n    onClick: () => {},\r\n    children: [],\r\n    type: 'default',\r\n    multiple: false,\r\n  };\r\n\r\n  componentWillMount() {\r\n    this.state.checked = this.props.defaultChecked ? this.props.defaultChecked : this.props.multiple ? [] : null;\r\n  }\r\n\r\n  // Update checked keys\r\n  setValue = (value) => {\r\n    this.setState({ checked: value });\r\n  };\r\n\r\n  bindItemClick = (key) => {\r\n    return (e) => {\r\n      e.stopPropagation();\r\n\r\n      if (this.props.multiple) {\r\n        let checked = this.state.checked.slice(0);\r\n        let index = checked.indexOf(key);\r\n        if (index > -1) checked.splice(index, 1);\r\n        else checked.push(key);\r\n        this.setState({ checked });\r\n        this.props.onClick(checked);\r\n      } else {\r\n        let checked = key == this.state.checked ? '' : key;\r\n        this.setState({ checked });\r\n        this.props.onClick(checked);\r\n      }\r\n    };\r\n  };\r\n\r\n  render() {\r\n    let { children } = this.props;\r\n    children = React.Children.map(children, (button) => {\r\n      let props = Object.assign({}, button);\r\n      props.type = this.props.type;\r\n      props.checked = this.props.multiple ? this.state.checked.indexOf(button.key) > -1 : this.state.checked === button.key;\r\n      props.onClick = this.bindItemClick(button.key);\r\n      return React.cloneElement(button, props);\r\n    });\r\n    return <div className={'aj-button-group'}>{children}</div>;\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/13\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport './NumberInput.scss';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default class NumberInput extends React.Component {\r\n  static propTypes = {\r\n    onChange: PropTypes.func,\r\n    label: PropTypes.any,\r\n    max: PropTypes.number,\r\n    min: PropTypes.number,\r\n    step: PropTypes.number,\r\n    style: PropTypes.object,\r\n    defaultValue: PropTypes.any,\r\n    onPressEnter: PropTypes.func,\r\n  };\r\n\r\n  static defaultProps = {\r\n    onChange: () => {},\r\n    onPressEnter: () => {},\r\n    min: -Infinity,\r\n    max: Infinity,\r\n    step: 1,\r\n  };\r\n\r\n  constructor() {\r\n    super();\r\n    this.value = '';\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.refs.input.addEventListener('keydown', this.onKeyDown, false);\r\n    if ('defaultValue' in this.props) {\r\n      this.value = this.props.defaultValue;\r\n      this.refs.input.value = this.value;\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.refs.input.removeEventListener('keydown', this.onKeyDown, false);\r\n  }\r\n\r\n  setValue = (value) => {\r\n    if (value > this.props.max || value < this.props.min) return;\r\n    this.value = value;\r\n    this.refs.input.value = value;\r\n  };\r\n\r\n  _move = (i) => {\r\n    let value = +this.value || 0;\r\n    value += i;\r\n    this.value = value;\r\n    this.applyToDom(value);\r\n    this.notifyChange();\r\n  };\r\n\r\n  onKeyDown = (e) => {\r\n    e.stopPropagation();\r\n    let key = e.keyCode;\r\n    if (key === 38) {\r\n      this._move(this.props.step);\r\n    } else if (key === 40) {\r\n      this._move(-this.props.step);\r\n    } else if (key == 13) {\r\n      this.props.onPressEnter(this.value);\r\n    }\r\n  };\r\n\r\n  onInput = (e) => {\r\n    e.stopPropagation();\r\n    let error = isNaN(e.target.value);\r\n    if (error) {\r\n      this.applyToDom(this.value);\r\n    } else {\r\n      this.applyToDom(e.target.value);\r\n      this.notifyChange();\r\n    }\r\n  };\r\n\r\n  notifyChange = () => {\r\n    this.props.onChange(+this.value);\r\n  };\r\n\r\n  applyToDom = (value) => {\r\n    if (value > this.props.max) {\r\n      this.value = this.props.max;\r\n    } else if (value < this.props.min) {\r\n      this.value = this.props.min;\r\n    } else {\r\n      this.value = value;\r\n    }\r\n    this.refs.input.value = this.value;\r\n  };\r\n\r\n  disabled = (status) => {\r\n    if (status) {\r\n      this.refs.input.setAttribute('disabled', true);\r\n      this.refs.g.className = 'aj-number-input-control disabled';\r\n    } else {\r\n      this.refs.g.className = 'aj-number-input-control';\r\n      this.refs.input.removeAttribute('disabled');\r\n    }\r\n  };\r\n\r\n  clickUp = () => {\r\n    this._move(1);\r\n  };\r\n\r\n  clickDown = () => {\r\n    this._move(-1);\r\n  };\r\n\r\n  render() {\r\n    const { label, style, addon } = this.props;\r\n    return (\r\n      <div ref={'g'} style={style} className={'aj-number-input-control'}>\r\n        {label && <label className={'aj-number-label'}>{label}</label>}\r\n        <span className={'aj-number-input-wrapper'}>\r\n          <input className={'aj-number-input'} onInput={this.onInput} ref={'input'} data-prevent='false' />\r\n        </span>\r\n        {addon && <label className={'aj-number-addon'}>{addon}</label>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport NumberInput from '../lib/ui/NumberInput';\r\nimport './HeaderSettingsPreferences.scss';\r\nimport config from '../lib/util/preference';\r\nimport Types from 'prop-types';\r\nimport { Switch } from 'antd';\r\nimport jQuery from 'jquery';\r\n\r\nexport default class HeaderSettingPreference extends PureComponent {\r\n  static propTypes = {\r\n    onChange: Types.func,\r\n  };\r\n  values = {\r\n    snap: jQuery.extend(true, {}, config.snap),\r\n    grid: config.grid,\r\n    autoAlign: config.autoAlign,\r\n  };\r\n  notifyChange = () => {\r\n    this.props.onChange(this.values);\r\n  };\r\n  handleChange = (key, namespace, value) => {\r\n    if (typeof value !== 'undefined') {\r\n      this.values[key][namespace] = value;\r\n    } else {\r\n      this.values[key] = namespace;\r\n    }\r\n    this.notifyChange();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className={'header_preferences'}>\r\n        <div className={'preferences-title'}>自动对齐</div>\r\n        <div className={'preferences-content'}>\r\n          <div className={'preferences-form-item'}>\r\n            <label>触发距离</label>\r\n            <NumberInput onChange={(v) => this.handleChange('autoAlign', v)} max={5} min={0} defaultValue={config.autoAlign} />\r\n            <div className={'preferences-form-item_extra'}>拖拽的组件与目标组件距离小于此值时，将自动与目标组件对齐</div>\r\n          </div>\r\n        </div>\r\n        <div className={'preferences-title'}>显示网格</div>\r\n        <div className={'preferences-content'}>\r\n          <Switch defaultChecked={config.grid} onChange={(v) => this.handleChange('grid', v)} />\r\n        </div>\r\n\r\n        <div className={'preferences-title'}>移动单位</div>\r\n        <div className={'preferences-content'}>\r\n          <div className={'preferences-form-item'}>\r\n            <label>X</label>\r\n            <NumberInput onChange={(v) => this.handleChange('snap', 'x', v)} defaultValue={config.snap.x} />\r\n            <div className={'preferences-form-item_extra'}>X轴每次移动距离</div>\r\n          </div>\r\n          <div className={'preferences-form-item'}>\r\n            <label>Y</label>\r\n            <NumberInput onChange={(v) => this.handleChange('snap', 'y', v)} defaultValue={config.snap.y} />\r\n            <div className={'preferences-form-item_extra'}>Y轴每次移动距离</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/26\r\n *\r\n */\r\nimport React from 'react';\r\nimport { ActionHandler, ActionKeyCodeMaps, ActionNames, CombomKeyNumber, CombomKeys, CombomKeysArray, updateKeyCodeMap } from '../lib/service/KeyboradHandler';\r\nimport { getKeyCodeFormat, KeyCode } from '../lib/service/KeyEvent';\r\nimport Types from 'prop-types';\r\nimport Button from '../lib/ui/Button';\r\nimport Event from '../lib/Base/Event';\r\nimport { refresh_editor_config, workspace_setting_show } from '../lib/util/actions';\r\nimport HeaderSettingPreference from './HeaderSettingPreference';\r\nimport { updatePreferences } from '../lib/util/preference';\r\nimport { Modal } from 'antd';\r\nimport IconText from '@/lib/ui/IconText';\r\n\r\nlet UpdateActionHandlers = {};\r\n\r\nclass ShortcutsItem extends React.PureComponent {\r\n  static propTypes = {\r\n    onComboChange: Types.func,\r\n    onChange: Types.func,\r\n    item: Types.string,\r\n    mode: Types.bool,\r\n  };\r\n  handleChange = (e) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    if (!this.props.item.endsWith(e.keyCode) && !CombomKeyNumber[e.keyCode]) {\r\n      this.props.onChange(this.props.item, e.keyCode);\r\n    }\r\n  };\r\n  handleComboClick = (currentComboKey, selectedKeys) => {\r\n    let key = this.props.item;\r\n    let index = selectedKeys.indexOf(currentComboKey);\r\n    if (index > -1) {\r\n      selectedKeys.splice(index, 1);\r\n    } else {\r\n      selectedKeys.push(currentComboKey);\r\n    }\r\n    let combo = selectedKeys.length == 0 ? 0 : selectedKeys.reduce((a, b) => a | b);\r\n    let newKey = key.split(',');\r\n    newKey[0] = combo;\r\n    this.props.onComboChange(key, newKey.join(','));\r\n  };\r\n\r\n  render() {\r\n    let item = this.props.item;\r\n    let array = item.split(',');\r\n    let combo = +array[0];\r\n    let code = array[1];\r\n    let comboKeys = CombomKeysArray.filter((item) => {\r\n      item = +item;\r\n      return (combo & item) == item;\r\n    }).sort((a, b) => b - a);\r\n    // 编辑模式\r\n    let editMode = this.props.mode;\r\n    return (\r\n      <div className={'settings_shortcut-item'}>\r\n        <span className={'settings_shortcuts-name'}>{ActionNames[UpdateActionHandlers[item]]}</span>\r\n        {editMode\r\n          ? CombomKeysArray.map((item) => (\r\n              <span\r\n                key={item}\r\n                onClick={() => this.handleComboClick(item, comboKeys)}\r\n                className={`settings_shortcuts-combo settings_shortcuts-editmode ${comboKeys.indexOf(item) > -1 ? 'selected' : ''}`}\r\n              >\r\n                {getKeyCodeFormat(CombomKeys[item])}\r\n              </span>\r\n            ))\r\n          : comboKeys.map((item) => (\r\n              <span key={item} className={'settings_shortcuts-combo'}>\r\n                {getKeyCodeFormat(CombomKeys[item])}\r\n              </span>\r\n            ))}\r\n        {editMode ? (\r\n          <input onKeyUp={this.handleChange} data-event='ignore' value={getKeyCodeFormat(KeyCode[code])} className={'settings_shortcuts-key'} />\r\n        ) : (\r\n          <span className={'settings_shortcuts-key'}>{getKeyCodeFormat(KeyCode[code])}</span>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass Shortcuts extends React.Component {\r\n  state = {\r\n    mode: false,\r\n    actions: Object.keys(ActionKeyCodeMaps)\r\n      .sort((a, b) => a.charCodeAt(0) - b.charCodeAt(0))\r\n      .map((item) => ActionKeyCodeMaps[item]),\r\n  };\r\n\r\n  componentWillMount() {\r\n    this.ActionHandler = Object.assign({}, ActionHandler);\r\n    UpdateActionHandlers = this.ActionHandler;\r\n  }\r\n\r\n  toggleMode = () => {\r\n    this.setState({ mode: !this.state.mode });\r\n  };\r\n  handleComboChange = (oldkey, newKey) => {\r\n    let action = this.ActionHandler[oldkey];\r\n    let index = this.state.actions.indexOf(oldkey);\r\n    if (this.state.actions.indexOf(newKey) > -1) {\r\n      Modal.info({\r\n        title: '提示',\r\n        content: '该组合键已被使用',\r\n      });\r\n    } else {\r\n      let actions = this.state.actions;\r\n      actions[index] = newKey;\r\n      delete this.ActionHandler[oldkey];\r\n      this.ActionHandler[newKey] = action;\r\n      this.setState({ actions });\r\n      this.props.onChange(this.ActionHandler);\r\n    }\r\n  };\r\n  handleChange = (key, code) => {\r\n    let oindex = this.state.actions.indexOf(key);\r\n    let okey = key;\r\n    let action = this.ActionHandler[key];\r\n    key = key.split(',');\r\n    key[1] = code;\r\n    key = key.join(',');\r\n    if (this.state.actions.indexOf(key) > -1) {\r\n      // has exits\r\n      alert('Already exist ');\r\n    } else {\r\n      let actions = this.state.actions;\r\n      // New key\r\n      actions[oindex] = key;\r\n      this.ActionHandler[key] = action;\r\n      this.setState({ actions });\r\n      this.props.onChange(this.ActionHandler);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className={'header_shortcuts'}>\r\n        <div className={'header_shortcuts-custom'}>\r\n          <a onClick={this.toggleMode}>{this.state.mode ? '保存' : '自定义快捷键'} </a>\r\n        </div>\r\n\r\n        <div className='header-shortcuts-wrapper'>\r\n          {this.state.actions.map((item) => {\r\n            return <ShortcutsItem onComboChange={this.handleComboChange} onChange={this.handleChange} key={item} mode={this.state.mode} item={item} />;\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport class Settings extends React.Component {\r\n  state = {\r\n    show: false,\r\n  };\r\n  // 快捷键设置\r\n  shortcuts = null;\r\n  //  工具设置\r\n  preference = null;\r\n\r\n  componentDidMount() {\r\n    Event.listen(workspace_setting_show, this.toggleShow);\r\n  }\r\n  componentWillUnmount() {\r\n    Event.destroy(workspace_setting_show, this.toggleShow);\r\n  }\r\n\r\n  toggleShow = () => {\r\n    this.setState({ show: !this.state.show });\r\n  };\r\n  hide = () => {\r\n    this.setState({ show: false });\r\n  };\r\n  save = () => {\r\n    if (this.shortcuts) {\r\n      let s = this.shortcuts;\r\n      updateKeyCodeMap(s);\r\n      Event.dispatch(refresh_editor_config, { key: 'shortcuts', value: this.shortcuts });\r\n      this.shortcuts = null;\r\n    }\r\n    if (this.preference) {\r\n      updatePreferences(this.preference);\r\n      this.preference = null;\r\n    }\r\n    this.hide();\r\n  };\r\n\r\n  render() {\r\n    if (this.state.show === false) return null;\r\n    return (\r\n      <div ref={'g'} className={'header_settings-panel'}>\r\n        <div className={'settings-panel_form'}>\r\n          <Shortcuts onChange={(shortcuts) => (this.shortcuts = shortcuts)} />\r\n          <HeaderSettingPreference onChange={(preference) => (this.preference = preference)} />\r\n        </div>\r\n        <div className={'settings-panel_bar'}>\r\n          <div>\r\n            <Button onClick={this.hide} type={'default'}>\r\n              取消\r\n            </Button>{' '}\r\n            <Button onClick={this.save} type={'primary'}>\r\n              应用\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default class HeaderSettings extends React.Component {\r\n  handleSettingClick = (e) => {\r\n    e.stopPropagation();\r\n    Event.dispatch(workspace_setting_show);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <IconText onClick={this.handleSettingClick} className={'header_action-item'} icon={'shezhi1'}>\r\n          设置\r\n        </IconText>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/11/6\r\n *\r\n */\r\nimport React from 'react';\r\nimport './Header.scss';\r\nimport HeaderAlignment from './HeaderAlignment';\r\nimport HistoryControl from './HistoryControl';\r\nimport HeaderCoverage from './HeaderCoverage';\r\nimport HeaderUser from './HeaderUser';\r\nimport HeaderPanToCenter from './HeaderPanToCenter';\r\nimport HeaderGuides from './HeaderGuides';\r\nimport Event from '../lib/Base/Event';\r\nimport { refresh_project_name } from '../lib/util/actions';\r\nimport { updateProject } from '../api/project';\r\nimport qs from 'query-string';\r\nimport HeaderExport from '@/components/HeaderExport';\r\nimport HeaderGroupControl from '@/components/HeaderGroupControl';\r\nimport HeaderSettings, { Settings } from './HeaderSettings';\r\n\r\nclass ProjectName extends React.Component {\r\n  state = {\r\n    name: '',\r\n  };\r\n  handleChange = (v) => {\r\n    this.setState({ name: v });\r\n  };\r\n\r\n  componentWillMount() {\r\n    Event.listen(refresh_project_name, this.handleChange);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(refresh_project_name, this.handleChange);\r\n  }\r\n\r\n  handleUpdate = (v) => {\r\n    let query = qs.parse(location.search);\r\n    updateProject({ id: query.p, name: v }).then((res) => {\r\n      this.handleChange(v);\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className='header-logo'>\r\n        <img className='app-icon' src={require('@/assets/app-icon.png')} />\r\n        <span className='app-name'>yoyoo设计</span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default class Header extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className={'root-layout-header'}>\r\n        <div className={'header_project'}>\r\n          <ProjectName />\r\n        </div>\r\n        <div className={'header_functions text-left'}>\r\n          <HistoryControl />\r\n        </div>\r\n        <div className={'header_functions'}>\r\n          <HeaderGroupControl />\r\n          <HeaderAlignment />\r\n          <HeaderCoverage />\r\n          <HeaderPanToCenter />\r\n          <HeaderGuides />\r\n        </div>\r\n        <div className={'header_user'}>\r\n          <HeaderSettings />\r\n          <HeaderExport />\r\n          <HeaderUser />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/16\r\n *\r\n */\r\nimport React from 'react';\r\nimport IconText from '../lib/ui/IconText';\r\nimport PropTypes from 'prop-types';\r\nimport Event from '../lib/Base/Event';\r\nimport { context_mode_change } from '@/lib/util/actions';\r\n\r\nexport const menus = () => [\r\n  {\r\n    icon: 'pages',\r\n    text: '页面',\r\n    type: 'pages',\r\n  },\r\n  {\r\n    icon: 'yaodian',\r\n    text: '图层',\r\n    type: 'coverage',\r\n  },\r\n  {\r\n    icon: 'zujiankuLOGO',\r\n    text: '组件',\r\n    type: 'components',\r\n  },\r\n  {\r\n    icon: 'tubiao',\r\n    text: '图标',\r\n    type: 'icons',\r\n  },\r\n];\r\nexport default class OutlineMenu extends React.Component {\r\n  static propTypes = {\r\n    onChange: PropTypes.func,\r\n    selected: PropTypes.string,\r\n  };\r\n  state = {\r\n    menus: menus(),\r\n  };\r\n\r\n  componentWillMount() {\r\n    Event.listen(context_mode_change, this.handleModeChange);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(context_mode_change, this.handleModeChange);\r\n  }\r\n\r\n  handleModeChange = (type) => {\r\n    let data;\r\n    if (type == 'MASTER') {\r\n      data = menus();\r\n      data.splice(0, 1);\r\n      data.splice(3, 1);\r\n    } else {\r\n      data = menus();\r\n    }\r\n    this.setState({ menus: data });\r\n    this.props.onChange(type == 'MASTER' ? 'coverage' : 'pages');\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <ul className='root-layout-side-menu'>\r\n        {this.state.menus.map((item) => {\r\n          return (\r\n            <li onClick={() => this.props.onChange(item.type)} key={item.icon}>\r\n              <IconText className={item.type === this.props.selected ? 'selected' : ''} icon={item.icon}>\r\n                {item.text}\r\n              </IconText>\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/17\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport Types from 'prop-types';\r\nimport Icon from '../Icon';\r\nimport './Collapse.scss';\r\n\r\nexport default class Collapse extends React.Component {\r\n  static propTypes = {\r\n    title: Types.string,\r\n    className: Types.string,\r\n    style: Types.object,\r\n    children: Types.any,\r\n    collapse: Types.bool,\r\n  };\r\n\r\n  state = {\r\n    collapse: false,\r\n  };\r\n\r\n  componentWillReceiveProps(props) {\r\n    if (props.collapse !== void 0 && props.collapse != this.state.collapse) {\r\n      this.setState({ collapse: props.collapse });\r\n    }\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.setState({ collapse: this.props.collapse });\r\n  }\r\n\r\n  handleClick = () => {\r\n    let v = !this.state.collapse;\r\n    this.setState({ collapse: v });\r\n    let onChange = this.props.onChange;\r\n    onChange && onChange(v);\r\n  };\r\n\r\n  render() {\r\n    const { title, className, style, children } = this.props;\r\n    return (\r\n      <div style={style} className={`${this.state.collapse ? 'collapse' : 'expand'} aj-component-collapse ${className || ''}`}>\r\n        <div onClick={this.handleClick} className={'collapse-title'}>\r\n          <span className={'left-title'}>{title}</span>\r\n          <Icon rotation={this.state.collapse ? 180 : 0} type={'close'} />\r\n        </div>\r\n        <div className={'aj-component-collapse-content'}>{children}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export const PresetIcons = {\r\n  'icon-biaodan': {\r\n    items: [\r\n      { data: 'icon-biaodan_check_box', fontContent: 'e82d', type: 'icon', name: 'check_box' },\r\n      { data: 'icon-biaodan_qipao1', fontContent: 'e82c', type: 'icon', name: '气泡' },\r\n      { data: 'icon-biaodan_qipao', fontContent: 'e82b', type: 'icon', name: '气泡' },\r\n      { data: 'icon-biaodan_moban', fontContent: 'e82a', type: 'icon', name: '地址' },\r\n      { data: 'icon-biaodan_help', fontContent: 'e829', type: 'icon', name: 'help' },\r\n      { data: 'icon-biaodan_faq', fontContent: 'e828', type: 'icon', name: '气泡' },\r\n      { data: 'icon-biaodan_help2', fontContent: 'e827', type: 'icon', name: 'help' },\r\n      { data: 'icon-biaodan_address', fontContent: 'e826', type: 'icon', name: '地址' },\r\n      { data: 'icon-biaodan_mima2', fontContent: 'e825', type: 'icon', name: '密码' },\r\n      { data: 'icon-biaodan_youxiang1', fontContent: 'e824', type: 'icon', name: '邮箱' },\r\n      { data: 'icon-biaodan_youxiang', fontContent: 'e823', type: 'icon', name: '邮箱' },\r\n      { data: 'icon-biaodan_shouji1', fontContent: 'e822', type: 'icon', name: '手机' },\r\n      { data: 'icon-biaodan_yonghu2', fontContent: 'e821', type: 'icon', name: '用户' },\r\n      { data: 'icon-biaodan_mima1', fontContent: 'e820', type: 'icon', name: '密码' },\r\n      { data: 'icon-biaodan_verification-jf', fontContent: 'e81f', type: 'icon', name: '验证码' },\r\n      { data: 'icon-biaodan_xingtaiduICON-', fontContent: 'e81e', type: 'icon', name: '验证码' },\r\n      { data: 'icon-biaodan_yonghu1', fontContent: 'e81d', type: 'icon', name: '用户' },\r\n      { data: 'icon-biaodan_shouji', fontContent: 'e81c', type: 'icon', name: '手机' },\r\n      { data: 'icon-biaodan_mima', fontContent: 'e81b', type: 'icon', name: '密码' },\r\n      { data: 'icon-biaodan_yonghu', fontContent: 'e81a', type: 'icon', name: '用户' },\r\n      { data: 'icon-biaodan_sousuo1', fontContent: 'e819', type: 'icon', name: '搜索' },\r\n      { data: 'icon-biaodan_sousuo', fontContent: 'e818', type: 'icon', name: '搜索' },\r\n      { data: 'icon-biaodan_yanzhengma', fontContent: 'e817', type: 'icon', name: '验证码' },\r\n      { data: 'icon-biaodan_radiono', fontContent: 'e816', type: 'icon', name: 'radiono' },\r\n      { data: 'icon-biaodan_SliderOff', fontContent: 'e815', type: 'icon', name: 'Slider Off' },\r\n      { data: 'icon-biaodan_jinggao', fontContent: 'e814', type: 'icon', name: 'warning ' },\r\n      { data: 'icon-biaodan_info', fontContent: 'e813', type: 'icon', name: 'info' },\r\n      { data: 'icon-biaodan_pwd', fontContent: 'e812', type: 'icon', name: 'pwd' },\r\n      { data: 'icon-biaodan_tixingx', fontContent: 'e811', type: 'icon', name: 'warning' },\r\n      { data: 'icon-biaodan_icon02', fontContent: 'e810', type: 'icon', name: '添加' },\r\n      { data: 'icon-biaodan_shangchuan', fontContent: 'e80f', type: 'icon', name: '上传' },\r\n      { data: 'icon-biaodan_tmp-illegal', fontContent: 'e80e', type: 'icon', name: 'error' },\r\n      { data: 'icon-biaodan_xiazai-', fontContent: 'e80d', type: 'icon', name: '下载' },\r\n      { data: 'icon-biaodan_error1', fontContent: 'e80c', type: 'icon', name: 'error' },\r\n      { data: 'icon-biaodan_danxuanxuanzhong16', fontContent: 'e80b', type: 'icon', name: '单选选中_16' },\r\n      { data: 'icon-biaodan_icon-el-date-picker', fontContent: 'e80a', type: 'icon', name: 'date-picker' },\r\n      { data: 'icon-biaodan_success1', fontContent: 'e809', type: 'icon', name: 'success' },\r\n      { data: 'icon-biaodan_minus', fontContent: 'e808', type: 'icon', name: 'min' },\r\n      { data: 'icon-biaodan_error', fontContent: 'e807', type: 'icon', name: 'error' },\r\n      { data: 'icon-biaodan_xiazai', fontContent: 'e806', type: 'icon', name: '下载' },\r\n      { data: 'icon-biaodan_quesition-circle', fontContent: 'e805', type: 'icon', name: 'quesition-circle' },\r\n      { data: 'icon-biaodan_quesition', fontContent: 'e804', type: 'icon', name: 'quesition' },\r\n      { data: 'icon-biaodan_xuanze', fontContent: 'e802', type: 'icon', name: '多选项' },\r\n      { data: 'icon-biaodan_duoxuan', fontContent: 'e801', type: 'icon', name: '多选' },\r\n      { data: 'icon-biaodan_success', fontContent: 'e803', type: 'icon', name: 'success' },\r\n      { data: 'icon-biaodan_min', fontContent: 'e800', type: 'icon', name: 'min' },\r\n      { data: 'icon-biaodan_upload', fontContent: 'e7ff', type: 'icon', name: '上传' },\r\n      { data: 'icon-biaodan_SliderOn', fontContent: 'e7fe', type: 'icon', name: 'Slider On' },\r\n      { data: 'icon-biaodan_iconfontoptionbutton', fontContent: 'e7fd', type: 'icon', name: '单选' },\r\n    ],\r\n    name: '表单',\r\n  },\r\n  'icon-wuliu': {\r\n    items: [\r\n      { data: 'icon-wuliu_bianji', fontContent: 'e7fc', type: 'icon', name: '编辑' },\r\n      { data: 'icon-wuliu_quyuguanli', fontContent: 'e7fb', type: 'icon', name: '区域管理' },\r\n      { data: 'icon-wuliu_woderenwu', fontContent: 'e7fa', type: 'icon', name: '我的任务' },\r\n      { data: 'icon-wuliu_jiluziliaoguanli', fontContent: 'e7f9', type: 'icon', name: '记录资料' },\r\n      { data: 'icon-wuliu_kongzhitai_', fontContent: 'e7f8', type: 'icon', name: '控制台' },\r\n      { data: 'icon-wuliu_shanchu', fontContent: 'e7f7', type: 'icon', name: '删除' },\r\n      { data: 'icon-wuliu_xiangmu1', fontContent: 'e7f6', type: 'icon', name: '项目' },\r\n      { data: 'icon-wuliu_bumen', fontContent: 'e7f5', type: 'icon', name: '部门' },\r\n      { data: 'icon-wuliu_shizhong', fontContent: 'e7f4', type: 'icon', name: '时钟' },\r\n      { data: 'icon-wuliu_yijianfankui1', fontContent: 'e7f3', type: 'icon', name: '意见反馈' },\r\n      { data: 'icon-wuliu_gerenxinxi', fontContent: 'e7f2', type: 'icon', name: '个人信息' },\r\n      { data: 'icon-wuliu_tongji', fontContent: 'e7f1', type: 'icon', name: '统计' },\r\n      { data: 'icon-wuliu_renwu_', fontContent: 'e7f0', type: 'icon', name: '任务_1' },\r\n      { data: 'icon-wuliu_biaoqian', fontContent: 'e7ef', type: 'icon', name: '标签' },\r\n      { data: 'icon-wuliu_zuzhijigou', fontContent: 'e7ee', type: 'icon', name: '组织机构' },\r\n      { data: 'icon-wuliu_yuyin', fontContent: 'e7ed', type: 'icon', name: '语音' },\r\n      { data: 'icon-wuliu_yunpeiguanli', fontContent: 'e7ec', type: 'icon', name: '运配管理' },\r\n      { data: 'icon-wuliu_xiugaimima', fontContent: 'e7eb', type: 'icon', name: '修改密码' },\r\n      { data: 'icon-wuliu_yijianfankui', fontContent: 'e7ea', type: 'icon', name: '意见反馈' },\r\n      { data: 'icon-wuliu_yonghuguanli', fontContent: 'e7e9', type: 'icon', name: '用户管理' },\r\n      { data: 'icon-wuliu_xiaoxitongzhi', fontContent: 'e7e8', type: 'icon', name: '消息通知' },\r\n      { data: 'icon-wuliu_tuichu', fontContent: 'e7e7', type: 'icon', name: '退出' },\r\n      { data: 'icon-wuliu_tiaoduguanli', fontContent: 'e7e6', type: 'icon', name: '调度管理' },\r\n      { data: 'icon-wuliu_wancheng', fontContent: 'e7e5', type: 'icon', name: '完成' },\r\n      { data: 'icon-wuliu_sousuo', fontContent: 'e7e4', type: 'icon', name: '搜索' },\r\n      { data: 'icon-wuliu_shouye', fontContent: 'e7e3', type: 'icon', name: '首页' },\r\n      { data: 'icon-wuliu_tianjia', fontContent: 'e7e2', type: 'icon', name: '添加' },\r\n      { data: 'icon-wuliu_shezhi', fontContent: 'e7e1', type: 'icon', name: '设置' },\r\n      { data: 'icon-wuliu_shouru1', fontContent: 'e7e0', type: 'icon', name: '收入' },\r\n      { data: 'icon-wuliu_qitaxiaoxi', fontContent: 'e7df', type: 'icon', name: '其他消息' },\r\n      { data: 'icon-wuliu_saoyisao', fontContent: 'e7de', type: 'icon', name: '扫一扫' },\r\n      { data: 'icon-wuliu_shanguangdeng', fontContent: 'e7dd', type: 'icon', name: '闪光灯' },\r\n      { data: 'icon-wuliu_mima', fontContent: 'e7dc', type: 'icon', name: '密码' },\r\n      { data: 'icon-wuliu_jiaoyitixing', fontContent: 'e7db', type: 'icon', name: '交易提醒' },\r\n      { data: 'icon-wuliu_kongzhitai', fontContent: 'e7da', type: 'icon', name: '控制台' },\r\n      { data: 'icon-wuliu_jixiaokaohe', fontContent: 'e7d9', type: 'icon', name: '绩效考核' },\r\n      { data: 'icon-wuliu_fukuan', fontContent: 'e7d8', type: 'icon', name: '付款' },\r\n      { data: 'icon-wuliu_gerenzhongxin', fontContent: 'e7d7', type: 'icon', name: '个人中心' },\r\n      { data: 'icon-wuliu_gongzuotai', fontContent: 'e7d6', type: 'icon', name: '工作台' },\r\n      { data: 'icon-wuliu_fahuo', fontContent: 'e7d5', type: 'icon', name: '发货_1' },\r\n      { data: 'icon-wuliu_fachejihua', fontContent: 'e7d4', type: 'icon', name: '发车计划' },\r\n      { data: 'icon-wuliu_feiyongchaxun', fontContent: 'e7d3', type: 'icon', name: '费用查询' },\r\n      { data: 'icon-wuliu_erweima', fontContent: 'e7d2', type: 'icon', name: '二维码' },\r\n      { data: 'icon-wuliu_dingdanguanli', fontContent: 'e7d1', type: 'icon', name: '订单管理' },\r\n      { data: 'icon-wuliu_phone_1', fontContent: 'e7d0', type: 'icon', name: '电话_1' },\r\n      { data: 'icon-wuliu_dailishang', fontContent: 'e7cf', type: 'icon', name: '代理商' },\r\n      { data: 'icon-wuliu_cheliangguanli', fontContent: 'e7ce', type: 'icon', name: '车辆管理' },\r\n      { data: 'icon-wuliu_dituweizhi', fontContent: 'e7cd', type: 'icon', name: '地图位置' },\r\n      { data: 'icon-wuliu_chakan', fontContent: 'e7cc', type: 'icon', name: '查看' },\r\n      { data: 'icon-wuliu_phone', fontContent: 'e7cb', type: 'icon', name: '电话' },\r\n      { data: 'icon-wuliu_xiangmu', fontContent: 'e7ca', type: 'icon', name: '项目' },\r\n      { data: 'icon-wuliu_bumenguanli', fontContent: 'e7c9', type: 'icon', name: '部门管理' },\r\n      { data: 'icon-wuliu_bianji-', fontContent: 'e7c8', type: 'icon', name: '编辑_1' },\r\n      { data: 'icon-wuliu_menu-', fontContent: 'e7c7', type: 'icon', name: 'menu_2' },\r\n      { data: 'icon-wuliu_single-arrow', fontContent: 'e7c6', type: 'icon', name: '单箭头' },\r\n      { data: 'icon-wuliu_train1', fontContent: 'e7c5', type: 'icon', name: 'train' },\r\n      { data: 'icon-wuliu_change-password', fontContent: 'e7c4', type: 'icon', name: '修改密码' },\r\n      { data: 'icon-wuliu_menu1', fontContent: 'e7c3', type: 'icon', name: '菜单' },\r\n      { data: 'icon-wuliu_train', fontContent: 'e7c2', type: 'icon', name: 'train' },\r\n      { data: 'icon-wuliu_service-point', fontContent: 'e7c1', type: 'icon', name: 'service' },\r\n      { data: 'icon-wuliu_payment', fontContent: 'e7c0', type: 'icon', name: 'payment' },\r\n      { data: 'icon-wuliu_menu', fontContent: 'e7bf', type: 'icon', name: 'menu' },\r\n      { data: 'icon-wuliu_infor', fontContent: 'e7be', type: 'icon', name: 'infor' },\r\n      { data: 'icon-wuliu_notice', fontContent: 'e7bd', type: 'icon', name: '通知_' },\r\n      { data: 'icon-wuliu_image', fontContent: 'e7bc', type: 'icon', name: '图片' },\r\n      { data: 'icon-wuliu_cash-payment', fontContent: 'e7bb', type: 'icon', name: '现金支付' },\r\n      { data: 'icon-wuliu_shouru', fontContent: 'e7ba', type: 'icon', name: '收入' },\r\n      { data: 'icon-wuliu_goods', fontContent: 'e7b9', type: 'icon', name: '商品管理' },\r\n      { data: 'icon-wuliu_Ship', fontContent: 'e7b8', type: 'icon', name: '发货' },\r\n      { data: 'icon-wuliu_Crate', fontContent: 'e7b7', type: 'icon', name: '周转箱' },\r\n      { data: 'icon-wuliu_Site', fontContent: 'e7b6', type: 'icon', name: '站点线路' },\r\n      { data: 'icon-wuliu_driver', fontContent: 'e7b5', type: 'icon', name: '司机' },\r\n      { data: 'icon-wuliu_gongyingshang', fontContent: 'e7b4', type: 'icon', name: '供应商' },\r\n      { data: 'icon-wuliu_truck', fontContent: 'e7b3', type: 'icon', name: '车辆' },\r\n      { data: 'icon-wuliu_position', fontContent: 'e7b2', type: 'icon', name: '职位' },\r\n      { data: 'icon-wuliu_edit', fontContent: 'e7b1', type: 'icon', name: '编辑' },\r\n      { data: 'icon-wuliu_wuliupeisong-', fontContent: 'ece6', type: 'icon', name: '物流配送-1' },\r\n      { data: 'icon-wuliu_wuliutouming', fontContent: 'e7b0', type: 'icon', name: '物流透明' },\r\n      { data: 'icon-wuliu_paisongtixing', fontContent: 'e7af', type: 'icon', name: '派送提醒-物流详情' },\r\n      { data: 'icon-wuliu_wwuliu-', fontContent: 'e7ae', type: 'icon', name: 'w物流-01' },\r\n      { data: 'icon-wuliu_mn-wuliu', fontContent: 'e7ad', type: 'icon', name: 'AK-MN物流' },\r\n      { data: 'icon-wuliu_wuliu-', fontContent: 'e7ac', type: 'icon', name: '物流-01' },\r\n      { data: 'icon-wuliu_wuliuzhongxinziliaoshenhe', fontContent: 'e7ab', type: 'icon', name: '物流中心资料审核' },\r\n      { data: 'icon-wuliu_wuliu3', fontContent: 'e7aa', type: 'icon', name: '物流' },\r\n      { data: 'icon-wuliu_wuliuma', fontContent: 'e7a9', type: 'icon', name: '物流码' },\r\n      { data: 'icon-wuliu_wuliu2', fontContent: 'e7a8', type: 'icon', name: '物流' },\r\n      { data: 'icon-wuliu_navwuliuzhongxin', fontContent: 'e7a7', type: 'icon', name: 'nav物流中心' },\r\n      { data: 'icon-wuliu_wuliuxinxi', fontContent: 'e7a6', type: 'icon', name: '物流信息' },\r\n      { data: 'icon-wuliu_wuliuguanli', fontContent: 'e7a5', type: 'icon', name: '物流管理' },\r\n      { data: 'icon-wuliu_wuliu1', fontContent: 'e7a4', type: 'icon', name: '物流' },\r\n      { data: 'icon-wuliu_guanyuyouxinwuliu', fontContent: 'e846', type: 'icon', name: '关于优信物流' },\r\n      { data: 'icon-wuliu_wuliu', fontContent: 'e7a3', type: 'icon', name: '物流' },\r\n    ],\r\n    name: '物流',\r\n  },\r\n  'icon-jinrong': {\r\n    items: [\r\n      { data: 'icon-jinrong_zizhizhengshu', fontContent: 'e7a2', type: 'icon', name: '资质证书' },\r\n      { data: 'icon-jinrong_zhuanlixinxi', fontContent: 'e7a1', type: 'icon', name: '专利信息' },\r\n      { data: 'icon-jinrong_zhuzuoquanxinxi', fontContent: 'e7a0', type: 'icon', name: '著作权信息' },\r\n      { data: 'icon-jinrong_zhuyaorenyuan', fontContent: 'e79f', type: 'icon', name: '主要人员' },\r\n      { data: 'icon-jinrong_zhaotoubiao', fontContent: 'e79e', type: 'icon', name: '招投标' },\r\n      { data: 'icon-jinrong_zhenshixingming', fontContent: 'e79d', type: 'icon', name: '真实姓名' },\r\n      { data: 'icon-jinrong_zhaiquanxinxi', fontContent: 'e79c', type: 'icon', name: '债券信息' },\r\n      { data: 'icon-jinrong_yongtu', fontContent: 'e79b', type: 'icon', name: '用途' },\r\n      { data: 'icon-jinrong_yujing', fontContent: 'e79a', type: 'icon', name: '预警' },\r\n      { data: 'icon-jinrong_yijianfankui', fontContent: 'e799', type: 'icon', name: '意见反馈' },\r\n      { data: 'icon-jinrong_yinhangqiahao', fontContent: 'e798', type: 'icon', name: '银行卡号' },\r\n      { data: 'icon-jinrong_xuanze-yixuan', fontContent: 'e797', type: 'icon', name: '选择-已选' },\r\n      { data: 'icon-jinrong_yanzhongweifan', fontContent: 'e796', type: 'icon', name: '严重违反' },\r\n      { data: 'icon-jinrong_xinzeng', fontContent: 'e795', type: 'icon', name: '新增' },\r\n      { data: 'icon-jinrong_xuanze-kong', fontContent: 'e794', type: 'icon', name: '选择-空' },\r\n      { data: 'icon-jinrong_xiangmujine', fontContent: 'e793', type: 'icon', name: '项目金额' },\r\n      { data: 'icon-jinrong_xiaoxidaiban', fontContent: 'e792', type: 'icon', name: '消息待办' },\r\n      { data: 'icon-jinrong_xiaoqu', fontContent: 'e791', type: 'icon', name: '小区' },\r\n      { data: 'icon-jinrong_xiangmu', fontContent: 'e790', type: 'icon', name: '项目' },\r\n      { data: 'icon-jinrong_wode1', fontContent: 'e78f', type: 'icon', name: '我的' },\r\n      { data: 'icon-jinrong_wangzhanxinxi', fontContent: 'e78e', type: 'icon', name: '网站信息' },\r\n      { data: 'icon-jinrong_wangzhanbeian', fontContent: 'e78d', type: 'icon', name: '网站备案' },\r\n      { data: 'icon-jinrong_touzishijian', fontContent: 'e78c', type: 'icon', name: '投资事件' },\r\n      { data: 'icon-jinrong_shidagudong', fontContent: 'e78b', type: 'icon', name: '十大股东' },\r\n      { data: 'icon-jinrong_tongji', fontContent: 'e78a', type: 'icon', name: '统计' },\r\n      { data: 'icon-jinrong_shuiwupingji', fontContent: 'e789', type: 'icon', name: '税务评级' },\r\n      { data: 'icon-jinrong_sousuo', fontContent: 'e788', type: 'icon', name: '搜索' },\r\n      { data: 'icon-jinrong_shouye', fontContent: 'e787', type: 'icon', name: '首页' },\r\n      { data: 'icon-jinrong_shoujihaoma', fontContent: 'e786', type: 'icon', name: '手机号码' },\r\n      { data: 'icon-jinrong_shixinren', fontContent: 'e785', type: 'icon', name: '失信人' },\r\n      { data: 'icon-jinrong_shenfenzhenghao', fontContent: 'e784', type: 'icon', name: '身份证号' },\r\n      { data: 'icon-jinrong_shezhi', fontContent: 'e783', type: 'icon', name: '设置' },\r\n      { data: 'icon-jinrong_shangshigonggao', fontContent: 'e782', type: 'icon', name: '上市公告' },\r\n      { data: 'icon-jinrong_qianshuigonggao', fontContent: 'e781', type: 'icon', name: '欠税公告' },\r\n      { data: 'icon-jinrong_shaixuan', fontContent: 'e780', type: 'icon', name: '筛选' },\r\n      { data: 'icon-jinrong_shangbiaoxinxi', fontContent: 'e77f', type: 'icon', name: '商标信息' },\r\n      { data: 'icon-jinrong_rongzilishi', fontContent: 'e77e', type: 'icon', name: '融资历史' },\r\n      { data: 'icon-jinrong_richeng', fontContent: 'e77d', type: 'icon', name: '日程' },\r\n      { data: 'icon-jinrong_qiandaozuji', fontContent: 'e77c', type: 'icon', name: '签到足迹' },\r\n      { data: 'icon-jinrong_qianliyan', fontContent: 'e77b', type: 'icon', name: '千里眼' },\r\n      { data: 'icon-jinrong_qiandao', fontContent: 'e77a', type: 'icon', name: '签到' },\r\n      { data: 'icon-jinrong_qiyezhuangtai', fontContent: 'e779', type: 'icon', name: '企业状态' },\r\n      { data: 'icon-jinrong_qiyejianjie', fontContent: 'e778', type: 'icon', name: '企业简介' },\r\n      { data: 'icon-jinrong_qiyeyewu', fontContent: 'e777', type: 'icon', name: '企业业务' },\r\n      { data: 'icon-jinrong_qiyexinwen', fontContent: 'e776', type: 'icon', name: '企业新闻' },\r\n      { data: 'icon-jinrong_qiyehuaxiangchaxun', fontContent: 'e775', type: 'icon', name: '企业画像查询' },\r\n      { data: 'icon-jinrong_pingfen-xing', fontContent: 'e774', type: 'icon', name: '评分-星' },\r\n      { data: 'icon-jinrong_jia', fontContent: 'e773', type: 'icon', name: '加' },\r\n      { data: 'icon-jinrong_kaitinggonggao', fontContent: 'e772', type: 'icon', name: '开庭公告' },\r\n      { data: 'icon-jinrong_peiguqingkuang', fontContent: 'e771', type: 'icon', name: '配股情况' },\r\n      { data: 'icon-jinrong_jingpinxinxi', fontContent: 'e770', type: 'icon', name: '竞品信息' },\r\n      { data: 'icon-jinrong_jingyingyichang', fontContent: 'e76f', type: 'icon', name: '经营异常' },\r\n      { data: 'icon-jinrong_jiantou', fontContent: 'e76e', type: 'icon', name: '箭头' },\r\n      { data: 'icon-jinrong_jibenxinxi-', fontContent: 'e76d', type: 'icon', name: '基本信息-2' },\r\n      { data: 'icon-jinrong_jibenxinxi', fontContent: 'e76c', type: 'icon', name: '基本信息' },\r\n      { data: 'icon-jinrong_huifang', fontContent: 'e76b', type: 'icon', name: '回访' },\r\n      { data: 'icon-jinrong_hexintuandui', fontContent: 'e76a', type: 'icon', name: '核心团队' },\r\n      { data: 'icon-jinrong_huanbenqueren', fontContent: 'e769', type: 'icon', name: '还本确认' },\r\n      { data: 'icon-jinrong_guquanchuzhi', fontContent: 'e768', type: 'icon', name: '股权出质' },\r\n      { data: 'icon-jinrong_hangzhengchufa', fontContent: 'e767', type: 'icon', name: '行政处罚' },\r\n      { data: 'icon-jinrong_hangyefenbu', fontContent: 'e766', type: 'icon', name: '行业分布' },\r\n      { data: 'icon-jinrong_guanlianfujian', fontContent: 'e765', type: 'icon', name: '关联附件' },\r\n      { data: 'icon-jinrong_guquanbiangeng', fontContent: 'e764', type: 'icon', name: '股权变更' },\r\n      { data: 'icon-jinrong_gubenjiegou', fontContent: 'e763', type: 'icon', name: '股本结构' },\r\n      { data: 'icon-jinrong_gudongxinxi', fontContent: 'e762', type: 'icon', name: '股东信息' },\r\n      { data: 'icon-jinrong_gudongchuzi', fontContent: 'e761', type: 'icon', name: '股东出资' },\r\n      { data: 'icon-jinrong_gerenhuaxiangchaxun', fontContent: 'e760', type: 'icon', name: '个人画像查询' },\r\n      { data: 'icon-jinrong_goudixinxi', fontContent: 'e75f', type: 'icon', name: '购地信息' },\r\n      { data: 'icon-jinrong_fuxiqueren', fontContent: 'e75e', type: 'icon', name: '付息确认' },\r\n      { data: 'icon-jinrong_gongzuohuizong', fontContent: 'e75d', type: 'icon', name: '工作汇总' },\r\n      { data: 'icon-jinrong_beizhihangren', fontContent: 'e75c', type: 'icon', name: '被执行人' },\r\n      { data: 'icon-jinrong_gaoguanxinxi', fontContent: 'e75b', type: 'icon', name: '高管信息' },\r\n      { data: 'icon-jinrong_falvsusong', fontContent: 'e75a', type: 'icon', name: '法律诉讼' },\r\n      { data: 'icon-jinrong_fenhongqingkuang', fontContent: 'e759', type: 'icon', name: '分红情况' },\r\n      { data: 'icon-jinrong_fangchanpinggu', fontContent: 'e758', type: 'icon', name: '房产评估' },\r\n      { data: 'icon-jinrong_fenzhijigou', fontContent: 'e757', type: 'icon', name: '分支机构' },\r\n      { data: 'icon-jinrong_fanhui', fontContent: 'e756', type: 'icon', name: '返回' },\r\n      { data: 'icon-jinrong_fayuangonggao', fontContent: 'e755', type: 'icon', name: '法院公告' },\r\n      { data: 'icon-jinrong_fahangxiangguan', fontContent: 'e754', type: 'icon', name: '发行相关' },\r\n      { data: 'icon-jinrong_duiwaitouzi-', fontContent: 'e753', type: 'icon', name: '对外投资-1' },\r\n      { data: 'icon-jinrong_duiwaitouzi', fontContent: 'e752', type: 'icon', name: '对外投资' },\r\n      { data: 'icon-jinrong_diqufenbu', fontContent: 'e751', type: 'icon', name: '地区分布' },\r\n      { data: 'icon-jinrong_duiwaidanbao', fontContent: 'e750', type: 'icon', name: '对外担保' },\r\n      { data: 'icon-jinrong_dongchandiya', fontContent: 'e74f', type: 'icon', name: '动产抵押' },\r\n      { data: 'icon-jinrong_chouchajiancha', fontContent: 'e74e', type: 'icon', name: '抽查检查' },\r\n      { data: 'icon-jinrong_chengshi', fontContent: 'e74d', type: 'icon', name: '城市' },\r\n      { data: 'icon-jinrong_chanpinxinxi', fontContent: 'e74c', type: 'icon', name: '产品信息' },\r\n      { data: 'icon-jinrong_chakanqiyehuaxiang', fontContent: 'e74b', type: 'icon', name: '查看企业画像' },\r\n      { data: 'icon-jinrong_cangukonggu', fontContent: 'e74a', type: 'icon', name: '参股控股' },\r\n      { data: 'icon-jinrong_caiji', fontContent: 'e749', type: 'icon', name: '采集' },\r\n      { data: 'icon-jinrong_biangengjilu', fontContent: 'e748', type: 'icon', name: '变更记录' },\r\n      { data: 'icon-jinrong_baogao', fontContent: 'e747', type: 'icon', name: '报告' },\r\n      { data: 'icon-jinrong_xuexi_nor', fontContent: 'e746', type: 'icon', name: '学习_nor' },\r\n      { data: 'icon-jinrong_daohang-shouye', fontContent: 'e745', type: 'icon', name: '导航-首页' },\r\n      { data: 'icon-jinrong_tongjitu', fontContent: 'e744', type: 'icon', name: '统计图' },\r\n      { data: 'icon-jinrong_tixing', fontContent: 'e743', type: 'icon', name: '提醒' },\r\n      { data: 'icon-jinrong_chuangxinchanpin', fontContent: 'e742', type: 'icon', name: '创新产品' },\r\n      { data: 'icon-jinrong_wode', fontContent: 'e741', type: 'icon', name: '我的' },\r\n      { data: 'icon-jinrong_dengji-A', fontContent: 'e740', type: 'icon', name: '等级-A' },\r\n      { data: 'icon-jinrong_dengji-D', fontContent: 'e73f', type: 'icon', name: '等级-D' },\r\n      { data: 'icon-jinrong_dengji-B', fontContent: 'e73e', type: 'icon', name: '等级-B' },\r\n      { data: 'icon-jinrong_dengji-C', fontContent: 'e72d', type: 'icon', name: '等级-C' },\r\n      { data: 'icon-jinrong_qian', fontContent: 'e620', type: 'icon', name: '钱 金融 支付' },\r\n      { data: 'icon-jinrong_jinrongxiaozhan', fontContent: 'e603', type: 'icon', name: '京东金融小图标' },\r\n      { data: 'icon-jinrong_jinrong-', fontContent: 'e927', type: 'icon', name: '金融-53' },\r\n      { data: 'icon-jinrong_jinrong', fontContent: 'e698', type: 'icon', name: '金融' },\r\n      { data: 'icon-jinrong_nongcunjinrongba', fontContent: 'e606', type: 'icon', name: '农村金融吧' },\r\n      { data: 'icon-jinrong_16', fontContent: 'e63a', type: 'icon', name: '金融' },\r\n      { data: 'icon-jinrong_19', fontContent: 'e6be', type: 'icon', name: '金融' },\r\n    ],\r\n    name: '金融',\r\n  },\r\n  'icon-canyin': {\r\n    items: [\r\n      { data: 'icon-canyin_daochacanyin', fontContent: 'e73d', type: 'icon', name: '刀叉餐饮' },\r\n      { data: 'icon-canyin_canyin8', fontContent: 'e940', type: 'icon', name: '餐饮' },\r\n      { data: 'icon-canyin_canyinxitong-6', fontContent: 'e73c', type: 'icon', name: '餐饮系统-17' },\r\n      { data: 'icon-canyin_canyinxitong-5', fontContent: 'e73b', type: 'icon', name: '餐饮系统-12' },\r\n      { data: 'icon-canyin_canyinxitong-4', fontContent: 'e73a', type: 'icon', name: '餐饮系统-11' },\r\n      { data: 'icon-canyin_canyinxitong-3', fontContent: 'e739', type: 'icon', name: '餐饮系统-13' },\r\n      { data: 'icon-canyin_canyinxitong-2', fontContent: 'e738', type: 'icon', name: '餐饮系统-07' },\r\n      { data: 'icon-canyin_canyinxitong-1', fontContent: 'e737', type: 'icon', name: '餐饮系统-02' },\r\n      { data: 'icon-canyin_canyinxitong-', fontContent: 'e736', type: 'icon', name: '餐饮系统-04' },\r\n      { data: 'icon-canyin_canyin7', fontContent: 'e735', type: 'icon', name: '餐饮' },\r\n      { data: 'icon-canyin_huoguo', fontContent: 'e734', type: 'icon', name: '餐饮图标' },\r\n      { data: 'icon-canyin_canyin6', fontContent: 'e733', type: 'icon', name: '餐饮' },\r\n      { data: 'icon-canyin_canyintuancan', fontContent: 'e732', type: 'icon', name: '餐饮团餐' },\r\n      { data: 'icon-canyin_canyin5', fontContent: 'e731', type: 'icon', name: '餐饮' },\r\n      { data: 'icon-canyin_icon-', fontContent: 'e730', type: 'icon', name: '餐饮' },\r\n      { data: 'icon-canyin_canyin4', fontContent: 'e8a4', type: 'icon', name: '餐饮' },\r\n      { data: 'icon-canyin_canyin3', fontContent: 'e72f', type: 'icon', name: '餐饮' },\r\n      { data: 'icon-canyin_canyin2', fontContent: 'e72e', type: 'icon', name: '餐饮' },\r\n      { data: 'icon-canyin_canyin', fontContent: 'e72c', type: 'icon', name: '餐饮' },\r\n      { data: 'icon-canyin_yingyuanxinxicanyin', fontContent: 'e72b', type: 'icon', name: '影院信息-餐饮' },\r\n    ],\r\n    name: '餐饮',\r\n  },\r\n  'icon-duomeiti': {\r\n    items: [\r\n      { data: 'icon-duomeiti_duomeiti', fontContent: 'e72a', type: 'icon', name: '多媒体' },\r\n      { data: 'icon-duomeiti_meitiwenjian', fontContent: 'e729', type: 'icon', name: '多媒体' },\r\n      { data: 'icon-duomeiti_938caidan_duomeiti', fontContent: 'e728', type: 'icon', name: '938菜单_多媒体' },\r\n      { data: 'icon-duomeiti_shoucang-', fontContent: 'e727', type: 'icon', name: '收藏' },\r\n      { data: 'icon-duomeiti_zhuanji-', fontContent: 'e726', type: 'icon', name: '专辑' },\r\n      { data: 'icon-duomeiti_biaoqian-', fontContent: 'e725', type: 'icon', name: '标签' },\r\n      { data: 'icon-duomeiti_dianshiju-', fontContent: 'e724', type: 'icon', name: '电视剧' },\r\n      { data: 'icon-duomeiti_dianying-', fontContent: 'e71e', type: 'icon', name: '电影' },\r\n      { data: 'icon-duomeiti_yinliang-', fontContent: 'e719', type: 'icon', name: '音量' },\r\n      { data: 'icon-duomeiti_yuefu-', fontContent: 'e718', type: 'icon', name: '乐符' },\r\n      { data: 'icon-duomeiti_maikefeng-', fontContent: 'e717', type: 'icon', name: '麦克风' },\r\n      { data: 'icon-duomeiti_kuoyinqi-', fontContent: 'e716', type: 'icon', name: '扩音器' },\r\n      { data: 'icon-duomeiti_zanting-1', fontContent: 'e624', type: 'icon', name: '暂停-02' },\r\n      { data: 'icon-duomeiti_yinleku', fontContent: 'e623', type: 'icon', name: '音乐库' },\r\n      { data: 'icon-duomeiti_zanting-', fontContent: 'e621', type: 'icon', name: '暂停' },\r\n      { data: 'icon-duomeiti_bofangliebiao', fontContent: 'e61e', type: 'icon', name: '播放列表' },\r\n      { data: 'icon-duomeiti_kuaijin-', fontContent: 'e61d', type: 'icon', name: '快进' },\r\n      { data: 'icon-duomeiti_bofang-', fontContent: 'e61c', type: 'icon', name: '播放' },\r\n      { data: 'icon-duomeiti_hualang', fontContent: 'e61b', type: 'icon', name: '画廊' },\r\n      { data: 'icon-duomeiti_meitiku', fontContent: 'e61a', type: 'icon', name: '媒体库' },\r\n      { data: 'icon-duomeiti_tupian', fontContent: 'e619', type: 'icon', name: '图片' },\r\n      { data: 'icon-duomeiti_yinle', fontContent: 'e618', type: 'icon', name: '音乐' },\r\n      { data: 'icon-duomeiti_xiangji', fontContent: 'e614', type: 'icon', name: '相机' },\r\n    ],\r\n    name: '多媒体',\r\n  },\r\n  'icon-yiliao': {\r\n    items: [\r\n      { data: 'icon-yiliao_yiliaohangyedeICON-6', fontContent: 'e715', type: 'icon', name: '处方药' },\r\n      { data: 'icon-yiliao_yiliaohangyedeICON-5', fontContent: 'e714', type: 'icon', name: '骑车' },\r\n      { data: 'icon-yiliao_yiliaohangyedeICON-4', fontContent: 'e713', type: 'icon', name: '医院' },\r\n      { data: 'icon-yiliao_yiliaohangyedeICON-3', fontContent: 'e712', type: 'icon', name: '提示信息' },\r\n      { data: 'icon-yiliao_yiliaohangyedeICON-2', fontContent: 'e617', type: 'icon', name: '药品' },\r\n      { data: 'icon-yiliao_yiliaohangyedeICON-1', fontContent: 'e616', type: 'icon', name: '预约日期' },\r\n      { data: 'icon-yiliao_yiyuanguahao', fontContent: 'e615', type: 'icon', name: '医院挂号' },\r\n      { data: 'icon-yiliao_guahao', fontContent: 'e613', type: 'icon', name: '挂号' },\r\n      { data: 'icon-yiliao_jiankangdangan', fontContent: 'e612', type: 'icon', name: '健康档案' },\r\n      { data: 'icon-yiliao_yixuekepu', fontContent: 'e611', type: 'icon', name: '医学科普' },\r\n      { data: 'icon-yiliao_zhengzhuangzicha', fontContent: 'e60f', type: 'icon', name: '症状自查' },\r\n      { data: 'icon-yiliao_mingyizhuanjia', fontContent: 'e60e', type: 'icon', name: '名医专家' },\r\n      { data: 'icon-yiliao_yiliaohangyedeICON-', fontContent: 'e60b', type: 'icon', name: '专项检查' },\r\n      { data: 'icon-yiliao_tubiaozhizuomoban-lly', fontContent: 'e60a', type: 'icon', name: '预约医生' },\r\n      { data: 'icon-yiliao_xiaofeijilu', fontContent: 'e711', type: 'icon', name: '消费记录' },\r\n      { data: 'icon-yiliao_taocanjilu', fontContent: 'e710', type: 'icon', name: '套餐记录' },\r\n      { data: 'icon-yiliao_jiuzhenjilu', fontContent: 'e70f', type: 'icon', name: '就诊记录' },\r\n      { data: 'icon-yiliao_wenjuan', fontContent: 'e70e', type: 'icon', name: '问卷' },\r\n      { data: 'icon-yiliao_jiancha', fontContent: 'e70d', type: 'icon', name: '检查' },\r\n      { data: 'icon-yiliao_yuyuexinxi', fontContent: 'e70a', type: 'icon', name: '预约信息' },\r\n      { data: 'icon-yiliao_feiyong', fontContent: 'e709', type: 'icon', name: '费用' },\r\n      { data: 'icon-yiliao_zhishi', fontContent: 'e708', type: 'icon', name: '知识' },\r\n      { data: 'icon-yiliao_tousu', fontContent: 'e707', type: 'icon', name: '投诉' },\r\n      { data: 'icon-yiliao_kefu', fontContent: 'e706', type: 'icon', name: '客服' },\r\n      { data: 'icon-yiliao_wodexuanzhong', fontContent: 'e6f6', type: 'icon', name: '我的选中' },\r\n      { data: 'icon-yiliao_wode', fontContent: 'e6e9', type: 'icon', name: '我的' },\r\n      { data: 'icon-yiliao_faxianxuanzhong', fontContent: 'e6c2', type: 'icon', name: '发现选中' },\r\n      { data: 'icon-yiliao_faxian', fontContent: 'e6bb', type: 'icon', name: '发现' },\r\n      { data: 'icon-yiliao_yuyuexuanzhong', fontContent: 'e6b2', type: 'icon', name: '预约选中' },\r\n      { data: 'icon-yiliao_yuyue', fontContent: 'e6b1', type: 'icon', name: '预约' },\r\n      { data: 'icon-yiliao_zixunxuanzhong', fontContent: 'e6a9', type: 'icon', name: '咨询选中' },\r\n      { data: 'icon-yiliao_zixun', fontContent: 'e69e', type: 'icon', name: '咨询' },\r\n    ],\r\n    name: '医疗',\r\n  },\r\n  'icon-xiaochengxu': {\r\n    items: [\r\n      { data: 'icon-xiaochengxu_QQ', fontContent: 'e723', type: 'icon', name: 'QQ' },\r\n      { data: 'icon-xiaochengxu_xiaochengxu', fontContent: 'e722', type: 'icon', name: '小程序' },\r\n      { data: 'icon-xiaochengxu_dianhua1', fontContent: 'e721', type: 'icon', name: '电话' },\r\n      { data: 'icon-xiaochengxu_zhifubao', fontContent: 'e720', type: 'icon', name: '支付宝' },\r\n      { data: 'icon-xiaochengxu_weixinzhifu1', fontContent: 'e71f', type: 'icon', name: '19微信支付' },\r\n      { data: 'icon-xiaochengxu_weixin1', fontContent: 'e71d', type: 'icon', name: '微信' },\r\n      { data: 'icon-xiaochengxu_guanbi1', fontContent: 'e71c', type: 'icon', name: '关闭' },\r\n      { data: 'icon-xiaochengxu_daishouhuo', fontContent: 'e71b', type: 'icon', name: '待收货' },\r\n      { data: 'icon-xiaochengxu_daifukuan', fontContent: 'e71a', type: 'icon', name: '待付款' },\r\n      { data: 'icon-xiaochengxu_tubiaozhizuomoEban', fontContent: 'e70c', type: 'icon', name: '购买' },\r\n      { data: 'icon-xiaochengxu_tubiaozhizuomoban', fontContent: 'e70b', type: 'icon', name: '出售' },\r\n      { data: 'icon-xiaochengxu_gengduo', fontContent: 'e705', type: 'icon', name: '更多2' },\r\n      { data: 'icon-xiaochengxu_fenlei1', fontContent: 'e704', type: 'icon', name: '分类' },\r\n      { data: 'icon-xiaochengxu_faxian', fontContent: 'e703', type: 'icon', name: '发现' },\r\n      { data: 'icon-xiaochengxu_yiwen', fontContent: 'e702', type: 'icon', name: '疑问' },\r\n      { data: 'icon-xiaochengxu_guanyuwomen', fontContent: 'e701', type: 'icon', name: '关于我们' },\r\n      { data: 'icon-xiaochengxu_mimasuo', fontContent: 'e700', type: 'icon', name: '密码 锁' },\r\n      { data: 'icon-xiaochengxu_shouji', fontContent: 'e6ff', type: 'icon', name: '手机' },\r\n      { data: 'icon-xiaochengxu_dizhi', fontContent: 'e6fe', type: 'icon', name: '地址' },\r\n      { data: 'icon-xiaochengxu_zhaoxiangji', fontContent: 'e6fd', type: 'icon', name: '照相机 发现' },\r\n      { data: 'icon-xiaochengxu_kefu', fontContent: 'e6fc', type: 'icon', name: '客服' },\r\n      { data: 'icon-xiaochengxu_zuji', fontContent: 'e6fb', type: 'icon', name: '足迹' },\r\n      { data: 'icon-xiaochengxu_pingjia', fontContent: 'e6fa', type: 'icon', name: '评价' },\r\n      { data: 'icon-xiaochengxu_dianzan', fontContent: 'e6f9', type: 'icon', name: '点赞' },\r\n      { data: 'icon-xiaochengxu_biaoqian', fontContent: 'e6f8', type: 'icon', name: '标签' },\r\n      { data: 'icon-xiaochengxu_shouye1', fontContent: 'e6f7', type: 'icon', name: '首页' },\r\n      { data: 'icon-xiaochengxu_gouwuche', fontContent: 'e6f5', type: 'icon', name: '购物车' },\r\n      { data: 'icon-xiaochengxu_renminbi', fontContent: 'e6f4', type: 'icon', name: '人民币1' },\r\n      { data: 'icon-xiaochengxu_yinliang1', fontContent: 'e6f3', type: 'icon', name: '音量02' },\r\n      { data: 'icon-xiaochengxu_shijianfenlei', fontContent: 'e6f2', type: 'icon', name: '时间分类' },\r\n      { data: 'icon-xiaochengxu_gengxinshijian', fontContent: 'e6f1', type: 'icon', name: '更新时间' },\r\n      { data: 'icon-xiaochengxu_yinliang', fontContent: 'e6f0', type: 'icon', name: '音量01' },\r\n      { data: 'icon-xiaochengxu_huiyuandefuben', fontContent: 'e6ef', type: 'icon', name: '会员的副本' },\r\n      { data: 'icon-xiaochengxu_luyin', fontContent: 'e6ee', type: 'icon', name: '录音' },\r\n      { data: 'icon-xiaochengxu_riqi', fontContent: 'e6ed', type: 'icon', name: '日期' },\r\n      { data: 'icon-xiaochengxu_baiban', fontContent: 'e6ec', type: 'icon', name: '白板' },\r\n      { data: 'icon-xiaochengxu_wode', fontContent: 'e6eb', type: 'icon', name: '我的' },\r\n      { data: 'icon-xiaochengxu_shijianxuanzeqi', fontContent: 'e6ea', type: 'icon', name: '时间选择器' },\r\n      { data: 'icon-xiaochengxu_caozuo-dianhua', fontContent: 'e6e8', type: 'icon', name: '操作-电话' },\r\n      { data: 'icon-xiaochengxu_xiaolian', fontContent: 'e6e7', type: 'icon', name: '笑脸' },\r\n      { data: 'icon-xiaochengxu_jifenshangcheng', fontContent: 'e6e6', type: 'icon', name: '积分商城' },\r\n      { data: 'icon-xiaochengxu_qiaquan', fontContent: 'e6e5', type: 'icon', name: '卡券' },\r\n      { data: 'icon-xiaochengxu_dianpu', fontContent: 'e6e4', type: 'icon', name: '店铺' },\r\n      { data: 'icon-xiaochengxu_bofang', fontContent: 'e6e3', type: 'icon', name: '播放' },\r\n      { data: 'icon-xiaochengxu_fenxiang', fontContent: 'e6e2', type: 'icon', name: '分享 ' },\r\n      { data: 'icon-xiaochengxu_zanting', fontContent: 'e6e1', type: 'icon', name: '暂停' },\r\n      { data: 'icon-xiaochengxu_yonghuguanli', fontContent: 'e6e0', type: 'icon', name: '用户管理' },\r\n      { data: 'icon-xiaochengxu_yiguanzhu', fontContent: 'e6df', type: 'icon', name: '已关注' },\r\n      { data: 'icon-xiaochengxu_shouye', fontContent: 'e6de', type: 'icon', name: '首页' },\r\n      { data: 'icon-xiaochengxu_renwu-zengjia', fontContent: 'e6dd', type: 'icon', name: '人物-增加' },\r\n      { data: 'icon-xiaochengxu_zengjia2', fontContent: 'e6dc', type: 'icon', name: '增加' },\r\n      { data: 'icon-xiaochengxu_zengjia1', fontContent: 'e6db', type: 'icon', name: '增加 (2)' },\r\n      { data: 'icon-xiaochengxu_guanbi', fontContent: 'e6d9', type: 'icon', name: '关闭' },\r\n      { data: 'icon-xiaochengxu_jianshao1', fontContent: 'e6d8', type: 'icon', name: '减少 (3)' },\r\n      { data: 'icon-xiaochengxu_jianshao', fontContent: 'e6d7', type: 'icon', name: '减少 (2)' },\r\n      { data: 'icon-xiaochengxu_xuanze', fontContent: 'e6d6', type: 'icon', name: '选择 ' },\r\n      { data: 'icon-xiaochengxu_xuanze-yixuan', fontContent: 'e6d5', type: 'icon', name: '选择-已选' },\r\n      { data: 'icon-xiaochengxu_xihuan1', fontContent: 'e6d4', type: 'icon', name: '喜欢 ' },\r\n      { data: 'icon-xiaochengxu_xihuan', fontContent: 'e6d3', type: 'icon', name: '喜欢' },\r\n      { data: 'icon-xiaochengxu_shenhe', fontContent: 'e6d2', type: 'icon', name: '审核' },\r\n      { data: 'icon-xiaochengxu_pifu', fontContent: 'e6d1', type: 'icon', name: '皮肤' },\r\n      { data: 'icon-xiaochengxu_liulan', fontContent: 'e6d0', type: 'icon', name: '浏览' },\r\n      { data: 'icon-xiaochengxu_fuhao-biaoqian', fontContent: 'e6cf', type: 'icon', name: '标签' },\r\n      { data: 'icon-xiaochengxu_kehu', fontContent: 'e6ce', type: 'icon', name: '客户' },\r\n      { data: 'icon-xiaochengxu_qianbao', fontContent: 'e6cd', type: 'icon', name: '钱包' },\r\n      { data: 'icon-xiaochengxu_lianxiren', fontContent: 'e6cc', type: 'icon', name: '联系人' },\r\n      { data: 'icon-xiaochengxu_fanhui1', fontContent: 'e6cb', type: 'icon', name: '返回' },\r\n      { data: 'icon-xiaochengxu_fuwuqi', fontContent: 'e6ca', type: 'icon', name: '服务器' },\r\n      { data: 'icon-xiaochengxu_fabu', fontContent: 'e6c9', type: 'icon', name: '发布' },\r\n      { data: 'icon-xiaochengxu_erweima', fontContent: 'e6c8', type: 'icon', name: '二维码' },\r\n      { data: 'icon-xiaochengxu_caozuo-shangchuan-download', fontContent: 'e6c7', type: 'icon', name: '下载' },\r\n      { data: 'icon-xiaochengxu_caozuo-shangchuan-upload', fontContent: 'e6c6', type: 'icon', name: '上传' },\r\n      { data: 'icon-xiaochengxu_huo', fontContent: 'e6c5', type: 'icon', name: '火' },\r\n      { data: 'icon-xiaochengxu_bingzhuangtu', fontContent: 'e6c4', type: 'icon', name: '饼状图 分类' },\r\n      { data: 'icon-xiaochengxu_shujishuaxin', fontContent: 'e6c3', type: 'icon', name: '书籍刷新' },\r\n      { data: 'icon-xiaochengxu_nv', fontContent: 'e6c1', type: 'icon', name: '女' },\r\n      { data: 'icon-xiaochengxu_xiangji', fontContent: 'e6c0', type: 'icon', name: '相机' },\r\n      { data: 'icon-xiaochengxu_shuji', fontContent: 'e6bf', type: 'icon', name: '书籍01' },\r\n      { data: 'icon-xiaochengxu_dianying', fontContent: 'e6bd', type: 'icon', name: '电影' },\r\n      { data: 'icon-xiaochengxu_tishi', fontContent: 'e6bc', type: 'icon', name: '提示' },\r\n      { data: 'icon-xiaochengxu_zhiyin', fontContent: 'e6ba', type: 'icon', name: '指引' },\r\n      { data: 'icon-xiaochengxu_yinle', fontContent: 'e6b9', type: 'icon', name: '音乐' },\r\n      { data: 'icon-xiaochengxu_nan', fontContent: 'e6b8', type: 'icon', name: '男' },\r\n      { data: 'icon-xiaochengxu_zhiye', fontContent: 'e6b7', type: 'icon', name: '职业' },\r\n      { data: 'icon-xiaochengxu_yejibaobiao', fontContent: 'e6b6', type: 'icon', name: '业绩报表 交易记录' },\r\n      { data: 'icon-xiaochengxu_luxiangji', fontContent: 'e6b5', type: 'icon', name: '录像机' },\r\n      { data: 'icon-xiaochengxu_shuaxin', fontContent: 'e6b4', type: 'icon', name: '刷新' },\r\n      { data: 'icon-xiaochengxu_shafa', fontContent: 'e6b3', type: 'icon', name: '沙发' },\r\n      { data: 'icon-xiaochengxu_shenpi', fontContent: 'e6b0', type: 'icon', name: '审批' },\r\n      { data: 'icon-xiaochengxu_VIP', fontContent: 'e6af', type: 'icon', name: 'VIP' },\r\n      { data: 'icon-xiaochengxu_zuguanli', fontContent: 'e6ae', type: 'icon', name: '组管理' },\r\n      { data: 'icon-xiaochengxu_ziyuanguanli', fontContent: 'e6ad', type: 'icon', name: '资源管理' },\r\n      { data: 'icon-xiaochengxu_yinhangqia', fontContent: 'e6ac', type: 'icon', name: '银行卡' },\r\n      { data: 'icon-xiaochengxu_hanglixiang', fontContent: 'e6ab', type: 'icon', name: '行李箱' },\r\n      { data: 'icon-xiaochengxu_bianji', fontContent: 'e6aa', type: 'icon', name: '编辑 (1)' },\r\n      { data: 'icon-xiaochengxu_ziliao', fontContent: 'e6a8', type: 'icon', name: '资料' },\r\n      { data: 'icon-xiaochengxu_xiangxia', fontContent: 'e6a7', type: 'icon', name: '向下' },\r\n      { data: 'icon-xiaochengxu_xiangshang', fontContent: 'e6a6', type: 'icon', name: '向上' },\r\n      { data: 'icon-xiaochengxu_xiangzuo', fontContent: 'e6a5', type: 'icon', name: '向左' },\r\n      { data: 'icon-xiaochengxu_xiangyou', fontContent: 'e6a4', type: 'icon', name: '向右' },\r\n      { data: 'icon-xiaochengxu_gouwu1', fontContent: 'e6a3', type: 'icon', name: '购物' },\r\n      { data: 'icon-xiaochengxu_gouwu', fontContent: 'e6a2', type: 'icon', name: '购物' },\r\n      { data: 'icon-xiaochengxu_weixinzhifu', fontContent: 'e6a1', type: 'icon', name: '微信支付' },\r\n      { data: 'icon-xiaochengxu_renminbicaiwuzhifu', fontContent: 'e6a0', type: 'icon', name: '余额支付' },\r\n      { data: 'icon-xiaochengxu_shijian', fontContent: 'e69f', type: 'icon', name: '时间  日期' },\r\n      { data: 'icon-xiaochengxu_hangyepaihang', fontContent: 'e69d', type: 'icon', name: '行业排行 奖杯' },\r\n      { data: 'icon-xiaochengxu_weixin', fontContent: 'e69c', type: 'icon', name: '微信' },\r\n      { data: 'icon-xiaochengxu_dingdan', fontContent: 'e69b', type: 'icon', name: '订单' },\r\n      { data: 'icon-xiaochengxu_xiaoxi1', fontContent: 'e69a', type: 'icon', name: '消息' },\r\n      { data: 'icon-xiaochengxu_xiaoxi', fontContent: 'e699', type: 'icon', name: '消息 ' },\r\n      { data: 'icon-xiaochengxu_shoucang', fontContent: 'e675', type: 'icon', name: '收藏' },\r\n      { data: 'icon-xiaochengxu_zhifubaoqianbao', fontContent: 'e622', type: 'icon', name: '支付宝钱包' },\r\n      { data: 'icon-xiaochengxu_licaishouyi', fontContent: 'e61f', type: 'icon', name: '理财收益' },\r\n      { data: 'icon-xiaochengxu_fanhui', fontContent: 'e60d', type: 'icon', name: '返回' },\r\n      { data: 'icon-xiaochengxu_jinru', fontContent: 'e60c', type: 'icon', name: '进入' },\r\n      { data: 'icon-xiaochengxu_shezhi', fontContent: 'e609', type: 'icon', name: '设置' },\r\n      { data: 'icon-xiaochengxu_pinglun', fontContent: 'e608', type: 'icon', name: '评论' },\r\n      { data: 'icon-xiaochengxu_sousuo', fontContent: 'e607', type: 'icon', name: '搜索' },\r\n      { data: 'icon-xiaochengxu_shanchu', fontContent: 'e605', type: 'icon', name: '删除' },\r\n      { data: 'icon-xiaochengxu_saoyisao', fontContent: 'e604', type: 'icon', name: '扫一扫' },\r\n    ],\r\n    name: '小程序',\r\n  },\r\n  'icon-tongyong': {\r\n    items: [\r\n      { data: 'icon-tongyong_zengjia', fontContent: 'e6da', type: 'icon', name: '增加 (1)' },\r\n      { data: 'icon-tongyong_folder-line-copy', fontContent: 'e697', type: 'icon', name: '文件夹' },\r\n      { data: 'icon-tongyong_preview-line', fontContent: 'e696', type: 'icon', name: '预览' },\r\n      { data: 'icon-tongyong_add-line1', fontContent: 'e695', type: 'icon', name: '添加' },\r\n      { data: 'icon-tongyong_add-circle-s', fontContent: 'e694', type: 'icon', name: '添加' },\r\n      { data: 'icon-tongyong_download', fontContent: 'e693', type: 'icon', name: '下载' },\r\n      { data: 'icon-tongyong_shouqi-copy', fontContent: 'e692', type: 'icon', name: '收起' },\r\n      { data: 'icon-tongyong_email-s', fontContent: 'e691', type: 'icon', name: '邮件-实色' },\r\n      { data: 'icon-tongyong_email-line', fontContent: 'e690', type: 'icon', name: '邮件' },\r\n      { data: 'icon-tongyong_essential', fontContent: 'e68f', type: 'icon', name: '必填' },\r\n      { data: 'icon-tongyong_flow-others', fontContent: 'e68e', type: 'icon', name: '流程-其他投递机会及归属' },\r\n      { data: 'icon-tongyong_flow-Mark', fontContent: 'e68d', type: 'icon', name: '流程-备注' },\r\n      { data: 'icon-tongyong_flow-owner', fontContent: 'e68c', type: 'icon', name: '流程-简历操作及归属' },\r\n      { data: 'icon-tongyong_flow-entry', fontContent: 'e68b', type: 'icon', name: '流程-入职管理' },\r\n      { data: 'icon-tongyong_flow-log', fontContent: 'e68a', type: 'icon', name: '流程-流程日志' },\r\n      { data: 'icon-tongyong_flow-determine', fontContent: 'e689', type: 'icon', name: '流程-测评管理' },\r\n      { data: 'icon-tongyong_flow-offer', fontContent: 'e688', type: 'icon', name: '流程-offer管理' },\r\n      { data: 'icon-tongyong_flow-resume', fontContent: 'e687', type: 'icon', name: '流程-简历' },\r\n      { data: 'icon-tongyong_flow-interview', fontContent: 'e686', type: 'icon', name: '流程-面试管理' },\r\n      { data: 'icon-tongyong_fill', fontContent: 'e685', type: 'icon', name: '填写' },\r\n      { data: 'icon-tongyong_haier', fontContent: 'e684', type: 'icon', name: '海尔' },\r\n      { data: 'icon-tongyong_n', fontContent: 'e683', type: 'icon', name: 'n' },\r\n      { data: 'icon-tongyong_list2', fontContent: 'e682', type: 'icon', name: '菜单栏' },\r\n      { data: 'icon-tongyong_list', fontContent: 'e681', type: 'icon', name: '列表' },\r\n      { data: 'icon-tongyong_more', fontContent: 'e680', type: 'icon', name: '更多' },\r\n      { data: 'icon-tongyong_switch', fontContent: 'e67f', type: 'icon', name: '切换' },\r\n      { data: 'icon-tongyong_lightning', fontContent: 'e67e', type: 'icon', name: '闪聘' },\r\n      { data: 'icon-tongyong_loc-line', fontContent: 'e67d', type: 'icon', name: '定位' },\r\n      { data: 'icon-tongyong_loc-s', fontContent: 'e67c', type: 'icon', name: '定位-实色' },\r\n      { data: 'icon-tongyong_menu-s', fontContent: 'e67b', type: 'icon', name: '菜单-实色' },\r\n      { data: 'icon-tongyong_menu-line', fontContent: 'e67a', type: 'icon', name: '菜单' },\r\n      { data: 'icon-tongyong_send-line', fontContent: 'e679', type: 'icon', name: '发送' },\r\n      { data: 'icon-tongyong_send-s', fontContent: 'e678', type: 'icon', name: '发送-实色' },\r\n      { data: 'icon-tongyong_talk-s', fontContent: 'e677', type: 'icon', name: '对话-实色' },\r\n      { data: 'icon-tongyong_talk-line', fontContent: 'e676', type: 'icon', name: '对话' },\r\n      { data: 'icon-tongyong_doc-s', fontContent: 'e674', type: 'icon', name: '文件-实色' },\r\n      { data: 'icon-tongyong_check-s', fontContent: 'e673', type: 'icon', name: '查看-实色' },\r\n      { data: 'icon-tongyong_check-line', fontContent: 'e672', type: 'icon', name: '查看' },\r\n      { data: 'icon-tongyong_remind-s', fontContent: 'e671', type: 'icon', name: '提示-灯泡-实色' },\r\n      { data: 'icon-tongyong_remind-line', fontContent: 'e670', type: 'icon', name: '提示-灯泡' },\r\n      { data: 'icon-tongyong_tel-s', fontContent: 'e66f', type: 'icon', name: '电话-实色' },\r\n      { data: 'icon-tongyong_tel-line', fontContent: 'e66e', type: 'icon', name: '电话' },\r\n      { data: 'icon-tongyong_resume-line', fontContent: 'e66d', type: 'icon', name: '简历' },\r\n      { data: 'icon-tongyong_resume-s', fontContent: 'e66c', type: 'icon', name: '简历-实色' },\r\n      { data: 'icon-tongyong_bonus-line', fontContent: 'e66b', type: 'icon', name: '积分' },\r\n      { data: 'icon-tongyong_bonus-s', fontContent: 'e66a', type: 'icon', name: '积分-实色' },\r\n      { data: 'icon-tongyong_set-s', fontContent: 'e669', type: 'icon', name: '设置-实色' },\r\n      { data: 'icon-tongyong_set-line', fontContent: 'e668', type: 'icon', name: '设置' },\r\n      { data: 'icon-tongyong_save-s', fontContent: 'e667', type: 'icon', name: '保存-实色' },\r\n      { data: 'icon-tongyong_save-line', fontContent: 'e666', type: 'icon', name: '保存' },\r\n      { data: 'icon-tongyong_pic-s', fontContent: 'e665', type: 'icon', name: '图片-实色' },\r\n      { data: 'icon-tongyong_pic-line', fontContent: 'e664', type: 'icon', name: '图片' },\r\n      { data: 'icon-tongyong_camera-s', fontContent: 'e663', type: 'icon', name: '相机-实色' },\r\n      { data: 'icon-tongyong_camera-line', fontContent: 'e662', type: 'icon', name: '相机' },\r\n      { data: 'icon-tongyong_voice-line', fontContent: 'e661', type: 'icon', name: '语音' },\r\n      { data: 'icon-tongyong_voice-s', fontContent: 'e660', type: 'icon', name: '语音-实色' },\r\n      { data: 'icon-tongyong_activity-line', fontContent: 'e65f', type: 'icon', name: '活动' },\r\n      { data: 'icon-tongyong_activity-s', fontContent: 'e65e', type: 'icon', name: '活动-实色' },\r\n      { data: 'icon-tongyong_note', fontContent: 'e65d', type: 'icon', name: '注释' },\r\n      { data: 'icon-tongyong_scan-line', fontContent: 'e65c', type: 'icon', name: '扫描' },\r\n      { data: 'icon-tongyong_refresh-line', fontContent: 'e65b', type: 'icon', name: '刷新' },\r\n      { data: 'icon-tongyong_link-line', fontContent: 'e65a', type: 'icon', name: '链接' },\r\n      { data: 'icon-tongyong_gender', fontContent: 'e659', type: 'icon', name: '性别' },\r\n      { data: 'icon-tongyong_edit-line', fontContent: 'e658', type: 'icon', name: '编辑' },\r\n      { data: 'icon-tongyong_flow-line', fontContent: 'e657', type: 'icon', name: '流程' },\r\n      { data: 'icon-tongyong_delete', fontContent: 'e656', type: 'icon', name: '删除' },\r\n      { data: 'icon-tongyong_calendar-line', fontContent: 'e655', type: 'icon', name: '日历' },\r\n      { data: 'icon-tongyong_search-line', fontContent: 'e654', type: 'icon', name: '搜索' },\r\n      { data: 'icon-tongyong_spread-line', fontContent: 'e653', type: 'icon', name: '展开' },\r\n      { data: 'icon-tongyong_edu-s', fontContent: 'e652', type: 'icon', name: '学历-实色' },\r\n      { data: 'icon-tongyong_edu-line', fontContent: 'e651', type: 'icon', name: '学历' },\r\n      { data: 'icon-tongyong_folder-line', fontContent: 'e650', type: 'icon', name: '文件夹' },\r\n      { data: 'icon-tongyong_folder-s', fontContent: 'e64f', type: 'icon', name: '文件夹-实色' },\r\n      { data: 'icon-tongyong_work-line', fontContent: 'e64e', type: 'icon', name: '职能' },\r\n      { data: 'icon-tongyong_work-s', fontContent: 'e64d', type: 'icon', name: '职能-实色' },\r\n      { data: 'icon-tongyong_nice-line', fontContent: 'e64c', type: 'icon', name: '赞' },\r\n      { data: 'icon-tongyong_nice', fontContent: 'e64b', type: 'icon', name: '赞-实色' },\r\n      { data: 'icon-tongyong_share-line', fontContent: 'e64a', type: 'icon', name: '分享' },\r\n      { data: 'icon-tongyong_share-s', fontContent: 'e649', type: 'icon', name: '分享-实色' },\r\n      { data: 'icon-tongyong_lock-s', fontContent: 'e648', type: 'icon', name: '锁定-实色' },\r\n      { data: 'icon-tongyong_lock-line', fontContent: 'e647', type: 'icon', name: '锁定' },\r\n      { data: 'icon-tongyong_ulock-line', fontContent: 'e646', type: 'icon', name: '解锁' },\r\n      { data: 'icon-tongyong_delete-s', fontContent: 'e645', type: 'icon', name: '删除' },\r\n      { data: 'icon-tongyong_add-line', fontContent: 'e644', type: 'icon', name: '添加' },\r\n      { data: 'icon-tongyong_plus-line', fontContent: 'e643', type: 'icon', name: '加号' },\r\n      { data: 'icon-tongyong_user-line', fontContent: 'e642', type: 'icon', name: '用户' },\r\n      { data: 'icon-tongyong_user-s', fontContent: 'e641', type: 'icon', name: '用户-实色' },\r\n      { data: 'icon-tongyong_like-s', fontContent: 'e640', type: 'icon', name: '心-实色' },\r\n      { data: 'icon-tongyong_like-line', fontContent: 'e63f', type: 'icon', name: '心' },\r\n      { data: 'icon-tongyong_favorite-s', fontContent: 'e63e', type: 'icon', name: '收藏-实色' },\r\n      { data: 'icon-tongyong_favorite-line', fontContent: 'e63d', type: 'icon', name: '收藏' },\r\n      { data: 'icon-tongyong_home-s', fontContent: 'e63c', type: 'icon', name: '主页-实色' },\r\n      { data: 'icon-tongyong_home-line', fontContent: 'e63b', type: 'icon', name: '主页' },\r\n      { data: 'icon-tongyong_question-s', fontContent: 'e639', type: 'icon', name: '疑问-实色' },\r\n      { data: 'icon-tongyong_question-line', fontContent: 'e638', type: 'icon', name: '疑问' },\r\n      { data: 'icon-tongyong_warn-s', fontContent: 'e637', type: 'icon', name: '注意-实色' },\r\n      { data: 'icon-tongyong_warn-line', fontContent: 'e636', type: 'icon', name: '注意' },\r\n      { data: 'icon-tongyong_close-s', fontContent: 'e635', type: 'icon', name: '关闭-圆形实色' },\r\n      { data: 'icon-tongyong_close-line', fontContent: 'e634', type: 'icon', name: '关闭' },\r\n      { data: 'icon-tongyong_close-line-c', fontContent: 'e633', type: 'icon', name: '关闭-圆' },\r\n      { data: 'icon-tongyong_confirm-line', fontContent: 'e632', type: 'icon', name: '对勾' },\r\n      { data: 'icon-tongyong_select-line', fontContent: 'e631', type: 'icon', name: '勾选-圆' },\r\n      { data: 'icon-tongyong_select-s', fontContent: 'e630', type: 'icon', name: '勾选-圆形实色' },\r\n      { data: 'icon-tongyong_choose-s', fontContent: 'e62f', type: 'icon', name: '勾选-实色' },\r\n      { data: 'icon-tongyong_choose-line', fontContent: 'e62e', type: 'icon', name: '勾选' },\r\n      { data: 'icon-tongyong_below-s', fontContent: 'e62d', type: 'icon', name: '下-三角' },\r\n      { data: 'icon-tongyong_left-s', fontContent: 'e62c', type: 'icon', name: '左-三角' },\r\n      { data: 'icon-tongyong_top-s', fontContent: 'e62b', type: 'icon', name: '上-三角' },\r\n      { data: 'icon-tongyong_right-s', fontContent: 'e62a', type: 'icon', name: '右-三角' },\r\n      { data: 'icon-tongyong_below-line', fontContent: 'e629', type: 'icon', name: '下' },\r\n      { data: 'icon-tongyong_right-line', fontContent: 'e628', type: 'icon', name: '右' },\r\n      { data: 'icon-tongyong_left-line', fontContent: 'e626', type: 'icon', name: '左' },\r\n      { data: 'icon-tongyong_top-line', fontContent: 'e625', type: 'icon', name: '上' },\r\n    ],\r\n    name: '通用',\r\n  },\r\n  'icon-fangxiang': {\r\n    items: [\r\n      { data: 'icon-fangxiang_xiaoxifangxiang', fontContent: 'e627', type: 'icon', name: '消息方向' },\r\n      { data: 'icon-fangxiang_fangxiang4', fontContent: 'e602', type: 'icon', name: '方向4' },\r\n      { data: 'icon-fangxiang_fangxiang3', fontContent: 'e601', type: 'icon', name: '方向3' },\r\n      { data: 'icon-fangxiang_fangxiang2', fontContent: 'e600', type: 'icon', name: '方向2' },\r\n      { data: 'icon-fangxiang_ziyuan', fontContent: 'e610', type: 'icon', name: '资源 41' },\r\n    ],\r\n    name: '方向',\r\n  },\r\n};\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport './iconfont.css'\r\n\r\nexport default class PresetIcons extends React.PureComponent {\r\n  static propTypes = {\r\n    type: PropTypes.string,\r\n    saveRef: PropTypes.func,\r\n  }\r\n\r\n  componentDidMount() {\r\n    let saveRef = this.props.saveRef\r\n    saveRef && saveRef(this.refs.g)\r\n  }\r\n\r\n  render() {\r\n    const { type } = this.props\r\n    return <i ref={'g'} className={`preseticons ${type}`} />\r\n  }\r\n}\r\n\r\nexport class PresetIcon extends React.Component {\r\n  static propTypes = {\r\n    type: PropTypes.string,\r\n    onClick: PropTypes.func,\r\n  }\r\n\r\n  static defaultProps = {\r\n    onClick: () => {},\r\n  }\r\n\r\n  state = {\r\n    type: '',\r\n  }\r\n\r\n  componentWillMount() {\r\n    if (this.props.type) {\r\n      this.setState({ type: this.props.type })\r\n    }\r\n  }\r\n\r\n  setValue(type) {\r\n    this.setState({ type })\r\n  }\r\n\r\n  render() {\r\n    const { type } = this.state\r\n    return <i onClick={this.props.onClick} className={`preseticons ${type}`} />\r\n  }\r\n}\r\n","import React from 'react';\r\nimport Types from 'prop-types';\r\nimport './NativeDragDrop.scss';\r\nimport jquery from 'jquery';\r\nimport { isPlainObject } from '@/lib/util/helper';\r\n\r\nexport class Draggable extends React.PureComponent {\r\n  static propTypes = {\r\n    children: Types.any,\r\n    params: Types.any,\r\n    namespace: Types.string,\r\n  };\r\n  static defaultProps = {\r\n    namespace: 'dragdata',\r\n  };\r\n  handleDragStart = (e) => {\r\n    let p = this.props.params;\r\n    e.dataTransfer.setData(this.props.namespace, isPlainObject(p) ? JSON.stringify(p) : p);\r\n  };\r\n\r\n  render() {\r\n    const children = this.props.children;\r\n    return (\r\n      <div onDragStart={this.handleDragStart} className={'aj-component-draggable'} draggable={true}>\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport class Dropable extends React.PureComponent {\r\n  static propTypes = {\r\n    onDrop: Types.func,\r\n    children: Types.any,\r\n    className: Types.string,\r\n    domRef: Types.func,\r\n    namespace: Types.string,\r\n    customEvent: Types.bool,\r\n  };\r\n  static defaultProps = {\r\n    namespace: 'dragdata',\r\n    customEvent: false,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.props.domRef && this.props.domRef(this.refs.g);\r\n  }\r\n\r\n  handleDrop = (e) => {\r\n    if (!this.props.customEvent) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }\r\n    let data = e.dataTransfer.getData(this.props.namespace);\r\n    if (data && data[0] == '{' && data[data.length - 1] == '}') data = JSON.parse(data);\r\n    data && this.props.onDrop(data, e);\r\n    jquery(this.refs.g).removeClass('enter');\r\n  };\r\n  allowDrop = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  };\r\n  onEnter = () => {\r\n    jquery(this.refs.g).addClass('enter');\r\n  };\r\n  onLeave = () => {\r\n    jquery(this.refs.g).removeClass('enter');\r\n  };\r\n\r\n  render() {\r\n    const { className = '' } = this.props;\r\n    return (\r\n      <div ref={'g'} onDragEnter={this.onEnter} onDragLeave={this.onLeave} className={`aj-component-dropable ${className}`} onDragOver={this.allowDrop} onDrop={this.handleDrop}>\r\n        {this.props.children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport './Search.scss';\r\nimport Icon from '../Icon';\r\nimport Types from 'prop-types';\r\n\r\nexport default class Search extends React.Component {\r\n  static propTypes = {\r\n    onSearch: Types.func,\r\n    placeholder: Types.string,\r\n    style: Types.object,\r\n    className: Types.string,\r\n  };\r\n\r\n  handleKeyUp = (e) => {\r\n    if (e.keyCode == 13) {\r\n      this.props.onSearch(e.target.value.trim());\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <span className={'aj-ui-search'}>\r\n        <Icon type={'search'} />\r\n        <input onKeyUp={this.handleKeyUp} placeholder={this.props.placeholder} data-event='ignore' />\r\n      </span>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/16\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport Collapse from '../lib/ui/Collapse';\r\nimport { PresetIcons } from '../config/presetIcons';\r\nimport Icon from '../lib/PresetIcons';\r\nimport { Draggable } from '../lib/ui/NativeDragDrop';\r\nimport Search from '../lib/ui/Search';\r\nimport { Tooltip } from 'antd';\r\n\r\nexport default class OutlineIcons extends React.Component {\r\n  state = {\r\n    items: [],\r\n    source: [],\r\n    searched: false,\r\n  };\r\n\r\n  componentWillMount() {\r\n    let items = Object.keys(PresetIcons).map((item) => PresetIcons[item]);\r\n    this.setState({\r\n      items,\r\n      source: items,\r\n    });\r\n  }\r\n\r\n  handleSearch = (value) => {\r\n    if (!value.trim()) return this.setState({ items: this.state.source, searched: false });\r\n\r\n    let searchValues = {\r\n      title: value,\r\n      items: [],\r\n    };\r\n    let items = this.state.source.forEach((item) => {\r\n      searchValues.items = searchValues.items.concat(\r\n        item.items.filter((item) => {\r\n          return item.name.indexOf(value) > -1;\r\n        })\r\n      );\r\n    });\r\n\r\n    this.setState({ items: searchValues, searched: true });\r\n  };\r\n\r\n  render() {\r\n    const { items, source } = this.state;\r\n    return (\r\n      <div className='root-layout-side-icons'>\r\n        <div style={{ padding: 15 }}>\r\n          <Search onSearch={this.handleSearch} placeholder={'输入关键字搜索'} />\r\n        </div>\r\n\r\n        {this.state.searched ? (\r\n          <Collapse title={items.title}>\r\n            {items.items.map((item) => {\r\n              return (\r\n                <Draggable key={item.data} params={item}>\r\n                  <Icon type={item.data} />\r\n                </Draggable>\r\n              );\r\n            })}\r\n          </Collapse>\r\n        ) : (\r\n          items.map((object) => {\r\n            return (\r\n              <Collapse collapse={object.name != '表单'} key={object.name} title={object.name}>\r\n                {object.items.map((item) => {\r\n                  return (\r\n                    <Draggable key={item.data} params={item}>\r\n                      <Icon type={item.data} />\r\n                    </Draggable>\r\n                  );\r\n                })}\r\n              </Collapse>\r\n            );\r\n          })\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/28\r\n *\r\n */\r\n\r\nimport React, { Fragment } from 'react';\r\nimport Types from 'prop-types';\r\nimport KeyEvent from '../service/KeyEvent';\r\nimport './EditableLabel.scss';\r\n\r\nexport default class EditableLabel extends React.Component {\r\n  static propTypes = {\r\n    onChange: Types.func,\r\n    children: Types.any,\r\n    value: Types.any,\r\n    className: Types.string,\r\n  };\r\n\r\n  state = {\r\n    mode: false,\r\n  };\r\n\r\n  handleDBClick = () => {\r\n    if (this.state.mode) return;\r\n\r\n    this.setState({ mode: true }, () => {\r\n      this.refs.input.select();\r\n    });\r\n  };\r\n\r\n  handleChange = (e) => {\r\n    this.props.onChange(e.target.value);\r\n    this.setState({ mode: false });\r\n  };\r\n\r\n  handleKeyUp = (e) => {\r\n    e.stopPropagation();\r\n    if (e.keyCode === KeyEvent.DOM_VK_RETURN) {\r\n      this.handleChange(e);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { className, value } = this.props;\r\n\r\n    return (\r\n      <div onDoubleClick={this.handleDBClick} className={`${this.state.mode ? 'editmode' : ''} ${className} aj-editable-component`}>\r\n        <input\r\n          style={{ display: this.state.mode ? 'block' : 'none' }}\r\n          ref={'input'}\r\n          onKeyUp={this.handleKeyUp}\r\n          defaultValue={value}\r\n          className={'editable-component_input'}\r\n          onBlur={this.handleChange}\r\n          data-event='ignore'\r\n        />\r\n        <span style={{ display: this.state.mode ? 'none' : 'block' }} title={value} className={'editable-component_text'}>\r\n          {value}\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/5/15\r\n *\r\n */\r\nimport React from 'react';\r\n\r\nconst Cache = {};\r\nexport default class CacheState extends React.Component {\r\n  static getCacheState(key) {\r\n    return key ? Cache[key] : Cache;\r\n  }\r\n\r\n  hasCacheData = false;\r\n\r\n  /**\r\n   * @protected 必须实现该方法，对应缓存中的key\r\n   * @return {null}\r\n   */\r\n  getCacheKey() {\r\n    return null;\r\n  }\r\n\r\n  clearCacheData = () => {\r\n    Cache[this.getCacheKey()] = null;\r\n  };\r\n\r\n  setState(state, cb) {\r\n    super.setState(state, () => {\r\n      Cache[this.getCacheKey()] = this.state;\r\n      cb && cb();\r\n    });\r\n  }\r\n\r\n  componentWillMount() {\r\n    let key = this.getCacheKey();\r\n    let data = Cache[key];\r\n    if (data) {\r\n      super.setState(data);\r\n      this.hasCacheData = true;\r\n    }\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/16\r\n *\r\n */\r\nimport React from 'react';\r\nimport { Draggable } from '../lib/ui/NativeDragDrop';\r\nimport EditableLabel from '../lib/ui/EditableLabel';\r\nimport Icon from '../lib/Icon';\r\nimport { deleteTemplate, fetchTemplate, updateMaterialName } from '../api/material';\r\nimport { Icon as AntIcon, Modal } from 'antd';\r\nimport Event from '../lib/Base/Event';\r\nimport { workspace_save_template_success } from '../lib/util/actions';\r\nimport { cleanEmpty } from '../lib/util/helper';\r\nimport Button from '../lib/ui/Button';\r\nimport Search from '../lib/ui/Search';\r\nimport { outline_closable_panel_show } from '@/lib/util/actions';\r\nimport { getQuery } from '@/lib/util/helper';\r\nimport CacheState from '@/lib/Base/CacheState';\r\n\r\nexport const imageCache = {};\r\nexport default class OutlinePrefabs extends CacheState {\r\n  state = {\r\n    template: [],\r\n    result: {\r\n      page: 1,\r\n      pages: 1,\r\n    },\r\n    query: {\r\n      name: '',\r\n      pageIndex: 1,\r\n      pageSize: 5,\r\n    },\r\n  };\r\n  getCacheKey = () => {\r\n    return 'outline/prefabs';\r\n  };\r\n\r\n  componentWillMount() {\r\n    super.componentWillMount();\r\n    Event.listen(workspace_save_template_success, this.handleCreate);\r\n    !this.hasCacheData && this.refresh(Object.assign({}, this.state.query));\r\n  }\r\n\r\n  refresh = (query, reset = false) => {\r\n    fetchTemplate(cleanEmpty(query)).then((res) => {\r\n      const { pages, page, docs } = res.data;\r\n      const resultdata = docs.map((item) => {\r\n        let content = item.content;\r\n        content._id = item._id;\r\n        content.name = item.name;\r\n        return content;\r\n      });\r\n      this.setState({\r\n        template: reset ? resultdata : this.state.template.concat(resultdata),\r\n        result: { page, pages },\r\n        query,\r\n      });\r\n    });\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(workspace_save_template_success, this.handleCreate);\r\n  }\r\n\r\n  handleCreate = ({ type, data }) => {\r\n    if (type == 'TEMPLATE') {\r\n      this.setState({ template: [data].concat(this.state.template) });\r\n    }\r\n  };\r\n  handleChange = (id, value) => {\r\n    updateMaterialName(id, value).then(() => {\r\n      let index = this.state.template.findIndex((item) => item._id == id);\r\n      let data = Object.assign({}, this.state.template[index]);\r\n      data.name = value;\r\n      this.state.template[index] = data;\r\n      this.setState({ template: this.state.template });\r\n    });\r\n  };\r\n  handleDelete = (id) => {\r\n    Modal.confirm({\r\n      title: '提示',\r\n      content: '确认要删除该模板吗？',\r\n      onOk: () => {\r\n        deleteTemplate(id).then((res) => {\r\n          let data = this.state.template;\r\n          let index = data.findIndex((item) => item._id == id);\r\n          data.splice(index, 1);\r\n          this.setState({ template: data });\r\n        });\r\n      },\r\n    });\r\n  };\r\n  handleSearch = (value) => {\r\n    if (this.state.query.name == value) return;\r\n    this.refresh(Object.assign({}, this.state.query, { name: value, pageIndex: 1 }), true);\r\n  };\r\n  loadMore = () => {\r\n    let query = Object.assign({}, this.state.query);\r\n    query.pageIndex += 1;\r\n    this.refresh(query);\r\n  };\r\n  showPanel = () => {\r\n    Event.dispatch(outline_closable_panel_show, '模板');\r\n  };\r\n\r\n  render() {\r\n    let showPublish = getQuery().showPublish;\r\n    return (\r\n      <div className='root-layout-side-assets'>\r\n        <div style={{ padding: 15, display: 'flex' }}>\r\n          <Search placeholder={'模板名称'} onSearch={this.handleSearch} />\r\n          {showPublish == 'YES' && <Icon onClick={this.showPanel} style={{ marginLeft: 15 }} type={'zujiankuLOGO'} />}\r\n        </div>\r\n        {this.state.template.map((item, index) => {\r\n          return <WrapperIamgeItem item={item} key={item._id} handleChange={this.handleChange} handleDelete={this.handleDelete} />;\r\n        })}\r\n        {this.state.result.page < this.state.result.pages && (\r\n          <div style={{ padding: 10 }}>\r\n            <Button type={'primary'} block onClick={this.loadMore}>\r\n              加载更多\r\n            </Button>\r\n          </div>\r\n        )}\r\n        {this.state.template.length === 0 && (\r\n          <div className={'side-prefabs_tips'}>\r\n            <Icon type={'jianyi'} />\r\n            <div className={'side-prefabs_tips-text'}>在工作面板中选中组件，点击右键菜单，选择添加到我的模板</div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass WrapperIamgeItem extends React.PureComponent {\r\n  render() {\r\n    let { item, handleDelete, handleChange } = this.props;\r\n    return (\r\n      <div className={'side-assets_image-item'}>\r\n        <Draggable params={item}>{item.image ? <img src={item.image} /> : <AntIcon type={'loading'} />}</Draggable>\r\n        <EditableLabel value={item.name} onChange={(value) => handleChange(item._id, value)} />\r\n        <Icon onClick={() => handleDelete(item._id)} type={'delete'} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/16\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport Types from 'prop-types';\r\nimport Icon from '../Icon';\r\nimport './TreeNode.scss';\r\nimport jQuery from 'jquery';\r\nimport Event from '../Base/Event';\r\nimport { component_enter } from '../util/actions';\r\nimport EditableLabel from '@/lib/ui/EditableLabel';\r\n\r\nlet currentDragId = null;\r\n\r\nfunction checkCanDrop(e) {\r\n  return !isParentById(e.target, currentDragId);\r\n}\r\n\r\nfunction isParentById(target, id) {\r\n  let node = target.parentNode;\r\n  while (node) {\r\n    if (node.dataset.uid === id) {\r\n      return true;\r\n    }\r\n    if (node.className === 'aj-component-tree') {\r\n      return;\r\n    }\r\n    node = node.parentNode;\r\n  }\r\n}\r\n\r\nclass EditableName extends React.Component {\r\n  static propTypes = {\r\n    onChange: Types.func,\r\n    value: Types.string,\r\n    id: Types.string,\r\n    onMove: Types.func,\r\n    draggable: Types.bool,\r\n  };\r\n\r\n  state = {\r\n    value: '',\r\n    readonly: true,\r\n  };\r\n\r\n  editalbe() {\r\n    this.setState({ readonly: false });\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.setState({ value: this.props.value });\r\n  }\r\n\r\n  componentWillReceiveProps = (props) => {\r\n    if (props.value !== this.state.value) {\r\n      this.setState({ value: props.value });\r\n    }\r\n  };\r\n\r\n  handleChange = (e) => {\r\n    let value = e.target.value;\r\n    this.setState({ value });\r\n  };\r\n\r\n  handleKeyUp = (e) => {\r\n    if (e.key.toLowerCase() === 'enter') {\r\n      this.props.onChange(this.state.value);\r\n      this.setState({ readonly: true });\r\n    }\r\n  };\r\n\r\n  handleBlur = () => {\r\n    this.setState({ readonly: true });\r\n    if (this.props.value !== this.state.value) {\r\n      this.props.onChange(this.state.value);\r\n    }\r\n  };\r\n\r\n  handleDragStart = (e) => {\r\n    if (this.state.readonly) {\r\n      e.dataTransfer.setData('nodedrag', this.props.id);\r\n      console.log(this.props.id);\r\n      e.dataTransfer.effectAllowed = 'move';\r\n      currentDragId = this.props.id;\r\n    } else {\r\n      e.preventDefault();\r\n    }\r\n  };\r\n\r\n  // enter\r\n  handleDragOver = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (checkCanDrop(e)) {\r\n      jQuery(e.target)\r\n        .parent()\r\n        .addClass('drag-over');\r\n    }\r\n  };\r\n\r\n  handleDrop = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    let id = e.dataTransfer.getData('nodedrag');\r\n    if (id && id !== this.props.id) {\r\n      this.props.onMove(id, this.props.id, true);\r\n    }\r\n    jQuery(e.target)\r\n      .parent()\r\n      .removeClass('drag-over');\r\n  };\r\n\r\n  handleMouseLeave = (e) => {\r\n    e.stopPropagation();\r\n    jQuery(e.target)\r\n      .parent()\r\n      .removeClass('drag-over');\r\n  };\r\n\r\n  //over\r\n  handleDragOverD = (e) => {\r\n    if (checkCanDrop(e)) {\r\n      e.preventDefault();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let dragHander = {};\r\n    if (this.props.draggable) {\r\n      dragHander = {\r\n        draggable: true,\r\n      };\r\n    }\r\n    return (\r\n      <input\r\n        draggable={this.state.readonly ? this.props.draggable : 'false'}\r\n        onDragStart={this.handleDragStart}\r\n        data-uid={this.props.id}\r\n        className={`tree-node-editname ${this.state.readonly ? '' : 'editmode'}`}\r\n        onBlur={this.handleBlur}\r\n        readOnly={this.state.readonly}\r\n        data-event='ignore'\r\n        onKeyUp={this.handleKeyUp}\r\n        onChange={this.handleChange}\r\n        value={this.state.value}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nclass TreeNode extends React.PureComponent {\r\n  static propTypes = {\r\n    path: Types.string,\r\n    icon: Types.any,\r\n    paddingLeft: Types.number,\r\n    onSelect: Types.func,\r\n    renderActions: Types.func,\r\n    name: Types.string,\r\n    id: Types.any.isRequired,\r\n    parentid: Types.any,\r\n    onNameChange: Types.func,\r\n    onMove: Types.func,\r\n    draggable: Types.bool,\r\n    type: Types.string,\r\n    hasChildren: Types.bool,\r\n  };\r\n\r\n  componentWillMount() {\r\n    const { path, id } = this.props;\r\n    this.handleSelect = () => this.props.onSelect(path, id);\r\n    this.handleNameChange = (v) => this.props.onNameChange(path, id, v);\r\n    this.paddingLeft = { paddingLeft: this.props.paddingLeft };\r\n  }\r\n\r\n  handleDoubleClick = () => {\r\n    this.refs.name.editalbe();\r\n  };\r\n\r\n  handleDrop = (e) => {\r\n    e.preventDefault();\r\n    let dragid = e.dataTransfer.getData('nodedrag');\r\n    jQuery(e.target).removeClass('drag-over');\r\n    if (dragid != this.props.id) {\r\n      this.props.onMove(dragid, this.props.id);\r\n    }\r\n  };\r\n\r\n  //enter\r\n  handleDropOver = (e) => {\r\n    e.preventDefault();\r\n    if (checkCanDrop(e)) {\r\n      jQuery(e.target).addClass('drag-over');\r\n    } else {\r\n      e.dataTransfer.dropEffect = 'none';\r\n    }\r\n  };\r\n\r\n  handleMouseLeave = (e) => {\r\n    jQuery(e.target).removeClass('drag-over');\r\n  };\r\n\r\n  // over\r\n  handleOver = (e) => {\r\n    if (checkCanDrop(e)) {\r\n      e.preventDefault();\r\n    } else {\r\n      e.dataTransfer.dropEffect = 'none';\r\n    }\r\n  };\r\n\r\n  handleMouseEnter = (e) => {\r\n    e.stopPropagation();\r\n    let item = window.allWidgets[this.props.id];\r\n    if (item) {\r\n      Event.dispatch(component_enter, item.view);\r\n    }\r\n  };\r\n  handleDragStart = (e) => {\r\n    e.dataTransfer.setData('nodedrag', this.props.id);\r\n  };\r\n\r\n  render() {\r\n    const { path, type, renderActions, onMove, hasChildren, id, parentid, name, paddingLeft, icon, onSelect } = this.props;\r\n    return (\r\n      <div onClick={this.handleSelect} style={this.paddingLeft} id={'treenode' + id} draggable={this.props.draggable} onDragStart={this.handleDragStart} className={'tree-node-name'}>\r\n        {typeof icon == 'function' ? icon({ type, hasChildren }) : <Icon type={hasChildren ? 'mulu' : '13'} />}\r\n\r\n        <EditableLabel onChange={this.handleNameChange} value={name} />\r\n        {renderActions && <span className={'tree-node-actions'}>{renderActions({ id, name, path, type })}</span>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst noop = () => {};\r\n\r\nexport class Tree extends React.Component {\r\n  static propTypes = {\r\n    data: Types.array.isRequired,\r\n    onSelect: Types.func,\r\n    renderIcon: Types.func,\r\n    domRef: Types.func,\r\n    onNameChange: Types.func,\r\n    onMove: Types.func,\r\n    draggable: Types.bool,\r\n    renderActions: Types.func,\r\n  };\r\n\r\n  static defaultProps = {\r\n    onSelect: noop,\r\n    domRef: noop,\r\n    renderActions: noop,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.props.domRef(this.refs.g);\r\n  }\r\n\r\n  handleSelect = (path, id) => {\r\n    this.props.onSelect(path, id);\r\n  };\r\n\r\n  render() {\r\n    const { onMove, onNameChange, renderIcon, onSelect, data, renderActions } = this.props;\r\n    const loop = (children, parentPath, paddingLeft, parentid) => {\r\n      return children.map((item, index) => {\r\n        let _path = parentPath + index;\r\n        let _subpath = _path + '-';\r\n        let hasChildren = item.items && item.items.length > 0;\r\n        return (\r\n          <div data-uid={item.id} key={item.id}>\r\n            <TreeNode\r\n              draggable={this.props.draggable}\r\n              parentid={parentid}\r\n              icon={renderIcon}\r\n              hasChildren={hasChildren}\r\n              path={_path}\r\n              onMove={onMove}\r\n              paddingLeft={paddingLeft}\r\n              type={item.type}\r\n              renderActions={renderActions}\r\n              onNameChange={onNameChange}\r\n              onSelect={onSelect}\r\n              name={item.alias || item.name}\r\n              id={item.id}\r\n            />\r\n            {item.items && item.items.length > 0 && <div className={'tree-node-has-sub'}>{loop(item.items, _subpath, paddingLeft + 15, item.id)}</div>}\r\n          </div>\r\n        );\r\n      });\r\n    };\r\n    return (\r\n      <div ref={'g'} className={'aj-component-tree'}>\r\n        {loop(data, '', 2)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/4/11\r\n *\r\n */\r\nimport React from 'react';\r\nimport Button from '../lib/ui/Button';\r\nimport { Tree } from '../lib/ui/TreeNode';\r\nimport { createNewPage, duplicatePageState, getPageData, setPageData, updateName } from '../lib/util/page';\r\nimport Event from '../lib/Base/Event';\r\nimport { outline_page_delete, outline_page_select, pages_load_end } from '../lib/util/actions';\r\nimport arrayToTree from 'array-to-tree';\r\nimport Search from '../lib/ui/Search';\r\nimport jQuery from 'jquery';\r\nimport { Form, Modal, Radio, Tooltip } from 'antd';\r\nimport Icon from '../lib/Icon';\r\nimport { getQuery } from '../lib/util/helper';\r\n\r\nconst FormItem = Form.Item;\r\nconst RadioGroup = Radio.Group;\r\nexport default class OutlinePages extends React.Component {\r\n  state = {\r\n    data: [],\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (getPageData().length > 0) {\r\n      this.refresh();\r\n      this.autoSelectPage();\r\n    }\r\n    Event.listen(pages_load_end, this.handlePageLoadEnd);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(pages_load_end, this.handlePageLoadEnd);\r\n  }\r\n\r\n  handlePageLoadEnd = (pages) => {\r\n    setPageData(pages);\r\n    this.refresh();\r\n    this.autoSelectPage();\r\n  };\r\n  autoSelectPage = () => {\r\n    if (getPageData().length == 0) return;\r\n\r\n    setTimeout(() => {\r\n      let screen = getQuery().s;\r\n      if (screen) localStorage.setItem('selected-page', screen);\r\n      let id = localStorage.getItem('selected-page');\r\n      id = id || getPageData()[0].id;\r\n      if (id) {\r\n        jQuery(this.refs.wrapper)\r\n          .find(`#treenode${id}`)\r\n          .addClass('selected');\r\n        this.handleSelect(null, id);\r\n      }\r\n    }, 20);\r\n  };\r\n  refresh = () => {\r\n    let data = getPageData();\r\n    data = arrayToTree(data, {\r\n      parentProperty: 'parentid',\r\n      childrenProperty: 'items',\r\n    });\r\n    this.setState({ data });\r\n  };\r\n  handleSelect = (path, id) => {\r\n    let wrapper = jQuery(this.refs.wrapper);\r\n    wrapper.find('.selected').removeClass('selected');\r\n    wrapper.find(`#treenode${id}`).addClass('selected');\r\n    Event.dispatch(outline_page_select, id);\r\n  };\r\n  handleCreate = () => {\r\n    createNewPage();\r\n    this.refresh();\r\n  };\r\n  handleCreateSub = (id) => {\r\n    createNewPage(id);\r\n    this.refresh();\r\n  };\r\n  _getSubPages = (item) => {\r\n    let pages = [];\r\n    const loop = (items) => {\r\n      for (let i = 0; i < items.length; i += 1) {\r\n        let obj = items[i];\r\n        pages.push(obj.id);\r\n        if (obj.items && obj.items.length > 0) loop(obj.items);\r\n      }\r\n    };\r\n    pages.push(item.id);\r\n    loop(item.items);\r\n    return pages;\r\n  };\r\n  findPageId = (id) => {\r\n    let findItem = (items) => {\r\n      for (let i = 0; i < items.length; i += 1) {\r\n        let item = items[i];\r\n        if (item.id === id) {\r\n          return item;\r\n        } else if (item.items && item.items.length > 0) {\r\n          let find = findItem(item.items);\r\n          if (find) return find;\r\n        }\r\n      }\r\n    };\r\n    return findItem(this.state.data);\r\n  };\r\n  handleDelete = (id) => {\r\n    let item = this.findPageId(id);\r\n    let hasChildren = item.items && item.items.length > 0;\r\n    let value = 'current';\r\n    let content = hasChildren ? (\r\n      <FormItem label={'要删除的页面'}>\r\n        <RadioGroup onChange={(e) => (value = e.target.value)} defaultValue={value}>\r\n          <Radio value={'current'}>当前页面</Radio>\r\n          <Radio value={'all'}>所有子页面</Radio>\r\n        </RadioGroup>\r\n      </FormItem>\r\n    ) : (\r\n      '确认删除该页面吗'\r\n    );\r\n    Modal.confirm({\r\n      title: '提示',\r\n      content: content,\r\n      onOk: () => {\r\n        if (hasChildren && value == 'all') {\r\n          let ids = this._getSubPages(item);\r\n          Event.dispatch(outline_page_delete, ids);\r\n        } else {\r\n          Event.dispatch(outline_page_delete, id);\r\n        }\r\n        item = null;\r\n        value = null;\r\n        this.refresh();\r\n      },\r\n    });\r\n  };\r\n  handleNameChange = (path, id, name) => {\r\n    updateName(name, id);\r\n    this.refresh();\r\n  };\r\n  handleSearch = (value) => {\r\n    if (!value) return this.refresh();\r\n    let data = getPageData();\r\n    data = data.filter((item) => item.alias.indexOf(value) > -1);\r\n    data = arrayToTree(data, {\r\n      parentProperty: 'parentid',\r\n      childrenProperty: 'items',\r\n    });\r\n    this.setState({ data });\r\n  };\r\n  handleCreateSubState = (id) => {\r\n    createNewPage(id, 'STATE');\r\n    this.refresh();\r\n  };\r\n  handleDuplicate = async (id, pid) => {\r\n    await duplicatePageState(id, pid);\r\n    this.refresh();\r\n  };\r\n  renderActions = ({ type, id }) => {\r\n    let actions = [];\r\n    if (type == 'STATE') {\r\n      actions.push(\r\n        <Tooltip key={'copy'} title={'创建副本'}>\r\n          <span onClick={() => this.handleDuplicate(id)}>\r\n            <Icon type={'fuzhi'} />\r\n          </span>\r\n        </Tooltip>\r\n      );\r\n    }\r\n    if (type == 'PAGE') {\r\n      actions.push(\r\n        <Tooltip key={'sub'} title={'添加子页面'}>\r\n          <span onClick={() => this.handleCreateSub(id)}>\r\n            <Icon type={'jia1'} />\r\n          </span>\r\n        </Tooltip>\r\n      );\r\n    }\r\n    actions.push(\r\n      <Tooltip key={'delete'} title={'删除'}>\r\n        <span onClick={() => this.handleDelete(id)}>\r\n          <Icon type={'delete'} />\r\n        </span>\r\n      </Tooltip>\r\n    );\r\n    return actions;\r\n  };\r\n  renderIcon = ({ type, hasChildren }) => {\r\n    let icon = '13';\r\n    if (hasChildren) icon = 'mulu';\r\n    else if (type == 'STATE') icon = 'zhuangtai';\r\n    return <Icon type={icon} />;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div ref={'wrapper'} className={'outline-pages'}>\r\n        <div className={'action-bar'}>\r\n          <Search placeholder={'按回车搜索'} onSearch={this.handleSearch} />\r\n        </div>\r\n        <Button onClick={this.handleCreate} type={'primary'} icon={'jia1'} />\r\n        <Tree renderActions={this.renderActions} onSelect={this.handleSelect} onNameChange={this.handleNameChange} draggable={true} renderIcon={this.renderIcon} data={this.state.data} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","const defaultTransform = () => ({\r\n  x: 0,\r\n  y: 0,\r\n  width: 100,\r\n  height: 100,\r\n  rotation: 0,\r\n});\r\nexport const BaseComponents = [\r\n  {\r\n    icon: 'text',\r\n    name: '文本',\r\n    type: 'text',\r\n    height: 28,\r\n    width: 100,\r\n  },\r\n  {\r\n    icon: 'anniu1',\r\n    name: '按钮',\r\n    type: 'button',\r\n    height: 32,\r\n    width: 100,\r\n  },\r\n  {\r\n    icon: 'juxing',\r\n    name: '矩形',\r\n    type: 'rect',\r\n    width: 100,\r\n    height: 100,\r\n  },\r\n  {\r\n    icon: 'Triangle',\r\n    name: '三角形',\r\n    type: 'triangle',\r\n    width: 100,\r\n    height: 100,\r\n  },\r\n  {\r\n    icon: 'qipao',\r\n    name: '气泡',\r\n    type: 'bubble',\r\n    width: 300,\r\n    height: 100,\r\n  },\r\n  {\r\n    icon: 'xianduanceliang',\r\n    name: '直线',\r\n    type: 'line',\r\n    width: 200,\r\n    height: 1,\r\n  },\r\n  {\r\n    icon: 'xianduan',\r\n    name: '曲线',\r\n    type: 'curve',\r\n    width: 200,\r\n    height: 100,\r\n  },\r\n  {\r\n    icon: 'icon_yuanxing',\r\n    name: '圆',\r\n    type: 'circle',\r\n    width: 150,\r\n    height: 150,\r\n  },\r\n  {\r\n    icon: 'danhangshuru',\r\n    name: '单行输入',\r\n    type: 'input',\r\n    width: 180,\r\n    height: 28,\r\n  },\r\n  {\r\n    icon: 'fuhao-duohangshurukuang',\r\n    name: '多行输入',\r\n    type: 'textarea',\r\n    width: 200,\r\n    height: 100,\r\n  },\r\n  {\r\n    icon: 'xialaxuanze',\r\n    name: '下拉选择',\r\n    type: 'select',\r\n    height: 28,\r\n    width: 180,\r\n  },\r\n  {\r\n    icon: 'tupian-copy-copy',\r\n    name: '图片',\r\n    type: 'image',\r\n    height: 80,\r\n    width: 80,\r\n  },\r\n];\r\nexport const ComponentIconMap = {\r\n  select: 'xialaxuanze',\r\n  textarea: 'fuhao-duohangshurukuang',\r\n  input: 'danhangshuru',\r\n  circle: 'icon_yuanxing',\r\n  curve: 'xianduan',\r\n  line: 'xianduanceliang',\r\n  bubble: 'qipao',\r\n  text: 'text',\r\n  image: 'tupian-copy-copy',\r\n  button: 'anniu1',\r\n  triangle: 'Triangle',\r\n  rect: 'juxing',\r\n  icon: 'tubiao',\r\n  block: 'group',\r\n};\r\n","/**\r\n *  created by yaojun on 2019/4/11\r\n *\r\n */\r\nimport React from 'react';\r\nimport { getCurrentControllersByPage } from '../lib/global/instance';\r\nimport Event from '../lib/Base/Event';\r\nimport { component_active, component_properties_change, controllers_change, controllers_delete_by_id, outline_coverage_select, workspace_scroll_center } from '../lib/util/actions';\r\nimport Search from '../lib/ui/Search';\r\nimport { ComponentIconMap } from '@/config/BaseComponents';\r\nimport Icon from '@/lib/Icon';\r\nimport { Tree } from 'antd';\r\nimport EditableLabel from '@/lib/ui/EditableLabel';\r\nimport { component_empty, context_show } from '@/lib/util/actions';\r\nimport { Draggable } from '@/lib/ui/NativeDragDrop';\r\nimport { getQuery } from '@/lib/util/helper';\r\nimport { getMasterFromStore } from '@/api/master';\r\n\r\nconst TreeNode = Tree.TreeNode;\r\n\r\nclass OutlineCoverage extends React.Component {\r\n  state = {\r\n    data: [],\r\n    selectedKeys: [],\r\n    source: [], // 原数据\r\n  };\r\n\r\n  componentWillMount() {\r\n    this.refresh();\r\n    Event.listen(controllers_change, this.refresh);\r\n    Event.listen(component_active, this.handleActive);\r\n    Event.listen(component_empty, this.handleInactive);\r\n  }\r\n\r\n  handleActive = (target) => {\r\n    let keys = [];\r\n    if (target.properties.isTemporaryGroup) {\r\n      keys = target.group.map((item) => item.properties.id);\r\n    } else {\r\n      keys = [target.properties.id];\r\n    }\r\n    this.setState({ selectedKeys: keys });\r\n  };\r\n  handleInactive = (e) => {\r\n    this.setState({ selectedKeys: [] });\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(controllers_change, this.refresh);\r\n    Event.destroy(component_active, this.handleActive);\r\n    Event.destroy(component_empty, this.handleInactive);\r\n  }\r\n\r\n  refresh = async () => {\r\n    let data,\r\n      m = getQuery().m;\r\n    if (m) {\r\n      data = getMasterFromStore(m).content.data.items;\r\n    } else {\r\n      data = await getCurrentControllersByPage();\r\n    }\r\n    let source = data.slice(50);\r\n    data = data.slice(0, 50);\r\n    this.setState({ data, source });\r\n  };\r\n  handleSelect = (keys, e) => {\r\n    Event.dispatch(outline_coverage_select, e.node.props.eventKey);\r\n    Event.dispatch(workspace_scroll_center);\r\n    this.setState({ selectedKeys: [e.node.props.eventKey] });\r\n  };\r\n  handleNameChange = (path, id, name) => {\r\n    if (name && window.allWidgets[id]) {\r\n      Event.dispatch(component_properties_change, {\r\n        key: 'alias',\r\n        value: name,\r\n        target: window.allWidgets[id].view,\r\n      });\r\n    }\r\n  };\r\n  handleDelete = (path, id) => {\r\n    Event.dispatch(controllers_delete_by_id, id);\r\n  };\r\n  handleSearch = async (value) => {\r\n    if (!value) {\r\n      return this.refresh();\r\n    }\r\n    let data = await getCurrentControllersByPage();\r\n    data = data.filter((item) => item.alias.indexOf(value) > -1);\r\n    let source = data.slice(50);\r\n    data = data.slice(0, 50);\r\n    this.setState({ data, source });\r\n  };\r\n  onScrollBottom = () => {\r\n    if (this.state.source.length == 0) return;\r\n    let pushdata = this.state.source.slice(0, 50);\r\n    let source = this.state.source.slice(50);\r\n    this.setState({ data: this.state.data.concat(pushdata), source });\r\n  };\r\n  renderIcon = ({ type }) => {\r\n    return <Icon type={ComponentIconMap[type]} />;\r\n  };\r\n  handleNameChange = (id, name) => {\r\n    if (!name.trim()) return;\r\n    Event.dispatch(component_properties_change, {\r\n      key: 'alias',\r\n      value: name,\r\n      target: window.allWidgets[id].view,\r\n    });\r\n  };\r\n  editMaster = (item) => {\r\n    let masterid = item.masterId;\r\n    this.props.history.push('/app?p=' + getQuery().p + '&m=' + masterid);\r\n  };\r\n  showComponent = (id, e) => {\r\n    e.stopPropagation();\r\n    Event.dispatch(context_show, window.allWidgets[id]);\r\n  };\r\n\r\n  render() {\r\n    const renderTreeNode = (items) => {\r\n      return items.map((item) => {\r\n        if (item.items) {\r\n          return (\r\n            <TreeNode\r\n              key={item.id}\r\n              title={\r\n                <div className={'node-title-wrapper ' + (item.settings.isHide ? 'hide' : '')}>\r\n                  <Draggable namespace={'nodedrag'} params={item.id}>\r\n                    <EditableLabel onChange={(value) => this.handleNameChange(item.id, value)} value={item.alias} />\r\n                  </Draggable>\r\n                  {item.settings.isHide && <Icon onClick={(e) => this.showComponent(item.id, e)} type={'uneye'} />}\r\n                </div>\r\n              }\r\n            >\r\n              {renderTreeNode(item.items)}\r\n            </TreeNode>\r\n          );\r\n        }\r\n        return (\r\n          <TreeNode\r\n            key={item.id}\r\n            title={\r\n              <div className={'node-title-wrapper ' + (item.settings.isHide ? 'hide' : '')}>\r\n                <Draggable namespace={'nodedrag'} params={item.id}>\r\n                  <EditableLabel onChange={(value) => this.handleNameChange(item.id, value)} value={item.alias} />\r\n                </Draggable>\r\n                {item.settings.isHide && <Icon onClick={(e) => this.showComponent(item.id, e)} type={'uneye'} />}\r\n              </div>\r\n            }\r\n          />\r\n        );\r\n      });\r\n    };\r\n    return (\r\n      <div ref={'coverage'} className={'outline-pages outline-converages'}>\r\n        <div className={'action-bar'}>\r\n          <Search placeholder={'按回车搜索'} onSearch={this.handleSearch} />\r\n        </div>\r\n        {this.state.data.length > 0 && (\r\n          <Tree blockNode multiple selectedKeys={this.state.selectedKeys} onSelect={this.handleSelect}>\r\n            {renderTreeNode(this.state.data)}\r\n          </Tree>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default OutlineCoverage;\r\n","/**\r\n *  created by yaojun on 2019/5/14\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport Icon from '../../lib/Icon';\r\nimport PropTypes from 'prop-types';\r\nimport './ClosablePanel.scss';\r\nimport Event from '@/lib/Base/Event';\r\nimport { outline_closable_panel_hide, outline_closable_panel_show } from '@/lib/util/actions';\r\n\r\nexport default class ClosablePanel extends React.Component {\r\n  static propTypes = {\r\n    title: PropTypes.string.isRequired,\r\n    children: PropTypes.any,\r\n  };\r\n\r\n  state = {\r\n    visible: false,\r\n    title: '',\r\n  };\r\n\r\n  componentWillMount() {\r\n    Event.listen(outline_closable_panel_show, this.show);\r\n    Event.listen(outline_closable_panel_hide, this.hide);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(outline_closable_panel_show, this.show);\r\n    Event.destroy(outline_closable_panel_hide, this.hide);\r\n  }\r\n\r\n  show = (title) => {\r\n    this.setState({ visible: true, title });\r\n  };\r\n\r\n  hide = () => {\r\n    this.setState({ visible: false, title: '' });\r\n  };\r\n\r\n  handlePnaleTransition = () => {\r\n    if (!this.state.visible) this.refs.panel.style.display = 'none';\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div ref={'panel'} onTransitionEnd={this.handlePnaleTransition} className={`closable-panel ${this.state.visible ? 'show' : 'hide'}`}>\r\n        <div className={'panel-title'}>\r\n          <span>{this.props.title}</span>\r\n          <Icon onClick={this.hide} type={'guanbi'} className={'panel-close'} />\r\n        </div>\r\n        <div className={'panel-content'}>{this.props.children}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { Icon, message, Upload } from 'antd';\r\nimport './UploadImage.scss';\r\nimport { getBaseUrl, getOSSUrl } from '../../api/config';\r\n\r\nfunction getBase64(img, callback) {\r\n  const reader = new FileReader();\r\n  reader.addEventListener('load', () => callback(reader.result));\r\n  reader.readAsDataURL(img);\r\n}\r\n\r\nfunction beforeUpload(file) {\r\n  const isJPG = ['image/jpeg', 'image/png'].indexOf(file.type) > -1;\r\n  if (!isJPG) {\r\n    message.error('只能上传png或者jpg格式图片');\r\n  }\r\n  const isLt2M = file.size / 1024 < 1024;\r\n  if (!isLt2M) {\r\n    message.error('图片不能超过1MB，请压缩后上传');\r\n  }\r\n  return isJPG && isLt2M;\r\n}\r\n\r\nexport default class UploadImage extends React.Component {\r\n  state = {\r\n    loading: false,\r\n  };\r\n\r\n  handleChange = (info) => {\r\n    if (info.file.status === 'uploading') {\r\n      this.setState({ loading: true });\r\n      return;\r\n    }\r\n    if (info.file.status === 'done') {\r\n      // Get this url from response in real world.\r\n      this.props.onChange(info.file.response.data.filename);\r\n      this.setState({ loading: false });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const uploadButton = (\r\n      <div>\r\n        <Icon style={{ fontSize: 20 }} type={this.state.loading ? 'loading' : 'upload'} />\r\n        <div className='ant-upload-text'>上传</div>\r\n      </div>\r\n    );\r\n    const imageUrl = this.props.value ? getOSSUrl(this.props.value) : null;\r\n    return (\r\n      <Upload name='file' listType='picture-card' className='aj-upload-image' showUploadList={false} action={getBaseUrl('file/upload')} beforeUpload={beforeUpload} onChange={this.handleChange}>\r\n        {imageUrl ? <img width={100} height={100} src={imageUrl} alt='avatar' /> : uploadButton}\r\n      </Upload>\r\n    );\r\n  }\r\n}\r\n","import {Http} from \"@/api/config\";\r\nimport {isArray} from \"@/lib/util/helper\";\r\nimport jQuery from 'jquery'\r\nimport {BASE_OSS} from '@config'\r\n\r\n\r\nexport const publishToUILibrary = (send) =>{\r\n    return Http.post('uilib/publish', send)\r\n}\r\nexport const renameLib = (id, name) =>{\r\n    return Http.post('uilib/rename', {id, name})\r\n}\r\nexport const deleteLib = (id) =>{\r\n    if (isArray(id)) id = id.join(',')\r\n    return Http.post('uilib/delete', {id})\r\n}\r\nexport const findAllLib = (send) =>{\r\n    return Http.post('uilib/list', send)\r\n}\r\nexport const findAllLibAndConetnt = (send) =>{\r\n    return  fetch(BASE_OSS+'template/template.json')\r\n}\r\nexport const findDetailLib = (id) =>{\r\n    return Http.post('uilib/detail', {id})\r\n}","/**\r\n *  created by yaojun on 2019/5/14\r\n *\r\n */\r\nimport React from 'react';\r\nimport { deleteTemplate, fetchTemplate } from '@/api/material';\r\nimport Icon from '@/lib/Icon';\r\nimport '@/components/Panel/MaterialPanel.scss';\r\nimport { Button, Form, Input, message, Modal } from 'antd';\r\nimport Event from '@/lib/Base/Event';\r\nimport { outline_closable_panel_show } from '@/lib/util/actions';\r\nimport UploadImage from '@/lib/ui/UploadImage';\r\nimport { deleteLib, findAllLib, publishToUILibrary } from '@/api/uilib';\r\nimport { getOSSUrl } from '@/api/config';\r\n\r\nexport default class MaterialPanel extends React.Component {\r\n  state = {\r\n    query: {\r\n      pageSize: 20,\r\n      pageIndex: 1,\r\n    },\r\n    total: 1,\r\n    template: [],\r\n    checkedCount: 0,\r\n    visible: false,\r\n    isUI: false,\r\n  };\r\n\r\n  componentWillMount() {\r\n    Event.listen(outline_closable_panel_show, this.handleShow);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.listen(outline_closable_panel_show, this.handleShow);\r\n  }\r\n\r\n  handleShow = (title) => {\r\n    console.log(title);\r\n    if (title == '模板') {\r\n      this.reload();\r\n    }\r\n  };\r\n  fetch = (q, load) => {\r\n    fetchTemplate(q).then(async (res) => {\r\n      let items = res.data.docs;\r\n      for (let i = 0; i < items.length; i += 1) {\r\n        let item = items[i];\r\n        let content = item.content;\r\n        content.name = item.name;\r\n        content.base64 = item.base64;\r\n        content._id = item._id;\r\n        content.onCheck = this.handleCheck(item._id);\r\n        items[i] = content;\r\n      }\r\n      this.setState({\r\n        isUI: false,\r\n        total: res.data.pages,\r\n        template: load ? this.state.template.concat(items) : items,\r\n      });\r\n    });\r\n  };\r\n  loadMore = () => {\r\n    let q = this.state.query;\r\n    q.pageIndex += 1;\r\n    this.fetch(q, true);\r\n  };\r\n  handleCheck = (id) => {\r\n    return () => {\r\n      let list = this.state.template;\r\n      let index = list.findIndex((item) => item._id == id);\r\n      let item = Object.assign({}, list[index]);\r\n      item.checked = !item.checked;\r\n      list[index] = item;\r\n      this.setState({ template: list, checkedCount: this.state.checkedCount + (item.checked ? 1 : -1) });\r\n    };\r\n  };\r\n  batchDelete = () => {\r\n    Modal.confirm({\r\n      title: '提示',\r\n      content: `您将要删除${this.state.checkedCount}个组件，删除后数据将不可恢复。确认继续？`,\r\n      onOk: async () => {\r\n        let after = [];\r\n        let del = [];\r\n        this.state.template.forEach((item) => {\r\n          if (item.checked) del.push(item._id);\r\n          else after.push(item);\r\n        });\r\n        if (this.state.isUI) {\r\n          await deleteLib(del);\r\n        } else {\r\n          await deleteTemplate(del);\r\n        }\r\n        this.setState({ template: after, checkedCount: 0 });\r\n      },\r\n    });\r\n  };\r\n  makeGroup = () => {\r\n    this.setState({ visible: true });\r\n  };\r\n  publish = async (value) => {\r\n    let list = this.state.template\r\n      .filter((item) => item.checked)\r\n      .map((item) => {\r\n        return {\r\n          name: item.name,\r\n          data: item.base64,\r\n        };\r\n      });\r\n    value = Object.assign({}, value);\r\n    value.content = list;\r\n    await publishToUILibrary(value);\r\n    message.success('发布成功了');\r\n    this.setState({ visible: false, checkedCount: 0 });\r\n  };\r\n  close = () => {\r\n    this.setState({ visible: false });\r\n  };\r\n  reload = () => {\r\n    let q = this.state.query;\r\n    q.pageIndex = 1;\r\n    this.setState({ isUI: false });\r\n    this.fetch(q);\r\n  };\r\n  fetchSelfUI = (q = {}, load) => {\r\n    findAllLib({ creator: '1', ...q }).then((res) => {\r\n      let data = res.data.docs.map((item) => {\r\n        item.image = getOSSUrl(item.icon);\r\n        item.onCheck = this.handleCheck(item._id);\r\n        return item;\r\n      });\r\n      this.setState({\r\n        isUI: true,\r\n        template: load ? this.state.template.concat(data) : data,\r\n        query: q,\r\n      });\r\n    });\r\n  };\r\n  reloadSelfUI = () => {\r\n    let q = this.state.query;\r\n    q.pageIndex = 1;\r\n    this.setState({ isUI: true });\r\n    this.fetchSelfUI(q);\r\n  };\r\n  loadMoreForSelfUI = () => {\r\n    let q = this.state.query;\r\n    q.pageIndex += 1;\r\n    this.fetchSelfUI(q, true);\r\n  };\r\n  loadWithMode = () => {\r\n    if (this.state.isUI) {\r\n      this.loadMoreForSelfUI();\r\n    } else {\r\n      this.loadMore();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let hasChecked = this.state.checkedCount > 0;\r\n    return (\r\n      <div>\r\n        <div className={'material-panel_operation-bar'}>\r\n          <span className={'selected'}>已选择：{this.state.checkedCount}</span>\r\n\r\n          <span className={'extra'}>\r\n            {hasChecked && (\r\n              <Button onClick={this.batchDelete} type={'danger'}>\r\n                删除\r\n              </Button>\r\n            )}\r\n            {hasChecked && !this.state.isUI && (\r\n              <Button onClick={this.makeGroup} type={'primary'}>\r\n                创建分组\r\n              </Button>\r\n            )}\r\n            <Button onClick={this.reload}>组件</Button>\r\n            <Button onClick={this.reloadSelfUI}>UI库</Button>\r\n          </span>\r\n        </div>\r\n        <ul style={{ overflow: 'hidde' }}>\r\n          {this.state.template.map((item) => {\r\n            return <MaterialItem key={item._id} item={item} />;\r\n          })}\r\n        </ul>\r\n        {this.state.query.pageIndex < this.state.total && (\r\n          <Button onClick={this.loadWithMode} type={'primary'}>\r\n            加载更多\r\n          </Button>\r\n        )}\r\n        <LibModal onCancel={this.close} onOk={this.publish} visible={this.state.visible} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass MaterialItem extends React.PureComponent {\r\n  render() {\r\n    const { image, name, _id, checked, onCheck } = this.props.item;\r\n    return (\r\n      <li onClick={onCheck} className={`closable-panel-item ${checked ? 'checked' : ''}`}>\r\n        <div style={{ backgroundImage: `url(${image})` }} className={'icon'} />\r\n        <div className={'name'}>\r\n          <span>{name}</span>\r\n          {onCheck && <Icon type={'checkbox_checked'} />}\r\n        </div>\r\n      </li>\r\n    );\r\n  }\r\n}\r\n\r\nconst FormItem = Form.Item;\r\nconst LibModal = Form.create()(\r\n  class extends React.Component {\r\n    validate = () => {\r\n      this.props.form.validateFields((error, value) => {\r\n        if (error) return;\r\n        this.props.onOk(value);\r\n      });\r\n    };\r\n\r\n    render() {\r\n      const { getFieldDecorator } = this.props.form;\r\n      const { onCancel, visible } = this.props;\r\n      return (\r\n        <Modal onCancel={onCancel} onOk={this.validate} visible={visible} title={'操作'}>\r\n          <Form>\r\n            <FormItem label={'名称'}>{getFieldDecorator('name')(<Input data-event={'ignore'} />)}</FormItem>\r\n            <FormItem label={'封面'}>{getFieldDecorator('icon')(<UploadImage />)}</FormItem>\r\n          </Form>\r\n        </Modal>\r\n      );\r\n    }\r\n  }\r\n);\r\n","/**\r\n *  created by yaojun on 2019/1/16\r\n *\r\n */\r\nimport React from 'react';\r\nimport IconText from '../lib/ui/IconText';\r\nimport { Draggable } from '../lib/ui/NativeDragDrop';\r\nimport { BaseComponents } from '../config/BaseComponents';\r\nimport Collapse from '../lib/ui/Collapse';\r\nimport Icon from '../lib/Icon';\r\nimport { Tooltip } from 'antd';\r\nimport CacheState from '@/lib/Base/CacheState';\r\nimport event from '@/lib/Base/Event';\r\nimport { context_outline_menu_change } from '@/lib/util/actions';\r\n\r\nexport default class OutlineComponents extends CacheState {\r\n  state = {\r\n    list: [],\r\n  };\r\n  getCacheKey = () => {\r\n    return 'outline/components';\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className='root-layout-side-components'>\r\n        <WrapperBase />\r\n        {this.state.list.map((item) => {\r\n          return <WrapperAdvs item={item} key={item._id} />;\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass WrapperBase extends React.PureComponent {\r\n  render() {\r\n    return (\r\n      <div className={'component-group-content'}>\r\n        {BaseComponents.map((item) => {\r\n          return (\r\n            <Draggable key={item.name} params={item}>\r\n              <IconText className={'base-component'} icon={item.icon}>\r\n                {item.name}\r\n              </IconText>\r\n            </Draggable>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass WrapperAdvs extends React.PureComponent {\r\n  render() {\r\n    const item = this.props.item;\r\n    return (\r\n      <Collapse collapse={true} className={'component-group-title'} title={item.name}>\r\n        <div className={'component-group-content_adv'}>\r\n          {item.content.map((item) => {\r\n            return (\r\n              <Draggable key={item.id} params={item}>\r\n                <div style={{ backgroundImage: `url(${item.icon})` }} />\r\n                <div>{item.name}</div>\r\n              </Draggable>\r\n            );\r\n          })}\r\n        </div>\r\n      </Collapse>\r\n    );\r\n  }\r\n}\r\n\r\nexport class BaseComponentsActionBar extends React.Component {\r\n  state = {\r\n    show: true,\r\n  };\r\n\r\n  componentWillMount() {\r\n    event.listen(context_outline_menu_change, this.handleShow);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    event.destroy(context_outline_menu_change, this.handleShow);\r\n  }\r\n\r\n  handleShow = (t) => {\r\n    this.setState({ show: t != 'components' });\r\n  };\r\n\r\n  render() {\r\n    if (!this.state.show) return null;\r\n    return (\r\n      <div className={'base-components_action-bar'}>\r\n        {BaseComponents.map((item) => {\r\n          return (\r\n            <Tooltip key={item.name} placement={'right'} title={item.name}>\r\n              <span className={'base-component_action-item'}>\r\n                <Draggable key={item.name} params={item}>\r\n                  <Icon type={item.icon} />\r\n                </Draggable>\r\n              </span>\r\n            </Tooltip>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/11/6\r\n *\r\n */\r\nimport React from 'react';\r\nimport './Outline.scss';\r\nimport OutlineMenu from './OutlineMenu';\r\nimport OutlineIcons from './OutlineIcons';\r\nimport OutlinePrefabs from './OutlinePrefabs';\r\nimport OutlinePages from './OutlinePages';\r\nimport OutlineCoverage from './OutlineCoverage';\r\nimport ClosablePanel from '@/components/Panel/ClosablePanel';\r\nimport MaterialPanel from '@/components/Panel/MaterialPanel';\r\nimport OutlineComopnents from '@/components/OutlineComponents';\r\nimport event from '@/lib/Base/Event';\r\nimport { context_outline_menu_change } from '@/lib/util/actions';\r\n\r\nconst OutlineMaps = {\r\n  icons: OutlineIcons,\r\n  prefabs: OutlinePrefabs,\r\n  pages: OutlinePages,\r\n  coverage: OutlineCoverage,\r\n  components: OutlineComopnents,\r\n};\r\nconst OutlinePanel = {\r\n  prefabs: MaterialPanel,\r\n};\r\nexport default class Outline extends React.Component {\r\n  state = {\r\n    selected: 'pages',\r\n  };\r\n  handleMenuChange = (view) => {\r\n    event.dispatch(context_outline_menu_change, view);\r\n    this.setState({ selected: view });\r\n  };\r\n  handleScroll = (e) => {\r\n    let ele = e.target;\r\n    let distance = ele.scrollHeight - ele.getBoundingClientRect().height - ele.scrollTop;\r\n    if (distance < 5) {\r\n      if (this.refs.content.onScrollBottom) {\r\n        this.refs.content.onScrollBottom();\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const Current = OutlineMaps[this.state.selected];\r\n    const Panel = OutlinePanel[this.state.selected];\r\n    return (\r\n      <div className={'root-layout-side'}>\r\n        <OutlineMenu selected={this.state.selected} onChange={this.handleMenuChange} />\r\n        <div onScroll={this.handleScroll} className={'root-layout-side-content'}>\r\n          <Current ref={'content'} />\r\n        </div>\r\n        <ClosablePanel title={'素材'}>{Panel && <Panel />}</ClosablePanel>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/1\r\n *\r\n */\r\nimport React from 'react';\r\nimport Draggable from '../Draggable';\r\nimport PropTypes from 'prop-types';\r\nimport Event from '../Base/Event';\r\nimport { context_hide_color_picker, selection_change, selection_start } from '../util/actions';\r\nimport { getScreeTransform } from '../global';\r\nimport './Selection.scss';\r\n\r\nexport default class Selection extends React.Component {\r\n  static propTypes = {\r\n    containerId: PropTypes.string.isRequired,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.rect = {}; // x,y,width,height\r\n    this.show(false);\r\n    let containerId = this.props.containerId;\r\n    let container = document.querySelector(`#${containerId}`);\r\n    new Draggable(container, {\r\n      onDragStart: ({ pointX, pointY }) => {\r\n        this.x = 0;\r\n        this.y = 0;\r\n        this.pointX = pointX;\r\n        this.pointY = pointY;\r\n        this.show(true);\r\n        this.setTransform(pointX, pointY, 0, 0);\r\n        Event.dispatch(selection_start);\r\n      },\r\n      onDragMove: ({ realDeltaX, realDeltaY, mouseX, mouseY }) => {\r\n        this.x += realDeltaX;\r\n        this.y += realDeltaY;\r\n        let x = this.pointX;\r\n        let y = this.pointY;\r\n        if (this.x < 0) {\r\n          x += this.x;\r\n        }\r\n        if (this.y < 0) {\r\n          y += this.y;\r\n        }\r\n        this.setTransform(x, y, Math.abs(this.x), Math.abs(this.y));\r\n      },\r\n      onDragEnd: () => {\r\n        Event.dispatch(context_hide_color_picker);\r\n        //  需要根据当前缩放来选择\r\n        let s = getScreeTransform().scale;\r\n        Event.dispatch(selection_change, {\r\n          x: this.rect.x / s,\r\n          y: this.rect.y / s,\r\n          width: this.rect.width / s,\r\n          height: this.rect.height / s,\r\n        });\r\n        this.show(false);\r\n      },\r\n    });\r\n  }\r\n\r\n  show = (visible) => {\r\n    this.refs.selection.style.display = visible ? 'block' : 'none';\r\n  };\r\n  setTransform = (x, y, width, height) => {\r\n    let style = this.refs.selection.style;\r\n    this.rect = {\r\n      x,\r\n      y,\r\n      width,\r\n      height,\r\n    };\r\n    style.top = y + 'px';\r\n    style.left = x + 'px';\r\n    style.width = width + 'px';\r\n    style.height = height + 'px';\r\n  };\r\n\r\n  render() {\r\n    return <div ref={'selection'} className={'aj-selection-rect'}></div>;\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/11/30\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport ViewController from './ViewController';\r\n\r\n// Default view\r\nexport default class ViewContainer extends ViewController {}\r\n","/**\r\n *  created by yaojun on 2018/12/2\r\n *\r\n */\r\nimport React from 'react';\r\nimport ViewController from './ViewController';\r\nimport { controllers_append } from '../util/actions';\r\nimport View from './View';\r\nimport { getDropView } from '../util/helper';\r\nimport Event from '@/lib/Base/Event';\r\nimport { component_show_resizer, context_outline_delete_master, workspace_part_master } from '@/lib/util/actions';\r\nimport { getMasterFromStore } from '@/api/master';\r\nimport { parseJSON } from '@/lib/properties/types';\r\nimport { getFirstResponder } from '@/lib/global/instance';\r\n\r\n/**\r\n * 分组组件，用于嵌套其他组件\r\n * @deprecated 使用新的BlockView\r\n * @description\r\n *\r\n */\r\nexport default class ViewGroup extends ViewController {\r\n  handleDragOver = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  };\r\n  handleDrop = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    let data = e.dataTransfer.getData('dragdata');\r\n    if (data) data = JSON.parse(data);\r\n    if (data.type) {\r\n      let rect = this.getOffsetRect();\r\n      let view = getDropView(e, data);\r\n      if (view) {\r\n        view.parent = this.properties;\r\n        view.settings.isLock = true;\r\n        view.transform.x -= rect.x;\r\n        view.transform.y -= rect.y;\r\n        Event.dispatch(controllers_append, view, this.properties);\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { items } = this.properties || [];\r\n    const { width, height, x, y, rotation } = this.properties.transform;\r\n    return (\r\n      <div\r\n        onMouseEnter={this.onMouseEnter}\r\n        onMouseLeave={this.onMouseLeave}\r\n        onDragOver={this.handleDragOver}\r\n        onDrop={this.handleDrop}\r\n        data-uid={this.properties.id}\r\n        className='view-group'\r\n        style={{\r\n          width: width,\r\n          height,\r\n          left: x,\r\n          top: y,\r\n          transform: `rotate(${rotation}deg)`,\r\n          position: 'absolute',\r\n          boxSizing: 'border-box',\r\n        }}\r\n        ref={'container'}\r\n      >\r\n        {items.map((item) => {\r\n          return <View key={item.id} type={item.type} properties={item} />;\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * 替代GroupView ，在block dna链中，任何一个节点修改后，真个dna链都需要更新\r\n */\r\nexport class BlockView extends ViewController {\r\n  isLockChildren = true;\r\n  onDragStartBefore = (e, a) => {\r\n    this.isLockChildren = true;\r\n  };\r\n\r\n  initProperties() {}\r\n\r\n  setColor(a, b) {\r\n    this.properties.items.forEach((item) => {\r\n      item.view.setColor(a, b);\r\n    });\r\n  }\r\n\r\n  // 更新当前矩形的大小，和子元素在当前矩形中的比例\r\n  getNewTransform() {\r\n    let t = this.updateSelfTransform();\r\n    this.updateChildrenPosition();\r\n    return t;\r\n  }\r\n\r\n  updateSelfTransform = () => {\r\n    let group = this.properties.items;\r\n    let xList = [],\r\n      x1List = [],\r\n      yList = [],\r\n      y1List = [];\r\n    let GroupId = {};\r\n    for (let i = 0, j = group.length; i < j; i += 1) {\r\n      let item = group[i];\r\n      let t = group[i].view.getOffsetTransform();\r\n      // begin\r\n      xList[i] = t.x;\r\n      yList[i] = t.y;\r\n      // end\r\n      x1List[i] = t.x + t.width;\r\n      y1List[i] = t.y + t.height;\r\n    }\r\n    let x = Math.min.apply(null, xList);\r\n    let y = Math.min.apply(null, yList);\r\n    let x1 = Math.max.apply(null, x1List);\r\n    let y1 = Math.max.apply(null, y1List);\r\n    let width = x1 - x;\r\n    let height = y1 - y;\r\n    this.properties.transform = { x, y, width, height, rotation: 0 };\r\n    return { x, y, width, height, rotation: 0 };\r\n  };\r\n\r\n  // 仅仅更新当前block的子元素位置信息\r\n  updateChildrenPosition() {\r\n    let { width, height, x, y } = this.props.properties.transform;\r\n    this.properties.items.forEach((item) => {\r\n      //  缓存当前坐标、位置、旋转角度\r\n      item._xPercent = (item.transform.x - x) / width;\r\n      item._yPercent = (item.transform.y - y) / height;\r\n      item._wPercent = item.transform.width / width;\r\n      item._hPercent = item.transform.height / height;\r\n      let cx = x + width / 2 - (item.transform.x + item.transform.width / 2);\r\n      let cy = y + height / 2 - (item.transform.y + item.transform.height / 2);\r\n      item._c = Math.hypot(cx, cy);\r\n      item._a = Math.atan2(-cy, cx);\r\n      item._sa = item.transform.rotation;\r\n    });\r\n  }\r\n\r\n  componentWillMount() {\r\n    super.componentWillMount();\r\n    this.updateChildrenPosition();\r\n  }\r\n\r\n  updateChildBlockTransform = () => {\r\n    const NODES = [];\r\n    const loop = (target, parentNode) => {\r\n      let node = {\r\n        count: 0,\r\n        blocks: [],\r\n        isLeaf: false,\r\n        view: target.view,\r\n        parent: parentNode,\r\n      };\r\n      target.items.forEach((item) => {\r\n        if (item.type == 'block') {\r\n          node.blocks.push(item);\r\n          loop(item, node);\r\n        }\r\n      });\r\n      node.count = node.blocks.length;\r\n      node.isLeaf = node.count == 0;\r\n      NODES.push(node);\r\n    };\r\n    // 更新父级block\r\n    const updateBlock = (node) => {\r\n      if (node.parent) {\r\n        node.parent.count -= 1;\r\n        if (node.parent.count == 0) {\r\n          node.parent.view.getNewTransform();\r\n          updateBlock(node.parent);\r\n        }\r\n      }\r\n    };\r\n    loop(this.properties);\r\n    let LEAF_NODES = NODES.filter((item) => item.isLeaf);\r\n    LEAF_NODES.forEach((item) => {\r\n      item.view.getNewTransform();\r\n      updateBlock(item);\r\n    });\r\n  };\r\n  updateParentBlockTransform = () => {\r\n    let parent = this._parent;\r\n    while (parent) {\r\n      parent.getNewTransform();\r\n      parent = parent._parent;\r\n    }\r\n  };\r\n\r\n  rotationEnd() {\r\n    this.updateBlockTransform();\r\n    Event.dispatch(component_show_resizer, this);\r\n  }\r\n\r\n  resizeEnd() {\r\n    this.updateBlockTransform();\r\n    Event.dispatch(component_show_resizer, this);\r\n  }\r\n\r\n  updateBlockTransform = () => {\r\n    this.updateChildBlockTransform();\r\n    this.updateParentBlockTransform();\r\n  };\r\n\r\n  setRotation(angle) {\r\n    let group = this.properties.transform;\r\n    let rad = ((180 - angle) / 180) * Math.PI;\r\n    super._setTransform(group.x, group.y, group.width, group.height, angle);\r\n    this.properties.items.forEach((item) => {\r\n      let t1 = item.transform;\r\n      let x = Math.round(Math.cos(rad + item._a) * item._c + group.x + group.width / 2),\r\n        y = Math.round(-Math.sin(rad + item._a) * item._c + group.y + group.height / 2),\r\n        a = angle + item._sa;\r\n      item.view.setTransform(x - t1.width / 2, y - t1.height / 2, t1.width, t1.height, a);\r\n      if (item.type == 'block') item.view.setRotation(angle);\r\n    });\r\n  }\r\n\r\n  _setTransform(x, y, w, h, t) {\r\n    //  绘制自身位置\r\n    super._setTransform(x, y, w, h, t);\r\n    //  绘制分组下组件的位置\r\n    this.properties.items.forEach((item) => {\r\n      let t = item.transform;\r\n      let tx = Math.round(x + item._xPercent * w),\r\n        ty = Math.round(y + item._yPercent * h),\r\n        tw = Math.round(item._wPercent * w),\r\n        th = Math.round(item._hPercent * h);\r\n      // FontIcon only\r\n      if (item.settings.ratio) {\r\n        th = tw;\r\n      }\r\n      item.view.setTransform(tx, ty, tw < 0 ? 0 : tw, th < 0 ? 0 : th, item.rotation);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { items } = this.properties || [];\r\n    const { width, height, x, y, rotation } = this.properties.transform;\r\n    return (\r\n      <React.Fragment>\r\n        <div className={'block-view'} style={{ position: 'absolute', boxSizing: 'border-box', left: x, top: y, width, height }} ref={'container'}></div>\r\n        {items.map((item) => {\r\n          return <View parent={this} key={item.id} type={item.type} properties={item} />;\r\n        })}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport class MasterView extends ViewController {\r\n  state = {\r\n    items: [],\r\n  };\r\n\r\n  getContextMenu() {\r\n    let menus = super.getContextMenu();\r\n    menus.splice(1, 1, {\r\n      name: '脱离母版',\r\n      action: workspace_part_master,\r\n      check: () => !!getFirstResponder(),\r\n    });\r\n    return menus;\r\n  }\r\n\r\n  componentWillMount() {\r\n    super.componentWillMount();\r\n    Event.listen(context_outline_delete_master, this.handleMasterDel);\r\n    let data = getMasterFromStore(this.properties.masterId);\r\n    if (data) {\r\n      let items = parseJSON(data.content.data.items);\r\n      this.mark(items);\r\n      this.setState({ items });\r\n    } else {\r\n      this.setState({ items: [] });\r\n    }\r\n  }\r\n\r\n  handleMasterDel = (masterid) => {\r\n    if (this.properties.masterId === masterid) {\r\n      this.setState({ items: [] });\r\n    }\r\n  };\r\n  mark = (items) => {\r\n    items.forEach((item) => {\r\n      item.isInMaster = true;\r\n      if (item.type == 'block') {\r\n        this.mark(item.items);\r\n      }\r\n    });\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    super.componentWillUnmount();\r\n    Event.destroy(context_outline_delete_master, this.handleMasterDel);\r\n  }\r\n\r\n  render() {\r\n    const { x, y, height, width, rotation } = this.properties.transform;\r\n    return (\r\n      <div\r\n        style={{\r\n          position: 'absolute',\r\n          boxSizing: 'border-box',\r\n          left: x,\r\n          top: y,\r\n          width,\r\n          height,\r\n          transform: `rotate(${rotation}deg)`,\r\n          overflow: 'hidden',\r\n        }}\r\n        {...this.getMouseEvent()}\r\n        ref={'container'}\r\n      >\r\n        {this.state.items.map((item) => {\r\n          return <View key={item.id} properties={item} type={item.type} />;\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/1\r\n *\r\n */\r\nimport React from 'react';\r\nimport ViewController from './ViewController';\r\nimport { setCurrentEditor } from '../global/instance';\r\nimport { Dom } from '../util/helper';\r\nimport Event from '../Base/Event';\r\nimport { component_close_edit_mode, component_edit_mode } from '../util/actions';\r\n\r\nexport default class ViewText extends ViewController {\r\n  /**\r\n   * @override\r\n   * @param e\r\n   */\r\n  onDBClick(e) {\r\n    if (this._parent && this._parent.isLockChildren) {\r\n      super.onDBClick(e);\r\n    } else {\r\n      e.stopPropagation();\r\n      let text = this.refs.text;\r\n      text.setAttribute('contenteditable', true);\r\n      text.setAttribute('data-drag', false);\r\n      setCurrentEditor(this);\r\n      text.focus();\r\n      selectTextRange(text);\r\n      Event.dispatch(component_edit_mode);\r\n    }\r\n  }\r\n\r\n  //Hack\r\n  setColor(key, value) {\r\n    console.log(key);\r\n    if (key === 'fontColor') {\r\n      Dom.of(this.refs.text).fontColor(value);\r\n    } else {\r\n      super.setColor(key, value);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @override\r\n   */\r\n  initProperties() {\r\n    super.initProperties();\r\n    let wrapper = Dom.of(this.refs.text);\r\n    this.refs.text.innerHTML = this.properties.fontData;\r\n    let {\r\n      font: { size, color },\r\n      fontStyle,\r\n      decorator,\r\n      spacing,\r\n      align,\r\n    } = this.properties;\r\n    if (spacing) {\r\n      wrapper.letterSpacing(spacing.width);\r\n      wrapper.lineHeight(spacing.height);\r\n    }\r\n    if (align) {\r\n      wrapper.alignY(align.y);\r\n      wrapper.alignX(align.x);\r\n    }\r\n    wrapper.decorator(decorator);\r\n    if (fontStyle) {\r\n      wrapper.fontStyle(fontStyle);\r\n    }\r\n    wrapper.fontSize(size);\r\n    wrapper.fontColor(color);\r\n  }\r\n\r\n  setEditorBlur() {\r\n    let { text, preview } = this.refs;\r\n    text.blur();\r\n    text.removeAttribute('data-drag');\r\n    text.removeAttribute('contenteditable');\r\n    Event.dispatch(component_close_edit_mode);\r\n  }\r\n\r\n  _handleKeyUp = (e) => {\r\n    if (e.key.toLowerCase() === 'enter' && !e.shiftKey) {\r\n      this.setEditorBlur();\r\n    } else {\r\n      this.properties.fontData = e.target.innerHTML;\r\n    }\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    super.componentWillUnmount();\r\n    setCurrentEditor(null);\r\n  }\r\n\r\n  handlePaste = (e) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    let items = e.clipboardData.items;\r\n    for (var i = 0, len = items.length; i < len; i++) {\r\n      var item = items[i];\r\n      if (item.kind === 'string') {\r\n        item.getAsString((str) => {\r\n          // 去掉HTML标签\r\n          let text = document.createElement('div');\r\n          text.innerHTML = str;\r\n          this.refs.text.innerHTML = text.innerText;\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  renderContent() {\r\n    return (\r\n      <div ref={'wrapper'} className={`view-text view-text_${this.properties.type}`}>\r\n        <div onPaste={this.handlePaste} onKeyUp={this._handleKeyUp} data-event='ignore' ref={'text'} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport function selectTextRange(element) {\r\n  var doc = document;\r\n  if (doc.body.createTextRange) {\r\n    var range = document.body.createTextRange();\r\n    range.moveToElementText(element);\r\n    range.select();\r\n  } else if (window.getSelection) {\r\n    var selection = window.getSelection();\r\n    var range = document.createRange();\r\n    range.selectNodeContents(element);\r\n    selection.removeAllRanges();\r\n    selection.addRange(range);\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/2\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport ViewController from './ViewController';\r\nimport Image from '../ui/Image';\r\nimport { DEFAULT_IMG } from '../util/helper';\r\nimport { Dropable } from '../ui/NativeDragDrop';\r\nimport Event from '../Base/Event';\r\nimport { component_properties_change } from '../util/actions';\r\nimport { getFirstResponder } from '../global/instance';\r\n\r\nexport default class ViewImage extends ViewController {\r\n  /**\r\n   * @override\r\n   * @return {*|SVGGElement}\r\n   */\r\n  getDomWrapper() {\r\n    return this.refs.g;\r\n  }\r\n\r\n  onDrop = (data, e) => {\r\n    if (data.type === 'image' && data.data && getFirstResponder()) {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n      Event.dispatch(component_properties_change, {\r\n        target: this,\r\n        key: 'image',\r\n        value: Object.assign({}, this.properties.image, { source: data.data }),\r\n      });\r\n    }\r\n  };\r\n\r\n  renderContent() {\r\n    const {\r\n      image: { source, fill },\r\n      transform,\r\n    } = this.props.properties;\r\n\r\n    // Block\r\n    // Flex\r\n    return (\r\n      <div ref={'g'} className={'view-image'}>\r\n        <Dropable customEvent={true} onDrop={this.onDrop} className={'view-image-wrapper'}>\r\n          <Image mode={fill} lazyLoad={true} rect={transform} style={{ pointerEvents: 'none' }} src={source || DEFAULT_IMG} />\r\n        </Dropable>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/1\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport { Dom, getDropView } from '../util/helper';\r\nimport PresetIcons from '../PresetIcons';\r\nimport ViewController from './ViewController';\r\nimport { Dropable } from '../ui/NativeDragDrop';\r\nimport Event from '../Base/Event';\r\nimport { component_properties_change } from '../util/actions';\r\n\r\nexport default class ViewIcon extends ViewController {\r\n  /**\r\n   * @override\r\n   */\r\n  initProperties() {\r\n    super.initZIndex();\r\n    let {\r\n      transform: { width },\r\n      bg,\r\n    } = this.properties;\r\n    this.iconDom.fontSize(width);\r\n    this.iconDom.fontColor(bg);\r\n  }\r\n\r\n  setTransform(x, y, w, h, r) {\r\n    super.setTransform(x, y, w, h, r);\r\n    this.iconDom.fontSize(w);\r\n  }\r\n\r\n  _saveIconRef = (res) => {\r\n    this.refsText = res;\r\n    this.iconDom = Dom.of(res);\r\n  };\r\n\r\n  setColor(key, value) {\r\n    this.iconDom.fontColor(value);\r\n  }\r\n\r\n  handleDrop = (data, e) => {\r\n    if (data && data.type == 'icon') {\r\n      let view = getDropView(e, data);\r\n      Event.dispatch(component_properties_change, {\r\n        key: 'icon',\r\n        target: this,\r\n        value: {\r\n          data: data.data,\r\n          content: data.fontContent,\r\n        },\r\n      });\r\n    }\r\n  };\r\n  getWrapperClassName() {\r\n    return super.getWrapperClassName() + ' view-icon';\r\n  }\r\n\r\n  renderContent() {\r\n    return (\r\n      <Dropable onDrop={this.handleDrop}>\r\n        <PresetIcons saveRef={this._saveIconRef} type={this.properties.icon.data} />\r\n      </Dropable>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/1\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport ViewController from './ViewController';\r\nimport { getTemporaryGroup, setCurrentEditor } from '../global/instance';\r\nimport { Dom } from '../util/helper';\r\nimport Event from '../Base/Event';\r\nimport { component_close_edit_mode, component_edit_mode } from '../util/actions';\r\nimport { getGroupId } from '../global/selection';\r\n\r\nexport default class ViewInput extends ViewController {\r\n  /**\r\n   * @override\r\n   * @param e\r\n   */\r\n  onDBClick(e) {\r\n    if (getGroupId()[this.properties.id] && getTemporaryGroup().isLockChildren) {\r\n      super.onDBClick(e);\r\n    } else {\r\n      e.stopPropagation();\r\n      let text = this.refs.text;\r\n      text.removeAttribute('readonly');\r\n      text.setAttribute('data-drag', false);\r\n      setCurrentEditor(this);\r\n      Event.dispatch(component_edit_mode);\r\n    }\r\n  }\r\n\r\n  setColor(key, value) {\r\n    if (key === 'bg') {\r\n      Dom.of(this.refs.text).background(value);\r\n    } else if (key == 'fontColor') {\r\n      Dom.of(this.refs.text).fontColor(value);\r\n    } else {\r\n      super.setColor(key, value);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @override\r\n   */\r\n  initBackground() {\r\n    Dom.of(this.refs.text).background(this.properties.bg);\r\n  }\r\n\r\n  /**\r\n   * @override\r\n   */\r\n  initProperties() {\r\n    super.initProperties();\r\n    let wrapper = Dom.of(this.refs.text);\r\n    this.refs.text.value = this.properties.fontData;\r\n    let {\r\n      font: { size, color },\r\n      fontStyle,\r\n    } = this.properties;\r\n    wrapper.fontSize(size);\r\n    wrapper.fontStyle(fontStyle);\r\n    wrapper.fontColor(color);\r\n  }\r\n\r\n  _handleAreaChange = (e) => {\r\n    e.stopPropagation();\r\n    this.properties.fontData = e.target.value;\r\n  };\r\n\r\n  setEditorBlur() {\r\n    let { text, preview } = this.refs;\r\n    text.removeAttribute('data-drag');\r\n    text.setAttribute('readonly', 'readonly');\r\n    Event.dispatch(component_close_edit_mode);\r\n  }\r\n\r\n  _handleKeyUp = (e) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    if (e.key.toLowerCase() === 'enter' && !e.shiftKey) {\r\n      this.setEditorBlur();\r\n    }\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    super.componentWillUnmount();\r\n    setCurrentEditor(null);\r\n  }\r\n\r\n  getWrapperClassName() {\r\n    return super.getWrapperClassName() + ' view-input';\r\n  }\r\n\r\n  renderContent() {\r\n    return <input onKeyUp={this._handleKeyUp} onChange={this._handleAreaChange} readOnly={true} data-event='ignore' ref={'text'} />;\r\n  }\r\n}\r\n\r\nexport class ViewTextArea extends ViewInput {\r\n  renderContent() {\r\n    return <textarea onChange={this._handleAreaChange} data-event='ignore' ref={'text'} readOnly={true} onKeyUp={this._handleKeyUp} />;\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/1\r\n *\r\n */\r\nimport React from 'react';\r\nimport Container from './ViewContainer';\r\nimport Group from './ViewGroup';\r\nimport Text from './ViewText';\r\nimport PropTypes from 'prop-types';\r\nimport Image from './ViewImage';\r\nimport ViewIcon from './ViewIcon';\r\nimport ViewInput, { ViewTextArea } from './ViewInput';\r\nimport ViewSelect from './ViewSelect';\r\nimport ViewLine from './ViewLine';\r\nimport ViewTriangle from './ViewTriangle';\r\nimport ViewPolygon from './ViewPolygon';\r\nimport ViewCurve from './ViewCurve';\r\nimport ViewCircle from './ViewCircle';\r\nimport { BlockView, MasterView } from '@/lib/Widget/ViewGroup';\r\nimport CommentView from '@/lib/Widget/Comment';\r\n\r\nconst maps = {\r\n  text: Text,\r\n  rect: Container,\r\n  group: Group,\r\n  block: BlockView,\r\n  image: Image,\r\n  icon: ViewIcon,\r\n  input: ViewInput,\r\n  textarea: ViewTextArea,\r\n  button: Text,\r\n  radio: ViewIcon,\r\n  checkbox: ViewIcon,\r\n  switch: ViewIcon,\r\n  select: ViewSelect,\r\n  line: ViewLine,\r\n  triangle: ViewTriangle,\r\n  bubble: ViewPolygon,\r\n  curve: ViewCurve,\r\n  circle: ViewCircle,\r\n  master: MasterView,\r\n  comment: CommentView,\r\n};\r\nexport default class View extends React.PureComponent {\r\n  static propTypes = {\r\n    properties: PropTypes.object.isRequired,\r\n    type: PropTypes.string.isRequired,\r\n  };\r\n\r\n  render() {\r\n    let Control = maps[this.props.type];\r\n    return <Control parent={this.props.parent} properties={this.props.properties} />;\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/22\r\n *\r\n */\r\n\r\nimport React, { Fragment } from 'react';\r\nimport ViewController from '../Widget/ViewController';\r\nimport './ViewSelect.scss';\r\nimport { Dom } from '../util/helper';\r\nimport Event from '../Base/Event';\r\nimport { component_close_edit_mode, component_edit_mode } from '../util/actions';\r\nimport { getTemporaryGroup, setCurrentEditor } from '../global/instance';\r\nimport { getGroupId } from '../global/selection';\r\n\r\nexport default class ViewSelect extends ViewController {\r\n  onDBClick(e) {\r\n    if (getGroupId()[this.properties.id] && getTemporaryGroup().isLockChildren) {\r\n      super.onDBClick(e);\r\n    } else {\r\n      e.stopPropagation();\r\n      Dom.of(this.refs.poplist)\r\n        .show()\r\n        .top(this.properties.transform.height + 3);\r\n      setCurrentEditor(this);\r\n      Event.dispatch(component_edit_mode);\r\n    }\r\n  }\r\n\r\n  initBackground() {\r\n    Dom.of(this.refs.defaultSelect).background(this.properties.bg);\r\n  }\r\n\r\n  initProperties() {\r\n    super.initProperties();\r\n    const corner = this.properties.corner;\r\n    this.setDefaultSelectValue();\r\n    Dom.of(this.refs.select)\r\n      .borderRadiusBottomLeft(corner.bottomLeft)\r\n      .borderRadiusBottomRight(corner.bottomRight)\r\n      .borderRadiusTopRight(corner.topRight)\r\n      .borderRadiusTopLeft(corner.topLeft);\r\n  }\r\n\r\n  setEditorBlur = () => {\r\n    this.setDefaultSelectValue();\r\n    Event.dispatch(component_close_edit_mode);\r\n    console.log(this.refs.poplist);\r\n    if (this.refs.poplist) {\r\n      Dom.of(this.refs.poplist).hide();\r\n    } else {\r\n      throw '-1';\r\n    }\r\n  };\r\n\r\n  setDefaultSelectValue = () => {\r\n    let options = this.properties.selectOptions;\r\n    if (!options) return;\r\n    let defaultSelect = options.split(/\\n/).filter((item) => item.trim().startsWith('>'));\r\n    if (defaultSelect && defaultSelect[0]) {\r\n      this.refs.defaultSelect.value = defaultSelect[0].trim().slice(1);\r\n    }\r\n  };\r\n\r\n  setColor(key, value) {\r\n    if (key == 'fontColor') {\r\n      Dom.of(this.refs.defaultSelect).fontColor(value);\r\n    } else if (key == 'bg') {\r\n      Dom.of(this.refs.defaultSelect).background(value);\r\n    } else {\r\n      super.setColor(key, value);\r\n    }\r\n  }\r\n\r\n  getWrapperClassName() {\r\n    return super.getWrapperClassName() + ' view-select';\r\n  }\r\n\r\n  _handlePoplistChange = (e) => {\r\n    this.properties.selectOptions = e.target.value;\r\n  };\r\n\r\n  renderContent() {\r\n    return (\r\n      <Fragment>\r\n        <div ref={'select'} className={'view-select-wrapper'}>\r\n          <input style={{ color: this.properties.font.color }} ref={'defaultSelect'} readOnly={true} defaultValue={'请选择'} />\r\n          <div className={'view-select-arrows'}>\r\n            <i className={'arrows_up'} />\r\n            <i className={'arrows_down'} />\r\n          </div>\r\n        </div>\r\n        <textarea\r\n          onBlur={this.setEditorBlur}\r\n          onChange={this._handlePoplistChange}\r\n          data-event='ignore'\r\n          data-drag='false'\r\n          ref={'poplist'}\r\n          className={'aj-select-poplist'}\r\n          placeholder={'换行分隔，\">\" 表示默认选中该项，示例：\\n > a \\n b \\n c '}\r\n        ></textarea>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/2/21\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport ViewController from './ViewController';\r\nimport { Dom } from '../util/helper';\r\nimport { initialCoverageIndex } from '../global';\r\n\r\nexport default class ViewLine extends ViewController {\r\n  initProperties() {\r\n    let { width, rotation } = this.properties.transform;\r\n    let g = Dom.of(this.refs.g);\r\n    let dom = Dom.of(this.refs.container);\r\n    g.background(this.properties.bg);\r\n    dom.width(width);\r\n\r\n    //  初始化层级，最后挂载的元素都在最上面\r\n    if (this.properties.zIndex === -1) {\r\n      this.properties.zIndex = initialCoverageIndex();\r\n    }\r\n    dom.zIndex(this.properties.zIndex);\r\n    dom.showHide(!this.properties.settings.isHide);\r\n  }\r\n\r\n  setTransform(x, y, w, h, r) {\r\n    super.setTransform(x, y, w, h, r);\r\n    this.refs.g.setAttribute('d', `M0 3 L${w} 3`);\r\n  }\r\n\r\n  setColor(key, value) {\r\n    Dom.of(this.refs.g).attr('stroke', value);\r\n  }\r\n\r\n  render() {\r\n    let {\r\n      transform: { x, y, rotation, width, height },\r\n      border: { color, style },\r\n    } = this.properties;\r\n    let strokeDash = {};\r\n    if (style == 'dashed') {\r\n      strokeDash.strokeDasharray = 3;\r\n      strokeDash.strokeDashoffset = 3;\r\n    } else if (style == 'dotted') {\r\n      strokeDash.strokeDasharray = 1;\r\n      strokeDash.strokeDashoffset = 1;\r\n    }\r\n    return (\r\n      <div\r\n        data-uid={this.properties.id}\r\n        style={{\r\n          width,\r\n          height,\r\n          left: x,\r\n          top: y,\r\n          transform: `rotate(${rotation}deg)`,\r\n        }}\r\n        className={'view-line'}\r\n        ref={'container'}\r\n      >\r\n        <svg style={{ height: 6, top: -2, position: 'absolute', width: '100%' }}>\r\n          <path {...strokeDash} stroke={color} strokeWidth={1} y={2} d={`M0 3 L${width} 3`} ref={'g'} />\r\n        </svg>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/2/21\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport ViewController from './ViewController';\r\nimport { Dom, uuid } from '../util/helper';\r\nimport { initialCoverageIndex } from '../global';\r\n\r\nexport default class ViewTriangle extends ViewController {\r\n  initProperties() {\r\n    let dom = Dom.of(this.refs.container);\r\n\r\n    //  初始化层级，最后挂载的元素都在最上面\r\n    if (this.properties.zIndex === -1) {\r\n      this.properties.zIndex = initialCoverageIndex();\r\n    }\r\n    dom.zIndex(this.properties.zIndex);\r\n    dom.showHide(!this.properties.settings.isHide);\r\n  }\r\n\r\n  setColor(key, value) {\r\n    if (key == 'border') key = 'stroke';\r\n    if (key == 'bg') key = 'fill';\r\n    Dom.of(this.refs.line).css(key, value);\r\n  }\r\n\r\n  setTransform(x, y, w, h, r) {\r\n    super.setTransform(x, y, w, h, r);\r\n    let { width, height } = this.properties.transform;\r\n    this.refs.line.setAttribute('points', `0,${height}  ${width / 2},0  ${width},${height}`);\r\n  }\r\n\r\n  renderContent() {\r\n    let { x, y, rotation, width, height } = this.properties.transform;\r\n    let {\r\n      border: { width: sw, color, style },\r\n      bg,\r\n    } = this.properties;\r\n    let strokeDash = {};\r\n    if (style == 'dashed') {\r\n      strokeDash.strokeDasharray = sw * 3;\r\n      strokeDash.strokeDashoffset = 3;\r\n    } else if (style == 'dotted') {\r\n      strokeDash.strokeDasharray = sw;\r\n      strokeDash.strokeDashoffset = sw;\r\n    }\r\n    return (\r\n      <svg style={{ width: '100%', height: '100%' }} xmlns={'http://www.w3.org/2000/svg'} data-uid={this.properties.id} className={'view-triangle'}>\r\n        <polygon ref={'line'} strokeWidth={sw} {...strokeDash} points={`1,${height - 1}  ${width / 2},0  ${width - 1},${height - 1}`} style={{ fill: bg, stroke: color }} />\r\n      </svg>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/2/21\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport ViewController from './ViewController';\r\nimport { Dom } from '../util/helper';\r\nimport { initialCoverageIndex } from '../global';\r\nimport Draggable from '../Draggable';\r\nimport Event from '../Base/Event';\r\nimport { component_properties_change } from '../util/actions';\r\n\r\n/**\r\n * Bubble\r\n */\r\nexport default class ViewPolygon extends ViewController {\r\n  initProperties() {\r\n    let dom = Dom.of(this.refs.container);\r\n\r\n    //  初始化层级，最后挂载的元素都在最上面\r\n    if (this.properties.zIndex === -1) {\r\n      this.properties.zIndex = initialCoverageIndex();\r\n    }\r\n    dom.zIndex(this.properties.zIndex);\r\n    dom.showHide(!this.properties.settings.isHide);\r\n  }\r\n\r\n  _getPath = (left) => {\r\n    const { width, height } = this.properties.transform;\r\n    const y = 2;\r\n    return `M12 ${y} L${width - 12} ${y} Q${width - 2} ${y} ${width - 2} 10 L${width - 2} ${height - 20} Q${width - 2} ${height - 10} ${width - 12} ${height - 10} L${left + 20} ${height -\r\n      10} L${left + 10} ${height} L${left} ${height - 10} L10 ${height - 10} Q2 ${height - 10} 2 ${height - 20}  L2 12 Q2 2 12 2`;\r\n  };\r\n\r\n  setColor(key, value) {\r\n    if (key == 'border') key = 'stroke';\r\n    if (key == 'bg') key = 'fill';\r\n    Dom.of(this.refs.line).css(key, value);\r\n  }\r\n\r\n  setTransform(x, y, w, h, r) {\r\n    super.setTransform(x, y, w, h, r);\r\n    let path = this._getPath(this.properties.bubble.left);\r\n    this.refs.line.setAttribute('d', path);\r\n    this.refs.slider.setAttribute('cy', this.properties.transform.height - 10);\r\n  }\r\n\r\n  componentDidMount() {\r\n    super.componentDidMount();\r\n    let slider = this.refs.slider;\r\n    let defaultPos = this.properties.bubble.left + 10;\r\n    this._pos = this.properties.bubble.left;\r\n\r\n    new Draggable(this.refs.slider, {\r\n      onDragMove: ({ deltaX, deltaY }) => {\r\n        slider.setAttribute('cx', (defaultPos += deltaX));\r\n        let path = this._getPath((this._pos += deltaX));\r\n        this.refs.line.setAttribute('d', path);\r\n      },\r\n      onDragEnd: () => {\r\n        Event.dispatch(component_properties_change, {\r\n          target: this,\r\n          key: 'bubble',\r\n          value: Object.assign({}, this.properties.bubble, { left: this._pos }),\r\n        });\r\n      },\r\n    });\r\n  }\r\n\r\n  renderContent() {\r\n    let { width, height } = this.properties.transform;\r\n    let {\r\n      border: { width: sw, color, style },\r\n      bg,\r\n      bubble: { left },\r\n    } = this.properties;\r\n    let triangleSize = 10;\r\n    let strokeDash = {};\r\n    if (style == 'dashed') {\r\n      strokeDash.strokeDasharray = sw * 3;\r\n      strokeDash.strokeDashoffset = 3;\r\n    } else if (style == 'dotted') {\r\n      strokeDash.strokeDasharray = sw;\r\n      strokeDash.strokeDashoffset = sw;\r\n    }\r\n    return (\r\n      <svg style={{ width: '100%', height: '100%' }} xmlns={'http://www.w3.org/2000/svg'} data-uid={this.properties.id} className={'view-bubble'}>\r\n        <path ref={'line'} d={this._getPath(left)} {...strokeDash} style={{ stroke: color, fill: bg }} strokeWidth={sw} />\r\n        <circle ref={'slider'} className={'component-control-dot'} r={4} cx={30} cy={height - 10} />\r\n      </svg>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/2/21\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport ViewController from './ViewController';\r\nimport { Dom } from '../util/helper';\r\nimport { initialCoverageIndex } from '../global';\r\nimport Draggable from '../Draggable';\r\nimport Event from '../Base/Event';\r\nimport { component_properties_change } from '../util/actions';\r\n\r\nexport default class ViewCurve extends ViewController {\r\n  initProperties() {\r\n    let dom = Dom.of(this.refs.container);\r\n\r\n    //  初始化层级，最后挂载的元素都在最上面\r\n    if (this.properties.zIndex === -1) {\r\n      this.properties.zIndex = initialCoverageIndex();\r\n    }\r\n    dom.zIndex(this.properties.zIndex);\r\n    dom.showHide(!this.properties.settings.isHide);\r\n  }\r\n\r\n  _getPath = (x, y) => {\r\n    x = x || this.properties.curve.x;\r\n    y = y || this.properties.curve.y;\r\n    const { width, height } = this.properties.transform;\r\n    return `M0 ${height} Q${x} ${y} ${width} ${height}`;\r\n  };\r\n\r\n  setColor(key, value) {\r\n    if (key == 'border') key = 'stroke';\r\n    else if (key == 'bg') key = 'fill';\r\n    Dom.of(this.refs.line).css(key, value);\r\n  }\r\n\r\n  setTransform(x, y, w, h, r) {\r\n    super.setTransform(x, y, w, h, r);\r\n    let path = this._getPath();\r\n    this.refs.line.setAttribute('d', path);\r\n  }\r\n\r\n  componentDidMount() {\r\n    super.componentDidMount();\r\n    let slider = this.refs.slider;\r\n    let x, y;\r\n    new Draggable(this.refs.slider, {\r\n      onDragStart: () => {\r\n        x = this.properties.curve.x;\r\n        y = this.properties.curve.y;\r\n      },\r\n      onDragMove: ({ deltaX, deltaY }) => {\r\n        x += deltaX;\r\n        y += deltaY;\r\n        let path = this._getPath(x, y);\r\n        this.refs.line.setAttribute('d', path);\r\n      },\r\n      onDragEnd: () => {\r\n        Event.dispatch(component_properties_change, {\r\n          target: this,\r\n          key: 'curve',\r\n          value: Object.assign({}, this.properties.curve, { x, y }),\r\n        });\r\n      },\r\n    });\r\n  }\r\n\r\n  renderContent() {\r\n    let { width, height } = this.properties.transform;\r\n    let {\r\n      border: { width: sw, color, style },\r\n      bg,\r\n    } = this.properties;\r\n    let triangleSize = 10;\r\n    let strokeDash = {};\r\n    if (style == 'dashed') {\r\n      strokeDash.strokeDasharray = sw * 3;\r\n      strokeDash.strokeDashoffset = 3;\r\n    } else if (style == 'dotted') {\r\n      strokeDash.strokeDasharray = sw;\r\n      strokeDash.strokeDashoffset = sw;\r\n    }\r\n    return (\r\n      <svg style={{ width: '100%', height: '100%' }} xmlns={'http://www.w3.org/2000/svg'} data-uid={this.properties.id} className={'view-bubble'}>\r\n        <path ref={'line'} d={this._getPath()} {...strokeDash} strokeWidth={sw} style={{ stroke: color, fill: bg }} />\r\n        <circle ref={'slider'} className={'component-control-dot'} r={6} cx={width / 2} cy={height / 2} />\r\n      </svg>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/2/21\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport ViewController from './ViewController';\r\nimport { Dom } from '../util/helper';\r\nimport { initialCoverageIndex } from '../global';\r\nimport Draggable from '../Draggable';\r\nimport { component_properties_change, component_stroke_change } from '../util/actions';\r\nimport Event from '../Base/Event';\r\n\r\nexport default class ViewCircle extends ViewController {\r\n  initProperties() {\r\n    let dom = Dom.of(this.refs.container);\r\n\r\n    //  初始化层级，最后挂载的元素都在最上面\r\n    if (this.properties.zIndex === -1) {\r\n      this.properties.zIndex = initialCoverageIndex();\r\n    }\r\n    dom.zIndex(this.properties.zIndex);\r\n    dom.showHide(!this.properties.settings.isHide);\r\n\r\n    let { array, offset } = this.properties.circle;\r\n    this.dashAngle = Math.round(Math.abs(offset / array) * 360);\r\n  }\r\n\r\n  setColor(key, value) {\r\n    Dom.of(this.refs.line).css('stroke', value);\r\n  }\r\n\r\n  offsetRatio = 0;\r\n\r\n  dashAngle = 0;\r\n\r\n  setTransform(x, y, w, h, r) {\r\n    super.setTransform(x, y, w, h, r);\r\n    let { line, center, dash } = this.refs;\r\n    line.setAttribute('cx', w / 2);\r\n    line.setAttribute('r', (w - 2 - this.properties.border.width) / 2);\r\n    line.setAttribute('cy', w / 2);\r\n\r\n    let d = (w - this.properties.border.width) * Math.PI;\r\n    this.properties.circle.array = d;\r\n    this.properties.circle.offset = d * this.offsetRatio;\r\n    line.setAttribute('stroke-dasharray', d);\r\n    line.setAttribute('stroke-dashoffset', d * this.offsetRatio);\r\n  }\r\n\r\n  _setDasharrayPosition = (angle, radius) => {\r\n    let { x, y } = this._getDasharrayPosition(angle, radius);\r\n    this.refs.dash.setAttribute('cx', x);\r\n    this.refs.dash.setAttribute('cy', y);\r\n  };\r\n\r\n  _getDasharrayPosition = (angle, radius) => {\r\n    let { width, height } = this.properties.transform;\r\n    let rad = (-angle / 180) * Math.PI;\r\n    let x = Math.cos(rad) * radius + width / 2;\r\n    let y = -Math.sin(rad) * radius + height / 2;\r\n    return { x, y };\r\n  };\r\n\r\n  componentDidMount() {\r\n    super.componentDidMount();\r\n    let { center, dash } = this.refs;\r\n    let {\r\n      border: { width: strokeWidth },\r\n      circle: { array, offset },\r\n    } = this.properties;\r\n    this.offsetRatio = offset / array;\r\n    new Draggable(center, {\r\n      onDragStart: () => {\r\n        strokeWidth = this.properties.border.width;\r\n      },\r\n      onDragMove: ({ deltaX }) => {\r\n        let w = this.properties.transform.width;\r\n        strokeWidth += deltaX;\r\n        if (strokeWidth > w / 2) strokeWidth = w / 2;\r\n        if (strokeWidth < 0) strokeWidth = 0;\r\n        center.setAttribute('cx', strokeWidth + 10);\r\n        let r = (w - strokeWidth) / 2;\r\n        let line = this.refs.line,\r\n          d = 2 * r * Math.PI;\r\n        line.setAttribute('stroke-width', strokeWidth);\r\n        line.setAttribute('r', r);\r\n        line.setAttribute('stroke-dasharray', d);\r\n        line.setAttribute('stroke-dashoffset', d * this.offsetRatio);\r\n\r\n        array = d;\r\n        offset = d * this.offsetRatio;\r\n      },\r\n      onDragEnd: () => {\r\n        Event.dispatch(component_properties_change, {\r\n          target: this,\r\n          key: ['circle', 'border'],\r\n          value: [Object.assign({}, this.properties.circle, { offset, array }), Object.assign({}, this.properties.border, { width: strokeWidth })],\r\n        });\r\n        Event.dispatch(component_stroke_change, strokeWidth);\r\n      },\r\n    });\r\n\r\n    let cx,\r\n      cy,\r\n      rotation = this.dashAngle,\r\n      currentAngle = 0,\r\n      angle = 0;\r\n    new Draggable(dash, {\r\n      onDragStart: (_, e) => {\r\n        let { width, height } = this.properties.transform;\r\n        let { left, top } = this.refs.container.getBoundingClientRect();\r\n        cx = left + width / 2;\r\n        cy = top + height / 2;\r\n        angle = (Math.atan2(e.pageY - cy, e.pageX - cx) * 180) / Math.PI;\r\n        array = this.properties.circle.array;\r\n      },\r\n      onDragMove: (_, e) => {\r\n        let { width, height } = this.properties.transform;\r\n        let current = (Math.atan2(e.pageY - cy, e.pageX - cx) * 180) / Math.PI;\r\n        currentAngle = current - angle;\r\n        let r = currentAngle + rotation;\r\n        r = r % 360;\r\n        r = r < 0 ? r + 360 : r;\r\n        let radius = (width - strokeWidth * 2) / 2 - 10;\r\n        this._setDasharrayPosition(r, radius);\r\n        offset = array - (r / 360) * array;\r\n        this.offsetRatio = offset / array;\r\n        this.refs.line.setAttribute('stroke-dashoffset', offset);\r\n      },\r\n      onDragEnd: () => {\r\n        rotation += currentAngle;\r\n        this.dashAngle = rotation;\r\n        Event.dispatch(component_properties_change, {\r\n          target: this,\r\n          key: 'circle',\r\n          value: Object.assign({}, this.properties.circle, { offset }),\r\n        });\r\n      },\r\n    });\r\n  }\r\n\r\n  renderContent() {\r\n    let {\r\n      circle: { array, offset },\r\n      border: { width: sw, color },\r\n      transform: { width, height },\r\n    } = this.properties;\r\n    let { x, y } = this._getDasharrayPosition(360 - this.dashAngle, (width - sw * 2) / 2 - 10);\r\n    return (\r\n      <svg style={{ width: '100%', height: '100%' }} xmlns={'http://www.w3.org/2000/svg'} data-uid={this.properties.id} className={'view-bubble'}>\r\n        <circle strokeDasharray={array} strokeDashoffset={offset} cx={width / 2} cy={height / 2} r={(width - sw) / 2} ref={'line'} style={{ stroke: color, fill: 'none' }} strokeWidth={sw} />\r\n        <circle ref={'dash'} className={'component-control-dot'} r={4} cx={x} cy={y} />\r\n        <circle ref={'center'} className={'component-control-dot'} r={4} cx={sw + 10} cy={height / 2} />\r\n      </svg>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/6/5\r\n *\r\n */\r\nimport React from 'react';\r\nimport ViewText from '@/lib/Widget/ViewText';\r\n\r\nexport default class Comment extends ViewText {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  getContextMenu() {\r\n    let menus = super.getContextMenu();\r\n    return menus.slice(3);\r\n  }\r\n}\r\n","import { createViewFrom, updateIn } from '../lib/properties/types';\r\nimport { getFirstResponder } from '../lib/global/instance';\r\nimport config from '../lib/util/preference';\r\nimport { getClientBoundingRect, isTemporaryGroup } from '../lib/util/helper';\r\nimport { proxyPropsChange } from '@/lib/util/controllers';\r\n\r\nexport default class AlignmentService {\r\n  /**\r\n   *\r\n   * @param {array<ViewProperties>} items\r\n   * @param {string} type\r\n   */\r\n  constructor(items, type) {\r\n    this.items = items;\r\n    this.type = type;\r\n    let target = getFirstResponder();\r\n    let ist = isTemporaryGroup();\r\n    // 通过选取批量处理\r\n    if (ist) {\r\n      this.target = target.properties;\r\n      let axis = this.isSpaceX() ? 'x' : 'y';\r\n      this.groupItems = this.getBoundingSortItems(target);\r\n      // 已分组下面的数据进行分布\r\n      // 相对于父元素\r\n    } else {\r\n      if (target._parent) {\r\n        this.target = {\r\n          transform: Object.assign({}, target._parent.properties.transform),\r\n        };\r\n      } else {\r\n        this.target = {\r\n          transform: {\r\n            x: 0,\r\n            width: config.viewport.width,\r\n            y: 0,\r\n            height: config.viewport.height,\r\n          },\r\n        };\r\n      }\r\n    }\r\n  }\r\n\r\n  getBoundingSortItems = (target) => {\r\n    let axis = this.isSpaceX() ? 'x' : 'y';\r\n    return target.group\r\n      .map((item) => {\r\n        let id = item.properties.id;\r\n        item = getClientBoundingRect(item.properties.transform);\r\n        item.id = id;\r\n        return item;\r\n      })\r\n      .sort((a, b) => a[axis] - b[axis]);\r\n  };\r\n  isSpaceType = () => {\r\n    return this.isSpaceX() || this.isSpaceY();\r\n  };\r\n  isSpaceX = () => {\r\n    return this.type === 'alignment_x';\r\n  };\r\n  isSpaceY = () => {\r\n    return this.type === 'alignment_y';\r\n  };\r\n  static alignment = (items, type) => {\r\n    let align = new AlignmentService(items, type);\r\n    let view = getFirstResponder();\r\n    let ist = isTemporaryGroup();\r\n    if (ist) {\r\n      return align.handleTemporaryGroup();\r\n    }\r\n    return align.handleSingleView();\r\n  };\r\n  /**\r\n   * 只处理等间距的情况\r\n   * @return {Array<ViewProperties>}\r\n   */\r\n  handleGroup = () => {\r\n    let view = getFirstResponder();\r\n    let offset = 0;\r\n    let av = this.getMinAndAve(this.type.slice(-1));\r\n    let v = this.getVectorWithAxis();\r\n    return updateIn(this.items, view.properties, (item) => {\r\n      item.items = item.items.map((item, index) => {\r\n        // 创建一个新的 view\r\n        item = createViewFrom(Object.assign({}, item));\r\n        let transform = Object.assign({}, item.transform);\r\n        if (index > 0) offset += av.ave;\r\n        transform = this[this.type](transform, offset);\r\n        offset += transform[v];\r\n        item.transform = transform;\r\n        return item;\r\n      });\r\n      return item;\r\n    });\r\n  };\r\n  getVectorWithAxis = () => {\r\n    return this.type.slice(-1) === 'x' ? 'width' : 'height';\r\n  };\r\n  _applyBlockTransform = (block, x, y) => {\r\n    return block.items.map((item) => {\r\n      item = createViewFrom(item);\r\n      item.transform.x += x;\r\n      item.transform.y += y;\r\n      if (item.type == 'block') {\r\n        item.items = this._applyBlockTransform(item, x, y);\r\n      }\r\n      return item;\r\n    });\r\n  };\r\n  handleTemporaryGroup = () => {\r\n    let index = 0;\r\n    let offset = this.target.transform[this.type.slice(-1)];\r\n    let v = this.getVectorWithAxis();\r\n    let av = this.getMinAndAve();\r\n    return proxyPropsChange(this.items, this.groupItems.slice(), (item) => {\r\n      let transform = getClientBoundingRect(item.transform);\r\n      if (this.isSpaceType()) {\r\n        if (index > 0) offset += av.ave;\r\n        transform = this[this.type](transform, offset);\r\n        index += 1;\r\n        offset += transform[v];\r\n      } else {\r\n        transform = this[this.type](transform);\r\n      }\r\n      let dx = transform.x - item.transform.x;\r\n      let dy = transform.y - item.transform.y;\r\n      item.transform.x += dx;\r\n      item.transform.y += dy;\r\n      if (item.type == 'block') {\r\n        item.items = this._applyBlockTransform(item, dx, dy);\r\n      }\r\n      item._xPercent = (transform.x - this.target.transform.x) / this.target.transform.width;\r\n      item._yPercent = (transform.y - this.target.transform.y) / this.target.transform.height;\r\n      return item;\r\n    });\r\n  };\r\n  handleSingleView = () => {\r\n    let view = getFirstResponder();\r\n    return proxyPropsChange(this.items, view, (item) => {\r\n      let transform = getClientBoundingRect(item.transform);\r\n      transform = this[this.type](transform);\r\n      let dx = transform.x - item.transform.x;\r\n      let dy = transform.y - item.transform.y;\r\n      item.transform.x += dx;\r\n      item.transform.y += dy;\r\n      if (item.type == 'block') {\r\n        item.items = this._applyBlockTransform(item, dx, dy);\r\n      }\r\n      return item;\r\n    });\r\n  };\r\n\r\n  alignment_left(transform) {\r\n    let diff = transform.x - this.target.transform.x;\r\n    transform.x = transform.origin.x - diff;\r\n    transform.y = transform.origin.y;\r\n    return transform;\r\n  }\r\n\r\n  alignment_right(transform) {\r\n    let diff = transform.x + transform.width - (this.target.transform.x + this.target.transform.width);\r\n    transform.x = transform.origin.x - diff;\r\n    transform.y = transform.origin.y;\r\n    return transform;\r\n  }\r\n\r\n  alignment_center(transform) {\r\n    transform.y = transform.origin.y;\r\n    let t = this.target.transform;\r\n    transform.x = t.width / 2 - transform.origin.width / 2;\r\n    if (isTemporaryGroup()) {\r\n      transform.x += t.x;\r\n    }\r\n    return transform;\r\n  }\r\n\r\n  alignment_top(transform) {\r\n    let diff = transform.y - this.target.transform.y;\r\n    transform.y = transform.origin.y - diff;\r\n    transform.x = transform.origin.x;\r\n    return transform;\r\n  }\r\n\r\n  alignment_middle(transform) {\r\n    let t = this.target.transform;\r\n    transform.y = t.height / 2 - transform.origin.height / 2;\r\n    transform.x = transform.origin.x;\r\n    if (isTemporaryGroup()) {\r\n      transform.y += t.y;\r\n    }\r\n    return transform;\r\n  }\r\n\r\n  alignment_bottom(transform) {\r\n    let diff = transform.y + transform.height - (this.target.transform.y + this.target.transform.height);\r\n    transform.y = transform.origin.y - diff;\r\n    transform.x = transform.origin.x;\r\n    return transform;\r\n  }\r\n\r\n  alignment_x(transform, offset) {\r\n    let diff = offset - transform.x;\r\n    transform.x = transform.origin.x + diff;\r\n    transform.y = transform.origin.y;\r\n    return transform;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param axis\r\n   * @return {{min : number, ave : number}}\r\n   */\r\n  getMinAndAve = () => {\r\n    let length = 0;\r\n    let axis = this.type.slice(-1);\r\n    let v = this.getVectorWithAxis();\r\n    this.groupItems.forEach((item) => {\r\n      length += item[v];\r\n    });\r\n    let total = this.target.transform[v];\r\n    let spaceBetween = (total - length) / (this.groupItems.length - 1);\r\n    return {\r\n      min: this.target.transform[axis],\r\n      ave: spaceBetween,\r\n    };\r\n  };\r\n\r\n  alignment_y(transform, offset) {\r\n    let diff = offset - transform.y;\r\n    transform.y = transform.origin.y + diff;\r\n    transform.x = transform.origin.x;\r\n    return transform;\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/1\r\n *\r\n */\r\nimport React, { Fragment } from 'react';\r\nimport View from '../lib/Widget/View';\r\nimport Event from '../lib/Base/Event';\r\nimport { message } from 'antd';\r\nimport {\r\n  component_active,\r\n  component_alignment,\r\n  component_drag,\r\n  component_dragend,\r\n  component_properties_change,\r\n  component_resize_end,\r\n  component_swap,\r\n  context_checkall,\r\n  context_copy,\r\n  context_copypaste,\r\n  context_cut,\r\n  context_delete,\r\n  context_hide,\r\n  context_page_update,\r\n  context_paste,\r\n  context_paste_clear,\r\n  context_paste_mouse,\r\n  context_redo,\r\n  context_save,\r\n  context_undo,\r\n  controllers_append,\r\n  controllers_change,\r\n  controllers_delete,\r\n  controllers_delete_by_id,\r\n  controllers_ready,\r\n  coverage_back,\r\n  coverage_backward,\r\n  coverage_backward_to,\r\n  coverage_backward_to_picked,\r\n  coverage_forward,\r\n  coverage_forward_to,\r\n  coverage_forward_to_picked,\r\n  coverage_front,\r\n  coverage_picked_width_mode,\r\n  editor_guides_change,\r\n  outline_coverage_select,\r\n  outline_page_create,\r\n  outline_page_delete,\r\n  outline_page_select,\r\n  pages_load_end,\r\n  project_initialized,\r\n  project_initilized,\r\n  refresh_editor_config,\r\n  refresh_project_name,\r\n  selection_change,\r\n  selection_group,\r\n  selection_start,\r\n  show_create_project,\r\n  workspace_push,\r\n  workspace_redo,\r\n  workspace_save_template,\r\n  workspace_undo,\r\n} from '../lib/util/actions';\r\nimport { getCoveragePickeMode, getScreenOffset, getScreeTransform, pointToWorkspaceCoords, setCoveragePikeMode, setLastCoverageIndex } from '../lib/global';\r\nimport ViewSelectGroupBordered, { PropsFilter } from '../lib/Widget/ViewSelectGroupBordered';\r\nimport { parseJSON, parseOjbect, refreshViewId, toJSON } from '../lib/properties/types';\r\nimport { clearGlobalVariabel, getClipboardData, getCurrentPage, getFirstResponder, saveCurrentControllersByPage, setClipboardData, setCurrentPage, setFirstResponder } from '../lib/global/instance';\r\nimport AlignmentService from './AlignmentService';\r\nimport { setSelfTemplateData } from '../lib/global/template';\r\nimport {\r\n  clearPageStorage,\r\n  createNewPage,\r\n  deletePage,\r\n  getPageListFromStorage,\r\n  refresLocalPageObjectId,\r\n  saveToRemoteFromStorage,\r\n  selectPage,\r\n  setPageData,\r\n  updatePageGuides,\r\n  updatePageInfo,\r\n} from '../lib/util/page';\r\nimport qs from 'query-string';\r\nimport { fetchProjectInfo } from '../api/project';\r\nimport { updateUserInfo } from '../api/user';\r\nimport config, { initPageSizeWithProjectType } from '../lib/util/preference';\r\nimport { setStore } from '../lib/global/store';\r\nimport { getQuery, mergeProps } from '../lib/util/helper';\r\nimport {\r\n  app_toggle_selection_type,\r\n  component_empty,\r\n  context_mode_change,\r\n  context_outline_delete_master,\r\n  context_show,\r\n  context_unpack,\r\n  controllers_apply_group,\r\n  workspace_part_master,\r\n  workspace_save_master,\r\n  workspace_scroll_center,\r\n} from '@/lib/util/actions';\r\nimport { clearCurrentMasterFromStorage, clearPATHES, clearUnlockedView, getMasterDataFromStorage, getPATHES, saveCurrentControllersByMaster, setPATHES } from '@/lib/global/instance';\r\nimport { proxyAllPropsChange, proxyDeleteItems, proxyPropsChange, proxyTransformOffset } from '@/lib/util/controllers';\r\nimport { createViewFrom, updateTreeIn } from '@/lib/properties/types';\r\nimport { isArray, uuid } from '@/lib/util/helper';\r\nimport { clearComponentPosition, setComponentPosition } from '@/lib/global/controllers';\r\nimport { fetchMaster, getMasterFromStore } from '@/api/master';\r\nimport { MasterProperties } from '@/lib/properties/group';\r\nimport ViewController from '@/lib/Widget/ViewController';\r\nimport { saveMaster } from '@/api/material';\r\nimport { getStore } from '@/lib/global/store';\r\n\r\nconst HistoryRecord = [];\r\nconst RedoRecord = [];\r\nwindow.allWidgets = {};\r\nconst MAX_WIGETS = 1200;\r\n\r\nclass EditorControllers extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      items: [],\r\n    };\r\n  }\r\n\r\n  setState = (state, callback, options = {}) => {\r\n    super.setState(state, () => {\r\n      let items = this.state.items;\r\n      window.allWidgets = {};\r\n      clearPATHES();\r\n      clearComponentPosition();\r\n      this.eachiItems(items);\r\n      if (!options.nosave) {\r\n        if (getQuery().m) {\r\n          saveCurrentControllersByMaster(toJSON(items));\r\n        } else {\r\n          saveCurrentControllersByPage(toJSON(items));\r\n        }\r\n      }\r\n      typeof callback === 'function' && callback(items);\r\n      Event.dispatch(controllers_change, items);\r\n    });\r\n  };\r\n  eachiItems = (items, parentPath = '') => {\r\n    items.forEach((item, index) => {\r\n      window.allWidgets[item.id] = item;\r\n      let p = parentPath + index;\r\n      setPATHES(item.id, p);\r\n      setComponentPosition('x', item.transform.x);\r\n      setComponentPosition('x', item.transform.x + item.transform.width);\r\n      setComponentPosition('y', item.transform.y);\r\n      setComponentPosition('y', item.transform.y + item.transform.height);\r\n      if (item.type == 'block') {\r\n        this.eachiItems(item.items, p + ',');\r\n      }\r\n    });\r\n  };\r\n  //TODO Move component to target position\r\n  handleSwapComponent = ({ target, move, asChild }) => {};\r\n  clearHistory = (newItems) => {\r\n    HistoryRecord.length = 0;\r\n    RedoRecord.length = 0;\r\n    this.pushHistory(newItems);\r\n  };\r\n  _initializingProject = () => {};\r\n\r\n  componentWillMount() {\r\n    let pages = getPageListFromStorage();\r\n    console.log('pages:', pages);\r\n    let info = { type: 'PAD' };\r\n    setStore('project', info);\r\n    setStore('pages', pages);\r\n    initPageSizeWithProjectType(info);\r\n    Event.dispatch(project_initialized, {});\r\n    Event.dispatch(refresh_project_name, 'YOYOO DESIGN');\r\n    //Add event listener\r\n    Event.listen(selection_change, this.handleSelection);\r\n    Event.listen(selection_start, this.handleSelectionStart);\r\n    Event.listen(controllers_append, this.handleAppendChild);\r\n    Event.listen(controllers_delete, this.handleDeleteChild);\r\n    Event.listen(context_copy, this.handleCopy);\r\n    Event.listen(context_paste, this.handlePaste);\r\n    Event.listen(context_paste_mouse, this.handlePasteToMouse);\r\n    Event.listen(context_paste_clear, this.handleClearClipboard);\r\n    Event.listen(context_copypaste, this.handleDuplicate);\r\n    Event.listen(context_cut, this.handleClip);\r\n    Event.listen(context_delete, this.handleDelete);\r\n    Event.listen(context_hide, this.handleHide);\r\n    Event.listen(context_show, this.handleShow);\r\n    Event.listen(context_checkall, this.handleCheckAll);\r\n    Event.listen(component_properties_change, this.handlePropsChange);\r\n    Event.listen(component_active, this.handleComponentActive);\r\n    Event.listen(component_resize_end, this.handleComponentResizend);\r\n    Event.listen(component_dragend, this.handleComponentDragend);\r\n    Event.listen(context_undo, this.handleUndo);\r\n    Event.listen(context_redo, this.handleRedo);\r\n    Event.listen(outline_page_select, this.handlePageSelect);\r\n    Event.listen(outline_page_create, this.handlePageCreate);\r\n    Event.listen(outline_page_delete, this.handlePageDelete);\r\n    Event.listen(outline_coverage_select, this.handleCoverageSelect);\r\n    Event.listen(controllers_delete_by_id, this.handleDeleteById);\r\n    Event.listen(component_swap, this.handleSwapComponent);\r\n    Event.listen(component_alignment, this.handleAlignmentChange);\r\n    Event.listen(coverage_back, this.coverageBack);\r\n    Event.listen(coverage_backward, this.coverageBackward);\r\n    Event.listen(coverage_front, this.coverageFront);\r\n    Event.listen(coverage_forward, this.coverageForward);\r\n    Event.listen(coverage_backward_to, this.coverageBackwardTo);\r\n    Event.listen(coverage_forward_to, this.coverageForwardTo);\r\n    Event.listen(coverage_picked_width_mode, this.coveragePickedWithMode);\r\n    Event.listen(workspace_save_template, this.handleSaveTemplate);\r\n    Event.listen(context_page_update, this.handlePageInfoUpdate);\r\n    Event.listen(refresh_editor_config, this.handleEditorConfig);\r\n    Event.listen(editor_guides_change, this.handleGuidesChange);\r\n    Event.listen(context_save, this.handleSaveWorkspace);\r\n    Event.listen(app_toggle_selection_type, this.handleSelectionTypeChange);\r\n    Event.listen(controllers_apply_group, this.handleApplyGroup);\r\n    Event.listen(component_empty, this.handleEmpty);\r\n    Event.listen(context_unpack, this.handleApplyUngroup);\r\n    Event.listen(workspace_save_master, this.handleSaveMaster);\r\n    Event.listen(workspace_part_master, this.handlePartMaster);\r\n    Event.listen(context_mode_change, this.handleEditorModeChange);\r\n    Event.listen(context_outline_delete_master, this.handleDeleMaster);\r\n    setTimeout(() => {\r\n      Event.dispatch(pages_load_end, pages);\r\n    });\r\n  }\r\n\r\n  handleEmpty = () => {\r\n    clearUnlockedView();\r\n  };\r\n  _currentPage = null;\r\n  handleEditorModeChange = (type, masterId) => {\r\n    HistoryRecord.length = 0;\r\n    RedoRecord.length = 0;\r\n    if (type == 'PROJECT') {\r\n      setTimeout(() => {\r\n        let pages = getStore('pages');\r\n        Event.dispatch(pages_load_end, pages);\r\n        this.handlePageSelect(this._currentPage);\r\n      });\r\n    } else {\r\n      // MASTER\r\n      setFirstResponder(null);\r\n      this._currentPage = getCurrentPage();\r\n      setCurrentPage(null);\r\n      let data = getMasterFromStore(getQuery().m);\r\n      data = parseJSON(data.content.data.items);\r\n      this.setState({ items: data });\r\n      setTimeout(() => {\r\n        if (data.length > 0) {\r\n          Event.dispatch(\r\n            selection_group,\r\n            data.map((item) => item.view)\r\n          );\r\n        } else {\r\n          setFirstResponder(data[0].view);\r\n        }\r\n        setTimeout(() => {\r\n          Event.dispatch(workspace_scroll_center);\r\n        }, 1000);\r\n      });\r\n    }\r\n  };\r\n  /**\r\n   *\r\n   * @param {Array} masterItems - Master 组件的子元素信息\r\n   * @param {Object} t - Master 组件的位置信息\r\n   * @return {*}\r\n   * @private\r\n   */\r\n  _calcBlockTransform = (masterItems, t) => {\r\n    let rad = ((180 - t.rotation) / 180) * Math.PI;\r\n    const calc = (masterItems) => {\r\n      return masterItems.map((item) => {\r\n        item = createViewFrom(item);\r\n        item.id = uuid('sb_');\r\n        let x1 = item.transform.x + t.x;\r\n        let y1 = item.transform.y + t.y;\r\n        let cx = t.x + t.width / 2 - (x1 + item.transform.width / 2),\r\n          cy = t.y + t.height / 2 - (y1 + item.transform.height / 2);\r\n        let a = Math.atan2(-cy, cx);\r\n        let c = Math.hypot(cx, cy);\r\n        let x = Math.round(Math.cos(rad + a) * c + t.x + t.width / 2),\r\n          y = Math.round(-Math.sin(rad + a) * c + t.y + t.height / 2);\r\n        item.transform.x = x - item.transform.width / 2;\r\n        item.transform.y = y - item.transform.height / 2;\r\n        item.transform.rotation += t.rotation;\r\n        if (item.type == 'block') {\r\n          item.items = calc(item.items);\r\n        }\r\n        return item;\r\n      });\r\n    };\r\n    return calc(masterItems);\r\n  };\r\n  handlePartMaster = () => {\r\n    let responder = getFirstResponder();\r\n    let pElement = responder._parent;\r\n    let parent = pElement ? pElement.properties.id : null;\r\n    let data = getMasterFromStore(responder.properties.masterId);\r\n    let items = this._calcBlockTransform(data.content.data.items, responder.properties.transform);\r\n    let stateItems = this._deleteItems(this.state.items, responder.properties.id, false);\r\n    stateItems = this._appendItems(stateItems, items, parent);\r\n    this.setState({ items: stateItems }, this.pushHistory);\r\n    setTimeout(() => {\r\n      if (pElement) {\r\n        pElement.updateBlockTransform();\r\n      } else {\r\n        items.forEach((item) => {\r\n          if (item.type == 'block') {\r\n            item.view.updateBlockTransform();\r\n          }\r\n        });\r\n      }\r\n      setFirstResponder(null);\r\n    });\r\n  };\r\n  handleSaveMaster = () => {\r\n    let transform = Object.assign({}, getFirstResponder().properties.transform);\r\n    let { ids, parent } = this._getTargetIdsAndParent(getFirstResponder());\r\n    setSelfTemplateData('MASTER').then((res) => {\r\n      let master = new MasterProperties();\r\n      master.id = uuid('sb_');\r\n      master.transform = transform;\r\n      master.masterId = res.data._id;\r\n      let stateItems = this._deleteItems(this.state.items, ids, false);\r\n      stateItems = this._appendItems(stateItems, master, parent ? parent.properties.id : null);\r\n      this.setState({ items: stateItems }, this.pushHistory);\r\n      setTimeout(() => {\r\n        setFirstResponder(master.view);\r\n      });\r\n    });\r\n  };\r\n  handleApplyUngroup = (block) => {\r\n    let target = getFirstResponder();\r\n    setFirstResponder(null);\r\n    let delId = target.properties.id;\r\n    let parent = target._parent ? target._parent : null;\r\n    let pid = parent ? parent.properties.id : null;\r\n    let items = target.properties.items.map((item) => parseOjbect(item.toString()));\r\n    let stateItems = this._deleteItems(this.state.items, delId, false);\r\n    stateItems = this._appendItems(stateItems, items, pid);\r\n    this.setState({ items: stateItems }, this.pushHistory);\r\n    setTimeout(() => {\r\n      if (parent) parent.updateChildrenPosition();\r\n      else\r\n        Event.dispatch(\r\n          selection_group,\r\n          items.map((item) => item.view)\r\n        );\r\n    });\r\n  };\r\n  handleApplyGroup = (block) => {\r\n    setFirstResponder(null);\r\n    let items = block.items;\r\n    let map = {};\r\n    items.forEach((item) => {\r\n      map[item.id] = true;\r\n    });\r\n    let stateItems = this.state.items.filter((item) => !map[item.id]);\r\n    stateItems.push(block);\r\n    this.setState({ items: stateItems }, this.pushHistory);\r\n    setTimeout(() => {\r\n      setFirstResponder(block.view);\r\n    });\r\n  };\r\n  handleClearClipboard = () => {\r\n    setClipboardData(null);\r\n  };\r\n  _applyBlockOffset = (view, x, y) => {\r\n    proxyTransformOffset(view, x, y);\r\n  };\r\n  handlePasteToMouse = (target, event) => {\r\n    let data = getClipboardData();\r\n    if (!data) return;\r\n    let views = parseJSON(data, true);\r\n    let { x, y } = pointToWorkspaceCoords(event);\r\n    let diffx = x - views[0].transform.x;\r\n    let diffy = y - views[0].transform.y;\r\n    views = views.map((item) => {\r\n      this._applyBlockOffset(item, diffx, diffy);\r\n      return item;\r\n    });\r\n    this.handleAppendChild(views);\r\n    setTimeout(() => {\r\n      if (data.length > 1) {\r\n        Event.dispatch(\r\n          selection_group,\r\n          views.map((item) => item.view)\r\n        );\r\n      } else {\r\n        setFirstResponder(views[0].view);\r\n      }\r\n    });\r\n  };\r\n\r\n  componentDidMount() {\r\n    Event.dispatch(controllers_ready, this);\r\n  }\r\n\r\n  // Guide -  delete | create | move\r\n  handleGuidesChange = ({ key, value }) => {\r\n    updatePageGuides(getCurrentPage(), key, value);\r\n  };\r\n  // 编辑器偏好设置变化\r\n  handleEditorConfig = ({ key, value }) => {\r\n    message.success('操作成功');\r\n  };\r\n  // BG WIDTH GUIDES\r\n  handlePageInfoUpdate = ({ id, key, value }) => {\r\n    updatePageInfo(id, key, value);\r\n  };\r\n  /**\r\n   *  Ctrl S (保存当前操作到服务器，需要验证是否登录了)\r\n   */\r\n  handleSaveWorkspace = async () => {};\r\n  handleSaveTemplate = () => {\r\n    setSelfTemplateData();\r\n  };\r\n  coverageBackwardTo = () => {\r\n    setCoveragePikeMode(-1);\r\n  };\r\n  /**\r\n   * Start coverage pick mode\r\n   * @param target\r\n   */\r\n  coveragePickedWithMode = (target) => {\r\n    let mode = getCoveragePickeMode();\r\n    setCoveragePikeMode(0); // reset\r\n    if (getFirstResponder() === target) return;\r\n    this._coverageHanlder(null, target.properties.zIndex + mode);\r\n  };\r\n  /**\r\n   *  To some component\r\n   */\r\n  coverageForwardTo = () => {\r\n    setCoveragePikeMode(1);\r\n  };\r\n  _coverageHanlder = (level, zIndex) => {\r\n    let view = getFirstResponder();\r\n    let stateItems = proxyAllPropsChange(this.state.items, view, 'zIndex', (item) => (typeof zIndex === 'undefined' ? item.zIndex + level : zIndex));\r\n    this.setState({ items: stateItems }, this.pushHistory);\r\n  };\r\n  /**\r\n   * send to backward\r\n   */\r\n  coverageBackward = () => {\r\n    this._coverageHanlder(-1);\r\n  };\r\n  /**\r\n   * Bring to front\r\n   */\r\n  coverageFront = () => {\r\n    let max =\r\n      Math.max.apply(\r\n        null,\r\n        this.state.items.map((item) => item.zIndex)\r\n      ) + 1;\r\n    setLastCoverageIndex(max + 1);\r\n    this._coverageHanlder(null, max);\r\n  };\r\n  /**\r\n   * Send to back\r\n   */\r\n  coverageBack = () => {\r\n    let min =\r\n      Math.min.apply(\r\n        null,\r\n        this.state.items.map((item) => item.zIndex)\r\n      ) - 1;\r\n    setLastCoverageIndex(min);\r\n    this._coverageHanlder(null, min);\r\n  };\r\n  /**\r\n   * Forward\r\n   */\r\n  coverageForward = () => {\r\n    this._coverageHanlder(1);\r\n  };\r\n  /**\r\n   * Use id to remove components\r\n   * @param id\r\n   */\r\n  handleDeleteById = (id) => {\r\n    this.handleDeleteChild(id);\r\n    setFirstResponder(null);\r\n  };\r\n  /**\r\n   * Use id to find component properties\r\n   * @param id\r\n   * @param stateItems\r\n   * @return {*}\r\n   * @private\r\n   */\r\n  _findPropertiesById = (id, stateItems) => {\r\n    stateItems = stateItems || this.state.items;\r\n    const find = (items) => {\r\n      for (let i = 0; i < items.length; i++) {\r\n        if (items[i].id === id) {\r\n          return items[i];\r\n        }\r\n        if (items[i].items && items[i].items.length > 0) {\r\n          let v = find(items[i].items);\r\n          if (v) return v;\r\n        }\r\n      }\r\n    };\r\n    return find(stateItems);\r\n  };\r\n  /**\r\n   * Use id to find component\r\n   * @param id\r\n   * @param stateItems\r\n   * @return {null}\r\n   * @private\r\n   */\r\n  _findViewById = (id, stateItems) => {\r\n    let props = this._findPropertiesById(id, stateItems);\r\n    return props ? props.view : null;\r\n  };\r\n  /**\r\n   * Select coverage\r\n   * @param id\r\n   */\r\n  handleCoverageSelect = (id) => {\r\n    let prop = window.allWidgets[id];\r\n    if (prop) setFirstResponder(prop.view);\r\n    // TODO Select group\r\n  };\r\n  /**\r\n   * Select page\r\n   * @param pageid\r\n   */\r\n  handlePageSelect = (pageid) => {\r\n    selectPage(pageid).then(async (items) => {\r\n      // 页面变化后，由于组件id未改变，导致component数据被共享了。\r\n      // 需要 彻底卸载之前的数据\r\n      await super.setState({ items: [] });\r\n      this.setState({ items: items }, this.pushHistory, { nosave: true });\r\n      if (items.length > 0) {\r\n        let max =\r\n          Math.max.apply(\r\n            null,\r\n            items.map((item) => item.zIndex)\r\n          ) + 1;\r\n        setLastCoverageIndex(max + 1);\r\n      } else {\r\n        setLastCoverageIndex(1000);\r\n      }\r\n      setFirstResponder(null);\r\n    });\r\n  };\r\n  handlePageCreate = (pid) => {\r\n    let q = qs.parse(location.search);\r\n    if (q.p) {\r\n      createNewPage(pid);\r\n    } else {\r\n      Event.dispatch(show_create_project, { pages: [], from: 'App' });\r\n    }\r\n  };\r\n  /**\r\n   * Delete page\r\n   */\r\n  handlePageDelete = (id) => {\r\n    deletePage(id).then(() => {\r\n      setFirstResponder(null);\r\n      this.setState({ items: [] });\r\n      setCurrentPage(null);\r\n    });\r\n  };\r\n  /**\r\n   * Select all\r\n   */\r\n  handleCheckAll = () => {\r\n    let items = this.state.items;\r\n    if (items.length == 1) {\r\n      setFirstResponder(items[0].view);\r\n    } else if (items.length > 1) {\r\n      Event.dispatch(\r\n        selection_group,\r\n        items.map((item) => item.view)\r\n      );\r\n    }\r\n  };\r\n  _getTargetIdsAndParent = (target) => {\r\n    target = target instanceof ViewController ? target.properties : target;\r\n    let ids = [],\r\n      parent = null;\r\n    if (target.isTemporaryGroup) {\r\n      ids = target.view.getItems().map((item) => item.id);\r\n      parent = target.view.group[0]._parent;\r\n    } else {\r\n      ids = target.id;\r\n      parent = target.view._parent;\r\n    }\r\n    return { ids, parent };\r\n  };\r\n  // Delete\r\n  handleDelete = (target) => {\r\n    let { ids, parent } = this._getTargetIdsAndParent(target);\r\n    this.handleDeleteChild(ids);\r\n    setFirstResponder(null);\r\n    setTimeout(() => {\r\n      if (parent) parent.updateBlockTransform();\r\n    });\r\n  };\r\n  /**\r\n   *  Copy component , 添加对block 的支持\r\n   * @param target\r\n   */\r\n  handleCopy = (target) => {\r\n    if (target.isTemporaryGroup) {\r\n      let viewItems = target.view.getItems();\r\n      let data = viewItems.map((item) => toJSON(item));\r\n      setClipboardData(data);\r\n    } else {\r\n      let data = toJSON(target);\r\n      setClipboardData(data);\r\n    }\r\n  };\r\n  // Paste 添加对block 的支持\r\n  handlePaste = () => {\r\n    let data = getClipboardData();\r\n    if (!data) return;\r\n    let views = parseJSON(data, true);\r\n    views = views.map((item) => {\r\n      this._applyBlockOffset(item, 0, views[0].transform.height);\r\n      return item;\r\n    });\r\n    this.handleAppendChild(views);\r\n    setTimeout(() => {\r\n      if (data.length > 1) {\r\n        Event.dispatch(\r\n          selection_group,\r\n          views.map((item) => item.view)\r\n        );\r\n      } else {\r\n        setFirstResponder(views[0].view);\r\n      }\r\n    });\r\n  };\r\n  /**\r\n   *\r\n   * @param data {ViewProperties}\r\n   * @return {ViewProperties} 具有新id的view\r\n   *\r\n   * @private\r\n   */\r\n  _clone = (data) => {\r\n    if (!data) return;\r\n    let copy = parseOjbect(data.toString());\r\n    refreshViewId(copy);\r\n    this._applyBlockOffset(copy, 10, 10);\r\n    if (!copy.alias.endsWith('(副本)')) {\r\n      copy.alias += '(副本)';\r\n    }\r\n    return copy;\r\n  };\r\n  /**\r\n   * Add to clipboard (memory version)\r\n   * @param target\r\n   */\r\n  handleClip = (target) => {\r\n    if (target.isTemporaryGroup) {\r\n      let data = target.view.getItems().map((item) => toJSON(item));\r\n      setClipboardData(data);\r\n      this.handleDeleteChild(target.view.getItems().map((item) => item.id));\r\n    } else {\r\n      setClipboardData(toJSON(target));\r\n      this.handleDeleteChild(target.id);\r\n    }\r\n    setFirstResponder(null);\r\n  };\r\n  // Duplicate,支持在block中使用\r\n  handleDuplicate = (target) => {\r\n    let views = [];\r\n    let block = null;\r\n    if (target.isTemporaryGroup) {\r\n      views = target.view.getItems().map((item) => this._clone(item));\r\n      if (target.view.group[0]._parent) {\r\n        block = target.view.group[0]._parent.properties.id;\r\n      }\r\n    } else {\r\n      views = this._clone(target);\r\n      if (target.view._parent) {\r\n        block = target.view._parent.properties.id;\r\n      }\r\n    }\r\n    this.handleAppendChild(views, block);\r\n    setTimeout(() => {\r\n      if (target.isTemporaryGroup) {\r\n        Event.dispatch(\r\n          selection_group,\r\n          views.map((item) => item.view)\r\n        );\r\n      } else {\r\n        setFirstResponder(views.view);\r\n      }\r\n      let child = null;\r\n      if (isArray(views)) {\r\n        child = views[0];\r\n      } else {\r\n        child = views;\r\n      }\r\n      if (child.view._parent) {\r\n        console.log('block updated');\r\n        child.view._parent.updateBlockTransform();\r\n      }\r\n    });\r\n  };\r\n  /**\r\n   *  Hide  | Show\r\n   * @param target\r\n   */\r\n  handleHide = (target) => {\r\n    this._applyComponentHideStatus(target, true);\r\n  };\r\n  _applyComponentHideStatus = (target, status) => {\r\n    let stateItems = this.state.items;\r\n    stateItems = proxyAllPropsChange(stateItems, target.view, 'settings', (item) => {\r\n      let settings = item.settings;\r\n      settings.isHide = status;\r\n      return settings;\r\n    });\r\n    if (status) {\r\n      setFirstResponder(null);\r\n    }\r\n    this.setState({ items: stateItems }, this.pushHistory);\r\n  };\r\n  handleShow = (target) => {\r\n    this._applyComponentHideStatus(target, false);\r\n  };\r\n  /**\r\n   * 批量删除、单个删除\r\n   * @param stateItems {Array<ViewProperties>}\r\n   * @param ids {Array}\r\n   * @return {Array<ViewProperties>}  返回一个新的状态\r\n   * @private\r\n   *\r\n   */\r\n  _deleteItems = (stateItems, ids, clearLeafBlock) => {\r\n    return proxyDeleteItems(stateItems, Array.isArray(ids) ? ids : [ids], clearLeafBlock);\r\n  };\r\n  /**\r\n   * 添加、批量添加\r\n   *\r\n   * @param stateItems {Array<ViewProperties>}\r\n   * @param target {ViewProperties | Array}\r\n   * @return {Array} 返回新的state\r\n   *\r\n   * @private\r\n   */\r\n  _appendItems = (stateItems, target, block) => {\r\n    let items = [];\r\n    target = Array.isArray(target) ? target : [target];\r\n    if (block && getPATHES()[block]) {\r\n      items = updateTreeIn(stateItems, getPATHES()[block].split(','), (block) => {\r\n        block = createViewFrom(block);\r\n        block.items = block.items.concat(target);\r\n        return block;\r\n      });\r\n    } else {\r\n      items = stateItems.concat(target);\r\n    }\r\n    return items;\r\n  };\r\n  handleDeleteChild = (ids) => {\r\n    let items = this._deleteItems(this.state.items, ids);\r\n    this.setState({ items }, this.pushHistory);\r\n  };\r\n  handleAppendChild = (target, block) => {\r\n    let items = this._appendItems(this.state.items, target, block);\r\n    this.setState({ items }, this.pushHistory);\r\n  };\r\n  _handleSelectionWithType = (t, screen, offset, rect) => {\r\n    let x = t.x - screen.x + offset.x;\r\n    let y = t.y - screen.y + offset.y;\r\n    if (config.selection == 'cross') {\r\n      return x + t.width > rect.x && rect.x + rect.width > x && y + t.height > rect.y && rect.y + rect.height > y;\r\n    }\r\n    return x > rect.x && x + t.width < rect.x + rect.width && y > rect.y && y + t.height < rect.height + rect.y;\r\n  };\r\n  /**\r\n   * Ctrl Shift O\r\n   */\r\n  handleSelectionTypeChange = () => {\r\n    const map = {};\r\n    config.selection = config.selection == 'cross' ? 'inner' : 'cross';\r\n    message.success(`已切换至${config.selection == 'cross' ? '相交' : '包含'}选择模式`);\r\n  };\r\n  /**\r\n   * 框选.暂时没有缓存位置信息\r\n   * @param rect\r\n   */\r\n  handleSelection = (rect) => {\r\n    let screen = getScreeTransform();\r\n    let offset = getScreenOffset();\r\n    let group = this.state.items\r\n      .filter((item) => {\r\n        // 不能选中已锁定的和隐藏的\r\n        if (item.settings.isHide) return false;\r\n        return this._handleSelectionWithType(item.view.getOffsetTransform(), screen, offset, rect);\r\n      })\r\n      .map((item) => item.view);\r\n    if (group.length > 1) Event.dispatch(selection_group, group);\r\n    else if (group.length === 0) {\r\n      setFirstResponder(null);\r\n    } else {\r\n      setFirstResponder(group[0]);\r\n    }\r\n  };\r\n  handleSelectionStart = () => {\r\n    setFirstResponder(null);\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    //clear global variable\r\n    setPageData([]);\r\n    clearGlobalVariabel();\r\n    HistoryRecord.splice(0);\r\n    RedoRecord.splice(0);\r\n    window.allWidgets = {};\r\n    Event.destroy(selection_change, this.handleSelection);\r\n    Event.destroy(selection_start, this.handleSelectionStart);\r\n    Event.destroy(controllers_append, this.handleAppendChild);\r\n    Event.destroy(controllers_delete, this.handleDeleteChild);\r\n    Event.destroy(context_copy, this.handleCopy);\r\n    Event.destroy(context_paste, this.handlePaste);\r\n    Event.destroy(context_paste_clear, this.handleClearClipboard);\r\n    Event.destroy(context_paste_mouse, this.handlePasteToMouse);\r\n    Event.destroy(context_copypaste, this.handleDuplicate);\r\n    Event.destroy(context_cut, this.handleClip);\r\n    Event.destroy(context_delete, this.handleDelete);\r\n    Event.destroy(context_hide, this.handleHide);\r\n    Event.destroy(context_show, this.handleShow);\r\n    Event.destroy(context_checkall, this.handleCheckAll);\r\n    Event.destroy(component_properties_change, this.handlePropsChange);\r\n    Event.destroy(component_active, this.handleComponentActive);\r\n    Event.destroy(component_resize_end, this.handleComponentDragend);\r\n    Event.destroy(component_dragend, this.handleComponentDragend);\r\n    Event.destroy(context_undo, this.handleUndo);\r\n    Event.destroy(context_redo, this.handleRedo);\r\n    Event.destroy(outline_page_select, this.handlePageSelect);\r\n    Event.destroy(outline_page_create, this.handlePageCreate);\r\n    Event.destroy(outline_coverage_select, this.handleCoverageSelect);\r\n    Event.destroy(controllers_delete_by_id, this.handleDeleteById);\r\n    Event.destroy(outline_page_delete, this.handlePageDelete);\r\n    Event.destroy(component_swap, this.handleSwapComponent);\r\n    Event.destroy(component_alignment, this.handleAlignmentChange);\r\n    Event.destroy(coverage_back, this.coverageBack);\r\n    Event.destroy(coverage_backward, this.coverageBackward);\r\n    Event.destroy(coverage_front, this.coverageFront);\r\n    Event.destroy(coverage_forward, this.coverageForward);\r\n    Event.destroy(coverage_backward_to, this.coverageBackwardTo);\r\n    Event.destroy(coverage_forward_to, this.coverageForwardTo);\r\n    Event.destroy(coverage_picked_width_mode, this.coveragePickedWithMode);\r\n    Event.destroy(workspace_save_template, this.handleSaveTemplate);\r\n    Event.destroy(context_save, this.handleSaveWorkspace);\r\n    Event.destroy(context_page_update, this.handlePageInfoUpdate);\r\n    Event.destroy(refresh_editor_config, this.handleEditorConfig);\r\n    Event.destroy(editor_guides_change, this.handleGuidesChange);\r\n    Event.destroy(controllers_apply_group, this.handleApplyGroup);\r\n    Event.destroy(component_empty, this.handleEmpty);\r\n    Event.destroy(context_unpack, this.handleApplyUngroup);\r\n    Event.destroy(workspace_save_master, this.handleSaveMaster);\r\n    Event.destroy(workspace_part_master, this.handlePartMaster);\r\n    Event.destroy(context_mode_change, this.handleEditorModeChange);\r\n    Event.destroy(context_outline_delete_master, this.handleDeleMaster);\r\n  }\r\n\r\n  handleDeleMaster = (id) => {\r\n    if (getQuery().m == id) {\r\n      Event.dispatch(context_mode_change, 'PROJECT');\r\n    }\r\n  };\r\n  handleComponentActive = (target) => {\r\n    let items = this.state.items;\r\n    items = proxyAllPropsChange(items, target);\r\n    this.setState({ items });\r\n  };\r\n  handleComponentDragend = () => {\r\n    let target = getFirstResponder();\r\n    this.pushHistory(this.state.items);\r\n    this.handleComponentActive(target);\r\n  };\r\n  handleComponentResizend = () => {\r\n    this.handleComponentDragend();\r\n    this.handleComponentActive(getFirstResponder());\r\n  };\r\n  /**\r\n   * 根据block的新\r\n   * @param block\r\n   * @param blockTransform\r\n   * @private\r\n   *\r\n   */\r\n  _handleBlockTransformChange = (block, blockTransform) => {\r\n    return block.items.map((item) => {\r\n      let x = blockTransform.x + item._xPercent * blockTransform.width;\r\n      let y = blockTransform.y + item._yPercent * blockTransform.height;\r\n      let width = blockTransform.width * item._wPercent;\r\n      let height = blockTransform.height * item._hPercent;\r\n      let sub = createViewFrom(item);\r\n      sub.transform = { x, y, width, height, rotation: sub.transform.rotation };\r\n      if (sub.type == 'block') {\r\n        sub.items = this._handleBlockTransformChange(sub, sub.transform);\r\n      }\r\n      return sub;\r\n    });\r\n  };\r\n  /**\r\n   * Save history\r\n   * @param object\r\n   * @param {ViewController} object.target\r\n   * @param {String|Array} object.key\r\n   * @param {Object|Array} object.value 如果是group，则返回{id:Object}\r\n   */\r\n  handlePropsChange = ({ target, key, value, from }) => {\r\n    let items = [];\r\n\r\n    function handleItem(item) {\r\n      let id = item.id;\r\n      // 批处理时，先检测当前属性是否使用于目标元素\r\n      if (target.properties.isTemporaryGroup) {\r\n        if (Array.isArray(key)) {\r\n          key.forEach((k, index) => {\r\n            item[k] = value[id][index];\r\n          });\r\n        } else {\r\n          if (PropsFilter[key](item)) {\r\n            item[key] = mergeProps(item[key], value[id]);\r\n          } else {\r\n            console.info(key, 'not in ', item.type);\r\n          }\r\n        }\r\n      } else {\r\n        if (Array.isArray(key)) {\r\n          key.forEach((k, index) => {\r\n            item[k] = value[index];\r\n          });\r\n        } else {\r\n          item[key] = mergeProps(item[key], value);\r\n        }\r\n        return item;\r\n      }\r\n      return item;\r\n    }\r\n\r\n    if (!(key == 'transform' || key == 'alias')) {\r\n      items = proxyAllPropsChange(this.state.items, target, handleItem);\r\n    } else {\r\n      // 对transform 特殊处理,block组件需要对子元素进行一次刷新\r\n      items = proxyPropsChange(this.state.items, target, (item) => {\r\n        item = handleItem(item);\r\n        if (item.type == 'block' && key == 'transform') {\r\n          item.items = this._handleBlockTransformChange(item, item.transform);\r\n        }\r\n        return item;\r\n      });\r\n    }\r\n    const pushState = (target, key, items, from) => {\r\n      // refresh tree\r\n      this.setState({ items }, (items) => {\r\n        this.pushHistory(items);\r\n        if (key === 'transform') {\r\n          if (target.properties.isTemporaryGroup) {\r\n            target.updateResizer();\r\n          } else if (target._parent) {\r\n            target._parent.updateBlockTransform();\r\n          } else if (target.properties.type == 'block') {\r\n            target.updateBlockTransform();\r\n          }\r\n          Event.dispatch(component_drag, target, { from, hideGuides: true });\r\n        }\r\n      });\r\n    };\r\n    pushState(target, key, items, from);\r\n  };\r\n  /**\r\n   * 暂时先限制长度为100\r\n   * @param {Array<ViewProperties>} items\r\n   */\r\n  pushHistory = (items) => {\r\n    HistoryRecord.push(items);\r\n    RedoRecord.length = 0;\r\n    Event.dispatch(workspace_push, HistoryRecord.length);\r\n  };\r\n  /**\r\n   * Ctrl Z\r\n   */\r\n  handleUndo = () => {\r\n    if (HistoryRecord.length > 1) {\r\n      let items = HistoryRecord.pop();\r\n      RedoRecord.push(items);\r\n      let current = HistoryRecord[HistoryRecord.length - 1];\r\n      this.setState({ items: current });\r\n      setFirstResponder(null);\r\n    }\r\n    Event.dispatch(workspace_undo, HistoryRecord.length, RedoRecord.length);\r\n  };\r\n  /**\r\n   * Ctrl shift Z\r\n   */\r\n  handleRedo = () => {\r\n    if (RedoRecord.length > 0) {\r\n      let items = RedoRecord.pop();\r\n      HistoryRecord.push(items);\r\n      this.setState({ items });\r\n      setFirstResponder(null);\r\n    }\r\n    Event.dispatch(workspace_redo, HistoryRecord.length, RedoRecord.length);\r\n  };\r\n  /**\r\n   *\r\n   */\r\n  handleAlignmentChange = (type) => {\r\n    let items = AlignmentService.alignment(this.state.items, type);\r\n    this.setState({ items }, () => {\r\n      Event.dispatch(component_drag, getFirstResponder(), {\r\n        hideGuides: true,\r\n      });\r\n    });\r\n    this.pushHistory(items);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <ViewSelectGroupBordered />\r\n        {this.state.items.map((item) => {\r\n          return <View type={item.type} key={item.id} properties={item} />;\r\n        })}\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditorControllers;\r\n","/**\r\n *  created by yaojun on 2018/12/1\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './ContextMenu.scss';\r\nimport Event from '../Base/Event';\r\nimport { context_hide_menu, controllers_ready, guide_ready } from '../util/actions';\r\nimport { getFirstResponder, setFirstResponder } from '../global/instance';\r\nimport { DEFAULT_CONTEXT_MENU } from './ViewController';\r\n\r\n/**\r\n * 添加到素材库 TODO\r\n * 复制 TODO\r\n * 粘贴 TODO\r\n * 添加副本 TODO\r\n * 隐藏 TODO\r\n * 锁定 TODO\r\n * 恢复 TODO\r\n * 剪切 TODO\r\n * 删除 TODO\r\n * 组合\r\n * 拆分\r\n */\r\nexport default class ContextMenu extends React.Component {\r\n  static propTypes = {\r\n    containerId: PropTypes.string.isRequired,\r\n  };\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    // 当前鼠标点，激活菜单的鼠标点\r\n    this._event = null;\r\n    // controllers  控制面板数组\r\n    this.target = null;\r\n    /**\r\n     *\r\n     * @type {Guides}\r\n     */\r\n    this.guidesV = null;\r\n    /**\r\n     *\r\n     * @type {Guides}\r\n     */\r\n    this.guidesH = null;\r\n    // 当前弹出菜单的元素\r\n    this.current = null;\r\n    this.state = {\r\n      left: 0,\r\n      top: 0,\r\n      show: false,\r\n      menus: [],\r\n    };\r\n\r\n    Event.listen(controllers_ready, this.onControllersReady);\r\n    Event.listen(context_hide_menu, this.hideMenu);\r\n    Event.listen(guide_ready, this.onGuideReady);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param uid\r\n   * @return {Guides}\r\n   */\r\n  findContextGuide = (uid) => {\r\n    if (uid.startsWith('linev')) {\r\n      return this.guidesV;\r\n    }\r\n    return this.guidesH;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * @param target {Guides}\r\n   */\r\n  onGuideReady = (target) => {\r\n    if (target.isH) {\r\n      this.guidesH = target;\r\n    } else {\r\n      this.guidesV = target;\r\n    }\r\n  };\r\n\r\n  hideMenu = () => {\r\n    if (this.state.menus.length > 0) {\r\n      this.setState({ menus: [] });\r\n    }\r\n  };\r\n\r\n  /**\r\n   * @param target {EditorControllers}\r\n   */\r\n  onControllersReady = (target) => {\r\n    this.target = target;\r\n  };\r\n\r\n  componentDidMount() {\r\n    let containerId = this.props.containerId;\r\n    let container = document.querySelector(`#${containerId}`);\r\n    this.container = container;\r\n    container.addEventListener('contextmenu', this.handleContext, false);\r\n    this.refs.g.addEventListener('mousedown', this.contextDown);\r\n  }\r\n\r\n  contextDown = (e) => {\r\n    e.stopPropagation();\r\n  };\r\n\r\n  handleContext = (e) => {\r\n    e.preventDefault();\r\n    this._event = e;\r\n    let uid = this.findUID(e.target);\r\n    let result = [];\r\n    if (!uid) {\r\n      result = DEFAULT_CONTEXT_MENU();\r\n      this.current = null;\r\n    } else if (uid.startsWith('line')) {\r\n      this.current = this.findContextGuide(uid);\r\n      this.current.context_index = e.target.dataset.index;\r\n      result = this.current.getContextMenu();\r\n    } else {\r\n      let view = getFirstResponder();\r\n      this.current = view.properties;\r\n      result = view.getContextMenu();\r\n    }\r\n\r\n    let rect = this.container.getBoundingClientRect();\r\n    let x = e.pageX - rect.left;\r\n    let y = e.pageY - rect.top;\r\n    if (x + 210 > rect.width) {\r\n      x -= 210;\r\n    } else {\r\n      x += 10;\r\n    }\r\n    let height = result.filter((item) => item.type !== 'line').length * 33;\r\n    if (y + height > rect.height) {\r\n      y = rect.height - height - 20;\r\n    }\r\n\r\n    this.setState({ menus: result, left: x, top: y });\r\n  };\r\n\r\n  findUID = (target) => {\r\n    while (target && !target.dataset.uid) {\r\n      target = target.parentNode;\r\n      if (target === document) return null;\r\n    }\r\n    return target ? target.dataset.uid : null;\r\n  };\r\n\r\n  findContextMenuById = (uid) => {\r\n    if (!uid) return [];\r\n    let items = this.target.state.items;\r\n    let item = find(items);\r\n\r\n    function find(items) {\r\n      for (let i = 0, j = items.length; i < j; i++) {\r\n        let item = items[i];\r\n        if (item.id == uid) return item;\r\n        if (item.items) {\r\n          item = find(item.items);\r\n          if (item) return item;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (item) {\r\n      item = this.getView(item);\r\n      setFirstResponder(item.view);\r\n      this.current = item;\r\n      return item.view.getContextMenu();\r\n    }\r\n\r\n    return [];\r\n  };\r\n\r\n  getView(item) {\r\n    if (item.parent && item.settings.isLock) {\r\n      return this.getView(item.parent);\r\n    } else {\r\n      return item;\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.container.removeEventListener('contextmenu', this.handleContext, false);\r\n    Event.destroy(guide_ready, this.onGuideReady);\r\n    Event.destroy(controllers_ready, this.onControllersReady);\r\n    Event.destroy(context_hide_menu, this.hideMenu);\r\n  }\r\n\r\n  handleClick = (e) => {\r\n    let index = e.target.dataset.uid;\r\n    let item = this.state.menus[index];\r\n    if (item && item.action && item._isOk) {\r\n      Event.dispatch(item.action, this.current, { pageX: this._event.pageX, pageY: this._event.pageY });\r\n    } else {\r\n      e.stopPropagation();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <ul ref={'g'} onClick={this.handleClick} style={{ position: 'absolute', left: this.state.left, top: this.state.top }} className={'context-menu'}>\r\n        {this.state.menus.map((item, index) => {\r\n          if (item.type === 'line') {\r\n            return <li key={index} className={'context-group-line'}></li>;\r\n          }\r\n          let isOk = item.check ? item.check() : true;\r\n          item._isOk = isOk;\r\n\r\n          let name = typeof item.name === 'function' ? item.name() : item.name;\r\n\r\n          return (\r\n            <li className={isOk ? '' : 'disabled'} data-uid={index} key={index}>\r\n              {' '}\r\n              {name} <span className={'shortcutkey'}>{item.shortcutkey}</span>\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/6\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport Event from '../Base/Event';\r\nimport { component_active, component_inactive } from '../util/actions';\r\nimport { getCurrentEditor } from '../global/instance';\r\nimport { component_empty } from '@/lib/util/actions';\r\n\r\n/**\r\n * 当前选中元素与上一个元素\r\n */\r\nexport default class FirstResponder extends React.Component {\r\n  componentWillMount() {\r\n    this.responder = null;\r\n    this.last = null;\r\n    Event.listen(component_active, this._handleActiv);\r\n    Event.listen(component_inactive, this._handleInactive);\r\n  }\r\n\r\n  _handleInactive = () => {\r\n    let editor = getCurrentEditor();\r\n    if (editor) {\r\n      editor.setEditorBlur();\r\n    }\r\n  };\r\n\r\n  _handleActiv = (target) => {\r\n    this.last = this.responder;\r\n    this.responder = target;\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(component_active, this._handleActiv);\r\n    Event.destroy(component_inactive, this._handleInactive);\r\n  }\r\n\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/7\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport { getScreeTransform } from '../global';\r\nimport Event from './Event';\r\nimport { editor_scroll_change } from '../util/actions';\r\n\r\n/**\r\n * @description  同步缩放\r\n */\r\nexport default class NoZoomTransform extends React.Component {\r\n  constructor() {\r\n    super();\r\n    /**\r\n     * Must implements this prop\r\n     * @type {ViewController}\r\n     */\r\n    this.target = null;\r\n    // 缩放前坐标。当缩放时，已此位置为基础缩放。\r\n    this._x = 0;\r\n    this._y = 0;\r\n    this._width = 0;\r\n    this._height = 0;\r\n    this._rotation = 0;\r\n    // 缩放后坐标。\r\n    /**\r\n     * 当前选中元素的X 坐标\r\n     * @type {number}\r\n     */\r\n    this.x = 0;\r\n    /**\r\n     * 当前选中元素的 Y 坐标\r\n     * @type {number}\r\n     */\r\n    this.y = 0;\r\n    /**\r\n     * 元素的宽度\r\n     * @type {number}\r\n     */\r\n    this.width = 0;\r\n    /**\r\n     * 元素的高度\r\n     * @type {number}\r\n     */\r\n    this.height = 0;\r\n    /**\r\n     * 元素的旋转\r\n     * @type {number}\r\n     */\r\n    this.rotation = 0;\r\n\r\n    Event.listen(editor_scroll_change, this.handleScale);\r\n  }\r\n\r\n  handleScale = ({ isScale, scale }) => {\r\n    if (isScale) {\r\n      this.setScale(scale);\r\n    }\r\n  };\r\n\r\n  setScale(scale) {\r\n    this.x = this._x * scale;\r\n    this.y = this._y * scale;\r\n    this.width = this._width * scale;\r\n    this.height = this._height * scale;\r\n\r\n    this.applyToDom();\r\n  }\r\n\r\n  setBoundingRect = () => {\r\n    let scale = getScreeTransform().scale;\r\n    let { x, y, width, height, rotation } = this.target.getOffsetRect();\r\n    this.x = Math.round(x * scale);\r\n    this.y = Math.round(y * scale);\r\n    this.width = Math.round(width * scale);\r\n    this.height = Math.round(height * scale);\r\n    this.rotation = rotation;\r\n\r\n    this._x = x;\r\n    this._y = y;\r\n    this._width = width;\r\n    this._height = height;\r\n    this._rotation = rotation;\r\n\r\n    this.applyToDom();\r\n  };\r\n\r\n  applyToDom() {\r\n    let style = this.refs.container.style;\r\n    let { x, y, width, height, rotation } = this;\r\n    style.transform = `translate(${x}px,${y}px) rotate(${rotation}deg)`;\r\n    style.width = width + 'px';\r\n    style.height = height + 'px';\r\n  }\r\n\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/1\r\n *\r\n */\r\nimport React from 'react';\r\nimport Event from '../Base/Event';\r\nimport {\r\n  component_active,\r\n  component_close_edit_mode,\r\n  component_drag,\r\n  component_dragend,\r\n  component_edit_mode,\r\n  component_inactive,\r\n  component_resize_end,\r\n  component_resize_start,\r\n  component_show_resizer,\r\n  editor_scroll_change,\r\n} from '../util/actions';\r\nimport './ViewResizable.scss';\r\nimport Draggable from '../Draggable';\r\nimport NoZoomTransform from '../Base/NoZoomTransform';\r\nimport { Dom } from '../util/helper';\r\nimport Matrix, { getPoints } from '../util/Matrix';\r\nimport { pointToWorkspaceCoords } from '../global';\r\n\r\nconst gResize = ['rotation', 'tl', 'tm', 'tr', 'r', 'br', 'bm', 'bl', 'l', 'borderLeft', 'borderRight', 'borderTop', 'borderBottom'];\r\nconst cursorStartMap = { n: 0, ne: 1, e: 2, se: 3, s: 4, sw: 5, w: 6, nw: 7 };\r\nconst cursorDirectionArray = ['n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw'];\r\nconst cursorMap = { 0: 0, 1: 1, 2: 2, 3: 2, 4: 3, 5: 4, 6: 4, 7: 5, 8: 6, 9: 6, 10: 7, 11: 8 };\r\n\r\nexport const getCursor = (rotateAngle, d) => {\r\n  const increment = cursorMap[Math.floor(rotateAngle / 30)];\r\n  const index = cursorStartMap[d];\r\n  const newIndex = (index + increment) % 8;\r\n  return cursorDirectionArray[newIndex];\r\n};\r\nexport default class ViewResizable extends NoZoomTransform {\r\n  constructor() {\r\n    super();\r\n    /**\r\n     * 当前顶点矩阵\r\n     * @type {Matrix}\r\n     */\r\n    this.origin = null;\r\n    this.acrossPoint = null;\r\n    // 类型\r\n    this.resizeHandler = null;\r\n    // 定点位置\r\n    this.point = 0;\r\n    //  目标元素\r\n    this.target = null;\r\n    //  当前区域宽度，用于限制范围边界\r\n    this.transform = { x: 0, y: 0, width: 0, height: 0, rotation: 0 };\r\n    // min of width\r\n    this.minWidth = 1;\r\n    // max of width\r\n    this.minHeight = 1;\r\n    this._isHide = false;\r\n    this._x1 = 0;\r\n    this._y1 = 0;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.show(false);\r\n    Event.listen(component_active, this.onComponentActive);\r\n    Event.listen(component_drag, this.onComponentDrag);\r\n    Event.listen(component_dragend, this.onComponentDragend);\r\n    Event.listen(component_resize_end, this.onComponentDragend);\r\n    Event.listen(component_inactive, this.onComponentInactive);\r\n    Event.listen(component_show_resizer, this.onComponentActive);\r\n    Event.listen(component_edit_mode, this.onOpenEditMode);\r\n    Event.listen(component_close_edit_mode, this.onCloseEditMode);\r\n    let cx,\r\n      cy,\r\n      startAngle,\r\n      currentAngle = 0,\r\n      rotation = 0;\r\n    //rotation\r\n    new Draggable(this.refs.rotation, {\r\n      onDragStart: ({ mouseX, mouseY }, e) => {\r\n        this._isRotate = true;\r\n        let t = this.target.refs.container.getBoundingClientRect();\r\n        cx = t.left + t.width / 2;\r\n        cy = t.top + t.height / 2;\r\n        startAngle = (180 / Math.PI) * Math.atan2(mouseY - cy, mouseX - cx);\r\n        let trans = this;\r\n        let tcx = trans.x + trans.width / 2;\r\n        let tcy = trans.y + trans.height / 2;\r\n        rotation = this.transform.rotation;\r\n        this.refs.wrapper.style.transformOrigin = `${tcx}px ${tcy}px`;\r\n        this.onScaleStart();\r\n      },\r\n      onDragMove: ({ mouseX, mouseY }) => {\r\n        window._mouse = { mouseX, mouseY };\r\n        let x = mouseX - cx;\r\n        let y = mouseY - cy;\r\n        let angle = (180 / Math.PI) * Math.atan2(y, x);\r\n        currentAngle = angle - startAngle;\r\n        let r = rotation + currentAngle;\r\n        r = r % 360;\r\n        r = r < 0 ? r + 360 : r;\r\n        this.setRotation(Math.floor(r));\r\n      },\r\n      onDragEnd: () => {\r\n        this._isRotate = false;\r\n        this._isHide = false;\r\n        this.show(true);\r\n        rotation += currentAngle;\r\n        this.target.rotationEnd(); // 再resize_end事件触发钱修改 transform都将可以被保存到\r\n        Event.dispatch(component_resize_end);\r\n      },\r\n    });\r\n    this.startResizeHandler();\r\n  }\r\n\r\n  startResizeHandler = () => {\r\n    let self = this;\r\n    let pointMap = {\r\n      br: 0,\r\n      tr: 3,\r\n      tl: 2,\r\n      bl: 1,\r\n      tm: 2,\r\n      bm: 0,\r\n      l: 1,\r\n      r: 3,\r\n    };\r\n    let widthMap = {\r\n      l: 1,\r\n      r: 1,\r\n    };\r\n    let heightMap = {\r\n      tm: 1,\r\n      bm: 1,\r\n    };\r\n    let tl2br = {\r\n      tl: 1,\r\n      br: 1,\r\n      tm: 1,\r\n      bm: 1,\r\n    };\r\n    let tr2bl = {\r\n      tr: 1,\r\n      bl: 1,\r\n      r: 1,\r\n      l: 1,\r\n    };\r\n\r\n    function getRect() {\r\n      return self.target.getOffsetRect();\r\n    }\r\n\r\n    function deg2rad(deg) {\r\n      return (deg * Math.PI) / 180;\r\n    }\r\n\r\n    function rad2deg(rad) {\r\n      return (rad * 180) / Math.PI;\r\n    }\r\n\r\n    function getSize({ type, x, y, dis, ratio }) {\r\n      let w, h;\r\n      let currentAngle = rad2deg(Math.atan2(y, x));\r\n      let rad = deg2rad(pressAngle + currentAngle - startAngle);\r\n      if (tr2bl[type]) {\r\n        h = Math.cos(rad) * dis;\r\n        w = Math.sin(rad) * dis;\r\n      } else {\r\n        h = Math.sin(rad) * dis;\r\n        w = Math.cos(rad) * dis;\r\n      }\r\n      if (ratio) {\r\n        if (widthMap[type]) {\r\n          h = w / currentRatio;\r\n        } else if (heightMap) {\r\n          w = h * currentRatio;\r\n        }\r\n      }\r\n      return { w, h };\r\n    }\r\n\r\n    function getParentRect(rect) {\r\n      let current = self.target.properties.transform;\r\n      return {\r\n        x: rect.x - current.x,\r\n        y: rect.y - current.y,\r\n        width: current.width,\r\n        heigh: current.height,\r\n        rotation: current.rotation,\r\n      };\r\n    }\r\n\r\n    function getOffsetRect(rect) {\r\n      return {\r\n        x: parentRect.x + rect.x,\r\n        y: parentRect.y + rect.y,\r\n        width: rect.width,\r\n        height: rect.height,\r\n        rotation: rect.rotation,\r\n      };\r\n    }\r\n\r\n    let type,\r\n      rect,\r\n      matrix = null,\r\n      opposite = null,\r\n      startAngle = 0,\r\n      pressAngle = 0,\r\n      currentRatio = 0,\r\n      parentRect = {};\r\n    new Draggable(self.refs.resize, {\r\n      onDragStart(data, e) {\r\n        type = e.target.dataset.d;\r\n        rect = getRect();\r\n        parentRect = getParentRect(rect);\r\n        matrix = getPoints(rect);\r\n        if (type) {\r\n          opposite = matrix[pointMap[type]];\r\n          let { x, y } = pointToWorkspaceCoords(e);\r\n          let x1 = x - opposite.x;\r\n          let y1 = y - opposite.y;\r\n          let _width = rect.width,\r\n            _height = rect.height;\r\n          currentRatio = _width / _height;\r\n          if (tr2bl[type]) {\r\n            if (widthMap[type]) _height /= 2;\r\n            pressAngle = rad2deg(Math.atan2(_width, _height));\r\n          } else {\r\n            if (heightMap[type]) _width /= 2;\r\n            pressAngle = rad2deg(Math.atan2(_height, _width));\r\n          }\r\n          startAngle = rad2deg(Math.atan2(y1, x1));\r\n        }\r\n      },\r\n      onDragMove({ deltaX, deltaY }, e) {\r\n        if (!deltaX && !deltaY) return;\r\n        if (type) {\r\n          let { x: mouseX, y: mouseY } = pointToWorkspaceCoords(e);\r\n          let x = mouseX - opposite.x;\r\n          let y = mouseY - opposite.y;\r\n          window._mouse = { mouseX: e.pageX, mouseY: e.pageY };\r\n          let dis = Math.hypot(y, x);\r\n          let ratio = e.shiftKey || self.target.properties.settings.ratio;\r\n          let { w, h } = getSize({ type, dis, x, y, ratio });\r\n          let transform = Object.assign({}, self.target.properties.transform);\r\n          if (widthMap[type] && !ratio) {\r\n            transform.width = w;\r\n          } else if (heightMap[type] && !ratio) {\r\n            transform.height = h;\r\n          } else {\r\n            transform.width = w;\r\n            transform.height = h;\r\n          }\r\n          if (transform.width < self.minWidth) {\r\n            transform.width = self.minWidth;\r\n          }\r\n          if (transform.height < self.minHeight) {\r\n            transform.height = self.minHeight;\r\n          }\r\n          currentRatio = transform.width / transform.height;\r\n          // 顶点固定\r\n          let matrix = getPoints(getOffsetRect(transform));\r\n          let _opp = matrix[pointMap[type]];\r\n          let deltaX = -(_opp.x - opposite.x),\r\n            deltaY = -(_opp.y - opposite.y);\r\n          transform.x += deltaX;\r\n          transform.y += deltaY;\r\n          self.setTargetTransform(transform);\r\n        }\r\n      },\r\n      onDragEnd: self.setScaleStatus,\r\n    });\r\n  };\r\n  onComponentDragend = () => {\r\n    this._isHide = false;\r\n    this.show(true);\r\n  };\r\n  onCloseEditMode = () => {\r\n    Dom.of(this.refs.resizeWrapper).show();\r\n  };\r\n  onOpenEditMode = () => {\r\n    Dom.of(this.refs.resizeWrapper).hide();\r\n  };\r\n  onScaleStart = (_, e) => {\r\n    let t = this.target.properties.transform;\r\n    this._x1 = 0;\r\n    this._y1 = 0;\r\n    this._x0 = 0;\r\n    this._y0 = 0;\r\n    this._tx0 = t.x;\r\n    this._ty0 = t.y;\r\n    this._tw = t.width;\r\n    this._th = t.height;\r\n    this.transform = t;\r\n    Event.dispatch(component_resize_start, this.target);\r\n  };\r\n  setScaleStatus = () => {\r\n    this.target.resizeEnd(); // 同旋转原理\r\n    Event.dispatch(component_resize_end);\r\n    this.show(true);\r\n    this._isHide = false;\r\n  };\r\n  /**\r\n   * 主动改变视图的位置时需要触发该视图的drag事件\r\n   * @param x\r\n   * @param y\r\n   * @param w\r\n   * @param h\r\n   * @param a\r\n   */\r\n  setTargetTransform = ({ x, y, width, height, ratation }) => {\r\n    this.target.setTransform(Math.round(x), Math.round(y), Math.round(width), Math.round(height), ratation);\r\n    //this.target.setTransform(x, y,width, height, ratation)\r\n    Event.dispatch(component_drag, this.target, { from: 'Resizable' });\r\n  };\r\n\r\n  setRotation(angle) {\r\n    this.target.setRotation(angle);\r\n    Event.dispatch(component_drag, this.target, { from: 'Rotatable' });\r\n  }\r\n\r\n  onComponentDrag = (target) => {\r\n    let t = target.properties.transform;\r\n    // if (!this._isHide) {\r\n    //   this._isHide = true;\r\n    //   this.show(false);\r\n    // }\r\n    this.setBoundingRect(t);\r\n  };\r\n  onComponentActive = (target) => {\r\n    this.target = target;\r\n    this.show(true);\r\n    this.transform = target.properties.transform;\r\n    this.setBoundingRect();\r\n    let resize = target.properties.settings.resize;\r\n    if (resize === null) resize = gResize;\r\n    resize.forEach((item) => {\r\n      Dom.of(this.refs[item]).show();\r\n    });\r\n  };\r\n  onComponentInactive = () => {\r\n    this.show(false);\r\n    this.target = null;\r\n    gResize.forEach((item) => {\r\n      Dom.of(this.refs[item]).hide();\r\n    });\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(component_drag, this.onComponentDrag);\r\n    Event.destroy(component_active, this.onComponentActive);\r\n    Event.destroy(component_inactive, this.onComponentInactive);\r\n    Event.destroy(editor_scroll_change, this.setBoundingRect);\r\n    Event.destroy(component_show_resizer, this.onComponentActive);\r\n    Event.destroy(component_dragend, this.onComponentDragend);\r\n    Event.destroy(component_close_edit_mode, this.onCloseEditMode);\r\n    Event.destroy(component_edit_mode, this.onOpenEditMode);\r\n    Event.destroy(component_resize_end, this.onComponentDragend);\r\n  }\r\n\r\n  setPosition = (dom, x, y) => {\r\n    dom.style.left = x + 'px';\r\n    dom.style.top = y + 'px';\r\n  };\r\n  setBorderWidth = (dom, w, h) => {\r\n    dom.style.width = w + 'px';\r\n    dom.style.height = h + 'px';\r\n  };\r\n  show = (visible) => {\r\n    this.refs.wrapper.style.display = visible ? 'block' : 'none';\r\n  };\r\n  applyToDom = () => {\r\n    if (!this.target || !this.target.properties) return;\r\n    let { x, y, width, height, rotation } = this;\r\n    let half = 4;\r\n    let { tl, tm, tr, l, bl, bm, br, r, wrapper, borderTop, borderBottom, borderLeft, borderRight } = this.refs;\r\n    this.setPosition(borderTop, x, y);\r\n    this.setPosition(borderBottom, x, y + height);\r\n    this.setPosition(borderLeft, x, y);\r\n    this.setPosition(borderRight, x + width, y);\r\n    this.setBorderWidth(borderTop, width, 1);\r\n    this.setBorderWidth(borderBottom, width, 1);\r\n    this.setBorderWidth(borderLeft, 1, height);\r\n    this.setBorderWidth(borderRight, 1, height);\r\n    //\r\n    this.setPosition(tl, x - half, y - half);\r\n    this.setPosition(tm, x + width / 2 - half, y - half);\r\n    this.setPosition(tr, x + width - half, y - half);\r\n    this.setPosition(r, x + width - half, y + height / 2 - half);\r\n    this.setPosition(br, x + width - half, y + height - half);\r\n    this.setPosition(bm, x + width / 2 - half, y + height - half);\r\n    this.setPosition(bl, x - half, y + height - half);\r\n    this.setPosition(l, x - half, y + height / 2 - half);\r\n    this.setPosition(this.refs.rotation, x + width / 2 - half, y - 24);\r\n    wrapper.style.transform = `rotate(${rotation}deg)`;\r\n    let ox = x + width / 2,\r\n      oy = y + height / 2;\r\n    wrapper.style.transformOrigin = `${ox}px ${oy}px`;\r\n  };\r\n\r\n  handleCursor = (e) => {\r\n    let type = e.target.dataset.type;\r\n    if (type) {\r\n      let style = getCursor(this.transform.rotation, type);\r\n      e.target.style.cursor = `${style}-resize`;\r\n    }\r\n  };\r\n  render() {\r\n    return (\r\n      <div ref={'wrapper'}>\r\n        {/*Border*/}\r\n        <div className={'resizable-border rb-h'} ref={'borderTop'}></div>\r\n        <div className={'resizable-border rb-v'} ref={'borderLeft'}></div>\r\n        <div className={'resizable-border rb-h'} ref={'borderBottom'}></div>\r\n        <div className={'resizable-border rb-v'} ref={'borderRight'}></div>\r\n\r\n        {/*Circle*/}\r\n\r\n        <div ref={'resizeWrapper'}>\r\n          <div ref={'rotation'} className={'rotation-circle '}>\r\n            <div className={'r-line'}></div>\r\n          </div>\r\n\r\n          <div onMouseEnter={this.handleCursor} ref={'resize'}>\r\n            <div data-type='nw' ref={'tl'} data-d='tl' className={'resizable-circle rc-tl'}></div>\r\n            <div data-type='n' ref={'tm'} data-d='tm' className={'resizable-circle rc-tm'}></div>\r\n            <div data-type='ne' ref={'tr'} data-d='tr' className={'resizable-circle rc-tr'}></div>\r\n            <div data-type='e' ref={'r'} data-d='r' className={'resizable-circle rc-r'}></div>\r\n            <div data-type='se' ref={'br'} data-d='br' className={'resizable-circle rc-br'}></div>\r\n            <div data-type='s' ref={'bm'} data-d='bm' className={'resizable-circle rc-bm'}></div>\r\n            <div data-type='sw' ref={'bl'} data-d='bl' className={'resizable-circle rc-bl'}></div>\r\n            <div data-type='w' ref={'l'} data-d='l' className={'resizable-circle rc-l'}></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/7\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport Event from '../lib/Base/Event';\r\nimport { editor_scroll_change, preferences_configchange } from '../lib/util/actions';\r\nimport config from '../lib/util/preference';\r\nimport PropTypes from 'prop-types';\r\nimport { setScreenOffset } from '../lib/global';\r\n\r\nexport default class Stage extends React.Component {\r\n  static propTypes = {\r\n    className: PropTypes.string,\r\n    children: PropTypes.any,\r\n    zoomable: PropTypes.bool,\r\n  };\r\n\r\n  componentWillMount() {\r\n    if (this.props.zoomable) {\r\n      Event.listen(preferences_configchange, this.handlePreferenceChange);\r\n    }\r\n  }\r\n\r\n  handlePreferenceChange = () => {};\r\n\r\n  componentDidMount() {\r\n    setTimeout(() => {\r\n      Event.listen(editor_scroll_change, this.handleScrollChange);\r\n      let rect = this.refs.w.parentNode.getBoundingClientRect();\r\n      this.cx = config.originCoords.x;\r\n      this.cy = config.originCoords.y;\r\n      this.refs.w.style.left = this.cx + 'px';\r\n      this.refs.w.style.top = this.cy + 'px';\r\n      setScreenOffset(this.cx, this.cy, { x: 0, y: 0 });\r\n    });\r\n  }\r\n\r\n  handleScrollChange = ({ x, y, scale, isScale }) => {\r\n    let zoom = this.props.zoomable ? scale : 1;\r\n    this.refs.g.style.transform = `matrix(${zoom},0,0,${zoom},${-x * scale},${-y * scale})`;\r\n    if (isScale) {\r\n      let g = this.refs.w.style;\r\n      g.left = this.cx * scale + 'px';\r\n      g.top = this.cy * scale + 'px';\r\n\r\n      setScreenOffset(this.cx, this.cy);\r\n    }\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(editor_scroll_change, this.handleScrollChange);\r\n    Event.destroy(preferences_configchange, this.handlePreferenceChange);\r\n  }\r\n\r\n  render() {\r\n    const { className, children } = this.props;\r\n    return (\r\n      <div ref={'w'} style={{ position: 'absolute' }}>\r\n        {/* Initial stage from original coordinates */}\r\n        <div className={className} style={{ position: 'absolute' }} ref={'g'}>\r\n          {children}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/7\r\n *\r\n */\r\nimport React, { Fragment } from 'react';\r\nimport Event from '../Base/Event';\r\nimport {\r\n  component_active,\r\n  component_drag,\r\n  component_dragend,\r\n  component_properties_change,\r\n  component_resize_end,\r\n  component_snap_change,\r\n  component_snap_change_end,\r\n  controllers_ready,\r\n  editor_scroll_change,\r\n  guide_ready,\r\n} from '../util/actions';\r\nimport './Snapline.scss';\r\nimport config from '../util/preference';\r\nimport NoZoomTransform from '../Base/NoZoomTransform';\r\nimport { Dom } from '../util/helper';\r\nimport { getGroupId } from '../global/selection';\r\nimport { getScreeTransform } from '../global';\r\n\r\nlet P = config.autoAlign;\r\nexport default class Snapline extends NoZoomTransform {\r\n  constructor() {\r\n    super();\r\n    /**\r\n     * 将页面所有组件转为数组\r\n     * @type {Array<{x:number,y:number,width:number,height:number}>}\r\n     */\r\n    this.arrayItems = [];\r\n    /**\r\n     *\r\n     * 已匹配到的数据\r\n     * @type {Array<{x:number,y:number,width:number,height:number,rotation:number}>}\r\n     */\r\n    this.matched = [];\r\n    /**\r\n     *\r\n     * @type {ViewController}\r\n     */\r\n    this.target = null;\r\n    /**\r\n     *\r\n     * @type {Array<Line>}\r\n     */\r\n    this.guide = null;\r\n    /**\r\n     *\r\n     * @type {Array<ViewProperties>}\r\n     */\r\n    this.controller = null;\r\n    /**\r\n     *\r\n     * @type {Dom}\r\n     */\r\n    this.htline = null;\r\n    /**\r\n     *\r\n     * @type {Dom}\r\n     */\r\n    this.hcline = null;\r\n    /**\r\n     *\r\n     * @type {Dom}\r\n     */\r\n    this.hbline = null;\r\n    /**\r\n     *\r\n     * @type {Dom}\r\n     */\r\n    this.vlline = null;\r\n    /**\r\n     *\r\n     * @type {Dom}\r\n     */\r\n    this.vcline = null;\r\n    /**\r\n     *\r\n     * @type {Dom}\r\n     */\r\n    this.vrline = null;\r\n    Event.listen(guide_ready, this.onGuideReady);\r\n    Event.listen(controllers_ready, this.onControllersReady);\r\n    Event.listen(component_active, this.onComponentActive);\r\n    Event.listen(component_drag, this.onComponentDrag);\r\n    Event.listen(component_dragend, this.onComponentDragEnd);\r\n    Event.listen(component_resize_end, this.onComponentDragEnd);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.htline = Dom.of(this.refs.ht);\r\n    this.hcline = Dom.of(this.refs.hc);\r\n    this.hbline = Dom.of(this.refs.hb);\r\n    this.vlline = Dom.of(this.refs.vl);\r\n    this.vcline = Dom.of(this.refs.vc);\r\n    this.vrline = Dom.of(this.refs.vr);\r\n    this.setLineSize();\r\n  }\r\n\r\n  setLineSize = (scale = 1) => {\r\n    let view = config.viewport;\r\n    Dom.of(this.refs.g1).width(view.width * scale);\r\n    Dom.of(this.refs.g2).height(view.height * scale);\r\n  };\r\n  onControllersReady = (c) => {\r\n    this.controller = c;\r\n  };\r\n  onComponentActive = (t) => {\r\n    this.target = t;\r\n    P = config.autoAlign;\r\n    this.setBoundingRect();\r\n    let arrayItems = [];\r\n\r\n    function treeToArray(items) {\r\n      let targetId = t.properties.id;\r\n      for (let i = 0, j = items.length; i < j; i += 1) {\r\n        let item = items[i];\r\n        //  去掉自己，和自己的子元素\r\n        if (getGroupId()[item.id]) continue;\r\n        if (targetId === item.id) continue;\r\n        if (item.settings.isHide) continue;\r\n        if (item.type === 'block') {\r\n          treeToArray(item.items);\r\n        } else {\r\n          let t = item.view.getOffsetTransform();\r\n          t._originTransform = item.view.getOffsetRect();\r\n          arrayItems.push(t);\r\n        }\r\n      }\r\n    }\r\n\r\n    treeToArray(this.controller.state.items);\r\n    this.arrayItems = arrayItems;\r\n  };\r\n  // Display line\r\n  showHTLine = (t) => {\r\n    this.htline.top(t.y * getScreeTransform().scale).show();\r\n  };\r\n  showHBLine = (t) => {\r\n    this.hbline.top(t.y * getScreeTransform().scale + t.height * getScreeTransform().scale).show();\r\n  };\r\n\r\n  showHCLine(t) {\r\n    this.hcline.top(t.y * getScreeTransform().scale + (t.height * getScreeTransform().scale) / 2).show();\r\n  }\r\n\r\n  showVCLine(t) {\r\n    this.vcline.left(t.x * getScreeTransform().scale + (t.width * getScreeTransform().scale) / 2).show();\r\n  }\r\n\r\n  showVLLine(t) {\r\n    this.vlline.left(t.x * getScreeTransform().scale).show();\r\n  }\r\n\r\n  showVRLine(t) {\r\n    this.vrline.left(t.x * getScreeTransform().scale + t.width * getScreeTransform().scale).show();\r\n  }\r\n\r\n  onComponentDrag = (target, options = {}) => {\r\n    if (options.hideGuides) return;\r\n    if (options.from === 'Snapline') return;\r\n    // Refresh current position\r\n    this.setBoundingRect();\r\n    let t2 = this.target.getOffsetTransform();\r\n    let matched = this.checkComponentDistance(t2);\r\n    let cmatched = this.alignParent();\r\n    // Fix BUG : 2019-02-01 22:00,根据父元素没有匹配到时把其他对齐线隐藏了\r\n    if (cmatched[0] !== void 0) {\r\n      this.showVLLine(t2);\r\n    } else if (!matched[3]) {\r\n      this.vlline.hide();\r\n    }\r\n    if (cmatched[1] !== void 0) {\r\n      this.showVCLine(t2);\r\n    } else if (!matched[4]) {\r\n      this.vcline.hide();\r\n    }\r\n    if (cmatched[2] !== void 0) {\r\n      this.showVRLine(t2);\r\n    } else if (!matched[5]) {\r\n      this.vrline.hide();\r\n    }\r\n    if (cmatched[3] !== void 0) {\r\n      this.showHTLine(t2);\r\n    } else if (!matched[0]) {\r\n      this.htline.hide();\r\n    }\r\n    if (cmatched[4] !== void 0) {\r\n      this.showHCLine(t2);\r\n    } else if (!matched[1]) {\r\n      this.hcline.hide();\r\n    }\r\n    if (cmatched[5] !== void 0) {\r\n      this.showHBLine(t2);\r\n    } else if (!matched[2]) {\r\n      this.hbline.hide();\r\n    }\r\n    for (let i = 0; i < matched.length; i += 1) {\r\n      if (matched[i]) {\r\n        Event.dispatch(component_snap_change, matched[i]._originTransform, i);\r\n      } else {\r\n        Event.dispatch(component_snap_change_end, i);\r\n      }\r\n    }\r\n    this.matched = matched;\r\n    this.cmatched = cmatched;\r\n  };\r\n  /**\r\n   *\r\n   * @return {number} 0=h,1=v\r\n   */\r\n  alignParent = () => {\r\n    let vw = config.viewport.width;\r\n    let vh = config.viewport.height;\r\n    let x = 0;\r\n    let parent = this.target.properties.parent;\r\n    let t = this.target.getCurrentTransform();\r\n    if (parent) {\r\n      vw = parent.transform.width;\r\n      vh = parent.transform.height;\r\n    }\r\n    let matched = [];\r\n    let dx = 0 - t.x,\r\n      dx2 = vw / 2 - (t.x + t.width / 2),\r\n      dx3 = vw - (t.x + t.width);\r\n    if (Math.abs(dx) < P) matched[0] = dx;\r\n    // Left\r\n    else if (Math.abs(dx2) < P) matched[1] = dx2;\r\n    // Center\r\n    else if (Math.abs(dx3) < P) matched[2] = dx3; // Right\r\n    dx = 0 - t.y;\r\n    dx2 = vh / 2 - (t.y + t.height / 2);\r\n    dx3 = vh - (t.y + t.height);\r\n    if (Math.abs(dx) < P) matched[3] = dx;\r\n    // Top\r\n    else if (Math.abs(dx2) < P) matched[4] = dx2;\r\n    //Middle\r\n    else if (Math.abs(dx3) < P) matched[5] = dx3; // Bottom\r\n    return matched;\r\n  };\r\n  /**\r\n   * 返回匹配的 元素\r\n   * @param items {Array<ViewProperties>}\r\n   * @return {Array<ViewProperties>}\r\n   */\r\n  checkComponentDistance = (t2) => {\r\n    let items = this.arrayItems;\r\n    let ht, hc, hb, vl, vc, vr;\r\n    for (let i = 0, j = items.length; i < j; i++) {\r\n      let t1 = items[i];\r\n      if (!ht) ht = this.matchHT(t1, t2);\r\n      if (!hc) hc = this.matchHC(t1, t2);\r\n      if (!hb) hb = this.matchHB(t1, t2);\r\n      if (!vl) vl = this.matchVL(t1, t2);\r\n      if (!vc) vc = this.matchVC(t1, t2);\r\n      if (!vr) vr = this.matchVR(t1, t2);\r\n    }\r\n    return [ht, hc, hb, vl, vc, vr];\r\n  };\r\n  matchVL = (t1, t2) => {\r\n    let dx = t1.x - t2.x,\r\n      dx2 = t1.x + t1.width - t2.x;\r\n    // v left\r\n    if (Math.abs(dx) < P) {\r\n      t1._alignType_v_left = true;\r\n      t1._alignDiff_v_left = dx;\r\n      this.showVLLine(t2);\r\n      return t1;\r\n    } else if (Math.abs(dx2) < P) {\r\n      t1._alignType_v_right_left = true;\r\n      t1._alignDiff_v_right_left = dx2;\r\n      this.showVLLine(t2);\r\n      return t1;\r\n    }\r\n  };\r\n  matchVC = (t1, t2) => {\r\n    let dx = t1.x + t1.width / 2 - (t2.x + t2.width / 2);\r\n    // v center\r\n    if (Math.abs(dx) < P) {\r\n      t1._alignType_v_center = true;\r\n      t1._alignDiff_v_center = dx;\r\n      this.showVCLine(t2);\r\n      return t1;\r\n    }\r\n  };\r\n  matchVR = (t1, t2) => {\r\n    let dx = t1.x + t1.width - (t2.x + t2.width),\r\n      dx2 = t1.x - (t2.x + t2.width);\r\n    // v right\r\n    if (Math.abs(dx) < P) {\r\n      t1._alignType_v_right = true;\r\n      t1._alignDiff_v_right = dx;\r\n      this.showVRLine(t2);\r\n      return t1;\r\n    } else if (Math.abs(dx2) < P) {\r\n      t1._alignType_v_left_right = true;\r\n      t1._alignDiff_v_left_right = dx2;\r\n      this.showVRLine(t2);\r\n      return t1;\r\n    }\r\n  };\r\n  matchHT = (t1, t2) => {\r\n    let ht,\r\n      dx = t1.y - t2.y,\r\n      dx2 = t1.height + t1.y - t2.y;\r\n    //h top\r\n    if (Math.abs(dx) < P) {\r\n      ht = t1;\r\n      ht._alignType_h_top = true;\r\n      ht._alignDiff_h_top = dx;\r\n      this.showHTLine(t2);\r\n    } else if (Math.abs(dx2) < P) {\r\n      ht = t1;\r\n      ht._alignType_h_bottom_top = true;\r\n      ht._alignDiff_h_bottom_top = dx2;\r\n      this.showHTLine(t2);\r\n    }\r\n    return ht;\r\n  };\r\n  matchHC = (t1, t2) => {\r\n    // h center\r\n    let hc,\r\n      dx = t1.y + t1.height / 2 - (t2.y + t2.height / 2);\r\n    if (Math.abs(dx) < P) {\r\n      hc = t1;\r\n      hc._alignType_h_center = true;\r\n      hc._alignDiff_h_center = dx;\r\n      this.showHCLine(t2);\r\n    }\r\n    return hc;\r\n  };\r\n  matchHB = (t1, t2) => {\r\n    var hb,\r\n      dx = t1.y + t1.height - (t2.y + t2.height),\r\n      dx2 = t1.y - (t2.y + t2.height);\r\n    // h bottom\r\n    if (Math.abs(dx) < P) {\r\n      hb = t1;\r\n      hb._alignType_h_bottom = true;\r\n      hb._alignDiff_h_bottom = dx;\r\n      this.showHBLine(t2);\r\n    } else if (Math.abs(dx2) < P) {\r\n      hb = t1;\r\n      hb._alignType_h_top_bottom = true;\r\n      hb._alignDiff_h_top_bottom = dx2;\r\n      this.showHBLine(t2);\r\n    }\r\n    return hb;\r\n  };\r\n  checkGuidesDistance = () => {};\r\n  _getRectWithParent = () => {\r\n    return this.target.properties.parent\r\n      ? this.target.properties.parent.view.getOffsetRect()\r\n      : {\r\n          x: 0,\r\n          y: 0,\r\n          width: config.viewport.width,\r\n          height: config.viewport.height,\r\n        };\r\n  };\r\n  onComponentDragEnd = () => {\r\n    this.htline.hide();\r\n    this.hcline.hide();\r\n    this.hbline.hide();\r\n    this.vlline.hide();\r\n    this.vrline.hide();\r\n    this.vcline.hide();\r\n    let matched = this.matched;\r\n    let cmatched = this.cmatched;\r\n    if (!matched) return;\r\n    if (!cmatched) return;\r\n    let ht = matched[0],\r\n      hc = matched[1],\r\n      hb = matched[2];\r\n    let vl = matched[3],\r\n      vc = matched[4],\r\n      vr = matched[5];\r\n    let t2 = this.target.properties.transform;\r\n    let parent = this.target.properties.parent;\r\n    let pRect = this._getRectWithParent();\r\n    let x, y;\r\n    if (ht) {\r\n      if (ht._alignType_h_top) {\r\n        y = t2.y + ht._alignDiff_h_top;\r\n      } else if (ht._alignType_h_bottom_top) {\r\n        y = t2.y + ht._alignDiff_h_bottom_top;\r\n      }\r\n    }\r\n    if (hc) {\r\n      y = t2.y + hc._alignDiff_h_center;\r\n    }\r\n    if (hb) {\r\n      if (hb._alignType_h_bottom) {\r\n        y = t2.y + hb._alignDiff_h_bottom;\r\n      } else if (hb._alignType_h_top_bottom) {\r\n        y = t2.y + hb._alignDiff_h_top_bottom;\r\n      }\r\n    }\r\n    if (vl) {\r\n      if (vl._alignType_v_left) {\r\n        x = t2.x + vl._alignDiff_v_left;\r\n      } else if (vl._alignType_v_right_left) {\r\n        x = t2.x + vl._alignDiff_v_right_left;\r\n      }\r\n    }\r\n    if (vc) {\r\n      x = t2.x + vc._alignDiff_v_center;\r\n    }\r\n    if (vr) {\r\n      if (vr._alignType_v_right) {\r\n        x = t2.x + vr._alignDiff_v_right;\r\n      } else if (vr._alignType_v_left_right) {\r\n        x = t2.x + vr._alignDiff_v_left_right;\r\n      }\r\n    }\r\n    if (cmatched[0] !== void 0) {\r\n      // left of parent\r\n      x = t2.x + cmatched[0];\r\n    } else if (cmatched[1] !== void 0) {\r\n      x = t2.x + cmatched[1];\r\n    } else if (cmatched[2] !== void 0) {\r\n      x = t2.x + cmatched[2];\r\n    }\r\n    if (cmatched[3] !== void 0) {\r\n      y = t2.y + cmatched[3];\r\n    } else if (cmatched[4] !== void 0) {\r\n      y = t2.y + cmatched[4];\r\n    } else if (cmatched[5] !== void 0) {\r\n      y = t2.y + cmatched[5];\r\n    }\r\n    let transform = Object.assign({}, t2);\r\n    let align = false;\r\n    if (x !== void 0) {\r\n      transform.x = x;\r\n      align = true;\r\n    }\r\n    if (y !== void 0) {\r\n      align = true;\r\n      transform.y = y;\r\n    }\r\n    //if (ht && hb && ht === hb && ht.rotation === transform.rotation) {\r\n    //    transform.height = hb.height\r\n    //}\r\n    //if (vl && vr && vl === vr && vl.rotation === transform.rotation) {\r\n    //    transform.width = vr.width\r\n    //}\r\n    if (align) {\r\n      let values = {};\r\n      if (this.target.properties.isTemporaryGroup) {\r\n        this.target.getItems().forEach((item) => {\r\n          let x = transform.x + item._xPercent * transform.width;\r\n          let y = transform.y + item._yPercent * transform.height;\r\n          let w = item._wPercent * transform.width;\r\n          let h = item._hPercent * transform.height;\r\n          values[item.id] = { x, y, width: w, height: h, rotation: item.transform.rotation };\r\n        });\r\n      } else {\r\n        values = transform;\r\n      }\r\n      Event.dispatch(component_properties_change, {\r\n        target: this.target,\r\n        key: 'transform',\r\n        value: values,\r\n        from: 'Snapline',\r\n      });\r\n    }\r\n    matched.forEach((item) => {\r\n      for (let key in item) {\r\n        if (key.startsWith('_alignType')) {\r\n          item[key] = null;\r\n        }\r\n      }\r\n    });\r\n    this.matched = [];\r\n    this.cmatched = [];\r\n    Event.dispatch(component_snap_change_end);\r\n  };\r\n  onGuideReady = (guide) => {\r\n    this.guide = guide;\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(controllers_ready, this.onControllersReady);\r\n    Event.destroy(guide_ready, this.onGuideReady);\r\n    Event.destroy(component_active, this.onComponentActive);\r\n    Event.destroy(component_drag, this.onComponentDrag);\r\n    Event.destroy(component_dragend, this.onComponentDragEnd);\r\n    Event.destroy(editor_scroll_change, this.handleScale);\r\n    Event.destroy(component_resize_end, this.onComponentDragEnd);\r\n  }\r\n\r\n  /**\r\n   * @override\r\n   */\r\n  setScale(scale) {\r\n    super.setScale(scale);\r\n    this.setLineSize(scale);\r\n  }\r\n\r\n  /**\r\n   * @override\r\n   */\r\n  applyToDom = () => {};\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <div ref={'g1'} id={'snapline-wrapper-h'}>\r\n          <div className={'snapline snapline-h'} ref={'ht'}></div>\r\n          {/*中心线*/}\r\n          <div className={'snapline snapline-h'} ref={'hc'}></div>\r\n          <div className={'snapline snapline-h'} ref={'hb'}></div>\r\n        </div>\r\n        <div ref={'g2'} className={'snapline-wrapper-v'}>\r\n          <div className={'snapline snapline-v'} ref={'vl'}></div>\r\n          {/*中心线*/}\r\n          <div className={'snapline snapline-v'} ref={'vc'}></div>\r\n          {/**/}\r\n          <div className={'snapline snapline-v'} ref={'vr'}></div>\r\n        </div>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/7\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport Draggable from '../Draggable';\r\nimport './Guides.scss';\r\nimport { getScreenOffset, getScreeTransform } from '../global';\r\nimport Event from '../Base/Event';\r\nimport {\r\n  editor_guides_change,\r\n  editor_scroll_change,\r\n  guide_delete,\r\n  guide_delete_all,\r\n  guide_delete_h,\r\n  guide_delete_v,\r\n  guide_display,\r\n  guide_hide,\r\n  guide_move,\r\n  guide_move_end,\r\n  guide_ready,\r\n  outline_page_select_end,\r\n  preferences_configchange,\r\n  viewport_ready,\r\n  window_size_change,\r\n} from '../util/actions';\r\nimport config from '../util/preference';\r\nimport { Dom } from '../util/helper';\r\nimport { getPageData } from '../util/page';\r\nimport { getCurrentPage } from '../global/instance';\r\n\r\nexport default class Guides extends React.Component {\r\n  componentDidMount() {\r\n    this.lines = [];\r\n    this.line = null; //  当前新新生成的\r\n    /**\r\n     * 向前呼出菜单的Line 索引\r\n     * @type {number}\r\n     */\r\n    this.context_index = -1;\r\n    this.isH = this.props.type == 'h';\r\n    this._axis = this.isH ? 'y' : 'x';\r\n    /**\r\n     *\r\n     * @type {Rect}\r\n     */\r\n    this.viewportRect = null;\r\n    /**\r\n     *\r\n     * @type {HTMLElement}\r\n     */\r\n    this.viewport = null;\r\n\r\n    // 获取编辑器宽度\r\n    this._getViewPortRect = () => {};\r\n    const id = `editor-ruler-${this.props.type}`;\r\n    const dom = document.querySelector(`#${id}`);\r\n\r\n    Event.listen(editor_scroll_change, this.handleScrollChange);\r\n    Event.listen(viewport_ready, this.onViewportReady);\r\n    Event.listen(guide_delete, this.onDeleteLine);\r\n    Event.listen(guide_delete_v, this.onClearLineV);\r\n    Event.listen(guide_delete_h, this.onClearLineH);\r\n    Event.listen(guide_delete_all, this.onClearLine);\r\n    Event.listen(window_size_change, this.handleWindowSizeChange);\r\n    Event.listen(guide_hide, this.handleLineHide);\r\n    Event.listen(guide_display, this.handleLineDisplay);\r\n    Event.listen(preferences_configchange, this.setDefaultForBounds);\r\n    Event.listen(outline_page_select_end, this.handlePageSelect);\r\n\r\n    new Draggable(dom, {\r\n      onDragStart: this.handleDragStart,\r\n      onDragMove: this.handleDragMove,\r\n      onDragEnd: this.handleDragEnd,\r\n    });\r\n\r\n    new Draggable(this.refs.g, {\r\n      onDragStart: this.handleLineDragStart,\r\n      onDragMove: this.handleLineDragMove,\r\n      onDragEnd: this.handleLineDragEnd,\r\n    });\r\n    this.setDefaultForBounds();\r\n\r\n    setTimeout(() => {\r\n      Event.dispatch(guide_ready, this);\r\n    });\r\n  }\r\n\r\n  handlePageSelect = ({ data }) => {\r\n    if (!this.viewportRect) return;\r\n    this.clearLine();\r\n    this.batchCreateLine(data.guides[this._axis], this._axis);\r\n  };\r\n\r\n  handleLineDisplay = () => {\r\n    Dom.of(this.refs.g).show();\r\n  };\r\n\r\n  handleLineHide = () => {\r\n    Dom.of(this.refs.g).hide();\r\n  };\r\n\r\n  handleWindowSizeChange = () => {\r\n    this.viewportRect = this._getViewPortRect();\r\n    this.updateLineLength();\r\n  };\r\n\r\n  onDeleteLine = (target) => {\r\n    if (this !== target) return;\r\n    this.destroyLineWithIndex(target.context_index);\r\n    this.emitGuidesChange();\r\n  };\r\n\r\n  onClearLine = (target) => {\r\n    this.clearLine();\r\n    this.emitGuidesChange();\r\n  };\r\n\r\n  onClearLineV = (target) => {\r\n    if (!this.isH) this.clearLine();\r\n    this.emitGuidesChange();\r\n  };\r\n\r\n  onClearLineH = (target) => {\r\n    if (this.isH) this.clearLine();\r\n\r\n    this.emitGuidesChange();\r\n  };\r\n\r\n  updateLineLength = () => {\r\n    this.lines.forEach((line) => {\r\n      line.setLength(this.viewportRect[this.isH ? 'width' : 'height']);\r\n    });\r\n  };\r\n\r\n  setDefaultForBounds = () => {\r\n    config.guides.x[0] = 1;\r\n    config.guides.x[config.viewport.width / 2] = 1;\r\n    config.guides.x[config.viewport.width] = 1;\r\n    config.guides.y[0] = 1;\r\n    config.guides.y[config.viewport.height / 2] = 1;\r\n    config.guides.y[config.viewport.height] = 1;\r\n  };\r\n\r\n  onViewportReady = (target) => {\r\n    this.viewportRect = target.getRect();\r\n    this._getViewPortRect = target.getRect;\r\n    this.viewport = target.refs.container;\r\n  };\r\n\r\n  handleScrollChange = ({ x, y, isScale, scale }) => {\r\n    let offset = getScreenOffset();\r\n    let x1 = (x - config.originCoords.x - offset.viewport.x) * scale;\r\n    let y1 = (y - config.originCoords.y - offset.viewport.y) * scale;\r\n    this.refs.g.style.transform = this.isH ? `translateX(${x1}px)` : `translateY(${y1}px)`;\r\n\r\n    if (isScale) {\r\n      let axis = this.isH ? 'y' : 'x';\r\n      config.guides[axis] = {};\r\n      this.setDefaultForBounds();\r\n      this.lines.forEach((item) => {\r\n        item.setScale(scale);\r\n        config.guides[axis][Math.round(item[axis] / scale)] = 1;\r\n      });\r\n    }\r\n  };\r\n\r\n  //  重置line上的索引\r\n  refreshLineIndex = () => {\r\n    this.lines.forEach((line, index) => line.setIndex(index));\r\n  };\r\n\r\n  /**\r\n   * 临时挂到外面容器\r\n   */\r\n  appendLine = () => {\r\n    let line = new Line(this.props.type);\r\n    this.lines.push(line);\r\n    this.viewport.appendChild(line.dom);\r\n    this.line = line;\r\n  };\r\n\r\n  batchCreateLine = (lines, type) => {\r\n    config.guides[this.isH ? 'y' : 'x'] = {};\r\n    this.setDefaultForBounds();\r\n    lines.forEach((item, index) => {\r\n      let line = new Line(this.props.type);\r\n      //  设置相对于编辑区域的位置\r\n      let { x, y, scale } = getScreeTransform();\r\n      let { viewport } = getScreenOffset();\r\n      if (type == 'y') {\r\n        y = item;\r\n        //  真实位置记录\r\n        config.guides.y[Math.round(y / scale)] = 1; // set line to pint\r\n      } else {\r\n        x = item;\r\n        config.guides.x[Math.round(x / scale)] = 1;\r\n      }\r\n\r\n      line.setPosition(x, y);\r\n      line.setIndex(index);\r\n      line.setLength(this.viewportRect[this.isH ? 'width' : 'height']);\r\n      this.refs.v.appendChild(line.dom);\r\n      this.lines.push(line);\r\n    });\r\n  };\r\n\r\n  /**\r\n   * 坐标从固定切换到相对于编辑器\r\n   */\r\n  appendToViewport = () => {\r\n    this.refs.v.appendChild(this.line.dom);\r\n    //  设置相对于编辑区域的位置\r\n    let { x, y, scale } = getScreeTransform();\r\n    let { viewport } = getScreenOffset();\r\n    if (this.isH) {\r\n      y = (y - config.originCoords.y) * scale + this.line.y - viewport.y * scale;\r\n      //  真实位置记录\r\n      config.guides.y[Math.round(y / scale)] = 1; // set line to pint\r\n    } else {\r\n      x = (x - config.originCoords.x) * scale + this.line.x - viewport.x * scale;\r\n      config.guides.x[Math.round(x / scale)] = 1;\r\n    }\r\n\r\n    this.line.setPosition(x, y);\r\n    this.line.setIndex(this.lines.length - 1);\r\n    this.emitGuidesChange();\r\n  };\r\n\r\n  emitGuidesChange = () => {\r\n    Event.dispatch(editor_guides_change, {\r\n      key: this._axis,\r\n      value: this.lines.map((item) => Math.round(item[this._axis])),\r\n    });\r\n  };\r\n\r\n  clearLine = () => {\r\n    this.lines.forEach((item) => item.destroy());\r\n    this.lines = [];\r\n  };\r\n\r\n  destroyLine = () => {\r\n    let line = this.lines.pop();\r\n    line.destroy();\r\n  };\r\n\r\n  destroyLineWithIndex = (index) => {\r\n    let line = this.lines[index];\r\n    line.destroy();\r\n\r\n    this.lines.splice(index, 1);\r\n    this.refreshLineIndex();\r\n  };\r\n\r\n  handleLineDragStart = (_, e) => {\r\n    let index = e.target.dataset.index;\r\n    this.line = this.lines[index];\r\n  };\r\n\r\n  handleLineDragMove = ({ realDeltaX, realDeltaY, mouseX, mouseY }) => {\r\n    this.setLinePosition(realDeltaX, realDeltaY);\r\n    let scale = getScreeTransform().scale;\r\n    let axis = this.isH ? 'y' : 'x';\r\n    config.guides[axis] = {};\r\n    this.setDefaultForBounds();\r\n    this.lines.forEach((item) => {\r\n      config.guides[axis][Math.round(item[axis] / scale)] = 1;\r\n    });\r\n\r\n    let coords = { pageX: mouseX, pageY: mouseY };\r\n    coords.isH = this.line.isH;\r\n    Event.dispatch(guide_move, coords);\r\n  };\r\n\r\n  handleLineDragEnd = () => {\r\n    Event.dispatch(guide_move_end);\r\n    this.emitGuidesChange();\r\n  };\r\n\r\n  handleDragStart = ({ pointX, pointY }) => {\r\n    this.appendLine();\r\n\r\n    let { x, y } = this.line;\r\n    if (this.isH) {\r\n      y = pointY - 20;\r\n    } else {\r\n      x = pointX - 20;\r\n    }\r\n    this.line.setPosition(x, y);\r\n    this.line.setLength(this.viewportRect[this.isH ? 'width' : 'height']);\r\n  };\r\n\r\n  setLinePosition = (deltaX, deltaY) => {\r\n    let { x, y } = this.line;\r\n    if (this.isH) {\r\n      y += deltaY;\r\n    } else {\r\n      x += deltaX;\r\n    }\r\n    this.line.setPosition(x, y);\r\n  };\r\n\r\n  handleDragMove = ({ realDeltaX, realDeltaY, mouseX, mouseY }) => {\r\n    this.setLinePosition(realDeltaX, realDeltaY);\r\n    let coords = { pageX: mouseX, pageY: mouseY };\r\n    coords.isH = this.isH;\r\n    Event.dispatch(guide_move, coords);\r\n  };\r\n\r\n  handleDragEnd = () => {\r\n    let start = this.isH ? this.line.y : this.line.x;\r\n    if (start <= 0) {\r\n      this.line.destroy();\r\n      this.lines.pop();\r\n    } else {\r\n      this.appendToViewport();\r\n    }\r\n    Event.dispatch(guide_move_end);\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(window_size_change, this.handleWindowSizeChange);\r\n    Event.destroy(editor_scroll_change, this.handleScrollChange);\r\n    Event.destroy(viewport_ready, this.onViewportReady);\r\n    Event.destroy(guide_delete, this.onDeleteLine);\r\n    Event.destroy(guide_delete_v, this.onClearLineV);\r\n    Event.destroy(guide_delete_h, this.onClearLineH);\r\n    Event.destroy(guide_delete_all, this.onClearLine);\r\n    Event.destroy(guide_hide, this.handleLineHide);\r\n    Event.destroy(guide_display, this.handleLineDisplay);\r\n    Event.destroy(preferences_configchange, this.setDefaultForBounds);\r\n    Event.destroy(outline_page_select_end, this.handlePageSelect);\r\n  }\r\n\r\n  getContextMenu() {\r\n    return [\r\n      {\r\n        name: '删除',\r\n        action: guide_delete,\r\n      },\r\n      {\r\n        name: '清空垂直',\r\n        action: guide_delete_v,\r\n      },\r\n      {\r\n        name: '清空水平',\r\n        action: guide_delete_h,\r\n      },\r\n      {\r\n        name: '清空所有',\r\n        action: guide_delete_all,\r\n      },\r\n    ];\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={{ position: 'absolute', left: 0, top: 0, height: 0, width: 0 }} ref={'g'} id={`guides-${this.props.type}`}>\r\n        <div ref={'v'}></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass Line {\r\n  constructor(type) {\r\n    this.x = 0;\r\n    this.y = 0;\r\n    this._x = 0;\r\n    this._y = 0;\r\n    this.isH = type == 'h';\r\n    let dom = document.createElement('div');\r\n    let inner = document.createElement('div');\r\n    dom.style.position = 'absolute';\r\n    dom.className = 'line line-' + type;\r\n    dom.dataset.uid = 'line' + type + Date.now();\r\n    inner.className = 'line_inner';\r\n    dom.appendChild(inner);\r\n    this.dom = dom;\r\n    this.inner = inner;\r\n  }\r\n\r\n  /**\r\n   * 编辑区域大小变化后需要重新设置line的长度\r\n   * @param len\r\n   */\r\n  setLength(len) {\r\n    if (this.isH) {\r\n      this.dom.style.width = len + 'px';\r\n    } else {\r\n      this.dom.style.height = len + 'px';\r\n    }\r\n  }\r\n\r\n  setScale(scale) {\r\n    if (this.isH) {\r\n      this.y = Math.round(this._y * scale);\r\n    } else {\r\n      this.x = Math.round(this._x * scale);\r\n    }\r\n\r\n    this._apply();\r\n  }\r\n\r\n  destroy = () => {\r\n    this.dom.parentNode.removeChild(this.dom);\r\n    this.dom = null;\r\n    this.inner = null;\r\n    this.x = null;\r\n    this.y = null;\r\n  };\r\n\r\n  setPosition = (x, y) => {\r\n    this.x = x;\r\n    this.y = y;\r\n    this._x = x / getScreeTransform().scale;\r\n    this._y = y / getScreeTransform().scale;\r\n    this._apply();\r\n  };\r\n\r\n  _apply = () => {\r\n    if (this.isH) {\r\n      this.dom.style.top = this.y + 'px';\r\n    } else {\r\n      this.dom.style.left = this.x + 'px';\r\n    }\r\n  };\r\n\r\n  setIndex = (index) => {\r\n    this.dom.setAttribute('data-index', index);\r\n    this.inner.setAttribute('data-index', index);\r\n  };\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/6\r\n *\r\n */\r\n\r\nimport React, { Fragment } from 'react';\r\nimport Event from '../Base/Event';\r\nimport { component_active, component_drag, component_dragend, component_enter, component_inactive, component_leave, editor_scroll_change } from '../util/actions';\r\nimport './HighlightComponentOnComponentEneter.scss';\r\nimport NoZoomTransform from '../Base/NoZoomTransform';\r\nimport { Dom } from '../util/helper';\r\n\r\nexport default class HighlightComponentOnComponentEneter extends NoZoomTransform {\r\n  componentWillMount() {\r\n    this.dragging = false;\r\n    this.target = null;\r\n    this.activeTarget = null;\r\n\r\n    Event.listen(component_enter, this._handleEnter);\r\n    Event.listen(component_leave, this._handleLeave);\r\n    Event.listen(component_active, this._handleDrag);\r\n    Event.listen(component_inactive, this._handleInactive);\r\n    Event.listen(component_drag, this._handleDrag);\r\n    Event.listen(component_dragend, this._handleEnd);\r\n  }\r\n\r\n  _handleDrag = (target, options = {}) => {\r\n    this.activeTarget = target;\r\n    if (options.from == 'OutlineCoverage') return;\r\n    this.dragging = true;\r\n    this._show(false);\r\n  };\r\n\r\n  _handleInactive = () => {\r\n    this.activeTarget = null;\r\n    this.dragging = false;\r\n    this._show(false);\r\n  };\r\n\r\n  _handleEnd = () => {\r\n    this.dragging = false;\r\n  };\r\n\r\n  _show = (v) => {\r\n    this.g.style.display = v ? 'block' : 'none';\r\n  };\r\n\r\n  _handleEnter = (target) => {\r\n    this.target = target;\r\n    if (this.dragging || this.activeTarget == target || !target.properties.settings.hover) return this._show(false);\r\n\r\n    this.setBoundingRect();\r\n    this._show(true);\r\n  };\r\n\r\n  _handleLeave = () => {\r\n    this._show(false);\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(component_enter, this._handleEnter);\r\n    Event.destroy(component_leave, this._handleLeave);\r\n    Event.destroy(component_drag, this._handleDrag);\r\n    Event.destroy(component_dragend, this._handleEnd);\r\n    Event.destroy(component_active, this._handleDrag);\r\n    Event.destroy(component_inactive, this._handleInactive);\r\n    Event.destroy(editor_scroll_change, super.handleScale);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.g = this.refs.container;\r\n  }\r\n\r\n  applyToDom() {\r\n    let { x, y, width, height, rotation } = this;\r\n    const { t, r, b, l, container } = this.refs;\r\n    Dom.of(t)\r\n      .left(x)\r\n      .top(y)\r\n      .width(width);\r\n    Dom.of(l)\r\n      .left(x)\r\n      .top(y)\r\n      .height(height);\r\n    Dom.of(r)\r\n      .left(x + width)\r\n      .top(y)\r\n      .height(height + 1);\r\n    Dom.of(b)\r\n      .left(x)\r\n      .width(width)\r\n      .top(y + height);\r\n    container.style.transform = `rotate(${rotation}deg)`;\r\n    container.style.transformOrigin = `${x + width / 2}px ${y + height / 2}px`;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <div ref={'container'}>\r\n          <div ref={'t'} className={'highlight-border highlight-top'}></div>\r\n          <div ref={'r'} className={'highlight-border highlight-right'}></div>\r\n          <div ref={'l'} className={'highlight-border highlight-left'}></div>\r\n          <div ref={'b'} className={'highlight-border highlight-bottom'}></div>\r\n        </div>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/2/15\r\n *\r\n */\r\n\r\nimport React, { Fragment } from 'react';\r\nimport Event from '../Base/Event';\r\nimport { component_snap_change, component_snap_change_end } from '../util/actions';\r\nimport { Dom } from '../util/helper';\r\nimport { getScreeTransform } from '../global';\r\nimport './HighlightComponentOnAligned.scss';\r\n\r\nconst types = ['vl', 'vc', 'vr', 'ht', 'hc', 'hb'];\r\nexport default class HighlightComponentOnAligned extends React.Component {\r\n  /**\r\n   *\r\n   * @type {Dom}\r\n   */\r\n  g = null;\r\n\r\n  componentWillMount() {\r\n    Event.listen(component_snap_change, this.handleSnapChange);\r\n    Event.listen(component_snap_change_end, this.handleSnapEnd);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.ht = Dom.of(this.refs.ht);\r\n    this.hc = Dom.of(this.refs.hc);\r\n    this.hb = Dom.of(this.refs.hb);\r\n    this.vl = Dom.of(this.refs.vl);\r\n    this.vc = Dom.of(this.refs.vc);\r\n    this.vr = Dom.of(this.refs.vr);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(component_snap_change, this.handleSnapChange);\r\n    Event.destroy(component_snap_change_end, this.handleSnapEnd);\r\n  }\r\n\r\n  handleSnapChange = ({ x, y, width, height, rotation }, index) => {\r\n    let scale = getScreeTransform().scale;\r\n    this[types[index]].css('transform', `rotate(${rotation}deg)`);\r\n    this[types[index]]\r\n      .show()\r\n      .left(scale * x)\r\n      .top(scale * y)\r\n      .width(scale * width)\r\n      .height(scale * height);\r\n  };\r\n\r\n  handleSnapEnd = (index) => {\r\n    if (index === void 0) {\r\n      types.forEach((item) => {\r\n        this[item].hide();\r\n      });\r\n    } else {\r\n      this[types[index]].hide();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <div className={'aligned-rect'} ref={'ht'}></div>\r\n        <div className={'aligned-rect'} ref={'hc'}></div>\r\n        <div className={'aligned-rect'} ref={'hb'}></div>\r\n        <div className={'aligned-rect'} ref={'vl'}></div>\r\n        <div className={'aligned-rect'} ref={'vc'}></div>\r\n        <div className={'aligned-rect'} ref={'vr'}></div>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/3/9\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport NoZoomTransform from '../Base/NoZoomTransform';\r\nimport Event from '../Base/Event';\r\nimport { component_drag, component_dragend, component_inactive, component_resize_end, editor_scroll_change } from '../util/actions';\r\nimport { getFirstResponder, getTemporaryGroup } from '../global/instance';\r\nimport { getGroupId } from '../global/selection';\r\nimport { Dom } from '../util/helper';\r\n\r\nexport default class HighlightOnChildDraging extends NoZoomTransform {\r\n  componentDidMount() {\r\n    this.dom = Dom.of(this.refs.container);\r\n    this._transform = {};\r\n    this.target = {\r\n      getOffsetRect: () => {\r\n        return this._transform;\r\n      },\r\n    };\r\n    Event.listen(component_drag, this.handleDrag);\r\n    Event.listen(component_inactive, this.handleInactive);\r\n    Event.listen(component_dragend, this.handleInactive);\r\n    Event.listen(component_resize_end, this.handleInactive);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(component_drag, this.handleDrag);\r\n    Event.destroy(editor_scroll_change, this.handleScale);\r\n    Event.destroy(component_inactive, this.handleInactive);\r\n    Event.destroy(component_dragend, this.handleInactive);\r\n    Event.destroy(component_resize_end, this.handleInactive);\r\n  }\r\n\r\n  handleInactive = () => {\r\n    this.dom.hide();\r\n  };\r\n\r\n  handleDrag = () => {\r\n    let view = getFirstResponder();\r\n    if (!view._parent) return this.dom.hide();\r\n    this.dom.show();\r\n    this._transform = view._parent.updateSelfTransform();\r\n    this.setBoundingRect();\r\n  };\r\n\r\n  render() {\r\n    return <div style={{ display: 'none' }} className={'highlight-group-dragging'} ref={'container'}></div>;\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/2/22\r\n *\r\n */\r\nimport React from 'react';\r\nimport Event from '../Base/Event';\r\nimport { component_drag, component_dragend, component_resize_end } from '../util/actions';\r\nimport { Dom, getClientBoundingRect } from '../util/helper';\r\nimport NoZoomTransform from '../Base/NoZoomTransform';\r\nimport './position-info.scss';\r\nimport { getPoints } from '../util/Matrix';\r\n\r\nexport default class PositionInfo extends NoZoomTransform {\r\n  componentWillMount() {\r\n    Event.listen(component_drag, this.handleDrag);\r\n    Event.listen(component_dragend, this.handleDragEnd);\r\n    Event.listen(component_resize_end, this.handleDragEnd);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.dom = Dom.of(this.refs.g);\r\n  }\r\n\r\n  handleDragEnd = () => {\r\n    this.dom.hide();\r\n  };\r\n  handleDrag = (target, options = {}) => {\r\n    this.target = target;\r\n    this.options = options;\r\n    this.setBoundingRect();\r\n  };\r\n  applyToDom() {\r\n    this.dom.show();\r\n    let { x, y, width, height, rotation } = this;\r\n    let options = this.options;\r\n    if (options.from === 'Draggable') {\r\n      this.dom.text(`x=${x} , y=${y}`);\r\n    } else if (options.from === 'Rotatable') {\r\n      this.dom.text(`${rotation}°`);\r\n    } else if (options.from === 'Resizable') {\r\n      this.dom.text(`w=${width} , h=${height}`);\r\n    }\r\n    const points = getPoints(this);\r\n\r\n    this.dom.left(points[1].x + 10).top(points[1].y - 30);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(component_drag, this.handleDrag);\r\n    Event.destroy(component_dragend, this.handleDragEnd);\r\n    Event.destroy(component_resize_end, this.handleDragEnd);\r\n  }\r\n\r\n  render() {\r\n    return <div className='component-position-info' ref={'g'}></div>;\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/7\r\n *\r\n */\r\nimport React from 'react';\r\nimport ViewResizable from '../lib/Widget/ViewResizable';\r\nimport Stage from './Stage';\r\nimport Snapline from '../lib/Widget/Snapline';\r\nimport Guides from '../lib/Widget/Guides';\r\nimport HighlightComponentOnComponentEneter from '../lib/Widget/HighlightComponentOnComponentEneter';\r\nimport HighlightComponentOnAligned from '../lib/Widget/HighlightComponentOnAligned';\r\nimport HighlightOnChildDraging from '../lib/Widget/HighlightOnChildDraging';\r\nimport PositionInfo from '../lib/Widget/PositionInfo';\r\nexport default class NoZoomAreaHighIndex extends React.Component {\r\n  render() {\r\n    return (\r\n      <Stage>\r\n        <ViewResizable />\r\n        {/* Snapline */}\r\n        <Snapline />\r\n\r\n        <Guides type={'v'} />\r\n\r\n        <Guides type={'h'} />\r\n\r\n        {/*Enter*/}\r\n        <HighlightComponentOnComponentEneter />\r\n        {/*Align*/}\r\n        <HighlightComponentOnAligned />\r\n\r\n        <HighlightOnChildDraging />\r\n\r\n        <PositionInfo />\r\n      </Stage>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/11/30\r\n *\r\n */\r\n\r\nimport React, { Fragment } from 'react';\r\nimport Event from '../Base/Event';\r\nimport { canvas_dragend, component_active, component_inactive, context_shiftkey_press } from '../util/actions';\r\nimport KeyboradHandler from '../service/KeyboradHandler';\r\nimport { isMac } from '../util/platform';\r\nimport { setShiftKeyPressed } from '../global/instance';\r\n\r\nexport default class ReactEvents extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.current = null;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(component_active, this.handleActive);\r\n    Event.destroy(component_inactive, this.handleInactive);\r\n    document.removeEventListener('keydown', this.handleKeyDown, false);\r\n    document.removeEventListener('keyup', this.handleKeyUp);\r\n  }\r\n\r\n  componentWillMount() {\r\n    Event.listen(component_active, this.handleActive);\r\n    Event.listen(component_inactive, this.handleInactive);\r\n    document.addEventListener('keydown', this.handleKeyDown, false);\r\n    document.addEventListener('keyup', this.handleKeyUp);\r\n  }\r\n\r\n  handleKeyUp = (e) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    if (e.keyCode === 16) {\r\n      setShiftKeyPressed(false);\r\n      Event.dispatch(context_shiftkey_press, false);\r\n    }\r\n    if (e.keyCode === 32) {\r\n      Event.dispatch(canvas_dragend);\r\n    }\r\n  };\r\n\r\n  handleKeyDown = (e) => {\r\n    if (e.target.dataset.event === 'ignore' && !e.target.readOnly) return;\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    let ctrlKey = e.ctrlKey || e.metaKey;\r\n    new KeyboradHandler(e.shiftKey, e.altKey, ctrlKey, e.keyCode);\r\n    if (e.shiftKey) {\r\n      setShiftKeyPressed(true);\r\n      Event.dispatch(context_shiftkey_press, true);\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  dispatchTransformChangeWithArrowKey = (key) => {\r\n    if (!this.current || !this.current.properties) return;\r\n  };\r\n\r\n  handleActive = (target) => {\r\n    this.current = target;\r\n  };\r\n\r\n  handleInactive = () => {\r\n    this.current = null;\r\n  };\r\n\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\n\r\nconst getCombomKenNumber = (number) => {\r\n  return 1 << number;\r\n};\r\nconst CombomKeyNumber = {\r\n  1: 'shift',\r\n  2: 'alt',\r\n  4: () => {\r\n    return isMac() ? 'meta' : 'control';\r\n  },\r\n};\r\n","/**\r\n *  created by yaojun on 2018/12/15\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport Event from '../Base/Event';\r\nimport { colorpicker_active } from '../util/actions';\r\nimport PropTypes from 'prop-types';\r\nimport './ColorInput.scss';\r\n\r\nexport default class ColorInput extends React.Component {\r\n  constructor() {\r\n    super();\r\n    /**\r\n     * @readonly\r\n     * @type {string}\r\n     */\r\n    this.value = '';\r\n    this.mouseX = 0;\r\n    this.mouseY = 0;\r\n  }\r\n\r\n  static propTypes = {\r\n    width: PropTypes.number,\r\n    height: PropTypes.number,\r\n    onChange: PropTypes.func,\r\n    defaultValue: PropTypes.string,\r\n    onPreview: PropTypes.func,\r\n  };\r\n\r\n  static defaultProps = {\r\n    width: 28,\r\n    height: 28,\r\n    onChange: () => {},\r\n    onPreview: () => {},\r\n    defaultValue: 'rgba(255,255,255,1)',\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.setValue(this.props.defaultValue);\r\n  }\r\n\r\n  setValue(value) {\r\n    this.value = value;\r\n    this.refs.g.style.background = value;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param value\r\n   * @param {boolean} isPreview 是否是预览模式\r\n   */\r\n  notifyChange(value, isPreview) {\r\n    this.setValue(value);\r\n    if (isPreview) {\r\n      this.props.onPreview(value);\r\n    } else {\r\n      this.props.onChange(value);\r\n    }\r\n  }\r\n\r\n  getValue() {\r\n    return this.value;\r\n  }\r\n\r\n  onClick = (e) => {\r\n    e.stopPropagation();\r\n    this.mouseX = e.clientX;\r\n    this.mouseY = e.clientY;\r\n    Event.dispatch(colorpicker_active, this);\r\n  };\r\n\r\n  render() {\r\n    const { width, height } = this.props;\r\n    return (\r\n      <span className={'aj-color-input'} style={{ width, display: 'inline-block' }} onClick={this.onClick}>\r\n        <span className={'aj-color-input-bg'}></span>\r\n        <span ref={'g'}></span>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/9\r\n *\r\n */\r\nimport React from 'react';\r\nimport NoZoomTransform from '../Base/NoZoomTransform';\r\nimport config from '../util/preference';\r\nimport Event from '../Base/Event';\r\nimport { context_page_update, outline_page_select, preferences_configchange } from '../util/actions';\r\nimport './ViewportBackground.scss';\r\nimport Draggable from '../Draggable';\r\nimport Icon from '../Icon';\r\nimport ColorInput from '../ui/ColorInput';\r\nimport { getCurrentPage } from '../global/instance';\r\nimport { getPageData } from '../util/page';\r\n\r\n/**\r\n * @class ViewportBackground\r\n * @memberOf React.Component\r\n */\r\nexport default class ViewportBackground extends NoZoomTransform {\r\n  state = {\r\n    height: 0,\r\n    width: 0,\r\n  };\r\n\r\n  componentDidMount() {\r\n    Event.listen(preferences_configchange, this.refreshTarget);\r\n    Event.listen(outline_page_select, this.handlePageSelect);\r\n    let height = 0;\r\n    new Draggable(this.refs.resize, {\r\n      onDragStart: () => {\r\n        height = config.viewport.height;\r\n      },\r\n      onDragMove: ({ deltaY }) => {\r\n        height += deltaY;\r\n        config.viewport.height = height;\r\n        this.refs.size.innerText = `${config.viewport.width} x ${Math.round(height)}`;\r\n        this.refreshTarget(config);\r\n        console.log(height);\r\n      },\r\n      onDragEnd: () => {\r\n        Event.dispatch(preferences_configchange, config);\r\n        Event.dispatch(context_page_update, {\r\n          id: getCurrentPage(),\r\n          key: 'height',\r\n          value: config.viewport.height,\r\n        });\r\n      },\r\n    });\r\n    this.refreshTarget(config);\r\n  }\r\n\r\n  refreshTarget = (config) => {\r\n    const { viewport, grid } = config;\r\n    this.target = {\r\n      getOffsetRect() {\r\n        return {\r\n          x: 0,\r\n          y: 0,\r\n          width: config.viewport.width,\r\n          height: viewport.height,\r\n          rotation: 0,\r\n        };\r\n      },\r\n    };\r\n    this.setBoundingRect();\r\n    this.setState({ width: config.viewport.width, height: config.viewport.height });\r\n    this.refs.grid.style.display = grid ? 'block' : 'none';\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(preferences_configchange, this.refreshTarget);\r\n    Event.destroy(outline_page_select, this.handlePageSelect);\r\n  }\r\n\r\n  handlePreview = (color) => {\r\n    this.refs.container.style.background = color;\r\n  };\r\n  handlePageSelect = (id) => {\r\n    let page = getPageData().find((item) => item.id == id);\r\n    this.refs.colorBg.setValue(page.bg);\r\n    config.viewport.height = page.height;\r\n    this.handlePreview(page.bg);\r\n    this.refreshTarget(config);\r\n    this.setState({\r\n      width: config.viewport.width,\r\n      height: page.height,\r\n    });\r\n  };\r\n  handleChange = (color) => {\r\n    Event.dispatch(context_page_update, {\r\n      id: getCurrentPage(),\r\n      key: 'bg',\r\n      value: color,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className={'viewport-background'} ref={'container'}>\r\n        <div ref={'resize'} className={'resize'}>\r\n          <ColorInput ref={'colorBg'} onPreview={this.handlePreview} onChange={this.handleChange} defaultValue={'rgba(0,0,0,0)'} />\r\n          <Icon type={'shuipingheix'} />\r\n          <span ref={'size'} className={'viewport-bg_size'}>\r\n            {this.state.width} x {this.state.height}\r\n          </span>\r\n        </div>\r\n        <svg ref={'grid'} width='100%' height='100%' xmlns='http://www.w3.org/2000/svg'>\r\n          <defs>\r\n            <pattern id='gridSmall' width='10' height='10' patternUnits='userSpaceOnUse'>\r\n              <path d='M 10 0 L 0 0 0 10' fill='none' stroke='rgba(207, 207, 207, 0.2)' strokeWidth={1}></path>\r\n            </pattern>\r\n            <pattern id='grid' width='100' height='100' patternUnits='userSpaceOnUse'>\r\n              <rect width='100' height='100' fill='url(#gridSmall)'></rect>\r\n              <path d='M 100 0 L 0 0 0 100' fill='none' stroke='rgba(186, 186, 186, 0.1)' strokeWidth={1}></path>\r\n            </pattern>\r\n          </defs>\r\n          <rect width='100%' height='100%' fill='url(#grid)'></rect>\r\n        </svg>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/8\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport ReactEvents from '../lib/Widget/Events';\r\nimport ViewportBackground from '../lib/Widget/ViewportBackground';\r\nimport Stage from './Stage';\r\n\r\nexport default class NoZoomAreaLowIndex extends React.Component {\r\n  render() {\r\n    return (\r\n      <Stage className={'editor-panel-background'}>\r\n        <ViewportBackground />\r\n\r\n        {/* Keyboard and menu events */}\r\n        <ReactEvents />\r\n        {/*/!* Highlight when component is selected *!/*/}\r\n        {/*<ViewSelectedBordered/>*/}\r\n        {/* Highlight when component is enter */}\r\n      </Stage>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/11/30\r\n *\r\n */\r\nimport React from 'react';\r\nimport Selection from '../lib/Widget/Selection';\r\nimport EditorControllers from './EditorControllers';\r\nimport ContextMenu from '../lib/Widget/ContextMenu';\r\nimport EditorScrollbar from '../lib/Widget/EditorScrollbar';\r\nimport FirstResponder from '../lib/Widget/FirstResponder';\r\nimport NoZoomAreaHighIndex from './NoZoomAreaHighIndex';\r\nimport Stage from './Stage';\r\nimport NoZoomAreaLowIndex from './NoZoomAreaLowIndex';\r\nimport Event from '../lib/Base/Event';\r\nimport { controllers_append, selection_group, viewport_ready } from '../lib/util/actions';\r\nimport { getDropView } from '../lib/util/helper';\r\nimport { getCurrentPage } from '../lib/global/instance';\r\nimport config from '../lib/util/preference';\r\nimport { getCurrentIndex } from '../lib/global';\r\nimport { proxyTransformOffset } from '@/lib/util/controllers';\r\nimport { MasterProperties } from '@/lib/properties/group';\r\nimport { getQuery, uuid } from '@/lib/util/helper';\r\nimport { message } from 'antd';\r\n\r\nexport default class EditorViews extends React.Component {\r\n  containerId = 'layout-editor-view';\r\n  getRect = () => {\r\n    return {\r\n      width: window.innerWidth - (config.editorDomRect.left + config.editorDomRect.right),\r\n      height: window.innerHeight - (config.editorDomRect.top + config.editorDomRect.bottom),\r\n    };\r\n  };\r\n\r\n  componentDidMount() {\r\n    setTimeout(() => {\r\n      Event.dispatch(viewport_ready, this);\r\n    });\r\n  }\r\n\r\n  handleDrop = (e) => {\r\n    e.preventDefault();\r\n    let page = getCurrentPage();\r\n    let masterId = getQuery().m;\r\n    if (!page && !masterId) return message.info('请先添加一个页面');\r\n    let data = e.dataTransfer.getData('dragdata');\r\n    if (data) data = JSON.parse(data);\r\n    else return;\r\n    try {\r\n      let view = getDropView(e, data);\r\n      if (view) {\r\n        if (data.type == 'AdvanceComponent') {\r\n          let zindex = getCurrentIndex();\r\n          if (data.elementType == 'MASTER') {\r\n            let master = new MasterProperties();\r\n            master.masterId = data._id;\r\n            master.id = uuid('sb_');\r\n            master.transform = Object.assign({}, view.transform);\r\n            master.zIndex = zindex;\r\n            Event.dispatch(controllers_append, [master]);\r\n            return;\r\n          } else {\r\n            let diffindex =\r\n              zindex -\r\n              Math.min.apply(\r\n                null,\r\n                view.items.map((item) => item.zIndex)\r\n              );\r\n            let dx = view.transform.x,\r\n              dy = view.transform.y;\r\n            let items = view.items.map((item) => {\r\n              proxyTransformOffset(item, dx, dy, diffindex);\r\n              delete item.parent;\r\n              return item;\r\n            });\r\n            Event.dispatch(controllers_append, items);\r\n            if (items.length > 1) {\r\n              setTimeout(() => {\r\n                Event.dispatch(\r\n                  selection_group,\r\n                  items.map((item) => item.view)\r\n                );\r\n              }, 10);\r\n            }\r\n          }\r\n        } else {\r\n          Event.dispatch(controllers_append, view);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.error(['Drop Error'], e);\r\n    }\r\n  };\r\n  handleOver = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div onDrop={this.handleDrop} onDragOver={this.handleOver} ref={'container'} id={this.containerId} className={'editor-view'}>\r\n        {/* NO  ZOOM   */}\r\n        <NoZoomAreaLowIndex />\r\n        {/*ZOOM AREA*/}\r\n\r\n        {/* All components */}\r\n        <Stage zoomable={true} className={'editor-control-panel'}>\r\n          <EditorControllers />\r\n        </Stage>\r\n\r\n        {/*No ZOOM*/}\r\n        <NoZoomAreaHighIndex />\r\n\r\n        {/* Custom scroll bar  */}\r\n        <EditorScrollbar containerId={this.containerId} />\r\n        {/* The component being operated */}\r\n        <FirstResponder />\r\n\r\n        {/* Group selection */}\r\n        <Selection containerId={this.containerId} />\r\n        {/* Custom context menu */}\r\n        <ContextMenu containerId={this.containerId} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/1\r\n *\r\n */\r\nimport BaseCanvas from './Base/BaseCanvas';\r\nimport config from './util/preference';\r\nimport { getScreeTransform } from './global';\r\n\r\nclass Ruler extends BaseCanvas {\r\n  init() {\r\n    super.init();\r\n    this.scale = getScreeTransform().scale;\r\n    this.segment = 10;\r\n    this.step = 10;\r\n    this.realSegment = this.getRealSegment();\r\n    this.offset = this.getScaleOffset();\r\n  }\r\n\r\n  update() {\r\n    // Reset the size of the canvas\r\n    super.init();\r\n    this.draw();\r\n  }\r\n\r\n  getScaleOffset() {\r\n    return (this.getRealSegment() * this.scale) / this.step - this.step;\r\n  }\r\n\r\n  getRealSegment() {\r\n    return Math.round(this.step / this.scale) * this.step;\r\n  }\r\n\r\n  setScale(n) {\r\n    this.scale = n;\r\n    this.realSegment = this.getRealSegment();\r\n    this.offset = this.getScaleOffset();\r\n    this.draw();\r\n  }\r\n\r\n  translate(start) {\r\n    this.start = start;\r\n    this.draw();\r\n  }\r\n\r\n  draw() {\r\n    let { fontColor = '#989898', lineColor = '#d3d3d3' } = this.options;\r\n    this.context.strokeStyle = lineColor;\r\n    this.context.fillStyle = fontColor;\r\n    this.context.clearRect(0, 0, this.width, this.height);\r\n  }\r\n}\r\n\r\nexport class HorizontalRuler extends Ruler {\r\n  constructor(canvas, options) {\r\n    super(canvas, options);\r\n    this.start = -config.originCoords.x; // 默认从0 开始\r\n    this.draw();\r\n  }\r\n\r\n  draw() {\r\n    super.draw();\r\n    let width = this.width + this.start,\r\n      height = this.height,\r\n      segment = this.segment,\r\n      step = this.step + this.offset,\r\n      steps = this.width / this.step,\r\n      ctx = this.context,\r\n      short = height / 1.5,\r\n      index = 0,\r\n      realSegment = this.realSegment;\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, height);\r\n    ctx.lineTo(this.width, height);\r\n    let segmentStartIndex = Math.ceil(this.start / realSegment);\r\n    let startIndex = Math.ceil((this.start * this.scale) / step);\r\n    steps += startIndex + 20;\r\n    for (let i = startIndex; i < steps; i += 1) {\r\n      let x = i * step;\r\n      x -= this.start * this.scale;\r\n      if (i % segment === 0) {\r\n        ctx.moveTo(x, 0);\r\n        ctx.fillText((index + segmentStartIndex) * realSegment, x + 2, 10);\r\n        index += 1;\r\n      } else ctx.moveTo(x, short);\r\n      ctx.lineTo(x, height);\r\n    }\r\n    ctx.stroke();\r\n    ctx.closePath();\r\n  }\r\n}\r\n\r\nexport class VerticalRuler extends Ruler {\r\n  constructor(canvas, options) {\r\n    super(canvas, options);\r\n    this.start = -config.originCoords.y; // 默认从0 开始\r\n    this.draw();\r\n  }\r\n\r\n  draw() {\r\n    super.draw();\r\n    let width = this.width,\r\n      height = this.height,\r\n      start = this.start,\r\n      segment = this.segment,\r\n      step = this.step + this.offset,\r\n      steps = height / this.step,\r\n      ctx = this.context,\r\n      short = width / 1.5,\r\n      index = 0,\r\n      realSegment = this.realSegment;\r\n    ctx.beginPath();\r\n    ctx.moveTo(width, 0);\r\n    ctx.lineTo(width, height);\r\n    let segmentStartIndex = Math.ceil(this.start / this.realSegment);\r\n    let startIndex = Math.ceil((this.start * this.scale) / step);\r\n    steps += startIndex + 20;\r\n    for (let i = startIndex; i < steps; i += 1) {\r\n      let y = i * step;\r\n      y -= this.start * this.scale;\r\n      if (i % segment === 0) {\r\n        ctx.moveTo(0, y);\r\n        ctx.save();\r\n        ctx.translate(3, y + 2);\r\n        ctx.rotate(Math.PI / 2);\r\n        ctx.fillText((index + segmentStartIndex) * realSegment, 0, 0);\r\n        ctx.restore();\r\n        index += 1;\r\n      } else ctx.moveTo(short, y);\r\n      ctx.lineTo(width, y);\r\n    }\r\n    ctx.stroke();\r\n    ctx.closePath();\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/11/29\r\n *\r\n */\r\n\r\nclass BaseCanvas {\r\n  /**\r\n   *\r\n   * @param canvas {HTMLCanvasElement}\r\n   */\r\n  constructor(canvas, options) {\r\n    this.canvas = canvas;\r\n    this.options = Object.assign({}, options || {});\r\n    this.width = 0;\r\n    this.height = 0;\r\n    this.scale = 1;\r\n    this.context = canvas.getContext('2d');\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    const ratio = window.devicePixelRatio || 1;\r\n    const { width, height } = this.canvas.parentNode.getBoundingClientRect();\r\n    this.width = width;\r\n    this.height = height;\r\n    this.canvas.width = width * ratio;\r\n    this.canvas.height = height * ratio;\r\n    this.canvas.style.width = width + 'px';\r\n    this.canvas.style.height = height + 'px';\r\n    this.context.scale(ratio, ratio);\r\n  }\r\n}\r\n\r\nexport default BaseCanvas;\r\n","/**\r\n *  created by yaojun on 2018/11/30\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { HorizontalRuler, VerticalRuler } from '../Ruler';\r\nimport Event from '../Base/Event';\r\nimport { ruler_ready } from '../util/actions';\r\n\r\nexport default class Ruler extends React.Component {\r\n  static defaultProps = {\r\n    type: 'h',\r\n  };\r\n  static propTypes = {\r\n    type: PropTypes.oneOf(['h', 'v']),\r\n  };\r\n\r\n  componentDidMount() {\r\n    setTimeout(() => {\r\n      if (this.props.type === 'h') {\r\n        this.ruler = new HorizontalRuler(this.refs.canvas);\r\n      } else {\r\n        this.ruler = new VerticalRuler(this.refs.canvas);\r\n      }\r\n    }, 800);\r\n  }\r\n  render() {\r\n    return (\r\n      <div id={`editor-ruler-${this.props.type}`} className={`editor-ruler-${this.props.type}`}>\r\n        <canvas ref={'canvas'}></canvas>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/5\r\n *\r\n */\r\n\r\nimport React, { Fragment } from 'react';\r\nimport Ruler from './Ruler';\r\nimport Event from '../Base/Event';\r\nimport { editor_scroll_change, window_size_change } from '../util/actions';\r\nimport config from '../util/preference';\r\n\r\nexport default class Rulers extends React.Component {\r\n  componentWillMount() {\r\n    Event.listen(editor_scroll_change, this.handleScrollChange);\r\n    Event.listen(window_size_change, this.handleWindowSizeChange);\r\n  }\r\n\r\n  handleWindowSizeChange = () => {\r\n    let v = this.refs.rulerh.ruler;\r\n    let h = this.refs.rulerv.ruler;\r\n    if (v) v.update();\r\n    if (h) h.update();\r\n  };\r\n\r\n  handleScrollChange = ({ isScale, x, y, scale }) => {\r\n    if (isScale) {\r\n      this.refs.rulerh.ruler.setScale(scale);\r\n      this.refs.rulerv.ruler.setScale(scale);\r\n    }\r\n    this.refs.rulerh.ruler.translate(x - config.originCoords.x);\r\n    this.refs.rulerv.ruler.translate(y - config.originCoords.y);\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(editor_scroll_change, this.handleScrollChange);\r\n    Event.destroy(window_size_change, this.handleWindowSizeChange);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <Ruler ref={'rulerh'} type={'h'} />\r\n        <Ruler ref={'rulerv'} type={'v'} />\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/14\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport './ColorPicker.scss';\r\nimport NumberInput from '../NumberInput';\r\nimport Draggable from '../../Draggable';\r\nimport { Dom } from '../../util/helper';\r\nimport Icon from '../../Icon';\r\nimport { Tooltip } from 'antd';\r\nimport Event from '../../Base/Event';\r\nimport { colorpicker_active, component_drag_before, context_hide_color_picker } from '../../util/actions';\r\n\r\nconst presets = [\r\n  'rgba(244, 67, 54,1)',\r\n  'rgba(233, 30, 99,1)',\r\n  'rgba(255, 152, 0,1)',\r\n  'rgba(33, 150, 243,1)',\r\n  'rgba(255, 255, 255,1)',\r\n  'rgba(0, 0, 0,1)',\r\n  'rgba(139, 195, 74,1)',\r\n  'rgba(103, 58, 183,1)',\r\n  'rgba(63, 81, 181,1)',\r\n  'rgba(158, 158, 158,1)',\r\n];\r\nvar common = ['rgba(255,0,0,1)'];\r\nexport default class ColorPicker extends React.Component {\r\n  constructor() {\r\n    super();\r\n    //  当前输入控件，取色器关闭后将会给该输入控件赋值\r\n\r\n    this._input = null;\r\n    this.isShow = false;\r\n    this.isNone = false;\r\n    this.isModify = false;\r\n    // 色板 尺寸\r\n    this.size = {\r\n      h: 208,\r\n      s: 280,\r\n      v: 140,\r\n      drag: 14,\r\n    };\r\n    Event.listen(colorpicker_active, this.onPickerShow);\r\n    Event.listen(context_hide_color_picker, this.justClosePicker);\r\n    Event.listen(component_drag_before, this.justClosePicker);\r\n  }\r\n\r\n  handleContextClick = () => {\r\n    this.handleClosePicker();\r\n  };\r\n\r\n  /**\r\n   * 该对象必须含有一个setValue函数,和value属性\r\n   * @param input\r\n   */\r\n  onPickerShow = (input) => {\r\n    this.isShow = true;\r\n    this.isModify = false;\r\n    this.picker.show();\r\n    this.initPosition(input.mouseX, input.mouseY);\r\n    this._input = input;\r\n    if (input.value !== 'none') {\r\n      this.rgba = Color.parse(input.value);\r\n      this.isNone = false;\r\n      this.initColor();\r\n    } else {\r\n      this.rgba = { r: 255, g: 255, b: 255, a: 1 };\r\n      this.isNone = true;\r\n      this.initColor();\r\n    }\r\n  };\r\n\r\n  initColor = () => {\r\n    // HSV\r\n    this.setHsvFromRgb();\r\n    //  R G B A\r\n    this.setInputValues(this.rgba);\r\n    // Transparency bar\r\n    this.handleInputChangeA(this.rgba.a * 100);\r\n    this.updatePreview(true);\r\n  };\r\n\r\n  initPosition = (x, y) => {\r\n    x -= 262;\r\n    y -= 355;\r\n    if (y <= 0) y = 0;\r\n    if (x < 0) x = 0;\r\n\r\n    this.picker.left(x);\r\n    this.picker.top(y);\r\n  };\r\n\r\n  componentDidMount() {\r\n    let { sb, sbg, hui, huig, transparency, track, preview, picker, gradientPicker } = this.refs;\r\n    // Dom refs\r\n    this.sb = Dom.of(sb);\r\n    this.hui = Dom.of(hui);\r\n    this.picker = Dom.of(picker);\r\n    // default alpha\r\n    this.transparency = Dom.of(transparency);\r\n    // default 255,0,0\r\n\r\n    picker.addEventListener('mouseleave', this.notifyChange, false);\r\n    new Draggable(sbg, {\r\n      pointLimit: true,\r\n      onDragStart: this.handleSBAreaMove,\r\n      onDragMove: this.handleSBAreaMove,\r\n    });\r\n    new Draggable(huig, {\r\n      pointLimit: true,\r\n      onDragStart: this.handleHuiMove,\r\n      onDragMove: this.handleHuiMove,\r\n    });\r\n\r\n    new Draggable(track, {\r\n      pointLimit: true,\r\n      onDragStart: this.handleAlphaMove,\r\n      onDragMove: this.handleAlphaMove,\r\n    });\r\n  }\r\n\r\n  handleSBAreaMove = ({ pointX, pointY }) => {\r\n    this.isNone = false;\r\n    let half = this.size.drag / 2;\r\n    let x = pointX - half,\r\n      y = pointY - half;\r\n    this.sb.left(x);\r\n    this.sb.top(y);\r\n    // update hsv\r\n    this.hsv.s = pointX / this.size.s;\r\n\r\n    this.hsv.v = 1 - pointY / this.size.v;\r\n\r\n    // update values of rgba\r\n    this.setRgbColorFromHsv();\r\n  };\r\n\r\n  handleHuiMove = ({ pointX }) => {\r\n    this.isNone = false;\r\n    this.hsv.h = pointX / this.size.h;\r\n    this.hui.left(pointX - this.size.drag / 2);\r\n    // update values of rgba\r\n    this.setRgbColorFromHsv();\r\n    // Update hui color\r\n    this.setHueAreaColor();\r\n  };\r\n\r\n  handleAlphaMove = ({ pointX }) => {\r\n    this.isNone = false;\r\n    // move the dom\r\n    this.transparency.left(pointX - this.size.drag / 2);\r\n    // update alpha of rgba\r\n    this.rgba.a = +(pointX / this.size.h).toFixed(2);\r\n    this.updatePreview();\r\n    // update values\r\n    this.refs.a.setValue(Math.floor(this.rgba.a * 100));\r\n  };\r\n\r\n  applyGradientColor = (color) => {\r\n    if (this.currentGradient) {\r\n      if (color) {\r\n        this.currentGradient.attr('data-color', color);\r\n      }\r\n\r\n      let list = this.gradientList;\r\n      list = list.sort((a, b) => +a.data('percentage') - b.data('percentage'));\r\n      let line_gradient = `linear-gradient(90deg,${list\r\n        .map((item) => {\r\n          return item.data('color') + ' ' + item.data('percentage') + '%';\r\n        })\r\n        .join(',')})`;\r\n      this.refs.gradientPicker.style.background = line_gradient;\r\n      return line_gradient;\r\n    }\r\n  };\r\n\r\n  updatePreview = (isInit) => {\r\n    let color = Color.toString(this.rgba);\r\n    let gradient = this.applyGradientColor(color);\r\n    // update preview\r\n    this.refs.preview.style.background = gradient || color;\r\n\r\n    if (!isInit) {\r\n      this.isModify = true;\r\n      this._input.notifyChange(gradient || color, true);\r\n    }\r\n  };\r\n\r\n  notifyChange = () => {\r\n    if (!this.isModify) return;\r\n    this.isModify = false;\r\n    this._input.notifyChange(Color.toString(this.rgba));\r\n  };\r\n\r\n  setInputValues = (color) => {\r\n    let { r, g, b, a } = this.refs;\r\n\r\n    r.setValue(color.r);\r\n    g.setValue(color.g);\r\n    b.setValue(color.b);\r\n    a.setValue(Math.round(color.a * 100));\r\n  };\r\n\r\n  setRgbColorFromHsv = () => {\r\n    let rgb = Color.HSV2RGB(this.hsv);\r\n    // update rgba\r\n    this.rgba = Object.assign({}, this.rgba, rgb);\r\n\r\n    // input values\r\n    this.setInputValues(this.rgba);\r\n    // transparency bar\r\n    this.setTransparencyTrack();\r\n\r\n    this.updatePreview();\r\n\r\n    this.refs.hex.value = Color.toHex(this.rgba);\r\n  };\r\n\r\n  setTransparencyTrack = () => {\r\n    let transparency = Object.assign({}, this.rgba);\r\n    transparency.a = 0.05;\r\n    let start = Color.toString(transparency);\r\n    transparency.a = 1;\r\n    let end = Color.toString(transparency);\r\n    this.refs.gradient.style.background = `linear-gradient(to right,${start},${end})`;\r\n  };\r\n\r\n  setHueAreaColor = () => {\r\n    // hui area\r\n    let sbgColor = Color.HSV2RGB(this.hsv.h, 1, 1);\r\n    sbgColor.a = 1;\r\n    this.refs.sbg.style.background = Color.toString(sbgColor);\r\n  };\r\n\r\n  setHsvFromRgb = () => {\r\n    this.hsv = Color.RGB2HSV(this.rgba);\r\n    let half = this.size.drag / 2;\r\n    // H bar\r\n    this.hui.left(this.hsv.h * this.size.h - half);\r\n    // S\r\n    this.sb.left(this.hsv.s * this.size.s - half);\r\n    // V\r\n    this.sb.top((1 - this.hsv.v) * this.size.v - half);\r\n    //  H S(1) V(1)\r\n    this.setHueAreaColor();\r\n    //  Transparency bar\r\n    this.setTransparencyTrack();\r\n\r\n    this.refs.hex.value = Color.toHex(this.rgba);\r\n  };\r\n\r\n  handleInputChangeR = (r) => {\r\n    this.isNone = false;\r\n    this.rgba.r = r;\r\n    this.setHsvFromRgb();\r\n  };\r\n\r\n  handleInputChangeG = (g) => {\r\n    this.isNone = false;\r\n    this.rgba.g = g;\r\n    this.setHsvFromRgb();\r\n  };\r\n\r\n  handleInputChangeB = (b) => {\r\n    this.isNone = false;\r\n    this.rgba.b = b;\r\n    this.setHsvFromRgb();\r\n  };\r\n\r\n  handleInputChangeA = (a) => {\r\n    this.isNone = false;\r\n    this.rgba.a = a / 100;\r\n    // sync slider bar\r\n    this.transparency.left(this.rgba.a * this.size.h - this.size.drag / 2);\r\n  };\r\n\r\n  handlePresetsClick = (item) => {\r\n    this.isNone = false;\r\n    this.rgba = Color.parse(item);\r\n    this.setHsvFromRgb();\r\n    this.setRgbColorFromHsv();\r\n    // update transparency\r\n    this.handleInputChangeA(this.rgba.a * 100);\r\n  };\r\n\r\n  justClosePicker = () => {\r\n    if (this.isShow === false) return;\r\n    if (this.isNone === true) return;\r\n    this.isShow = false;\r\n    this.isModify = false;\r\n    this.picker.hide();\r\n    let color = Color.toString(this.rgba);\r\n\r\n    let common = localStorage.getItem('common_color');\r\n    if (common) common = JSON.parse(common);\r\n    else common = [];\r\n\r\n    if (common.indexOf(color) === -1) {\r\n      common.unshift(color);\r\n    }\r\n    common = common.slice(0, 10);\r\n    localStorage.setItem('common_color', JSON.stringify(common));\r\n    return color;\r\n  };\r\n\r\n  // Close picker\r\n  handleClosePicker = () => {\r\n    let color = this.justClosePicker();\r\n    if (color) {\r\n      // set input value\r\n      this._input.notifyChange(color);\r\n    }\r\n  };\r\n\r\n  handleHexChange = (e) => {\r\n    let hex = e.target.value;\r\n    if (hex.length === 7) {\r\n      let color = Color.HEX2RGB(hex);\r\n      color.a = this.rgba.a;\r\n      this.rgba = color;\r\n      this.initColor();\r\n    }\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(colorpicker_active, this.onPickerShow);\r\n    Event.destroy(context_hide_color_picker, this.justClosePicker);\r\n    Event.destroy(component_drag_before, this.justClosePicker);\r\n  }\r\n\r\n  deleteGradientColor = () => {\r\n    let index = this.gradientList.findIndex((item) => item.dom === this.currentGradient.dom);\r\n    this.gradientList.splice(index, 1);\r\n    this.refs.gradientPicker.removeChild(this.currentGradient.dom);\r\n    this.currentGradient = null;\r\n    Dom.of(this.refs.delGradient).hide();\r\n  };\r\n\r\n  handleSystemColorChange = (e) => {\r\n    if (this.isShow == false) return;\r\n    this.handleHexChange(e);\r\n    this.isModify = true;\r\n    this._input.notifyChange(Color.toString(this.rgba), true);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div onClick={(e) => e.stopPropagation()} style={{ display: 'none' }} ref={'picker'} className={'aj-color-picker'}>\r\n        <div className={'header-bar'}>\r\n          <Tooltip placement={'left'} title={' 选择系统颜色拾取时，需要关闭该面板才能生效'}>\r\n            <span>\r\n              <input onBlur={this.handleSystemColorBlur} onChange={this.handleSystemColorChange} type={'color'} />\r\n            </span>\r\n          </Tooltip>\r\n\r\n          <Icon onClick={this.handleClosePicker} type={'guanbi'} />\r\n        </div>\r\n        <div ref={'sbg'} className={'sb-area'}>\r\n          <div className={'sb-bg'}>\r\n            <div ref={'sb'} className={'sb-drag'}></div>\r\n          </div>\r\n        </div>\r\n        <div className={'bar-area'}>\r\n          <div className={'preview'}>\r\n            <div ref={'preview'}></div>\r\n          </div>\r\n          <div className={'slider-bar'}>\r\n            <div ref={'huig'} className={'hui-area'}>\r\n              <div ref={'hui'} className={'hui-drag'}></div>\r\n            </div>\r\n            <div ref={'track'} className={'transparency-area'}>\r\n              <div ref={'gradient'} className={'alpha-bg'} />\r\n              <div ref={'transparency'} className={'trans-drag'}></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className={'values'}>\r\n          <NumberInput min={0} max={255} onChange={this.handleInputChangeR} ref={'r'} />\r\n          <NumberInput min={0} max={255} onChange={this.handleInputChangeG} ref={'g'} />\r\n          <NumberInput min={0} max={255} onChange={this.handleInputChangeB} ref={'b'} />\r\n          <NumberInput min={0} max={100} onChange={this.handleInputChangeA} ref={'a'} />\r\n          <input ref={'hex'} onChange={this.handleHexChange} data-event='ignore' style={{ width: '23%', paddingLeft: 2 }} className={'aj-input'}></input>\r\n        </div>\r\n        <div className={'labels'}>\r\n          <span>R</span>\r\n          <span>G</span>\r\n          <span>B</span>\r\n          <span>A</span>\r\n          <span className={'hex'}>Hex</span>\r\n        </div>\r\n\r\n        <div className={'colors'}>\r\n          <div>\r\n            {presets.map((item) => (\r\n              <a onClick={() => this.handlePresetsClick(item)} style={{ background: item }} key={item} />\r\n            ))}\r\n          </div>\r\n\r\n          <CommonColor onClick={this.handlePresetsClick} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass CommonColor extends React.Component {\r\n  state = {\r\n    list: [],\r\n  };\r\n\r\n  componentWillMount() {\r\n    Event.listen(colorpicker_active, this.onShow);\r\n  }\r\n\r\n  onShow = () => {\r\n    let color = localStorage.getItem('common_color');\r\n    if (color) {\r\n      color = JSON.parse(color);\r\n    } else {\r\n      color = [];\r\n    }\r\n    this.setState({ list: color });\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(colorpicker_active, this.onShow);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {this.state.list.map((item) => (\r\n          <a onClick={() => this.props.onClick(item)} style={{ background: item }} key={item} />\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass Color {\r\n  /**\r\n   *\r\n   */\r\n  static HSV2RGB(h, s, v) {\r\n    var r, g, b, i, f, p, q, t;\r\n    if (arguments.length === 1) {\r\n      (s = h.s), (v = h.v), (h = h.h);\r\n    }\r\n    i = Math.floor(h * 6);\r\n    f = h * 6 - i;\r\n    p = v * (1 - s);\r\n    q = v * (1 - f * s);\r\n    t = v * (1 - (1 - f) * s);\r\n    switch (i % 6) {\r\n      case 0:\r\n        (r = v), (g = t), (b = p);\r\n        break;\r\n      case 1:\r\n        (r = q), (g = v), (b = p);\r\n        break;\r\n      case 2:\r\n        (r = p), (g = v), (b = t);\r\n        break;\r\n      case 3:\r\n        (r = p), (g = q), (b = v);\r\n        break;\r\n      case 4:\r\n        (r = t), (g = p), (b = v);\r\n        break;\r\n      case 5:\r\n        (r = v), (g = p), (b = q);\r\n        break;\r\n    }\r\n    return {\r\n      r: Math.round(r * 255),\r\n      g: Math.round(g * 255),\r\n      b: Math.round(b * 255),\r\n    };\r\n  }\r\n\r\n  static RGB2HSV(r, g, b) {\r\n    if (arguments.length === 1) {\r\n      (g = r.g), (b = r.b), (r = r.r);\r\n    }\r\n    var max = Math.max(r, g, b),\r\n      min = Math.min(r, g, b),\r\n      d = max - min,\r\n      h,\r\n      s = max === 0 ? 0 : d / max,\r\n      v = max / 255;\r\n\r\n    switch (max) {\r\n      case min:\r\n        h = 0;\r\n        break;\r\n      case r:\r\n        h = g - b + d * (g < b ? 6 : 0);\r\n        h /= 6 * d;\r\n        break;\r\n      case g:\r\n        h = b - r + d * 2;\r\n        h /= 6 * d;\r\n        break;\r\n      case b:\r\n        h = r - g + d * 4;\r\n        h /= 6 * d;\r\n        break;\r\n    }\r\n\r\n    return {\r\n      h: h,\r\n      s: s,\r\n      v: v,\r\n    };\r\n  }\r\n\r\n  static parse(str) {\r\n    try {\r\n      if (str.startsWith('rgb')) {\r\n        if (str[3] === 'a') {\r\n          let arr = str.slice(5, -1).split(',');\r\n          let rgba = { r: +arr[0], g: +arr[1], b: +arr[2], a: +arr[3] };\r\n          return rgba;\r\n        } else {\r\n          let arr = str.slice(4, -1).split(',');\r\n          let rgba = { r: +arr[0], g: +arr[1], b: +arr[2], a: 1 };\r\n          return rgba;\r\n        }\r\n      } else if (str[0] === '#') {\r\n        return this.HEX2RGB(str);\r\n      }\r\n    } catch (e) {\r\n      throw 'Invalid color';\r\n    }\r\n  }\r\n\r\n  static toString({ r, g, b, a = 1 }) {\r\n    return `rgba(${r},${g},${b},${a})`;\r\n  }\r\n\r\n  static toHex({ r, g, b, a }) {\r\n    r = r.toString(16).padStart(2, '0');\r\n    g = g.toString(16).padStart(2, '0');\r\n    b = b.toString(16).padStart(2, '0');\r\n    return `#${r}${g}${b}`;\r\n  }\r\n\r\n  static HEX2RGB(hex) {\r\n    let r, g, b;\r\n    hex = hex[0] === '#' ? hex.slice(1) : hex;\r\n    if (hex.length === 3) {\r\n      r = parseInt(hex[0] + hex[0], 16);\r\n      g = parseInt(hex[1] + hex[1], 16);\r\n      b = parseInt(hex[2] + hex[2], 16);\r\n    } else if (hex.length === 6) {\r\n      r = parseInt(hex[0] + hex[1], 16);\r\n      g = parseInt(hex[2] + hex[3], 16);\r\n      b = parseInt(hex[4] + hex[5], 16);\r\n    } else {\r\n      throw `Invalid hexadecimal ${hex}`;\r\n    }\r\n\r\n    return { r, g, b, a: 1 };\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/27\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport Draggable from '../Draggable';\r\nimport './CanvasDraggable.scss';\r\nimport { setCanvasDraggable } from '../global';\r\nimport Event from '../Base/Event';\r\nimport { canvas_dragend, canvas_draggable, canvas_dragging, canvas_dragstart } from '../util/actions';\r\nimport { Dom } from '../util/helper';\r\n\r\nexport default class CanvasDraggable extends React.Component {\r\n  handleCanvasDraggable = (isDragging) => {\r\n    setCanvasDraggable(true);\r\n    Dom.of(this.refs.g).show();\r\n  };\r\n\r\n  handleCanvasEnd = () => {\r\n    Dom.of(this.refs.g).hide();\r\n    setCanvasDraggable(false);\r\n  };\r\n\r\n  componentDidMount() {\r\n    Event.listen(canvas_draggable, this.handleCanvasDraggable);\r\n    Event.listen(canvas_dragend, this.handleCanvasEnd);\r\n    new Draggable(this.refs.g, {\r\n      onDragStart: () => {\r\n        Event.dispatch(canvas_dragstart);\r\n      },\r\n      onDragMove: ({ realDeltaX, realDeltaY }) => {\r\n        Event.dispatch(canvas_dragging, { dragging: true, realDeltaX: -realDeltaX, realDeltaY: -realDeltaY });\r\n      },\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(canvas_draggable, this.handleCanvasDraggable);\r\n    Event.destroy(canvas_dragend, this.handleCanvasEnd);\r\n  }\r\n\r\n  render() {\r\n    return <div className={'global-canvas-draggable'} ref={'g'}></div>;\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/1/31\r\n *\r\n */\r\n\r\nimport React, { Fragment } from 'react';\r\nimport Event from '../Base/Event';\r\nimport { guide_move, guide_move_end } from '../util/actions';\r\nimport { Dom } from '../util/helper';\r\nimport './LineNumber.scss';\r\nimport config from '../util/preference';\r\nimport { pointToWorkspaceCoords } from '../global';\r\n\r\nexport default class LineNumber extends React.Component {\r\n  componentDidMount() {\r\n    this.line = Dom.of(this.refs.line);\r\n    Event.listen(guide_move, this.handleMove);\r\n    Event.listen(guide_move_end, this.handleEnd);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(guide_move, this.handleMove);\r\n    Event.destroy(guide_move_end, this.handleEnd);\r\n  }\r\n\r\n  handleEnd = () => {\r\n    this.line.hide();\r\n  };\r\n\r\n  handleMove = (coords) => {\r\n    if (coords.isH) {\r\n      this.line\r\n        .show()\r\n        .left(config.editorDomRect.left + 5)\r\n        .top(coords.pageY + 10)\r\n        .text(Math.round(pointToWorkspaceCoords(coords).y));\r\n    } else {\r\n      this.line\r\n        .show()\r\n        .left(coords.pageX + 5)\r\n        .top(config.editorDomRect.top + 10)\r\n        .text(Math.round(pointToWorkspaceCoords(coords).x));\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return <div ref={'line'} className={'line_display-position'}></div>;\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2019/6/4\r\n *\r\n */\r\nimport React from 'react';\r\nimport Event from '../../lib/Base/Event';\r\nimport { context_mode_change, context_save } from '@/lib/util/actions';\r\nimport { getQuery } from '@/lib/util/helper';\r\nimport { setCurrentPage } from '@/lib/global/instance';\r\n\r\nclass BackToProject extends React.Component {\r\n  state = {\r\n    show: !!getQuery().m,\r\n  };\r\n\r\n  componentWillMount() {\r\n    Event.listen(context_mode_change, this.handleShow);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(context_mode_change, this.handleShow);\r\n  }\r\n\r\n  handleShow = (type) => {\r\n    this.setState({ show: type == 'MASTER' });\r\n  };\r\n  handleBack = () => {\r\n    setCurrentPage(null);\r\n    Event.dispatch(context_save);\r\n    this.props.history.replace('/app?p=' + getQuery().p);\r\n  };\r\n\r\n  render() {\r\n    if (!this.state.show) return null;\r\n    return (\r\n      <div className={'back-backspace'} onClick={this.handleBack}>\r\n        返回工作区\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BackToProject;\r\n","/**\r\n *  created by yaojun on 2019/3/7\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport Draggable from '../Draggable';\r\nimport { Dom } from '../util/helper';\r\n\r\nimport './ZoomSlider.scss';\r\nimport Event from '../Base/Event';\r\nimport { context_zoom_in, context_zoom_level, context_zoom_out, editor_scroll_change } from '../util/actions';\r\nimport { getScreeTransform } from '../global';\r\nimport { DEFAULT_ZOOM_LEVEL, MAX_ZOOM_LEVEL } from '../Widget/EditorScrollbar';\r\n\r\nexport default class ZoomSlider extends React.Component {\r\n  componentDidMount() {\r\n    this.valueDom = Dom.of(this.refs.value);\r\n    this.valueDom.text(getScreeTransform().scale * 100);\r\n    Event.listen(editor_scroll_change, this.handleChange);\r\n    this.slider = Dom.of(this.refs.slider);\r\n    this.refreshSlider(getScreeTransform().level || DEFAULT_ZOOM_LEVEL);\r\n    new Draggable(this.refs.track, {\r\n      pointLimit: true,\r\n      onDragStart() {},\r\n      onDragMove: ({ pointY }) => {\r\n        this.slider.top(pointY - 7);\r\n        Event.dispatch(context_zoom_level, Math.floor((pointY / 150) * MAX_ZOOM_LEVEL));\r\n      },\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(editor_scroll_change, this.handleChange);\r\n  }\r\n\r\n  refreshSlider = (level) => {\r\n    this.slider.top((level / MAX_ZOOM_LEVEL) * 150 - 7);\r\n  };\r\n\r\n  handleChange = ({ isScale, scale, level }) => {\r\n    if (isScale) {\r\n      this.valueDom.text(Math.floor(scale * 100));\r\n      this.refreshSlider(level);\r\n    }\r\n  };\r\n\r\n  handleClick = (action) => {\r\n    Event.dispatch(action);\r\n  };\r\n\r\n  handleReset = () => {\r\n    Event.dispatch(context_zoom_level, DEFAULT_ZOOM_LEVEL);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className={'aj-zoom-slider'}>\r\n        <div onClick={this.handleReset} ref={'value'} className={'aj-zoom_value aj-zoom_btn'}>\r\n          {' '}\r\n          999\r\n        </div>\r\n        <div onClick={() => this.handleClick(context_zoom_out)} className={'aj-zoom_min aj-zoom_btn'}>\r\n          {' '}\r\n          -\r\n        </div>\r\n        <div ref={'track'} className={'aj-zoom-wrapper'}>\r\n          <div ref={'slider'} className={'aj-zoom_slider'}></div>\r\n          <div className={'aj-zoom_track'}></div>\r\n        </div>\r\n        <div onClick={() => this.handleClick(context_zoom_in)} className={'aj-zoom_max aj-zoom_btn'}>\r\n          {' '}\r\n          +\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/11/6\r\n *\r\n */\r\nimport React, { Component } from 'react';\r\nimport EditorViews from './EditorViews';\r\nimport Rulers from '../lib/Widget/Rulers';\r\nimport './Editor.scss';\r\nimport ColorPicker from '../lib/ui/ColorPicker/ColorPicker';\r\nimport Event from '../lib/Base/Event';\r\nimport { window_size_change } from '../lib/util/actions';\r\nimport { Settings } from './HeaderSettings';\r\nimport CanvasDraggable from '../lib/Widget/CanvasDraggable';\r\nimport LineNumber from '../lib/ui/LineNumber';\r\nimport BackToProject from '../lib/Widget/BackToProject';\r\nimport { BaseComponentsActionBar } from '@/components/OutlineComponents';\r\nimport ZoomSlider from '@/lib/ui/ZoomSlider';\r\n\r\nconst debounce = require('debounce');\r\nexport default class Editor extends Component {\r\n  state = {\r\n    loading: false,\r\n  };\r\n\r\n  componentWillMount() {\r\n    //  this.handleResize = debounce(this.handleResize, 500)\r\n    window.addEventListener('resize', this.handleResize, false);\r\n  }\r\n\r\n  handleResize = () => {\r\n    Event.dispatch(window_size_change);\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.handleResize, false);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={'root-layout-editor'}>\r\n        <EditorViews />\r\n        <Rulers />\r\n        {/*Global Color picker*/}\r\n        <ColorPicker />\r\n        {/*Global preference*/}\r\n        <Settings />\r\n\r\n        <CanvasDraggable />\r\n\r\n        <LineNumber />\r\n\r\n        <ZoomSlider />\r\n\r\n        <BaseComponentsActionBar />\r\n\r\n        <BackToProject />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/16\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport './Select.scss';\r\nimport PropTypes from 'prop-types';\r\nimport Icon from '../Icon';\r\nimport { isEmpty, isPlainObject } from '../util/helper';\r\n\r\nexport default class Select extends React.Component {\r\n  state = {\r\n    options: [],\r\n    visible: false,\r\n    value: '',\r\n    label: '',\r\n    disabled: false,\r\n    top: 40,\r\n  };\r\n\r\n  static propTypes = {\r\n    onChange: PropTypes.func,\r\n    defaultValue: PropTypes.any,\r\n    options: PropTypes.array,\r\n    style: PropTypes.object,\r\n    className: PropTypes.string,\r\n    renderItem: PropTypes.func,\r\n    value: PropTypes.any,\r\n  };\r\n\r\n  static defaultProps = {\r\n    onChange: () => {},\r\n    options: [],\r\n  };\r\n\r\n  componentWillMount() {\r\n    let value = this.props.defaultValue || this.props.value;\r\n    let item = this.props.options.find((item) => {\r\n      return (isBasicType(item) ? item : item.key) == value;\r\n    });\r\n    if (item) {\r\n      let key = isPlainObject(item) ? item.key : item;\r\n      let label = isPlainObject(item) ? item.label : item;\r\n      this.setState({ value: key, label: label, options: this.props.options });\r\n    } else {\r\n      this.setState({ value: '', label: '', options: this.props.options });\r\n    }\r\n  }\r\n\r\n  setOptions = (options = []) => {\r\n    this.setState({ options });\r\n  };\r\n\r\n  componentWillReceiveProps(props) {\r\n    let options = this.state.options;\r\n    if (props.options != this.state.options) {\r\n      options = props.options;\r\n      this.setState({ options: props.options });\r\n    }\r\n    if ('value' in props) {\r\n      if (isEmpty(props.value)) {\r\n        this.setState({ value: '', label: '' });\r\n      } else {\r\n        if (props.value != this.state.value) {\r\n          let item = this.findValue(options, props.value);\r\n          if (item) {\r\n            let value = isPlainObject(item) ? item.key : item;\r\n            let label = isPlainObject(item) ? item.label : item;\r\n            this.setState({ value, label });\r\n          } else {\r\n            this.setState({ value: '', label: '' });\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  onFocus = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    this.setState({ visible: true }, () => {\r\n      this.getWrapperStyle();\r\n    });\r\n  };\r\n\r\n  clear = () => {\r\n    this.setState({ value: '', label: '' });\r\n  };\r\n\r\n  setValue = (value) => {\r\n    let item = this.findValue(this.state.options, value);\r\n    if (item) {\r\n      let label = isBasicType(item) ? item : item.label;\r\n      this.setState({ value, label });\r\n    } else {\r\n      this.setState({ value: '', label: '' });\r\n    }\r\n  };\r\n\r\n  findValue = (options, value) => {\r\n    return options.find((item) => {\r\n      return isBasicType(item) ? item == value : item.key == value;\r\n    });\r\n  };\r\n\r\n  onBlur = (e) => {\r\n    if (this.isDown) return;\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    this.setState({ visible: false });\r\n  };\r\n\r\n  disable = (v) => {\r\n    this.setState({ disabled: v });\r\n  };\r\n\r\n  onClick = (value, item, label) => {\r\n    this.setState({ value, visible: false, label });\r\n    this.props.onChange(value, item);\r\n  };\r\n\r\n  close = () => {\r\n    this.setState({ value: void 0, label: '' });\r\n    this.props.onChange();\r\n  };\r\n\r\n  getWrapperStyle() {\r\n    setTimeout(() => {\r\n      let rect = this.refs.wrapper.getBoundingClientRect();\r\n      let poplist = this.refs.poplist.getBoundingClientRect();\r\n      let top = rect.height;\r\n      if (rect.height + rect.top + poplist.height > window.innerHeight) {\r\n        top = -poplist.height - rect.height;\r\n      }\r\n      this.setState({ top });\r\n    }, 20);\r\n  }\r\n\r\n  render() {\r\n    const { style, className = '', renderItem } = this.props;\r\n    return (\r\n      <div ref={'wrapper'} style={style} className={`${className} aj-component-select ${this.state.value ? 'has-value' : ''}`}>\r\n        <input readOnly disabled={this.state.disabled} value={this.state.label} onBlur={this.onBlur} onFocus={this.onFocus} className={'aj-input'} />\r\n\r\n        <i className={this.state.visible ? 'arrow arrow-down' : 'arrow'}>▴</i>\r\n        <Icon onClick={this.close} type={'guanbi'} />\r\n        <div ref={'poplist'} style={{ display: this.state.visible ? 'block' : 'none', top: this.state.top }} className={'aj-select-poplist'}>\r\n          <ul className={'aj-select-scroll'}>\r\n            {this.state.options.map((item) => {\r\n              let t = isBasicType(item),\r\n                key,\r\n                label;\r\n              if (t) {\r\n                label = item;\r\n                key = item;\r\n              } else {\r\n                label = item.label;\r\n                key = item.key;\r\n              }\r\n              return (\r\n                <li className={this.state.value === key ? 'checked' : ''} onMouseDown={() => this.onClick(key, item, label)} key={key}>\r\n                  {renderItem ? renderItem(item) : label}\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst isBasicType = (n) => {\r\n  return typeof n === 'string' || typeof n === 'number' || typeof n === 'boolean';\r\n};\r\n","/**\r\n *  created by yaojun on 2019/3/6\r\n *\r\n */\r\n\r\nimport React, {Component} from \"react\";\r\nimport Types from 'prop-types'\r\nimport NumberInput from \"./NumberInput\";\r\nimport Select from \"./Select\";\r\nimport ColorInput from \"./ColorInput\";\r\nimport {getFirstResponder} from \"../global/instance\";\r\nimport Icon from \"../Icon\";\r\nimport Button, {ButtonGroup} from \"./Button\";\r\nimport {Dropable} from \"./NativeDragDrop\";\r\nimport {PresetIcon} from \"../PresetIcons\";\r\nimport './InspectorControl.scss'\r\nimport Event from \"../Base/Event\";\r\nimport {component_drag, component_stroke_change} from \"../util/actions\";\r\nimport {ANIMATIONS, isPlainObject} from \"../util/helper\";\r\nimport jQuery from 'jquery'\r\nimport {getPageDataWithId} from \"../util/page\";\r\n\r\n\r\n\r\nfunction setColorPreview(key, value){\r\n    let view = getFirstResponder()\r\n    if (!view) return\r\n    view.setColor(key, value)\r\n}\r\n\r\n\r\nclass InspectorControl extends Component {\r\n    state = {\r\n        expand : false\r\n    }\r\n    \r\n    static propTypes = {\r\n        label : Types.string,\r\n        children : Types.any,\r\n        className : Types.string,\r\n        defaultExpand : Types.bool,\r\n        display : Types.string\r\n    }\r\n    \r\n    \r\n    componentWillMount(){\r\n        this.setState({expand : this.props.defaultExpand || false})\r\n    }\r\n    \r\n    \r\n    handleExpand = () =>{\r\n        this.setState({expand : !this.state.expand})\r\n    }\r\n    \r\n    \r\n    render(){\r\n        const {label, children, className, display = 'block'} = this.props\r\n        return (<div className={`ins-control_wrapper-content ${className}`}>{children}</div>)\r\n    }\r\n}\r\n\r\nclass InspectorBase extends Component {\r\n    handleChange = (key, value) =>{\r\n        if (!getFirstResponder()) return\r\n        this.handleChangeImp(key, value)\r\n    }\r\n    \r\n    \r\n    handleChangeImp(key, value){\r\n        let object = getFirstResponder().properties[this.props.field]\r\n        if (isPlainObject(object)) {\r\n            value = {[key] : value}\r\n        }\r\n        this.props.onChange(this.props.field, value)\r\n    }\r\n    \r\n    \r\n    /**\r\n     * @protected\r\n     */\r\n    updateValues(){\r\n    \r\n    }\r\n    \r\n    \r\n    componentWillReceiveProps(props){\r\n        this.updateValues(props.value)\r\n    }\r\n    \r\n    \r\n    componentDidMount(){\r\n        this.updateValues(this.props.value)\r\n    }\r\n}\r\n\r\n/**\r\n * @property border\r\n */\r\nexport class InspectorBorder extends InspectorBase {\r\n    static  BORDER_STYLES = [\r\n        {label : '-----', key : 'dashed'},\r\n        {label : '_____', key : 'solid'},\r\n        {label : '……', key : 'dotted'},\r\n    ]\r\n    \r\n    \r\n    componentDidMount(){\r\n        super.componentDidMount()\r\n        Event.listen(component_stroke_change, this.handleStrokeChange)\r\n    }\r\n    \r\n    \r\n    handleStrokeChange = (width) =>{\r\n        this.refs.borderWidth.setValue(width)\r\n    }\r\n    \r\n    \r\n    componentWillUnmount(){\r\n        Event.destroy(component_stroke_change, this.handleStrokeChange)\r\n    }\r\n    \r\n    \r\n    updateValues = ({width, style, color}) =>{\r\n        const {borderWidth, borderType, borderColor} = this.refs\r\n        if (borderType) {\r\n            borderType.setValue(style)\r\n        }\r\n        if (borderWidth) {\r\n            borderWidth.setValue(width)\r\n        }\r\n        \r\n        borderColor.setValue(color)\r\n    }\r\n    \r\n    \r\n    render(){\r\n        let {style, width} = this.props.value\r\n        return (\r\n            <InspectorControl display={'flex'} className={'ins-control_border'} label={'描边'}>\r\n                {width != 'none' && <NumberInput onChange={(v) => this.handleChange('width', v)} ref={'borderWidth'}\r\n                                                 label={null} min={0} max={100}/>}\r\n                \r\n                {style != 'none' &&\r\n                <Select defaultValue={style} onChange={(v) => this.handleChange('style', v)} ref={'borderType'}\r\n                        options={InspectorBorder.BORDER_STYLES}/>}\r\n                <ColorInput onPreview={(v) => setColorPreview('border', v)}\r\n                            onChange={(v) => this.handleChange('color', v)} ref={'borderColor'}/>\r\n            </InspectorControl>\r\n        )\r\n    }\r\n}\r\n\r\n/**\r\n * @property bg\r\n * @description bg of properties\r\n */\r\nexport class InspectorFill extends InspectorBase {\r\n    \r\n    updateValues = (bg) =>{\r\n        const {color} = this.refs\r\n        color.setValue(bg)\r\n    }\r\n    \r\n    \r\n    render(){\r\n        return (<InspectorControl className={'ins-control_bg'} label={'填充'}>\r\n            <ColorInput onPreview={(v) => setColorPreview('bg', v)} onChange={(v) => this.handleChange('bg', v)}\r\n                        ref={'color'}/>\r\n            <span onClick={(v) => this.handleChange('bg', 'rgba(255,255,255,1)')}\r\n                  className={'color-preset-item white'}></span>\r\n            <span onClick={(v) => this.handleChange('bg', 'rgba(0,0,0,1)')}\r\n                  className={'color-preset-item black'}></span>\r\n            <span onClick={(v) => this.handleChange('bg', 'rgba(255,255,255,0)')}\r\n                  className={'color-preset-item none'}></span>\r\n        </InspectorControl>)\r\n    }\r\n}\r\n\r\nexport class InspectorShadow extends InspectorBase {\r\n    \r\n    updateValues = ({type, offsetX, offsetY, blur, spread, color}) =>{\r\n        const {shadowType, shadowColor, shadowOffsetX, shadowOffsetY, shadowBlur, shadowSpread} = this.refs\r\n        shadowType.setValue(type)\r\n        shadowColor.setValue(color)\r\n        shadowOffsetX.setValue(offsetX)\r\n        shadowOffsetY.setValue(offsetY)\r\n        shadowBlur.setValue(blur)\r\n        shadowSpread.setValue(spread)\r\n    }\r\n    \r\n    \r\n    render(){\r\n        return (\r\n            <InspectorControl className={'ins-control_shadow'} label={'阴影'}>\r\n                <div className={'ins-control_wrapper-item'}>\r\n                    <Select onChange={(v) => this.handleChange('type', v)} ref={'shadowType'}\r\n                            options={['outset', 'inset']}/>\r\n                    <ColorInput\r\n                        onPreview={(v) => setColorPreview('shadow', v)}\r\n                        onChange={(v) => this.handleChange('color', v)}\r\n                        ref={'shadowColor'}/></div>\r\n                <div className={'ins-control_wrapper-item'}>\r\n                    <NumberInput onChange={(v) => this.handleChange('offsetX', v)} ref={'shadowOffsetX'}\r\n                                 label={'X'}/>\r\n                    <NumberInput onChange={(v) => this.handleChange('offsetY', v)} ref={'shadowOffsetY'}\r\n                                 label={'Y'}/>\r\n                    <NumberInput onChange={(v) => this.handleChange('blur', v)} ref={'shadowBlur'}\r\n                                 label={'B'}/>\r\n                    <NumberInput onChange={(v) => this.handleChange('spread', v)} ref={'shadowSpread'}\r\n                                 label={'S'}/>\r\n                </div>\r\n            </InspectorControl>\r\n        )\r\n    }\r\n}\r\n\r\nexport class InspectorCorner extends InspectorBase {\r\n    \r\n    handleChangeImp = (key, value) =>{\r\n        let corner = Object.assign({}, getFirstResponder().properties.corner)\r\n        if (key == 'all') {\r\n            for (let name in corner) {\r\n                corner[name] = value\r\n            }\r\n            const {borderTopLeft, borderTopRight, borderBottomLeft, borderBottomRight} = this.refs\r\n            borderTopLeft.setValue(value)\r\n            borderTopRight.setValue(value)\r\n            borderBottomLeft.setValue(value)\r\n            borderBottomRight.setValue(value)\r\n        } else {\r\n            corner = {[key] : value}\r\n        }\r\n        this.props.onChange('corner', corner)\r\n    }\r\n    \r\n    updateValues = ({topLeft, topRight, bottomLeft, bottomRight}) =>{\r\n        const {borderRadius, borderTopLeft, borderTopRight, borderBottomLeft, borderBottomRight, circleType} = this.refs\r\n        const disableAngle = topLeft.toString().endsWith('%')\r\n        if (disableAngle) {\r\n            circleType.setValue('circle')\r\n        } else {\r\n            circleType.setValue('square')\r\n        }\r\n        \r\n        if (topLeft == topRight && topLeft == bottomLeft && topLeft == bottomRight) {\r\n            borderRadius.setValue(topLeft)\r\n        } else {\r\n            borderRadius.setValue('')\r\n        }\r\n        borderTopLeft.setValue(topLeft)\r\n        borderTopRight.setValue(topRight)\r\n        borderBottomLeft.setValue(bottomLeft)\r\n        borderBottomRight.setValue(bottomRight)\r\n        \r\n        this.setDisableAngle(disableAngle)\r\n        \r\n    }\r\n    \r\n    setDisableAngle = (status) =>{\r\n        const {borderTopLeft, borderTopRight, borderBottomLeft, borderBottomRight} = this.refs\r\n        borderTopLeft.disabled(status)\r\n        borderTopRight.disabled(status)\r\n        borderBottomLeft.disabled(status)\r\n        borderBottomRight.disabled(status)\r\n    }\r\n    \r\n    onShapeTypeChange = (key) =>{\r\n        let isCircle = key == 'circle'\r\n        if (isCircle) {\r\n            this.handleChange('all', '50%')\r\n        } else {\r\n            this.handleChange('all', 0)\r\n        }\r\n        this.setDisableAngle(isCircle)\r\n    }\r\n    \r\n    \r\n    render(){\r\n        return (\r\n            <InspectorControl className={'ins-control_corner'} label={'圆角'}>\r\n                <div className={'control-items'}>\r\n                    <NumberInput onChange={(v) => this.handleChange('all', v)} ref={'borderRadius'}\r\n                                 label={<Icon type={'iconfontdaojiaofangxing2'}/>}/>\r\n                    <ButtonGroup ref={'circleType'} onClick={this.onShapeTypeChange}>\r\n                        <Button key={'circle'} className={'aj-button-circle'}><Icon\r\n                            type={'circle'}/></Button>\r\n                        <Button key={'square'}\r\n                                className={'aj-button-circle'}><Icon\r\n                            type={'iconfontdaojiaofangxing2'}/></Button>\r\n                    </ButtonGroup>\r\n                </div>\r\n                <div className={'control-items circle-side-top'}>\r\n                    <NumberInput onChange={(v) => this.handleChange('topLeft', v)} ref={'borderTopLeft'}\r\n                                 label={<Icon type={'quxian'}/>}/>\r\n                    <NumberInput onChange={(v) => this.handleChange('topRight', v)} ref={'borderTopRight'}\r\n                                 addon={<Icon rotation={90} type={'quxian'}/>}/>\r\n                    <NumberInput onChange={(v) => this.handleChange('bottomLeft', v)} ref={'borderBottomLeft'}\r\n                                 label={<Icon rotation={270} type={'quxian'}/>}/>\r\n                    <NumberInput onChange={(v) => this.handleChange('bottomRight', v)} ref={'borderBottomRight'}\r\n                                 addon={<Icon rotation={180} type={'quxian'}/>}/>\r\n                </div>\r\n            </InspectorControl>\r\n        )\r\n    }\r\n}\r\n\r\nexport class InspectorTransform extends InspectorBase {\r\n    \r\n    componentDidMount(){\r\n        super.componentDidMount()\r\n        Event.listen(component_drag, this.handleTransform)\r\n    }\r\n    \r\n    \r\n    componentWillUnmount(){\r\n        Event.destroy(component_drag, this.handleTransform)\r\n    }\r\n    \r\n    \r\n    handleTransform = (target) =>{\r\n        this.updateValues(target.properties.transform)\r\n    }\r\n    \r\n    updateValues = (value) =>{\r\n        const {x, y, w, h} = this.refs\r\n        x.setValue(Math.round(value.x))\r\n        y.setValue(Math.round(value.y))\r\n        w.setValue(Math.round(value.width))\r\n        h.setValue(Math.round(value.height))\r\n    }\r\n    \r\n    handlePreview = (k, v) =>{\r\n        let view = getFirstResponder()\r\n        if (!view) return\r\n        let t = Object.assign({}, view.properties.transform)\r\n        console.log(t)\r\n        t[k] = v\r\n        view.setTransform(t.x, t.y, t.width, t.height, t.rotation)\r\n        this.props.onChange(this.props.field, t)\r\n    }\r\n    \r\n    \r\n    render(){\r\n        \r\n        return <InspectorControl defaultExpand={true} className={'ins-control_transform'} label={'位置'}>\r\n            <NumberInput onChange={(v) => this.handleChange('x', v)}\r\n                         ref={'x'} label={'X'}/>\r\n            <NumberInput onChange={(v) => this.handleChange('y', v)}\r\n                         ref={'y'} label={'Y'}/>\r\n            <NumberInput\r\n                onChange={(v) => this.handleChange('width', v)} ref={'w'} label={'W'}/>\r\n            <NumberInput\r\n                onChange={(v) => this.handleChange('height', v)} ref={'h'} label={'H'}/>\r\n        </InspectorControl>\r\n    }\r\n}\r\n\r\nexport class InspectorFont extends InspectorBase {\r\n    \r\n    updateValues = ({color, size}) =>{\r\n        const {fontSize, fontColor} = this.refs\r\n        fontSize.setValue(size)\r\n        fontColor.setValue(color)\r\n    }\r\n    \r\n    \r\n    render(){\r\n        \r\n        return <InspectorControl display={'flex'} className={'ins-control_font'} label={'字体'}>\r\n            <NumberInput onChange={(value) => this.handleChange('size', value)} ref={'fontSize'}/>\r\n            <ColorInput\r\n                onPreview={(v) => setColorPreview('fontColor', v)}\r\n                onChange={(value) => this.handleChange('color', value)} ref={'fontColor'}/>\r\n        </InspectorControl>\r\n    }\r\n}\r\n\r\nexport class InspectorAlign extends InspectorBase {\r\n    updateValues = ({x, y}) =>{\r\n        const {fontAlignX, fontAlignY} = this.refs\r\n        fontAlignX.setValue(x)\r\n        fontAlignY.setValue(y)\r\n    }\r\n    \r\n    \r\n    render(){\r\n        return <InspectorControl label={'对齐'}>\r\n            <div className={'control-items'}>\r\n                <ButtonGroup onClick={(value) => this.handleChange('x', value)} ref={'fontAlignX'}>\r\n                    <Button key={'flex-start'}><Icon type={'duiqi2'}/></Button>\r\n                    <Button key={'center'}><Icon type={'duiqi1'}/></Button>\r\n                    <Button key={'flex-end'}><Icon type={'duiqi'}/></Button>\r\n                </ButtonGroup>\r\n            </div>\r\n            <div className={'control-items'}>\r\n                <ButtonGroup onClick={(value) => this.handleChange('y', value)} ref={'fontAlignY'}>\r\n                    <Button key={'flex-start'}><Icon type={'top'}/></Button>\r\n                    <Button key={'center'}><Icon type={'duiqishuiping'}/></Button>\r\n                    <Button key={'flex-end'}><Icon type={'duiqi_xiangshang'}/></Button>\r\n                </ButtonGroup>\r\n            </div>\r\n        </InspectorControl>\r\n    }\r\n}\r\n\r\nexport class InspectorSpacing extends InspectorBase {\r\n    updateValues = ({width, height}) =>{\r\n        const {lineHeight, letterSpacing} = this.refs\r\n        lineHeight.setValue(height)\r\n        letterSpacing.setValue(width)\r\n    }\r\n    \r\n    \r\n    render(){\r\n        return <InspectorControl className={'ins-control_spacing'} label={'间距'}>\r\n            <div className={'control-items'}>\r\n                <NumberInput onChange={(value) => this.handleChange('height', value)} ref={'lineHeight'}\r\n                             label={<Icon type={'xinggao1'}/>}/>\r\n                <NumberInput onChange={(value) => this.handleChange('width', value)} ref={'letterSpacing'}\r\n                             label={<Icon type={'zijianju'}/>}/>\r\n            </div>\r\n        </InspectorControl>\r\n    }\r\n}\r\n\r\nexport class InspectorFontStyle extends InspectorBase {\r\n    handleChangeImp = (key, value) =>{\r\n        this.props.onChange(key, value)\r\n    }\r\n    \r\n    updateValues = (fontStyle) =>{\r\n        const {style} = this.refs\r\n        style.setValue(fontStyle)\r\n    }\r\n    \r\n    \r\n    render(){\r\n        return <InspectorControl className={'ins-control_font-style'} label={'样式'}>\r\n            <ButtonGroup onClick={(value) => this.handleChange('fontStyle', value)} ref={'style'}\r\n                         multiple={true}>\r\n                <Button key={'bold'}><Icon type={'cuti'}/></Button>\r\n                <Button key={'italic'}><Icon type={'xieti'}/></Button>\r\n            </ButtonGroup>\r\n        </InspectorControl>\r\n    }\r\n}\r\n\r\nexport class InspectorFontDecorator extends InspectorBase {\r\n    \r\n    handleChangeImp = (key, value) =>{\r\n        this.props.onChange(key, value)\r\n    }\r\n    \r\n    updateValues = (decorator) =>{\r\n        const {fontDecorator} = this.refs\r\n        fontDecorator.setValue(decorator)\r\n    }\r\n    \r\n    \r\n    render(){\r\n        return <InspectorControl className={'ins-control_font-decorator'} label={'下划线'}>\r\n            <ButtonGroup onClick={(value) => this.handleChange('decorator', value)} ref={'fontDecorator'}>\r\n                <Button key={'underline'}><Icon type={'xiahuaxian'}/></Button>\r\n                <Button key={'line-through'}><Icon type={'shanchuxian'}/></Button>\r\n            </ButtonGroup>\r\n        </InspectorControl>\r\n    }\r\n}\r\n\r\nexport class InspectorFontContent extends InspectorBase {\r\n    handleChangeImp = (key, value) =>{\r\n        this.props.onChange(key, value)\r\n    }\r\n    \r\n    updateValues = (font) =>{\r\n        const {icon} = this.refs\r\n        const data = getFirstResponder().properties.icon.data\r\n        icon.setValue(data)\r\n    }\r\n    \r\n    handleIconDrop = (data) =>{\r\n        if (data && data.type == 'icon' && data.fontContent) {\r\n            this.handleChange('icon', {data : data.data, content : data.fontContent})\r\n            this.refs.icon.setValue(data.data)\r\n        }\r\n    }\r\n    \r\n    \r\n    render(){\r\n        return <InspectorControl className={'ins-control_font-content'} label={'图标'}>\r\n            <div className={'drop-icons'} ref={'signle'}>\r\n                <div className={'control-items drop-icon'}>\r\n                    <Dropable className={'ins-content_control-input font-content-drop'}\r\n                              onDrop={this.handleIconDrop}><PresetIcon ref={'icon'}/> 拖拽新图标到此\r\n                    </Dropable>\r\n                </div>\r\n            </div>\r\n        </InspectorControl>\r\n    }\r\n}\r\n\r\nconst DELAY = [0, 1, 2, 3, 4, 5, 6, 7, 9, 10, 15, 20]\r\nconst SPEED = [\r\n    {label : '极快', key : 'faster'}, {label : '快', key : 'fast'}, {label : '慢', key : 'slow'}, {\r\n        label : '极慢',\r\n        key : 'slower'\r\n    }\r\n]\r\nconst LOOP = [\r\n    {label : '无限', key : 'infinite'}, {label : '一次', key : 1}, {label : '二次', key : 2}, {\r\n        label : '三次',\r\n        key : 3\r\n    }, {key : 0, label : '无'}\r\n]\r\n\r\nexport class InspectorAnimation extends InspectorBase {\r\n    updateValues({n, d, s, l}){\r\n        let {name, delay, speed, loop} = this.refs\r\n        console.log()\r\n        name.setValue(n)\r\n        delay.setValue(d)\r\n        speed.setValue(s)\r\n        loop.setValue(l)\r\n    }\r\n    \r\n    \r\n    render(){\r\n        return <InspectorControl label={'动画'} className={'ins-control_animation'}>\r\n            <div className={'ins-animation_preview'}>\r\n                <span className={'ins-animation_preview-target'}></span>\r\n            </div>\r\n            <div className={'ins-content_control-item'}>\r\n                <div className={'ins-content_control-label'}>效果</div>\r\n                <Select ref={'name'} onChange={(v) => this.handleChange('n', v)} className={'ins-content_control-input'}\r\n                        options={ANIMATIONS}/>\r\n            </div>\r\n            <div className={'ins-content_control-item'}>\r\n                <div className={'ins-content_control-label'}>延时</div>\r\n                <Select ref={'delay'} onChange={v => this.handleChange('d', v)} className={'ins-content_control-input'}\r\n                        options={DELAY}/>\r\n            </div>\r\n            <div className={'ins-content_control-item'}>\r\n                <div className={'ins-content_control-label'}>速度</div>\r\n                <Select ref={'speed'} onChange={v => this.handleChange('s', v)} className={'ins-content_control-input'}\r\n                        options={SPEED}/>\r\n            </div>\r\n            <div className={'ins-content_control-item'}>\r\n                <div className={'ins-content_control-label'}>循环</div>\r\n                <Select ref={'loop'} onChange={v => this.handleChange('l', v)} className={'ins-content_control-input'}\r\n                        options={LOOP}/>\r\n            </div>\r\n        \r\n        </InspectorControl>\r\n    }\r\n}\r\n\r\nconst animations = ANIMATIONS\r\nconst EVENTS = [\r\n    {\r\n        label : '单击',\r\n        key : 'click'\r\n    }, {\r\n        label : '双击',\r\n        key : 'dbclick'\r\n    }, {\r\n        label : '鼠标划入',\r\n        key : 'enter'\r\n    }, {\r\n        label : '鼠标离开',\r\n        key : 'leave'\r\n    }\r\n]\r\nconst MouseMap = {\r\n    click : '单击',\r\n    dbclick : '双击',\r\n    enter : '鼠标滑入',\r\n    leave : '鼠标滑出'\r\n}\r\nconst EventsMap = {\r\n    play : '播放动画',\r\n    hide : '隐藏',\r\n    show : '显示',\r\n    toggle : '显示/隐藏',\r\n    jump : '跳转页面'\r\n}\r\nlet COMPONENTS = [\r\n    {\r\n        label : EventsMap.toggle,\r\n        key : 'toggle'\r\n    }, {\r\n        label : EventsMap.show,\r\n        key : 'show'\r\n    }, {\r\n        label : EventsMap.hide,\r\n        key : 'hide'\r\n    }, {\r\n        label : EventsMap.play,\r\n        key : 'play',\r\n        params : 'none'\r\n    }\r\n]\r\nlet PAGES = [\r\n    {\r\n        label : '跳转页面',\r\n        key : 'jump',\r\n    }\r\n]\r\n\r\nexport class InspectorInteraction extends InspectorBase {\r\n    state = {\r\n        list : [],\r\n        type : 'c',\r\n        current : {\r\n            e : '',\r\n            t : [],\r\n            o : '',\r\n            a : ''\r\n        },\r\n        selectedIndex : -1\r\n    }\r\n    \r\n    \r\n    updateValues(list){\r\n        this.setState({list, current : {e : '', t : [], o : '', a : '',}, selectedIndex : -1, type : 'c'})\r\n    }\r\n    \r\n    \r\n    handleDrop = (id) =>{\r\n        if (id.startsWith('page')) {\r\n            // page\r\n            let current = jQuery.extend(true, {}, this.state.current)\r\n            let page = getPageDataWithId(id)\r\n            current.t = [{id, alias : page.alias}]\r\n            current.o = 'jump'\r\n            current.a = ''\r\n            console.log(current)\r\n            this.setState({current, type : 'p'})\r\n        } else {\r\n            //view\r\n            let alias = window.allWidgets[id].alias\r\n            let current = Object.assign({}, this.state.current)\r\n            if (this.state.type == 'p') {\r\n                current.t = [{id, alias}]\r\n            } else {\r\n                let t = this.state.current.t.slice()\r\n                let index = t.findIndex((item => item.id == id))\r\n                if (index > -1) {\r\n                    return\r\n                }\r\n                t.push({id, alias})\r\n                current.t = t\r\n            }\r\n            current.o = ''\r\n            current.a = ''\r\n            this.setState({type : 'c', current})\r\n        }\r\n    }\r\n    \r\n    save = () =>{\r\n        let current = jQuery.extend(true, {}, this.state.current)\r\n        if (!current.e || current.t.length == 0 || !current.o || (current.o == 'play' && !current.a)) {\r\n            // TODO Message box\r\n            return\r\n        }\r\n        let list = this.state.list.slice(0)\r\n        if (this.state.selectedIndex > -1) { // update\r\n            list[this.state.selectedIndex] = current\r\n        } else { //add\r\n            current.id = Date.now()\r\n            list.push(current)\r\n        }\r\n        this.setState({list, current : {e : '', a : '', o : '', t : []}, selectedIndex : -1})\r\n        this.props.onChange(this.props.field, list)\r\n    }\r\n    \r\n    update = (index) =>{\r\n        let current = jQuery.extend(true, {}, this.state.list[index])\r\n        this.setState({selectedIndex : index, current, type : current.o == 'jump' ? 'p' : 'c'})\r\n    }\r\n    \r\n    handleDeleteDropItem = (index) =>{\r\n        let current = jQuery.extend(true, {}, this.state.current)\r\n        current.t.splice(index, 1)\r\n        this.setState({current})\r\n    }\r\n    \r\n    onChange = (key, value) =>{\r\n        let current = Object.assign({}, this.state.current)\r\n        current[key] = value\r\n        this.setState({current})\r\n    }\r\n    \r\n    getEventName = (item) =>{\r\n        let alias = '【EMPTY】'\r\n        if (item.o == 'jump') {\r\n            let page = getPageDataWithId(item.t[0].id)\r\n            if (page) alias = page.alias\r\n        } else {\r\n            let view = window.allWidgets[item.t[0].id]\r\n            if (view) alias = view.alias\r\n        }\r\n        return MouseMap[item.e] + ' - ' + EventsMap[item.o] + `【${alias}】`\r\n    }\r\n    \r\n    delIndex = (index) =>{\r\n        let list = this.state.list.slice()\r\n        list.splice(index, 1)\r\n        this.props.onChange(this.props.field, list)\r\n    }\r\n    \r\n    \r\n    render(){\r\n        let options = this.state.type == 'p' ? PAGES : COMPONENTS\r\n        return <InspectorControl label={'交互'} className={'ins-control_interactions'}>\r\n            {this.state.list.length > 0 && <div className={'ins-control_interactions-list'}>\r\n                {\r\n                    this.state.list.map((item, index) =>{\r\n                        return <div className={'interactions-list_item'} key={item.id}>\r\n                            <div className={'interactions-list_item-name'}>\r\n                                {this.getEventName(item)}</div>\r\n                            <Icon onClick={() => this.update(index)} type={'edit'}/> <Icon\r\n                            onClick={() => this.delIndex(index)}\r\n                            type={'delete'}/></div>\r\n                    })\r\n                }\r\n            \r\n            </div>}\r\n            <div className={'ins-content_control-item'}>\r\n                <div className={'ins-content_control-label'}>事件</div>\r\n                <Select onChange={(v) => this.onChange('e', v)} value={this.state.current.e} options={EVENTS}\r\n                        className={'ins-content_control-input'}></Select>\r\n            </div>\r\n            <div className={'ins-content_control-item'}>\r\n                <div className={'ins-content_control-label'}>目标</div>\r\n                <Dropable onDrop={this.handleDrop} namespace={'nodedrag'} className={'ins-content_control-input'}>\r\n                    {\r\n                        this.state.current.t.map((item, index) =>{\r\n                            return <div className={'ins-content_drop-item'} key={item.id}>{item.alias} <Icon\r\n                                onClick={() => this.handleDeleteDropItem(index)}\r\n                                type={'delete'}/>\r\n                            </div>\r\n                        })\r\n                    }\r\n                    {this.state.current.t.length == 0 && <div className={'desc'}>拖拽图层或页面到此处</div>}\r\n                </Dropable>\r\n            </div>\r\n            <div className={'ins-content_control-item'}>\r\n                <div className={'ins-content_control-label'}>操作</div>\r\n                <Select onChange={(v) => this.onChange('o', v)} value={this.state.current.o} options={options}\r\n                        className={'ins-content_control-input'}></Select>\r\n            </div>\r\n            \r\n            {\r\n                this.state.current.o == 'play' && (\r\n                    <div className={'ins-content_control-item'}>\r\n                        <div className={'ins-content_control-label'}>动画</div>\r\n                        <Select value={this.state.current.a} onChange={(v) => this.onChange('a', v)}\r\n                                options={ANIMATIONS}\r\n                                className={'ins-content_control-input'}></Select>\r\n                    </div>\r\n                )\r\n            }\r\n            \r\n            <div className={'ins-content_control-item'}>\r\n                <Button onClick={this.save} type={'primary'} className={'ins-content_control-input'}>{\r\n                    this.state.selectedIndex == -1 ? '添加' : '保存'\r\n                }</Button>\r\n            </div>\r\n        </InspectorControl>\r\n    }\r\n}\r\n\r\n","/**\r\n *  created by yaojun on 2018/11/6\r\n *\r\n */\r\nimport React, { Component } from 'react';\r\nimport './Inspector.scss';\r\nimport Event from '../lib/Base/Event';\r\nimport { component_active, component_empty, component_inactive, component_properties_change, window_size_change } from '../lib/util/actions';\r\nimport {\r\n  InspectorAlign,\r\n  InspectorAnimation,\r\n  InspectorBorder,\r\n  InspectorCorner,\r\n  InspectorFill,\r\n  InspectorFont,\r\n  InspectorFontContent,\r\n  InspectorFontDecorator,\r\n  InspectorFontStyle,\r\n  InspectorInteraction,\r\n  InspectorShadow,\r\n  InspectorSpacing,\r\n  InspectorTransform,\r\n} from '../lib/ui/InspectorControls';\r\nimport { getFirstResponder } from '../lib/global/instance';\r\nimport Types from 'prop-types';\r\nimport deepEqual from 'fast-deep-equal';\r\nimport { Popover } from 'antd';\r\nimport Icon from '../lib/Icon';\r\nimport { Dom, mergeProps } from '../lib/util/helper';\r\nimport Collapse from '@/lib/ui/Collapse';\r\n\r\nconst getDefaultValues = () => {\r\n  return {\r\n    fontStyle: [],\r\n    bg: 'rgba(255,255,255,1)',\r\n    border: {\r\n      width: 1,\r\n      color: 'rgba(255,255,255,1)',\r\n      style: 'solid',\r\n    },\r\n    align: {\r\n      x: 'flex-start',\r\n      y: 'flex-start',\r\n    },\r\n    icon: {\r\n      data: '',\r\n      content: '',\r\n    },\r\n    shadow: {\r\n      offsetX: 0,\r\n      offsetY: 0,\r\n      spread: 0,\r\n      blur: 0,\r\n      color: 'rgba(255,255,255,1)',\r\n    },\r\n    spacing: {\r\n      width: 0,\r\n      height: 1,\r\n    },\r\n    corner: {\r\n      topLeft: 0,\r\n      topRight: 0,\r\n      bottomLeft: 0,\r\n      bottomRight: 0,\r\n    },\r\n    decorator: '',\r\n    font: {\r\n      color: 'rgba(255,255,255,0.8)',\r\n      size: 14,\r\n    },\r\n  };\r\n};\r\nlet DefaultValues = getDefaultValues();\r\n\r\nclass DynamicWrapper extends Component {\r\n  static propTypes = {\r\n    field: Types.string.isRequired,\r\n    value: Types.any,\r\n    onChange: Types.func,\r\n  };\r\n\r\n  shouldComponentUpdate(props) {\r\n    return !deepEqual(props.value, this.props.value);\r\n  }\r\n\r\n  render() {\r\n    let { value, field, onChange } = this.props;\r\n    const DynamicControl = InspectorControls[field];\r\n    return <DynamicControl onChange={onChange} field={field} value={value} key={field} />;\r\n  }\r\n}\r\n\r\nclass InspectorProps extends Component {\r\n  state = {\r\n    keys: [],\r\n    visibles: {\r\n      interactions: false,\r\n      icon: false,\r\n    },\r\n  };\r\n  target = null;\r\n\r\n  componentWillMount() {\r\n    Event.listen(component_active, this.onActive);\r\n    Event.listen(component_inactive, this.handleInacive);\r\n    Event.listen(component_empty, this.handleEmpty);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(component_active, this.onActive);\r\n    Event.destroy(component_inactive, this.handleInacive);\r\n    Event.destroy(component_empty, this.handleEmpty);\r\n  }\r\n\r\n  handleEmpty = () => {\r\n    this.target = null;\r\n    this.setState({ keys: [] });\r\n  };\r\n  handleInacive = () => {\r\n    DefaultValues = getDefaultValues();\r\n  };\r\n  onActive = (target) => {\r\n    this.target = target;\r\n    let keys = Object.keys(target.properties);\r\n    if (target.properties.isTemporaryGroup) {\r\n      keys = Object.keys(Object.assign({}, ...target.getItems()));\r\n      Object.assign(target.properties, DefaultValues);\r\n    }\r\n    keys = keys.filter((item) => InspectorControls[item]);\r\n    let orderKeys = [];\r\n    keys.forEach((item) => {\r\n      orderKeys[Order[item]] = item;\r\n    });\r\n    orderKeys = orderKeys.filter((item) => !!item);\r\n    this.setState({ keys: orderKeys });\r\n  };\r\n  handleChange = (key, value) => {\r\n    let view = getFirstResponder();\r\n    let values = value;\r\n    if (view.properties.isTemporaryGroup) {\r\n      values = {};\r\n      view.getItems().forEach((item) => {\r\n        if (key == 'transform') {\r\n          let trans = Object.assign({}, view.properties.transform, value);\r\n          let t = {\r\n            x: trans.x + item._xPercent * trans.width,\r\n            y: trans.y + item._yPercent * trans.height,\r\n            width: item._wPercent * trans.width,\r\n            height: item._hPercent * trans.height,\r\n            rotation: item.transform.rotation,\r\n          };\r\n          values[item.id] = t;\r\n        } else {\r\n          values[item.id] = value;\r\n        }\r\n      });\r\n    }\r\n    Event.dispatch(component_properties_change, {\r\n      key,\r\n      target: view,\r\n      value: values,\r\n    });\r\n    if (view.properties.isTemporaryGroup && key == 'transform') {\r\n      DefaultValues[key] = Object.assign({}, view.properties.transform, value);\r\n    } else {\r\n      DefaultValues[key] = mergeProps(DefaultValues[key] || {}, value);\r\n    }\r\n    this.onActive(view);\r\n  };\r\n  handleCloseLayer = (key) => {\r\n    this.toggleOverlay(key, false);\r\n  };\r\n  handleMouseEnter = (key) => {\r\n    let visibles = this.state.visibles;\r\n    visibles[key] = true;\r\n    visibles[key == 'icon' ? 'interactions' : 'icon'] = false;\r\n    this.setState({ visibles });\r\n  };\r\n  toggleOverlay = (key, value) => {\r\n    let visibles = this.state.visibles;\r\n    visibles[key] = value;\r\n    this.setState({ visibles });\r\n  };\r\n  onOverlayToggleVisible = (key, value) => {\r\n    const { interactions, icon } = this.state.visibles;\r\n    if (value && (interactions || icon)) {\r\n      this.setState({ visibles: { interactions: false, icon: false } });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    if (this.state.keys.length == 0) return null;\r\n    return (\r\n      <div className={'root-layout-inspector'}>\r\n        {this.state.keys.map((key) => {\r\n          let item = LABELS[key];\r\n          let isControlled = item[2] == 'controlled';\r\n          let props = {};\r\n          if (isControlled) {\r\n            props.visible = this.state.visibles[key];\r\n            props.onMouseEnter = () => this.handleMouseEnter(key);\r\n          }\r\n          props.onVisibleChange = (v) => this.onOverlayToggleVisible(key, v);\r\n          return (\r\n            <Popover\r\n              overlayClassName={'ins-props-overlay'}\r\n              {...props}\r\n              title={\r\n                <div>\r\n                  {item[0]} {item[2] == 'controlled' && <Icon type={'guanbi'} onClick={() => this.handleCloseLayer(key)} />}\r\n                </div>\r\n              }\r\n              key={key}\r\n              trigger={Trigger[key] || 'hover'}\r\n              placement={'bottom'}\r\n              overlayStyle={{ maxWidth: 260 }}\r\n              content={<DynamicWrapper onChange={this.handleChange} field={key} value={this.target.properties[key]} />}\r\n            >\r\n              <span className={'ins-props-item'}>\r\n                <Icon type={item[1]} />\r\n              </span>\r\n            </Popover>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default class RightLayout extends InspectorProps {\r\n  componentWillMount() {\r\n    super.componentWillMount();\r\n    Event.listen(component_active, this._handleActive);\r\n    Event.listen(component_inactive, this._handleInactive);\r\n  }\r\n  componentDidMount() {\r\n    this._handleInactive();\r\n  }\r\n  componentWillUnmount() {\r\n    super.componentWillUnmount();\r\n    Event.listen(component_active, this._handleActive);\r\n    Event.listen(component_inactive, this._handleInactive);\r\n  }\r\n\r\n  _handleActive = () => {\r\n    Dom.of(this.refs.g).show();\r\n    Event.dispatch(window_size_change);\r\n  };\r\n  _handleInactive = () => {\r\n    Dom.of(this.refs.g).hide();\r\n    Event.dispatch(window_size_change);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div ref='g' className={'root-layout-inspector_panel'}>\r\n        {this.state.keys.map((key) => {\r\n          return (\r\n            <Collapse title={LABELS[key][0]}>\r\n              <DynamicWrapper onChange={this.handleChange} field={key} value={this.target.properties[key]} />\r\n            </Collapse>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst LABELS = {\r\n  transform: ['位置', 'ziyoubianhuan'],\r\n  shadow: ['阴影', '-'],\r\n  border: ['边框', 'wubiankaung'],\r\n  bg: ['填充', 'beijingyanse'],\r\n  corner: ['圆角', 'iconfontdaojiaofangxing2'],\r\n  icon: ['图标', 'favorite', 'controlled'],\r\n  align: ['对齐', 'juzhongduiqi'],\r\n  spacing: ['间距', 'xinggao1'],\r\n  fontStyle: ['样式', 'xieti'],\r\n  decorator: ['装饰', 'xiahuaxian'],\r\n  font: ['字体', 'wenben1'],\r\n  animations: ['动画', 'donghua'],\r\n  interactions: ['交互', 'shoushidianji', 'controlled'],\r\n};\r\nconst Trigger = {\r\n  interactions: 'click',\r\n  icon: 'click',\r\n};\r\nconst InspectorControls = {\r\n  transform: InspectorTransform,\r\n  shadow: InspectorShadow,\r\n  border: InspectorBorder,\r\n  bg: InspectorFill,\r\n  corner: InspectorCorner,\r\n  icon: InspectorFontContent,\r\n  align: InspectorAlign,\r\n  spacing: InspectorSpacing,\r\n  fontStyle: InspectorFontStyle,\r\n  decorator: InspectorFontDecorator,\r\n  font: InspectorFont,\r\n  animations: InspectorAnimation,\r\n  interactions: InspectorInteraction,\r\n};\r\nconst Order = {\r\n  transform: 1,\r\n  border: 2,\r\n  shadow: 3,\r\n  corner: 4,\r\n  bg: 5,\r\n  font: 6,\r\n  align: 7,\r\n  fontStyle: 8,\r\n  decorator: 9,\r\n  spacing: 10,\r\n  icon: 11,\r\n  animations: 12,\r\n  interactions: 13,\r\n};\r\n","/**\r\n *  created by yaojun on 2018/11/6\r\n *\r\n */\r\nimport React from 'react';\r\nimport './Root.scss';\r\nimport Header from './Header';\r\nimport Outline from './Outline';\r\nimport Editor from './Editor';\r\nimport { context_hide_color_picker, context_hide_menu } from '../lib/util/actions';\r\nimport Event from '../lib/Base/Event';\r\nimport InspectorProps from './Inspector';\r\nimport { LocaleProvider } from 'antd';\r\nimport zhCN from 'antd/lib/locale-provider/zh_CN';\r\nexport default class Component extends React.Component {\r\n  onClick = () => {\r\n    Event.dispatch(context_hide_menu);\r\n    Event.dispatch(context_hide_color_picker);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <LocaleProvider locale={zhCN}>\r\n        <div onClick={this.onClick} className={'root-layout'}>\r\n          <Header />\r\n          <div className={'root-layout-content'}>\r\n            <Outline />\r\n            <Editor />\r\n            <InspectorProps />\r\n          </div>\r\n        </div>\r\n      </LocaleProvider>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { render } from 'react-dom';\r\nimport Root from './components/Root';\r\nimport 'antd/dist/antd.min.css';\r\nimport './styles/base.scss';\r\n\r\nrender(<Root />, document.getElementById('root'));\r\n","/**\r\n *  created by yaojun on 2019/1/29\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport Types from 'prop-types';\r\nimport DEFAULT from '../../assets/head.jpg';\r\nimport { DEFAULT_IMG } from '../util/helper';\r\n\r\nexport const IMAGE_MODE_FILL = 'fill';\r\nexport const IMAGE_MODE_SCALE = 'scale';\r\nexport const IMAGE_MODE_STRETCH = 'stretch';\r\nexport default class Image extends React.Component {\r\n  static LazyImages = {};\r\n\r\n  static LoadingImages = [];\r\n\r\n  static propTypes = {\r\n    src: Types.string.isRequired,\r\n    className: Types.string,\r\n    style: Types.object,\r\n    lazyLoad: Types.bool,\r\n    mode: Types.oneOf([IMAGE_MODE_FILL, IMAGE_MODE_SCALE, IMAGE_MODE_STRETCH]),\r\n  };\r\n\r\n  state = {\r\n    source: DEFAULT,\r\n  };\r\n\r\n  componentWillReceiveProps = (props) => {\r\n    if (props.src != this.props.src) {\r\n      this.lazyLoadImage(props.src);\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.lazyLoadImage(this.props.src);\r\n  }\r\n\r\n  lazyLoadImage = (src) => {\r\n    if (this.props.lazyLoad) {\r\n      loadImage(src).then(({ source, width, height }) => {\r\n        if (this.refs.g) {\r\n          // 防止刚尽力就离开，导致g已经被卸载了\r\n\r\n          this.refs.g.style.background = `url(${source}) no-repeat center center`;\r\n          let fillMode = {\r\n            [IMAGE_MODE_FILL]: 'cover',\r\n            [IMAGE_MODE_SCALE]: 'contain',\r\n            [IMAGE_MODE_STRETCH]: '100% 100%',\r\n          };\r\n          this.refs.g.style.backgroundSize = fillMode[this.props.mode];\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { className = '', style = {}, src } = this.props;\r\n    return (\r\n      <span\r\n        className={this.props.className}\r\n        style={{\r\n          ...this.props.style,\r\n          width: '100%',\r\n          height: '100%',\r\n          display: 'inline-block',\r\n        }}\r\n        ref={'g'}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst LazyLoadImages = [];\r\nconst LazyLoadImageSource = {};\r\nlet loading = false;\r\nlet delayTime = 300;\r\n\r\nexport class LazyLoad extends React.Component {\r\n  state = {\r\n    src: DEFAULT_IMG,\r\n  };\r\n\r\n  componentWillReceiveProps = (props) => {\r\n    if (props.src != this.props.src) {\r\n      this.lazyLoadImage(props.src);\r\n    }\r\n  };\r\n\r\n  componentWillMount() {\r\n    this.lazyLoadImage(this.props.src);\r\n  }\r\n\r\n  lazyLoadImage = (src) => {\r\n    if (!src) return;\r\n    loadImage(src).then(({ source, width, height }) => {\r\n      this.setState({ src: source });\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { className, style } = this.props;\r\n    return <img className={className} style={style} src={this.state.src} />;\r\n  }\r\n}\r\n\r\nasync function loadImage(source) {\r\n  return new Promise((resolve) => {\r\n    let d = LazyLoadImageSource[source];\r\n    if (d) {\r\n      return resolve(d);\r\n    }\r\n    LazyLoadImages.push({ source, callback: resolve });\r\n    processImage();\r\n  });\r\n}\r\n\r\nasync function _delay(time) {\r\n  return new Promise((resolve) => {\r\n    setTimeout(resolve, time);\r\n  });\r\n}\r\n\r\nasync function processImage() {\r\n  if (loading) return;\r\n  loading = true;\r\n  let source = LazyLoadImages.shift();\r\n  await _delay(delayTime);\r\n  await _createImage(source);\r\n  loading = false;\r\n  if (LazyLoadImages.length != 0) {\r\n    processImage();\r\n  }\r\n}\r\n\r\nasync function _createImage({ source, callback }) {\r\n  return new Promise((resolve) => {\r\n    let image = new window.Image();\r\n    image.onload = function() {\r\n      let data = { source, width: this.naturalWidth, height: this.naturalHeight };\r\n      LazyLoadImageSource[source] = data;\r\n      callback(data);\r\n      resolve();\r\n      callback = null;\r\n      source = null;\r\n      image = null;\r\n    };\r\n    image.onerror = function() {\r\n      resolve();\r\n    };\r\n    image.src = source;\r\n  });\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/5\r\n *\r\n */\r\nimport React from 'react';\r\nimport Draggable from './Draggable';\r\nimport PropTypes from 'prop-types';\r\nimport './scroller.scss';\r\nimport { getScreeTransform, pointToWorkspaceCoords, workspaceToPointCoords } from './global';\r\nimport config from './util/preference';\r\nimport Event from './Base/Event';\r\nimport { canvas_dragging, canvas_dragstart } from './util/actions';\r\nimport { getFirstResponder } from './global/instance';\r\n\r\nconst TWEEN = require('@tweenjs/tween.js');\r\nexport default class Scroller extends React.Component {\r\n  static defaultProps = {\r\n    type: 'h',\r\n    defaultStart: 0,\r\n    onChange: () => {},\r\n  };\r\n  static propTypes = {\r\n    type: PropTypes.string,\r\n    onChange: PropTypes.func,\r\n    defaultStart: PropTypes.number,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.panel = document.querySelector('.editor-control-panel');\r\n    const { defaultStart, type } = this.props;\r\n    this.type = type;\r\n    this.size = 100; // size of slider\r\n    this.minSize = 100;\r\n    this.ratio = 1;\r\n    this.max = 0;\r\n    this.start = 0;\r\n    this.needViewportCoordsX = true;\r\n    this.needViewportCoordsY = true;\r\n    this.range = type == 'h' ? config.world.x : config.world.y;\r\n    this._range = this.range;\r\n    let hcenter = (window.innerWidth - (config.editorDomRect.left + config.editorDomRect.right)) / 2 - config.viewport.width / 2;\r\n    let vcenter = (window.innerHeight - config.editorDomRect.top) / 2 - config.viewport.height / 2;\r\n    let center = type === 'h' ? hcenter : vcenter;\r\n    this._distance = (type === 'h' ? config.originCoords.x : config.originCoords.y) - center;\r\n    this._originDistance = this._distance;\r\n    this._current = this.start;\r\n    this._typeRectName = type === 'h' ? 'height' : 'width';\r\n    this._lastDiff = 0;\r\n    this._pointOffsetX = null;\r\n    this._pointOffsetY = null;\r\n    this._initialPointOffsetX = null;\r\n    this._initialPointOffsetY = null;\r\n    this._lastMouseX = null;\r\n    this._lastMouseY = null;\r\n    this.init();\r\n    Event.listen(canvas_dragstart, this.handleDraggStart);\r\n    Event.listen(canvas_dragging, this.handleDragging);\r\n    window['scroll' + this.type] = this;\r\n  }\r\n\r\n  scrollToCenter = (scale, e = { pageX: window.innerWidth / 2, pageY: window.innerHeight / 2 }) => {\r\n    let type = this.type;\r\n    let isH = this.type == 'h';\r\n    let pointOffset = {\r\n      x: (window.innerWidth - (config.editorDomRect.left + config.editorDomRect.right)) / 2 - (e.pageX - config.editorDomRect.left),\r\n      y: (window.innerHeight - config.editorDomRect.top) / 2 - (e.pageY - config.editorDomRect.top),\r\n    };\r\n    if (e.pageX !== this._lastMouseX) {\r\n      this.needViewportCoordsX = true;\r\n    }\r\n\r\n    if (e.pageY !== this._lastMouseY) {\r\n      this.needViewportCoordsY = true;\r\n    }\r\n\r\n    this._lastMouseX = e.pageX;\r\n    this._lastMouseY = e.pageY;\r\n\r\n    if (isH && this.needViewportCoordsX) {\r\n      this._pointOffsetX = (e.pageX - workspaceToPointCoords().x) / scale;\r\n    } else if (!isH && this.needViewportCoordsY) {\r\n      this._pointOffsetY = (e.pageY - workspaceToPointCoords().y) / scale;\r\n    }\r\n\r\n    if (isH) console.log(this._pointOffsetX);\r\n    this.needViewportCoordsX = false;\r\n    this.needViewportCoordsY = false;\r\n\r\n    let hcenter = (window.innerWidth - (config.editorDomRect.left + config.editorDomRect.right)) / 2 - pointOffset.x - this._pointOffsetX * scale;\r\n    let vcenter = (window.innerHeight - config.editorDomRect.top) / 2 - pointOffset.y - this._pointOffsetY * scale;\r\n    let center = type === 'h' ? hcenter : vcenter;\r\n    this._distance = (type === 'h' ? config.originCoords.x * scale : config.originCoords.y * scale) - center;\r\n    this.initParams();\r\n    this.start = this._distance / this.ratio;\r\n    this._setPosition(this.start);\r\n    this.initSlider();\r\n    this.props.onChange(this.start * this.ratio);\r\n  };\r\n  panToCenter = () => {\r\n    let type = this.type;\r\n    let scale = getScreeTransform().scale;\r\n    let x1 = this.start;\r\n    let halfW = (window.innerWidth - (config.editorDomRect.left + config.editorDomRect.right)) / 2;\r\n    let halfH = (window.innerHeight - config.editorDomRect.top) / 2;\r\n    let hcenter = halfW - (config.viewport.width / 2) * scale;\r\n    let vcenter = halfH - (config.viewport.height / 2) * scale;\r\n    let responder = getFirstResponder();\r\n    if (responder) {\r\n      let t = responder.properties.transform;\r\n      hcenter = halfW - (t.x + t.width / 2) * scale;\r\n      vcenter = halfH - (t.y + t.height / 2) * scale;\r\n    }\r\n    let center = type === 'h' ? hcenter : vcenter;\r\n    this._distance = (type === 'h' ? config.originCoords.x * scale : config.originCoords.y * scale) - center;\r\n    this.initParams();\r\n    this.start = this._distance / this.ratio;\r\n    this._current = this.start;\r\n    return { x1, x2: this.start, ratio: this.ratio };\r\n  };\r\n\r\n  updateScrollPosition(start) {\r\n    this.start = start;\r\n    this._setPosition(start);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(canvas_dragstart, this.handleDraggStart);\r\n    Event.destroy(canvas_dragging, this.handleDragging);\r\n  }\r\n\r\n  handleDraggStart = () => {\r\n    this._current = this.start;\r\n  };\r\n  handleDragging = ({ realDeltaX, realDeltaY, dragging }) => {\r\n    if (dragging) {\r\n      realDeltaX /= this.ratio;\r\n      realDeltaY /= this.ratio;\r\n    }\r\n    this.emitScrollChange(realDeltaX, realDeltaY);\r\n  };\r\n  update = () => {\r\n    let x = this.start * this.ratio;\r\n    this.initParams();\r\n    let x1 = this.start * this.ratio;\r\n    this.start -= (x1 - x) / this.ratio;\r\n    this._setPosition(this.start);\r\n    this.initSlider();\r\n  };\r\n  init = () => {\r\n    setTimeout(() => {\r\n      this.initParams();\r\n      let start = this._distance / this.ratio;\r\n      start = Math.min(start, this.max);\r\n      start = Math.max(start, 0);\r\n      this.start = start;\r\n      this._setPosition(start);\r\n      this.initSlider();\r\n      setTimeout(() => {\r\n        this.props.onChange(this.start * this.ratio);\r\n      });\r\n      new Draggable(this.refs.slider, {\r\n        onDragStart: this.handleDraggStart,\r\n        onDragMove: this.handleDragging,\r\n      });\r\n    }, 1000);\r\n  };\r\n  emitScrollChange = (dx, dy) => {\r\n    this.scroll(dx, dy);\r\n    this.props.onChange(this.start * this.ratio);\r\n  };\r\n  initParams = () => {\r\n    let type = this.type == 'h' ? 'width' : 'height';\r\n    let wrapper = this.refs.slider.parentNode;\r\n    let wrapperRect = wrapper.getBoundingClientRect();\r\n    let scrollableHeight = this.range - wrapperRect[type];\r\n    if (scrollableHeight > wrapperRect[type]) {\r\n      this.size = ((wrapperRect[type] - this.minSize) / scrollableHeight) * this.minSize;\r\n      this.size = this.size < 20 ? 20 : this.size;\r\n      this.max = wrapperRect[type] - this.size - 8;\r\n      this.ratio = scrollableHeight / this.max;\r\n    } else {\r\n      this.size = wrapperRect[type] - scrollableHeight;\r\n      this.ratio = 1;\r\n      this.max = scrollableHeight;\r\n    }\r\n  };\r\n\r\n  updateRange() {\r\n    this.initParams();\r\n    this.initSlider();\r\n  }\r\n\r\n  // 暂时使用 top left 缩放点\r\n  updateFromScale = (scale, e) => {\r\n    this.range = this._range * scale;\r\n    this.scrollToCenter(scale, e);\r\n  };\r\n  _setPosition = (d) => {\r\n    let key = this.type == 'h' ? 'left' : 'top';\r\n    this.refs.slider.style[key] = d + 'px';\r\n  };\r\n  updateFromWheel = (d) => {\r\n    this._pointOffsetX = null;\r\n    this._pointOffsetY = null;\r\n    this._lastMouseX = null;\r\n    this._lastMouseY = null;\r\n    this.start += d;\r\n    this._current = this.start;\r\n    if (this.start > this.max) {\r\n      this.start = this.max;\r\n    } else if (this.start < 0) {\r\n      this.start = 0;\r\n    }\r\n    this._distance = (this.start * this.ratio) / getScreeTransform().scale;\r\n    this._setPosition(this.start);\r\n    return this.start * this.ratio;\r\n  };\r\n\r\n  /**\r\n   *\r\n   * @param deltaX\r\n   * @param deltaY\r\n   * @return {number}\r\n   */\r\n  scroll(deltaX, deltaY) {\r\n    let d = this.type === 'h' ? deltaX : deltaY;\r\n    this.fixStart(d);\r\n    this._pointOffsetX = null;\r\n    this._pointOffsetY = null;\r\n    this._lastMouseX = null;\r\n    this._lastMouseY = null;\r\n    this._distance = (this.start * this.ratio) / getScreeTransform().scale;\r\n    this._setPosition(this.start);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param d\r\n   */\r\n  fixStart = (d) => {\r\n    this._current += d;\r\n    this.start = this._current;\r\n    if (this._current > this.max) this.start = this.max;\r\n    if (this._current < 0) this.start = 0;\r\n  };\r\n\r\n  initSlider() {\r\n    let style = this.refs.slider.style;\r\n    let rect = this.type === 'h' ? 'width' : 'height';\r\n    style[rect] = this.size + 'px';\r\n  }\r\n\r\n  render() {\r\n    let type = this.props.type;\r\n    return (\r\n      <div className={`aj-scroller-${type}`}>\r\n        <div className={'aj-scroller-slider'} ref={'slider'}></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n *  created by yaojun on 2018/12/2\r\n *\r\n */\r\nimport React, { Fragment, PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Event from '../Base/Event';\r\nimport { context_zoom_in, context_zoom_level, context_zoom_out, editor_scroll_change, window_size_change, workspace_scroll_center } from '../util/actions';\r\nimport Scroller from '../Scroller';\r\nimport { getZooms, isUndefined } from '../util/helper';\r\nimport config from '../util/preference';\r\nimport { setScreenTransform } from '../global';\r\nimport { scroller_move } from '@/lib/util/actions';\r\n\r\nconst TWEEN = require('@tweenjs/tween.js');\r\n//  保证每次移动的单位都为整数，需要固定缩放比例系数\r\nconst _min = getZooms(11)\r\n  .slice(1)\r\n  .reverse();\r\nconst _max = getZooms(9, -1);\r\nconst zooms = _min.concat(_max);\r\nconst defaultLevelIndex = zooms.indexOf(1);\r\nexport const MAX_ZOOM_LEVEL = zooms.length - 1;\r\nexport const DEFAULT_ZOOM_LEVEL = defaultLevelIndex;\r\nexport default class EditorScrollbar extends PureComponent {\r\n  static propTypes = {\r\n    containerId: PropTypes.string.isRequired,\r\n  };\r\n\r\n  componentDidMount() {\r\n    /**\r\n     *\r\n     * @type {TWEEN.Tween}\r\n     */\r\n    this.tween = null;\r\n    this.positionX = config.originCoords.x;\r\n    this.positionY = config.originCoords.y;\r\n    this.scale = 1;\r\n    this.isScale = false;\r\n    this.maxScale = MAX_ZOOM_LEVEL;\r\n    this.minScale = 0;\r\n    this.level = DEFAULT_ZOOM_LEVEL;\r\n    this.container = document.querySelector(`#${this.props.containerId}`);\r\n    this.container.addEventListener('mousewheel', this.handleWheel, false);\r\n    this.container.addEventListener('DOMMouseScroll', this.handleWheel, false);\r\n    Event.listen(window_size_change, this.handleSizeChange);\r\n    Event.listen(context_zoom_in, this.zoomIn);\r\n    Event.listen(context_zoom_out, this.zoomOut);\r\n    Event.listen(workspace_scroll_center, this.handlePanToCenter);\r\n    Event.listen(context_zoom_level, this.zoomWithLevel);\r\n    Event.listen(scroller_move, this.handleScrollerMove);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Event.destroy(window_size_change, this.handleSizeChange);\r\n    Event.destroy(workspace_scroll_center, this.handlePanToCenter);\r\n    Event.destroy(context_zoom_in, this.zoomIn);\r\n    Event.destroy(context_zoom_out, this.zoomOut);\r\n    Event.destroy(context_zoom_level, this.zoomWithLevel);\r\n    Event.destroy(scroller_move, this.handleScrollerMove);\r\n  }\r\n\r\n  handleScrollerMove = ({ axis, deltaX, deltaY }) => {\r\n    this.refs[axis].emitScrollChange(deltaX, deltaY);\r\n  };\r\n  handlePanToCenter = () => {\r\n    if (this.tween) return;\r\n    let x = this.refs.sx.panToCenter();\r\n    let y = this.refs.sy.panToCenter();\r\n    let coords = { x: x.x1, y: y.x1 };\r\n    let self = this;\r\n\r\n    // Setup the animation loop.\r\n    function animate(time) {\r\n      if (!self.tween) return;\r\n      requestAnimationFrame(animate);\r\n      TWEEN.update(time);\r\n    }\r\n\r\n    requestAnimationFrame(animate);\r\n    let tween = new TWEEN.Tween(coords)\r\n      .to({ x: x.x2, y: y.x2 }, 300)\r\n      .onUpdate(() => {\r\n        this.positionX = (coords.x * x.ratio) / this.scale;\r\n        this.positionY = (coords.y * y.ratio) / this.scale;\r\n        this.refs.sx.updateScrollPosition(coords.x);\r\n        this.refs.sy.updateScrollPosition(coords.y);\r\n        this.scroll();\r\n      })\r\n      .onComplete(() => {\r\n        this.tween = null;\r\n      });\r\n    tween.start();\r\n    this.tween = tween;\r\n  };\r\n  handleSizeChange = () => {\r\n    this.refs.sx.update();\r\n    this.refs.sy.update();\r\n  };\r\n  zoomIn = () => {\r\n    this.level += 1;\r\n    this.applyZoom();\r\n  };\r\n  zoomWithLevel = (level) => {\r\n    this.level = level;\r\n    this.applyZoom();\r\n  };\r\n  zoomOut = () => {\r\n    this.level -= 1;\r\n    this.applyZoom();\r\n  };\r\n  applyZoom = (e) => {\r\n    if (this.level >= this.maxScale) this.level = this.maxScale;\r\n    if (this.level <= this.minScale) this.level = this.minScale;\r\n    this.scale = zooms[this.level];\r\n    this.isScale = true;\r\n    this.refs.sx.updateFromScale(this.scale, e);\r\n    this.refs.sy.updateFromScale(this.scale, e);\r\n  };\r\n  handleWheel = (e) => {\r\n    e.preventDefault();\r\n    let deltaX = 0,\r\n      deltaY = 0;\r\n    if (!isUndefined(e.deltaX)) {\r\n      deltaX = e.deltaX / (this.scale * 30);\r\n      deltaY = e.deltaY / (this.scale * 30);\r\n    } else {\r\n      deltaY = -Math.max(-1, Math.min(1, e.wheelDelta || -e.detail));\r\n    }\r\n\r\n    if (e.ctrlKey || e.metaKey) {\r\n      if (deltaY < 0) {\r\n        this.level += 1;\r\n      } else if (deltaY > 0) {\r\n        this.level -= 1;\r\n      }\r\n\r\n      this.applyZoom(e);\r\n      return;\r\n    }\r\n    this.isScale = false;\r\n    //  同步滚动条数据\r\n    let x = this.refs.sx.updateFromWheel(deltaX);\r\n    let y = this.refs.sy.updateFromWheel(deltaY);\r\n    if (x != 0) {\r\n      this.positionX = x / this.scale;\r\n    }\r\n    if (y !== 0) {\r\n      this.positionY = y / this.scale;\r\n    }\r\n    //  触发滚动事件\r\n    this.scroll();\r\n  };\r\n  scroll = () => {\r\n    Event.dispatch(editor_scroll_change, {\r\n      isScale: this.isScale,\r\n      x: this.positionX,\r\n      y: this.positionY,\r\n      scale: this.scale,\r\n      level: this.level,\r\n      maxLevel: this.maxScale,\r\n    });\r\n    setScreenTransform(this.positionX, this.positionY, this.scale, this.level);\r\n  };\r\n  scrollX = (x) => {\r\n    this.positionX = x / this.scale;\r\n    this.scroll();\r\n  };\r\n  scrollY = (y) => {\r\n    this.positionY = y / this.scale;\r\n    this.scroll();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <Scroller defaultStart={config.originCoords.x} ref={'sx'} onChange={this.scrollX} type={'h'} />\r\n        <Scroller defaultStart={config.originCoords.y} ref={'sy'} onChange={this.scrollY} type={'v'} />\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n","import {Http} from \"./config\";\r\nimport {deflate, infalte} from \"./zip\";\r\nimport {getQuery, isArray} from \"@/lib/util/helper\";\r\nimport {setMasterToStore} from \"@/api/master\";\r\nimport {getPageTransform} from \"@/lib/global/template\";\r\nimport CanvasRender from \"@/canvas\";\r\n\r\nexport const fetchAssets = (send = {})=>{\r\n    return Http.post('material/list', {type : 'ASSET', ...send})\r\n}\r\nexport const fetchTemplate = (send = {})=>{\r\n    return Http.post('material/list', {type : 'TEMPLATE', ...send}).then(infalteContent)\r\n}\r\n\r\nexport function infalteContent(res){\r\n    let docs = res.data.docs ? res.data.docs : res.data\r\n    res.data.docs = docs.map(item=>{\r\n        item.base64 = item.content\r\n        item.content = infalte(item.content)\r\n        return item\r\n    })\r\n    return res\r\n}\r\n\r\nexport const updateMaterialName = (id, name)=>{\r\n    return Http.post('material/name', {id, name})\r\n}\r\nconst optMaterial = (send, uri)=>{\r\n    let content = send.content\r\n    return Http.post(uri, zipContent(send)).then(async(res)=>{\r\n        if(send.type == 'MASTER') {\r\n            send.base64 = send.content\r\n            send.content = content\r\n            send._id =  (res.data && res.data._id) || send._id\r\n            content.Image = new Image()\r\n            content.Image.src = content.image\r\n            setMasterToStore(send)\r\n        }\r\n        return res\r\n    })\r\n}\r\nexport const createMaterial = (send)=>{\r\n    return optMaterial(send, 'material/create')\r\n}\r\nexport const saveMaster = async(send)=>{\r\n    let id = getQuery().m\r\n    let group = getPageTransform(send.nodes)\r\n    let page = Object.assign({}, group.transform)\r\n    page.isSingleObject = true\r\n    let canvas = new CanvasRender\r\n    await canvas.renderCanvas(group, page)\r\n    let image = canvas.toImage(1, 'png')\r\n    return optMaterial({\r\n        _id : id,\r\n        type :'MASTER',\r\n        content : {\r\n            type : 'AdvanceComponent',\r\n            elementType : 'MASTER',\r\n            data : group,\r\n            page,\r\n            image\r\n        }\r\n    }, 'project/saveMaster')\r\n}\r\n\r\nfunction zipContent(send){\r\n    if(send.type != 'ASSET') {\r\n        send = Object.assign({}, send)\r\n        send.content = deflate(send.content)\r\n        send.size = Buffer.byteLength(send.content)\r\n    }\r\n    return send\r\n}\r\n\r\nexport const deleteMaterial = (id, url)=>{\r\n    return Http.post('material/delete', {id, url})\r\n}\r\nexport const deleteTemplate = (id)=>{\r\n    if(isArray(id)) id = id.join(',')\r\n    return Http.post('material/deleteTemplate', {id})\r\n}","let positions = {};\r\nexport const clearComponentPosition = () => {\r\n  positions = { x: {}, y: {} };\r\n};\r\nexport const setComponentPosition = (k, v) => {\r\n  positions[k][v] = true;\r\n};\r\nexport const getComponentPosition = () => {\r\n  return positions;\r\n};\r\n","import Event from '../Base/Event';\r\nimport { selection_group } from './actions';\r\nimport { isMac } from './platform';\r\nimport { getFirstResponder, setFirstResponder } from '../global/instance';\r\nimport { IMAGE_MODE_FILL } from '../ui/Image';\r\nimport { initialCoverageIndex, pointToWorkspaceCoords } from '../global';\r\nimport { parseOjbect } from '../properties/types';\r\nimport Matrix from './Matrix';\r\nimport qs from 'query-string';\r\n\r\nexport const getQuery = () => {\r\n  return qs.parse(location.search);\r\n};\r\nexport const equalObject = (obj1, obj2) => {\r\n  for (let key in obj1) {\r\n    if (obj1.hasOwnProperty(key)) {\r\n      if (obj1[key] !== obj2[key]) {\r\n        return false;\r\n      }\r\n    }\r\n  }\r\n  return true;\r\n};\r\nexport const waitForSenconds = (s) => {\r\n  return new Promise((resolve) => {\r\n    setTimeout(resolve, s * 1000);\r\n  });\r\n};\r\nexport const getZooms = (n, bounce = 1) => {\r\n  let result = [];\r\n  for (let i = 0; i < n; i++) {\r\n    result[i] = 100 / (100 + i * 10 * bounce);\r\n  }\r\n  return result;\r\n};\r\nexport const uuid = (prefix = '') => {\r\n  return (\r\n    prefix +\r\n    Math.random()\r\n      .toString()\r\n      .slice(2) +\r\n    Math.random()\r\n      .toString()\r\n      .slice(2)\r\n  ).slice(0, 16);\r\n};\r\nexport const deg2rad = (deg) => {\r\n  return (Math.PI / 180) * deg;\r\n};\r\nexport const rad2deg = (rad) => {\r\n  return (rad * 180) / Math.PI;\r\n};\r\nexport const ctrlkey = (key) => {\r\n  return (isMac() ? '⌘' : 'ctrl') + key.toUpperCase();\r\n};\r\nexport const DEFAULT_IMG =\r\n  'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTUwMzgwNzcwNzU3IiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI1MTYwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjEyOCIgaGVpZ2h0PSIxMjgiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTk5Ni42OTMzMzMgNzg3LjI4NTMzMyA3MzguNDc0NjY3IDQ3MS4yMTA2NjdjLTQuNjA4LTUuODAyNjY3LTExLjYwNTMzMy05LjIxNi0xOC45NDQtOS4zODY2NjctNy4zMzg2NjctMC4xNzA2NjctMTQuNTA2NjY3IDIuNzMwNjY3LTE5LjQ1NiA4LjAyMTMzM2wtMTMyLjI2NjY2NyAxNDAuOEwzNzguNzA5MzMzIDMwOC45MDY2NjdjLTQuNjA4LTcuNTA5MzMzLTEyLjgtMTEuOTQ2NjY3LTIxLjY3NDY2Ny0xMS45NDY2NjctOC44NzQ2NjcgMC0xNy4wNjY2NjcgNC42MDgtMjEuNjc0NjY3IDExLjk0NjY2N0wyNS40MjkzMzMgODAzLjY2OTMzM2MtNy41MDkzMzMgMTEuOTQ2NjY3LTMuOTI1MzMzIDI3LjgxODY2NyA4LjAyMTMzMyAzNS4zMjggMTEuOTQ2NjY3IDcuNTA5MzMzIDI3LjgxODY2NyAzLjkyNTMzMyAzNS4zMjgtOC4wMjEzMzNsMjg4LjI1Ni00NjAuMTE3MzMzIDI4OC4yNTYgNDYwLjExNzMzM2M3LjUwOTMzMyAxMS45NDY2NjcgMjMuMjEwNjY3IDE1LjUzMDY2NyAzNS4zMjggOC4wMjEzMzMgMTEuOTQ2NjY3LTcuNTA5MzMzIDE1LjUzMDY2Ny0yMy4yMTA2NjcgOC4wMjEzMzMtMzUuMzI4bC05Mi44NDI2NjctMTQ4LjEzODY2NyAxMjEuNTE0NjY3LTEyOS4xOTQ2NjcgMjM5Ljc4NjY2NyAyOTMuMzc2YzguODc0NjY3IDEwLjkyMjY2NyAyNS4wODggMTIuNjI5MzMzIDM2LjAxMDY2NyAzLjU4NEMxMDA0LjAzMiA4MTQuNDIxMzMzIDEwMDUuNTY4IDc5OC4yMDggOTk2LjY5MzMzMyA3ODcuMjg1MzMzeiIgcC1pZD0iMjUxNjEiIGZpbGw9IiM4YThhOGEiPjwvcGF0aD48cGF0aCBkPSJNODQ0LjggNDI5LjU2OGMxLjcwNjY2NyAwIDMuMjQyNjY3IDAgNC45NDkzMzMtMC4xNzA2NjcgNjYuOTAxMzMzLTIuNzMwNjY3IDExOS4yOTYtNTcuNjg1MzMzIDExOS4yOTYtMTI0LjA3NDY2NyAwLTEuNzA2NjY3IDAtMy4yNDI2NjctMC4xNzA2NjctNC45NDkzMzMtMi43MzA2NjctNjYuOTAxMzMzLTU3LjY4NTMzMy0xMTkuMjk2LTEyNC4wNzQ2NjctMTE5LjI5Ni0xLjcwNjY2NyAwLTMuMjQyNjY3IDAtNC45NDkzMzMgMC4xNzA2NjctNjYuOTAxMzMzIDIuNzMwNjY3LTExOS4yOTYgNTcuNjg1MzMzLTExOS4yOTYgMTI0LjA3NDY2NyAwIDEuNzA2NjY3IDAgMy40MTMzMzMgMC4xNzA2NjcgNC45NDkzMzNDNzIzLjI4NTMzMyAzNzcuMTczMzMzIDc3OC40MTA2NjcgNDI5LjU2OCA4NDQuOCA0MjkuNTY4ek04NDEuODk4NjY3IDIzMi40NDhsMi45MDEzMzMgMGMzOC45MTIgMCA3MS4zMzg2NjcgMzAuODkwNjY3IDcyLjg3NDY2NyA3MC4xNDQgMCAwIDAgMi45MDEzMzMgMCAyLjkwMTMzMyAwIDM4LjkxMi0zMC43MiA3MS4zMzg2NjctNzAuMTQ0IDcyLjg3NDY2N2wtMi45MDEzMzMgMC4xNzA2NjdjLTM4LjkxMiAwLTcxLjMzODY2Ny0zMC44OTA2NjctNzIuODc0NjY3LTcwLjE0NGwwLTIuOTAxMzMzQzc3MS43NTQ2NjcgMjY2LjQxMDY2NyA4MDIuNjQ1MzMzIDIzMy45ODQgODQxLjg5ODY2NyAyMzIuNDQ4eiIgcC1pZD0iMjUxNjIiIGZpbGw9IiM4YThhOGEiPjwvcGF0aD48L3N2Zz4=';\r\nexport const ANIMATIONS = [\r\n  { label: '弹跳', key: 'bounce' },\r\n  { label: '闪现', key: 'flash' },\r\n  {\r\n    label: '跳动',\r\n    key: 'pulse',\r\n  },\r\n  { label: '橡皮筋', key: 'rubberBand' },\r\n  { label: '抖动', key: 'shake' },\r\n  {\r\n    label: '摇摆',\r\n    key: 'swing',\r\n  },\r\n  { label: '蹦嚓嘿', key: 'tada' },\r\n  { label: '摇晃', key: 'wobble' },\r\n  { label: '扭曲', key: 'jello' },\r\n  {\r\n    label: '心动',\r\n    key: 'heartBeat',\r\n  },\r\n  {\r\n    label: '弹入',\r\n    key: 'bounceIn',\r\n  },\r\n  { label: '下弹入', key: 'bounceInDown' },\r\n  { label: '左弹入', key: 'bounceInLeft' },\r\n  {\r\n    label: '右弹入',\r\n    key: 'bounceInRight',\r\n  },\r\n  { label: '上弹入', key: 'bounceInUp' },\r\n  { label: '弹出', key: 'bounceOut' },\r\n  {\r\n    label: '下弹出',\r\n    key: 'bounceOutDown',\r\n  },\r\n  { label: '左弹出', key: 'bounceOutLeft' },\r\n  { label: '右弹出', key: 'bounceOutRight' },\r\n  {\r\n    label: '上弹出',\r\n    key: 'bounceOutUp',\r\n  },\r\n  { label: '淡入', key: 'fadeIn' },\r\n  { label: '下淡入', key: 'fadeInDown' },\r\n  {\r\n    label: '下淡入',\r\n    key: 'fadeInDownBig',\r\n  },\r\n  { label: '左淡入', key: 'fadeInLeft' },\r\n  { label: '左淡入2', key: 'fadeInLeftBig' },\r\n  {\r\n    label: '右淡入',\r\n    key: 'fadeInRight',\r\n  },\r\n  { label: '右淡入2', key: 'fadeInRightBig' },\r\n  { label: '上淡入', key: 'fadeInUp' },\r\n  {\r\n    label: '上淡入2',\r\n    key: 'fadeInUpBig',\r\n  },\r\n  { label: '淡出', key: 'fadeOut' },\r\n  { label: '下淡出', key: 'fadeOutDown' },\r\n  {\r\n    label: '下淡出2',\r\n    key: 'fadeOutDownBig',\r\n  },\r\n  { label: '左淡出', key: 'fadeOutLeft' },\r\n  { label: '左淡出2', key: 'fadeOutLeftBig' },\r\n  {\r\n    label: '又淡出',\r\n    key: 'fadeOutRight',\r\n  },\r\n  { label: '右淡出2', key: 'fadeOutRightBig' },\r\n  { label: '上淡出', key: 'fadeOutUp' },\r\n  {\r\n    label: '上淡出2',\r\n    key: 'fadeOutUpBig',\r\n  },\r\n  { label: '翻转', key: 'flip' },\r\n  { label: '垂直转入', key: 'flipInX' },\r\n  { label: '水平转入', key: 'flipInY' },\r\n  {\r\n    label: '垂直转出',\r\n    key: 'flipOutX',\r\n  },\r\n  { label: '水平转出', key: 'flipOutY' },\r\n  { label: '动感', key: 'lightSpeedIn' },\r\n  {\r\n    label: '动感出',\r\n    key: 'lightSpeedOut',\r\n  },\r\n  { label: '旋入', key: 'rotateIn' },\r\n  { label: '左下旋入', key: 'rotateInDownLeft' },\r\n  {\r\n    label: '右下旋入',\r\n    key: 'rotateInDownRight',\r\n  },\r\n  { label: '左上旋入', key: 'rotateInUpLeft' },\r\n  { label: '右上旋入', key: 'rotateInUpRight' },\r\n  {\r\n    label: '旋出',\r\n    key: 'rotateOut',\r\n  },\r\n  { label: '左下旋出', key: 'rotateOutDownLeft' },\r\n  { label: '右下旋出', key: 'rotateOutDownRight' },\r\n  {\r\n    label: '左上旋出',\r\n    key: 'rotateOutUpLeft',\r\n  },\r\n  { label: '右上旋出', key: 'rotateOutUpRight' },\r\n  { label: '上滑入', key: 'slideInUp' },\r\n  {\r\n    label: '下滑入',\r\n    key: 'slideInDown',\r\n  },\r\n  { label: '左滑入', key: 'slideInLeft' },\r\n  { label: '右滑入', key: 'slideInRight' },\r\n  {\r\n    label: '滑出',\r\n    key: 'slideOutUp',\r\n  },\r\n  { label: '下滑出', key: 'slideOutDown' },\r\n  { label: '左滑出', key: 'slideOutLeft' },\r\n  {\r\n    label: '右滑出',\r\n    key: 'slideOutRight',\r\n  },\r\n  { label: '放大', key: 'zoomIn' },\r\n  { label: '下放大', key: 'zoomInDown' },\r\n  {\r\n    label: '左放大',\r\n    key: 'zoomInLeft',\r\n  },\r\n  { label: '右放大', key: 'zoomInRight' },\r\n  { label: '上放大', key: 'zoomInUp' },\r\n  {\r\n    label: '缩小',\r\n    key: 'zoomOut',\r\n  },\r\n  { label: '下缩小', key: 'zoomOutDown' },\r\n  { label: '左缩小', key: 'zoomOutLeft' },\r\n  {\r\n    label: '右缩小',\r\n    key: 'zoomOutRight',\r\n  },\r\n  { label: '上缩小', key: 'zoomOutUp' },\r\n  { label: '掉落', key: 'hinge' },\r\n  {\r\n    label: '欧耶',\r\n    key: 'jackInTheBox',\r\n  },\r\n  { label: '转入', key: 'rollIn' },\r\n  { label: '转出', key: 'rollOut' },\r\n];\r\nexport const getDropView = (e, data) => {\r\n  let { x, y } = pointToWorkspaceCoords(e);\r\n  let view = null;\r\n  if (data.type === 'AdvanceComponent') {\r\n    // 高级组件，通过工具制作\r\n    view = parseOjbect(data.data, true);\r\n    // Mouse point\r\n    view.transform.x = x;\r\n    view.transform.y = y;\r\n    view.zIndex = initialCoverageIndex();\r\n  } else {\r\n    // 预制组件，基础组件，基础图标\r\n    let send = {\r\n      type: data.type,\r\n      id: uuid('sb_'),\r\n      transform: {\r\n        x,\r\n        y,\r\n        width: data.width || 100,\r\n        height: data.height || 100,\r\n        rotation: 0,\r\n      },\r\n    };\r\n    view = parseOjbect(send, true);\r\n    // Icon\r\n    if (data.type == 'icon') {\r\n      view.icon = {\r\n        data: data.data,\r\n        content: data.fontContent,\r\n      };\r\n      view.transform.width = view.transform.height = 20;\r\n    } else if (data.type === 'image') {\r\n      view.image = {\r\n        fill: IMAGE_MODE_FILL,\r\n        source: data.data || DEFAULT_IMG,\r\n      };\r\n    }\r\n  }\r\n  return view;\r\n};\r\n/**\r\n *\r\n * @param target {ViewProperties}\r\n */\r\nexport const activeAfterMounting = (target) => {\r\n  setTimeout(() => {\r\n    if (Array.isArray(target)) {\r\n      Event.dispatch(\r\n        selection_group,\r\n        target.map((item) => item.view)\r\n      );\r\n    } else {\r\n      setFirstResponder(target.view);\r\n    }\r\n  }, 20);\r\n};\r\nexport const randomId = (prefix = '') => {\r\n  return (\r\n    prefix +\r\n    '_' +\r\n    Math.random()\r\n      .toString()\r\n      .slice(2)\r\n  );\r\n};\r\n\r\nexport class Dom {\r\n  /**\r\n   *\r\n   * @param dom {HTMLElement | Selector}\r\n   */\r\n  constructor(dom, context) {\r\n    if (typeof dom === 'string') {\r\n      context = context || document;\r\n      this.dom = context.querySelector(dom);\r\n    } else {\r\n      /**\r\n       *\r\n       * @type {HTMLElement}\r\n       */\r\n      this.dom = dom;\r\n    }\r\n    /**\r\n     *\r\n     * @type {CSSStyleDeclaration}\r\n     */\r\n    this.style = this.dom.style;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {HtmlElement}\r\n   * @return {Dom}\r\n   */\r\n  static of(d) {\r\n    return new Dom(d);\r\n  }\r\n\r\n  className(name) {\r\n    this.dom.setAttribute('class', name);\r\n    return;\r\n  }\r\n\r\n  attr(key, value) {\r\n    this.dom.setAttribute(key, value);\r\n    return this;\r\n  }\r\n\r\n  data(key) {\r\n    return this.dom.dataset[key];\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param w\r\n   * @return {Dom}\r\n   */\r\n  width(w) {\r\n    this.style.width = this.getUnit(w);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param h\r\n   * @return {Dom}\r\n   */\r\n  height(h) {\r\n    this.style.height = this.getUnit(h);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param l\r\n   * @return {Dom}\r\n   */\r\n  left(l) {\r\n    this.style.left = this.getUnit(l);\r\n    return this;\r\n  }\r\n\r\n  zIndex(index) {\r\n    this.style.zIndex = index;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param t\r\n   * @return {Dom}\r\n   */\r\n  top(t) {\r\n    this.style.top = this.getUnit(t);\r\n    return this;\r\n  }\r\n\r\n  text(v) {\r\n    this.dom.innerText = v;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Dom}\r\n   */\r\n  show(s) {\r\n    this.style.display = s || 'block';\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Dom}\r\n   */\r\n  hide() {\r\n    this.style.display = 'none';\r\n    return this;\r\n  }\r\n\r\n  showHide(v) {\r\n    this.style.display = v ? 'block' : 'none';\r\n    return this;\r\n  }\r\n\r\n  getUnit(w) {\r\n    return w.toString().endsWith('%') ? w : w + 'px';\r\n  }\r\n\r\n  border({ width, color, style }) {\r\n    this.style.border = `${width}px ${style} ${color}`;\r\n    return this;\r\n  }\r\n\r\n  none() {\r\n    this.style.overflow = 'none';\r\n  }\r\n\r\n  overflow(type) {\r\n    this.style.overflow = type;\r\n  }\r\n\r\n  shadow({ type, offsetX, offsetY, spread, blur, color }) {\r\n    let shadow = null;\r\n    if (type === 'outset') {\r\n      shadow = `${offsetX}px ${offsetY}px ${blur}px ${spread}px  ${color}`;\r\n    } else {\r\n      shadow = `${type} ${offsetX}px ${offsetY}px ${blur}px ${spread}px  ${color}`;\r\n    }\r\n    this.style.boxShadow = shadow;\r\n    return this;\r\n  }\r\n\r\n  borderRadius(r) {\r\n    this.borderRadiusTopLeft(r);\r\n    this.borderRadiusTopRight(r);\r\n    this.borderRadiusBottomLeft(r);\r\n    this.borderRadiusBottomRight(r);\r\n    return this;\r\n  }\r\n\r\n  borderRadiusTopLeft(r) {\r\n    this.style.borderTopLeftRadius = this.getUnit(r);\r\n    return this;\r\n  }\r\n\r\n  css(key, value) {\r\n    this.style[key] = value;\r\n    return this;\r\n  }\r\n\r\n  borderRadiusTopRight(r) {\r\n    this.style.borderTopRightRadius = this.getUnit(r);\r\n    return this;\r\n  }\r\n\r\n  borderRadiusBottomLeft(r) {\r\n    this.style.borderBottomLeftRadius = this.getUnit(r);\r\n    return this;\r\n  }\r\n\r\n  borderRadiusBottomRight(r) {\r\n    this.style.borderBottomRightRadius = this.getUnit(r);\r\n    return this;\r\n  }\r\n\r\n  background(color) {\r\n    this.style.background = color;\r\n    return this;\r\n  }\r\n\r\n  fontSize(v) {\r\n    this.style.fontSize = v + 'px';\r\n    return this;\r\n  }\r\n\r\n  fontColor(v) {\r\n    this.style.color = v;\r\n    return this;\r\n  }\r\n\r\n  fontStyle(style = []) {\r\n    if (style.indexOf('bold') > -1) {\r\n      this.style.fontWeight = 'bold';\r\n    } else {\r\n      this.style.fontWeight = 'normal';\r\n    }\r\n    if (style.indexOf('italic') > -1) {\r\n      this.style.fontStyle = 'italic';\r\n    } else {\r\n      this.style.fontStyle = 'normal';\r\n    }\r\n    return this;\r\n  }\r\n\r\n  decorator(d) {\r\n    this.style.textDecoration = d || 'none';\r\n    return this;\r\n  }\r\n\r\n  alignX(d) {\r\n    this.style.justifyContent = d;\r\n    return this;\r\n  }\r\n\r\n  alignY(d) {\r\n    this.style.alignItems = d;\r\n    return this;\r\n  }\r\n\r\n  lineHeight(h) {\r\n    this.style.lineHeight = h;\r\n    return this;\r\n  }\r\n\r\n  letterSpacing(s) {\r\n    this.style.letterSpacing = s + 'px';\r\n    return this;\r\n  }\r\n}\r\n\r\n/**\r\n *  获取矩形的边界位置\r\n * @param x\r\n * @param y\r\n * @param width\r\n * @param height\r\n * @param rotation\r\n * @return {*}\r\n */\r\nexport const getClientBoundingRect = ({ x, y, width, height, rotation }) => {\r\n  let a = (rotation * Math.PI) / 180;\r\n  let wc = width / 2;\r\n  let hc = height / 2;\r\n  let deg = new Matrix([\r\n    [Math.cos(a), Math.sin(a)],\r\n    [-Math.sin(a), Math.cos(a)],\r\n  ]);\r\n  let rect = new Matrix([\r\n    [-wc, hc],\r\n    [wc, hc],\r\n    [wc, -hc],\r\n    [-wc, -hc],\r\n  ]);\r\n  //  四个顶点坐标\r\n  let xarr = [];\r\n  let yarr = [];\r\n  let points = deg\r\n    .dot(rect.T())\r\n    .T()\r\n    .valueOf()\r\n    .map((item) => {\r\n      let x1 = item[0] + wc + x;\r\n      let y1 = -(item[1] - hc) + y;\r\n      xarr.push(x1);\r\n      yarr.push(y1);\r\n      return { x: x1, y: y1 };\r\n    });\r\n  xarr = xarr.sort((a, b) => a - b);\r\n  yarr = yarr.sort((a, b) => a - b);\r\n  let x1 = xarr[0];\r\n  let x2 = xarr[xarr.length - 1];\r\n  let y1 = yarr[0];\r\n  let y2 = yarr[yarr.length - 1];\r\n  return {\r\n    x: x1,\r\n    y: y1,\r\n    width: x2 - x1,\r\n    height: y2 - y1,\r\n    origin: { x, y, width, height, rotation },\r\n    rotation,\r\n    points,\r\n  };\r\n};\r\nexport const isTemporaryGroup = () => {\r\n  return getFirstResponder().properties.isTemporaryGroup;\r\n};\r\nconst typeOf = (object) => {\r\n  return Object.prototype.toString.call(object);\r\n};\r\nexport const isPlainObject = (object) => {\r\n  return typeOf(object) === '[object Object]';\r\n};\r\nexport const isNumber = (data) => {\r\n  return typeOf(data) === ['[object Number]'];\r\n};\r\nexport const isString = (data) => {\r\n  return typeOf(data) === ['[object String]'];\r\n};\r\nexport const isBoolean = (data) => {\r\n  return typeOf(data) === ['[object Boolean]'];\r\n};\r\nexport const isNull = (data) => {\r\n  return data === null;\r\n};\r\nexport const isUndefined = (data) => {\r\n  return data === void 0;\r\n};\r\nexport const isArray = (arr) => {\r\n  return Array.isArray(arr);\r\n};\r\nexport const isEmpty = (data) => {\r\n  return data === '' || data === void 0 || data === null;\r\n};\r\nexport const isBaseType = (data) => {\r\n  return isBoolean(data) || isNumber(data) || isString(data) || isNull(data);\r\n};\r\nexport const cleanEmpty = (object) => {\r\n  let result = {};\r\n  for (let key in object) {\r\n    if (object.hasOwnProperty(key)) {\r\n      let value = object[key];\r\n      if (value !== void 0 && value !== null && value !== '') {\r\n        result[key] = value;\r\n      }\r\n    }\r\n  }\r\n  return result;\r\n};\r\n/**\r\n * 延时执行\r\n * @param s\r\n * @return {Promise<any>}\r\n */\r\nexport const waitForSeconds = (s) => {\r\n  return new Promise((resolve) => {\r\n    setTimeout(resolve, s * 1000);\r\n  });\r\n};\r\n//当组件的props改变的时候于原数据合并\r\nexport const mergeProps = (oldValue, newValue) => {\r\n  // 只处理对象 合并，其他直接返回\r\n  if (isPlainObject(newValue)) {\r\n    newValue = Object.assign({}, oldValue, newValue);\r\n  }\r\n  return newValue;\r\n};\r\n","import Event from '../Base/Event';\r\nimport { component_active, component_empty, component_inactive } from '../util/actions';\r\nimport jQuery from 'jquery';\r\nimport ViewSelectGroupBordered from '../Widget/ViewSelectGroupBordered';\r\nimport { createNewPage, getPageData, storage_page_key } from '../util/page';\r\nimport { findPageDetail } from '../../api/page';\r\nimport { getQuery } from '@/lib/util/helper';\r\nimport { setMasterNodes } from '@/api/master';\r\n\r\ncreateNewPage;\r\n\r\n/**\r\n *\r\n * @type {ViewSelectGroupBordered}\r\n */\r\nlet group = null;\r\nexport const setTemporaryGroup = (i) => {\r\n  group = i;\r\n};\r\n/**\r\n *\r\n * @return {ViewSelectGroupBordered}\r\n */\r\nexport const getTemporaryGroup = () => {\r\n  return group;\r\n};\r\n/**\r\n * 暂时先写到内存\r\n * @type {ViewProperties | Arrary<ViewProperties>}\r\n */\r\nlet clipboard = null;\r\n/**\r\n *\r\n * @return {ViewProperties | Arrary<ViewProperties>}\r\n */\r\nexport const getClipboardData = () => {\r\n  return clipboard ? JSON.parse(clipboard) : clipboard;\r\n};\r\n/**\r\n *\r\n * @param c {ViewProperties | Array<ViewProperties>}\r\n */\r\nexport const setClipboardData = (c) => {\r\n  if (c) c = JSON.stringify(c);\r\n  clipboard = c;\r\n};\r\n/**\r\n *\r\n * @type {ViewText}\r\n */\r\nlet currentEditor = null;\r\n/**\r\n *\r\n * @return {ViewText}\r\n */\r\nexport const getCurrentEditor = () => {\r\n  return currentEditor;\r\n};\r\n/**\r\n *\r\n * @param editor {ViewText}\r\n */\r\nexport const setCurrentEditor = (editor) => {\r\n  if (currentEditor && currentEditor !== editor) {\r\n    currentEditor.setEditorBlur();\r\n  }\r\n  currentEditor = editor;\r\n};\r\n/**\r\n *\r\n * @type {ViewController}\r\n */\r\nlet firstResponder = null;\r\n/**\r\n *\r\n * @return {ViewController | ViewSelectGroupBordered}\r\n */\r\nexport const getFirstResponder = () => {\r\n  return firstResponder;\r\n};\r\n/**\r\n *\r\n * Set the component that is currently operating\r\n * @param responder {ViewController }\r\n */\r\nexport const setFirstResponder = (responder, options) => {\r\n  if (firstResponder && firstResponder !== responder) {\r\n    Event.dispatch(component_inactive, firstResponder, responder);\r\n    let dom = firstResponder.getIndexDomWrapper();\r\n    jQuery(dom).removeClass('component-active');\r\n  }\r\n  if (responder) {\r\n    firstResponder = responder;\r\n    Event.dispatch(component_active, responder, options);\r\n    let dom = responder.getIndexDomWrapper();\r\n    jQuery(dom).addClass('component-active');\r\n  } else {\r\n    firstResponder = null;\r\n    Event.dispatch(component_empty);\r\n  }\r\n};\r\nlet viewPickedStatus = false;\r\nexport const setViewPickedStatus = (status) => {\r\n  viewPickedStatus = status;\r\n};\r\nexport const getViewPickedStatus = () => {\r\n  return viewPickedStatus;\r\n};\r\n// 页面管理=======================\r\nlet pageid = null;\r\nexport const getCurrentPage = () => {\r\n  return pageid;\r\n};\r\nexport const setCurrentPage = (id) => {\r\n  pageid = id;\r\n  if (id) localStorage.setItem('selected-page', pageid);\r\n  else {\r\n    localStorage.removeItem('selected-page');\r\n  }\r\n};\r\nexport const clearCurrentPage = () => {\r\n  pageid = null;\r\n};\r\nexport const getCurrentPageConfig = () => {\r\n  if (pageid) {\r\n    return getPageData().find((item) => item.id == pageid);\r\n  }\r\n  return {};\r\n};\r\n/**\r\n * 获取选中页面数据\r\n * @param pageid\r\n * @return {*}\r\n */\r\nexport const getCurrentControllersByPage = (_pageid) => {\r\n  _pageid = _pageid || pageid;\r\n  if (_pageid) {\r\n    let page = getPageData().find((item) => item.id == _pageid);\r\n    if (page.nodes == void 0) {\r\n      return findPageDetail(page._id).then((result) => {\r\n        Object.assign(page, result.data);\r\n        return result.data.nodes;\r\n      });\r\n    } else {\r\n      return Promise.resolve(page.nodes);\r\n    }\r\n  } else {\r\n    console.info('Page not found');\r\n    return Promise.resolve([]);\r\n  }\r\n};\r\nexport const saveCurrentControllersByMaster = (data) => {\r\n  let m = getQuery().m;\r\n  if (data) {\r\n    setMasterNodes(m, data); // 同步内存数据\r\n    localStorage.setItem(m, JSON.stringify(data));\r\n  } else {\r\n    localStorage.removeItem(m);\r\n  }\r\n};\r\nexport const getMasterDataFromStorage = () => {\r\n  let data = getMasterStringDataFromStorage();\r\n  if (data) {\r\n    try {\r\n      return JSON.parse(data);\r\n    } catch (e) {\r\n      return [];\r\n    }\r\n  }\r\n};\r\nexport const clearCurrentMasterFromStorage = () => {\r\n  localStorage.removeItem(getQuery().m);\r\n};\r\nexport const getMasterStringDataFromStorage = () => {\r\n  return localStorage.getItem(getQuery().m);\r\n};\r\nexport const saveCurrentControllersByPage = (data) => {\r\n  if (pageid) {\r\n    let page = getPageData().find((item) => item.id == pageid);\r\n    try {\r\n      if (page) {\r\n        page.nodes = data;\r\n        localStorage.setItem(storage_page_key(pageid), JSON.stringify(page));\r\n      }\r\n    } catch (e) {\r\n      alert('超过浏览器存储限制');\r\n    }\r\n  } else {\r\n    console.log('Page not found');\r\n  }\r\n};\r\nlet globalShiftKeyPressed = false;\r\nexport const isShiftKeyBePressed = () => {\r\n  return globalShiftKeyPressed;\r\n};\r\nexport const setShiftKeyPressed = (p) => {\r\n  globalShiftKeyPressed = p;\r\n};\r\nlet lockedView = [];\r\nexport const pushUnlockedView = (view) => {\r\n  lockedView.push(view);\r\n};\r\nexport const clearUnlockedView = () => {\r\n  lockedView.forEach((item) => (item.isLockChildren = true));\r\n  lockedView = [];\r\n};\r\nlet PATHES = {};\r\nexport const clearPATHES = () => {\r\n  PATHES = {};\r\n};\r\nexport const getPATHES = () => {\r\n  return PATHES;\r\n};\r\nexport const setPATHES = (k, v) => {\r\n  PATHES[k] = v;\r\n};\r\nexport const clearGlobalVariabel = () => {\r\n  pageid = null;\r\n  globalShiftKeyPressed = false;\r\n  viewPickedStatus = false;\r\n  clipboard = null;\r\n  group = null;\r\n  currentEditor = null;\r\n  firstResponder = null;\r\n  lockedView = [];\r\n  PATHES = {};\r\n};\r\n","const agent = navigator.userAgent.toLowerCase();\r\n\r\nexport const isMac = () => agent.indexOf('mac os') > -1;\r\n"],"sourceRoot":""}